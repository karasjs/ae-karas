{"version":3,"file":"index.jsx","sources":["../../es/enums.js","../../es/parse/transform.js","../../es/parse/vector.js","../../es/parse/index.js","../../es/convert/path.js","../../es/convert/animate.js","../../es/convert/index.js","../../es/index.js"],"sourcesContent":["export default {\n  ES_TYPE: {\n    FOLDER_ITEM: 'FolderItem',\n    FOOTAGE_ITEM: 'FootageItem',\n    COMP_ITEM: 'CompItem',\n    UNKNOWN: 'unknown',\n  },\n  EVENT: {\n    INIT: 'ae2karas:init',\n    LOG: 'ae2karas:log',\n    WARN: 'ae2karas:warn',\n    ERROR: 'ae2karas:error',\n    FINISH: 'ae2karas:finish',\n    CANCEL: 'ae2karas:cancel',\n    ADD_TEMP: 'ae2karas:addTemp',\n    DEL_TEMP: 'ae2karas:delTemp',\n  },\n};\n","const LAYER_TRANSFORM = {\n  'ADBE Anchor Point': 'anchorPoint',\n  'ADBE Position': 'position',\n  'ADBE Position_0': 'position_0',\n  'ADBE Position_1': 'position_1',\n  'ADBE Position_2': 'position_2',\n  'ADBE Scale': 'scale',\n  'ADBE Orientation': 'orientation',\n  'ADBE Rotate X': 'rotateX',\n  'ADBE Rotate Y': 'rotateY',\n  'ADBE Rotate Z': 'rotateZ',\n  'ADBE Opacity': 'opacity',\n};\n\nconst VECTOR_TRANSFORM = {\n  'ADBE Vector Anchor': 'anchorPoint',\n  'ADBE Vector Position': 'position',\n  'ADBE Vector Scale': 'scale',\n  'ADBE Vector Skew': 'skew',\n  'ADBE Vector Skew Axis': 'skewAxis',\n  'ADBE Vector Rotation': 'rotation',\n  'ADBE Vector Group Opacity': 'opacity',\n  'ADBE Vector Trim Start': 'start',\n  'ADBE Vector Trim End': 'end',\n};\n\nconst MASK_TRANSFORM = {\n  'ADBE Mask Shape': 'points',\n  'ADBE Mask Opacity': 'opacity',\n};\n\nfunction getPropertyValues(prop, noEasing) {\n  let { numKeys } = prop;\n  // 根据关键帧数量，2+帧是普通变化，1帧等同于0帧value\n  if(numKeys && numKeys > 1) {\n    let arr = [];\n    for(let i = 1; i <= numKeys; i++) {\n      let o = {\n        time: prop.keyTime(i) * 1000,\n        value: prop.keyValue(i),\n      };\n      if(i !== numKeys && !noEasing) {\n        o.easing = getEasing(prop, i, i + 1);\n      }\n      arr.push(o);\n    }\n    return arr;\n  }\n  else if(numKeys && numKeys > 0) {\n    return [prop.keyValue(1)];\n  }\n  else {\n    return [prop.value];\n  }\n}\n\n/**\n * https://www.zhihu.com/question/24404065\n * 柄点1的X值 = 关键帧1的影响值/100\n * 柄点1的Y值 = 关键帧1的输出速度/两关键帧平均速度*柄点1的X值\n * 柄点2的X值 = 1 - 关键帧2的影响值/100\n * 柄点2的Y值 = 1 - 关键帧2的输入速度/两关键帧平均速度*柄点2的X值\n * @param prop\n * @param start\n * @param end\n */\nfunction getEasing(prop, start, end) {\n  let t1 = prop.keyTime(start), t2 = prop.keyTime(end);\n  let v1 = prop.keyValue(start), v2 = prop.keyValue(end);\n  let e1 = prop.keyOutTemporalEase(start)[0], e2 = prop.keyInTemporalEase(end)[0];\n  let x1 = e1.influence * 0.01, x2 = 1 - e2.influence * 0.01;\n  let y1, y2;\n  let matchName = prop.matchName;\n  if([\n    'ADBE Anchor Point', 'ADBE Position',\n    'ADBE Vector Anchor', 'ADBE Vector Position',\n    'ADBE Scale', 'ADBE Vector Scale',\n    'ADBE Vector Skew'].indexOf(matchName) > -1) {\n    let avSpeedX = Math.abs(v2[0] - v1[0]) / (t2 - t1);\n    let avSpeedY = Math.abs(v2[1] - v1[1]) / (t2 - t1);\n    let avSpeed = Math.sqrt(avSpeedX * avSpeedX + avSpeedY * avSpeedY);\n    if(avSpeed !== 0) {\n      y1 = x1 * e1.speed / avSpeed;\n      y2 = 1 - (1 - x2) * e2.speed / avSpeed;\n    }\n  }\n  else if(v2 !== v1){\n    let avSpeed = Math.abs(v2 - v1) / (t2 - t1);\n    y1 = x1 * e1.speed / avSpeed;\n    y2 = 1 - (1 - x2) * e2.speed / avSpeed;\n  }\n  if(x1 === y1 && x2 === y2 || y1 === undefined || y2 === undefined) {\n    return;\n  }\n  return [x1, y1, x2, y2];\n}\n\nexport function transformLayer(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(LAYER_TRANSFORM.hasOwnProperty(matchName)) {\n        res[LAYER_TRANSFORM[matchName]] = getPropertyValues(item, false);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformVector(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(VECTOR_TRANSFORM.hasOwnProperty(matchName)) {\n        res[VECTOR_TRANSFORM[matchName]] = getPropertyValues(item, false);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformMask(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(MASK_TRANSFORM.hasOwnProperty(matchName)) {\n        res[MASK_TRANSFORM[matchName]] = getPropertyValues(item, true);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformGeom(prop) {\n  return getPropertyValues(prop, true);\n}\n","import { transformVector, transformGeom } from './transform';\n\nfunction group(prop) {\n  let res = {};\n  // 这里是矩形1层，主要关注Groups属性即可，blendMode暂时无视，transform被上钻2层提前\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vectors Group':\n          res.content = content(item);\n          break;\n        case 'ADBE Vector Transform Group':\n          // 奇怪的地方，显示应该下钻2层到如rect同级，可实际提前了\n          res.transform = transformVector(item);\n          break;\n      }\n    }\n  }\n  res.content.transform = res.transform;\n  return res.content;\n}\n\nfunction content(prop) {\n  // 矩形1下面会多出一层内容层看不见，就是本层，其下面则是可视的子属性层\n  let res = {\n    name: prop.name,\n    content: [],\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape - Rect':\n          res.content.push(rect(item));\n          break;\n        case 'ADBE Vector Shape - Ellipse':\n          res.content.push(ellipse(item));\n          break;\n        case 'ADBE Vector Shape - Star':\n          res.content.push(star(item));\n          break;\n        case 'ADBE Vector Shape - Group':\n          res.content.push(path(item));\n          break;\n        case 'ADBE Vector Graphic - Stroke':\n          res.stroke = stroke(item);\n          break;\n        case 'ADBE Vector Graphic - Fill':\n          res.fill = fill(item);\n          break;\n        case 'ADBE Vector Graphic - G-Fill':\n          res.gFill = gFill(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction rect(prop) {\n  // 矩形路径层\n  let res = {\n    type: 'rect',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Rect Size':\n          res.size = transformGeom(item);\n          break;\n        case 'ADBE Vector Rect Position':\n          res.position = transformGeom(item);\n          break;\n        case 'ADBE Vector Rect Roundness':\n          res.roundness = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction ellipse(prop) {\n  let res = {\n    type: 'ellipse',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Ellipse Size':\n          res.size = transformGeom(item);\n          break;\n        case 'ADBE Vector Ellipse Position':\n          res.position = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction star(prop) {\n  let res = {\n    type: 'star',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Star Type':\n          res.starType = item.value;\n          break;\n        case 'ADBE Vector Star Points':\n          res.points = item.value;\n          break;\n        case 'ADBE Vector Star Position':\n          res.position = item.value;\n          break;\n        case 'ADBE Vector Star Inner Radius':\n          res.innerRadius = item.value;\n          break;\n        case 'ADBE Vector Star Outer Radius':\n          res.outerRadius = item.value;\n          break;\n        case 'ADBE Vector Star Inner Roundess':\n          res.innerRoundness = item.value;\n          break;\n        case 'ADBE Vector Star Outer Roundess':\n          res.outerRoundness = item.value;\n          break;\n        case 'ADBE Vector Star Rotation':\n          res.rotation = item.value;\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction stroke(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Stroke Color':\n          res.color = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Opacity':\n          res.opacity = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Width':\n          res.width = transformGeom(item);\n          break;\n        case 'ADBE Vector Line Cap':\n          res.lineCap = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Line Join':\n          res.lineJoin = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Miter Limit':\n          res.miterLimit = transformGeom(item);\n          break;\n        // case 'ADBE Vector Stroke Dashes':\n        //   res.dashes = dash(item);\n        //   break;\n      }\n    }\n  }\n  // 特殊的获取虚线样式\n  let dashes = prop.property('Dashes');\n  if(dashes) {\n    let d = [];\n    let g = [];\n    for(let i = 1; i <= dashes.numProperties; i++) {\n      let item = dashes.property(i);\n      if(item && item.enabled) {\n        let matchName = item.matchName;\n        if(item.canSetExpression) {\n          if(matchName.indexOf('ADBE Vector Stroke Dash') > -1) {\n            let j = /\\d+/.exec(matchName);\n            d[j[0] - 1] = item.value;\n          }\n          else if (matchName.indexOf('ADBE Vector Stroke Gap') > -1) {\n            let j = /\\d+/.exec(matchName);\n            g[j[0] - 1] = item.value;\n          }\n        }\n      }\n    }\n    if(d.length) {\n      let v = [];\n      for(let i = 0, len = d.length; i < len; i++) {\n        v.push(d[i]);\n        if(g[i] === undefined) {\n          v.push(d[i]);\n        }\n        else {\n          v.push(g[i]);\n        }\n      }\n      res.dashes = v;\n    }\n  }\n  return res;\n}\n\nfunction path(prop) {\n  let res = {\n    type: 'path',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Shape':\n          res.points = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction fill(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Fill Rule':\n          res.rule = item.value;\n          break;\n        case 'ADBE Vector Fill Color':\n          res.color = transformGeom(item);\n          break;\n        case 'ADBE Vector Fill Opacity':\n          res.opacity = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction gFill(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Composite Order':\n          break;\n        case 'ADBE Vector Fill Rule':\n          res.rule = item.value;\n          break;\n        case 'ADBE Vector Grad Type':\n          res.type = item.value;\n          break;\n        case 'ADBE Vector Grad Start Pt':\n          res.start = item.value;\n          break;\n        case 'ADBE Vector Grad End Pt':\n          res.end = item.value;\n          break;\n        case 'ADBE Vector Grad Colors':\n          // 拿不到\n          break;\n        case 'ADBE Vector Fill Opacity':\n          res.opacity = item.value;\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nexport default function(prop, library) {\n  let res = {};\n  // 这里是内容层，一般只有1个属性，如矩形1\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Group':\n          res.shape = group(item, library);\n          break;\n        case 'ADBE Vector Filter - Trim':\n          res.trim = transformVector(item);\n          break;\n      }\n    }\n  }\n  return res;\n};\n","import { transformLayer, transformMask } from './transform';\nimport vector from './vector';\nimport render from '../render';\n\nlet uuid = 0;\n\nfunction recursion(composition, library) {\n  let { name, layers, width, height, duration } = composition;\n  $.ae2karas.error('composition: ' + name);\n  // 是否是独奏模式\n  let hasSolo;\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    if(item.solo) {\n      hasSolo = true;\n      break;\n    }\n  }\n  // 再统计哪些层被作为父级链接\n  let asParent = {}, asChild = {};\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    if(hasSolo) {\n      if(!item.solo) {\n        continue;\n      }\n    }\n    else {\n      if(!item.enabled) {\n        continue;\n      }\n    }\n    if(item.parent && item.parent.index) {\n      asParent[item.parent.index] = true;\n      asChild[item.index] = item.parent.index;\n    }\n  }\n  let children = [];\n  // 遍历分析图层，独奏时只看独奏图层，否则看可见图层\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    let index = item.index;\n    // 根据是否独奏或可见决定是否分析或跳过，被作为父级链接的即便不可见也要统计\n    if(!asParent.hasOwnProperty(index)) {\n      if(hasSolo) {\n        if(!item.solo && !item.isTrackMatte) {\n          continue;\n        }\n      }\n      else {\n        if(!item.enabled && !item.isTrackMatte) {\n          continue;\n        }\n      }\n    }\n    let o = parseLayer(item, library, hasSolo);\n    if(o) {\n      // 父级打标uuid的同时，之前记录的hash也记录下来\n      if(asParent.hasOwnProperty(index)) {\n        asParent[index] = o.asParent = uuid++;\n      }\n      // mask/clip类型在被遮罩层上\n      if(i > 1 && o.isClip) {\n        let last = children[children.length - 1];\n        if(last && last.isMask) {\n          last.isClip = true;\n        }\n      }\n      children.push(o);\n    }\n  }\n  // children还要遍历一遍，根据父级链接增加指向父级的字段\n  for(let i = 0; i < children.length; i++) {\n    let item = children[i];\n    let index = item.index;\n    if(asChild.hasOwnProperty(index)) {\n      item.asChild = asParent[asChild[index]];\n    }\n  }\n  children.reverse();\n  return {\n    type: 'div',\n    name,\n    width,\n    height,\n    duration: duration * 1000, // 合成的总时长\n    children,\n  };\n}\n\nfunction parseLayer(layer, library, hasSolo) {\n  let res = {\n    name: layer.name,\n    index: layer.index,\n    width: layer.width,\n    height: layer.height,\n    startTime: layer.startTime * 1000, // 开始时间，即时间轴上本图层初始位置\n    inPoint: layer.inPoint * 1000, // 真正开始显示时间，>= startTime，可能有前置空白不显示的一段\n    outPoint: layer.outPoint * 1000, // 真正结束显示时间，<= duration绝对值，可能有后置空白不显示的一段\n    blendingMode: layer.blendingMode,\n    isMask: layer.isTrackMatte,\n    isClip: layer.trackMatteType === TrackMatteType.ALPHA_INVERTED,\n  };\n  // 标明图层是否可见，也许不可见但作为父级链接也要分析\n  if(hasSolo) {\n    res.enabled = layer.solo || layer.isTrackMatte;\n  }\n  else {\n    res.enabled = layer.enabled || layer.isTrackMatte;\n  }\n  $.ae2karas.warn('layer: ' + res.name);\n  let geom, txt;\n  for(let i = 1; i <= layer.numProperties; i++) {\n    let prop = layer.property(i);\n    if(prop && prop.enabled) {\n      let matchName = prop.matchName;\n      switch(matchName) {\n        case 'ADBE Transform Group':\n          res.transform = transformLayer(prop);\n          break;\n        case 'ADBE Root Vectors Group':\n          // 形状图层中的内容子属性\n          geom = vector(prop, library);\n          break;\n        case 'ADBE Mask Parade':\n          res.mask = mask(prop);\n          break;\n        case 'ADBE Text Properties':\n          txt = text(prop);\n          break;\n      }\n    }\n  }\n  let source = layer.source;\n  if(geom && geom.shape && geom.shape.content && geom.shape.content.length) {\n    geom.geom = true; // 特殊标识\n    geom.type = 'div';\n    geom.id = library.length;\n    library.push(geom);\n    res.assetId = geom.id;\n  }\n  else if(txt) {\n    txt.text = true; // 特殊标识\n    txt.type = 'span';\n    txt.id = library.length;\n    library.push(txt);\n    res.assetId = txt.id;\n  }\n  else if(source) {\n    let asset;\n    // 图片图形等独立资源，将其解析为被link的放入library即可\n    if(source instanceof FootageItem) {\n      let src = source.file && source.file.fsName;\n      let name = source.name;\n      if(/\\.psd$/.test(name)) {\n        let path = src.replace(/[^\\/]*\\.psd$/, '');\n        let newName = name.replace(/[\\/.]/g, '_') + '_layer_' + layer.index + '.png';\n        render.psd2png(source, src, path, newName);\n        src = path + newName;\n      }\n      if(!/\\.jpg$/.test(src)\n        && !/\\.jpeg$/.test(src)\n        && !/\\.png/.test(src)\n        && !/\\.webp/.test(src)\n        && !/\\.gif/.test(src)) {\n        return;\n      }\n      let hasExist;\n      for(let i = 0; i < library.length; i++) {\n        let item = library[i];\n        if(item.src === src && item.type === 'img') {\n          asset = item;\n          hasExist = true;\n          break;\n        }\n      }\n      if(!hasExist) {\n        if(src) {\n          asset = {\n            type: 'img',\n            name,\n            width: source.width,\n            height: source.height,\n            src,\n          };\n        }\n        // 颜色类型没有src\n        else {\n          asset = {\n            type: 'div',\n            width: source.width,\n            height: source.height,\n          }\n        }\n      }\n    }\n    // 合成，递归分析\n    else if(source instanceof CompItem) {\n      asset = recursion(source, library);\n      asset.type = 'div';\n    }\n    if(asset) {\n      asset.id = library.length;\n      library.push(asset);\n      res.assetId = asset.id;\n    }\n  }\n  return res;\n}\n\nfunction mask(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(matchName === 'ADBE Mask Atom') {\n        if(item.maskMode !== MaskMode.NONE) {\n          res.enabled = true;\n        }\n        res.list = transformMask(item);\n        res.mode = item.maskMode;\n        res.inverted = item.inverted;\n      }\n    }\n  }\n  return res;\n}\n\nfunction text(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Text Document':\n          let value = item.value;\n          res.content = {\n            fillColor: value.fillColor,\n            font: value.font,\n            fontFamily: value.fontFamily,\n            fontStyle: value.fontStyle,\n            fontSize: value.fontSize,\n            leading: value.leading,\n            baselineLocs: value.baselineLocs,\n            text: value.text,\n          };\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nexport default function(composition) {\n  $.ae2karas.error('parse');\n  // 递归遍历合成，转换ae的图层为普通js对象\n  let { workAreaStart, workAreaDuration } = composition;\n  workAreaStart *= 1000;\n  workAreaDuration *= 1000;\n  $.ae2karas.log('workArea: ' + workAreaStart + ',' + workAreaDuration);\n  let library = [];\n  let result = recursion(composition, library);\n  $.ae2karas.log(result);\n  $.ae2karas.log(library);\n  return {\n    workAreaStart,\n    workAreaDuration,\n    result,\n    library,\n  };\n}\n","export default {\n  parse(vertices, inTangents, outTangents, closed, x1, y1, x2, y2) {\n    if(x1 === undefined) {\n      x1 = x2 = vertices[0][0];\n      y1 = y2 = vertices[0][1];\n      // 控制点是相对于顶点的坐标\n      let it = inTangents[0], ot = outTangents[0];\n      if(it[0]) {\n        x1 = Math.max(x1, x1 + it[0]);\n        x2 = Math.min(x2, x1 + it[0]);\n      }\n      if(it[1]) {\n        y1 = Math.max(y1, y1 + it[1]);\n        y2 = Math.min(y2, y1 + it[1]);\n      }\n      if(ot[0]) {\n        x1 = Math.max(x1, x1 + ot[0]);\n        x2 = Math.min(x2, x1 + ot[0]);\n      }\n      if(ot[1]) {\n        y1 = Math.max(y1, y1 + ot[1]);\n        y2 = Math.min(y2, y1 + ot[1]);\n      }\n      // 循环获取极值\n      for(let i = 1, len = vertices.length; i < len; i++) {\n        let item = vertices[i];\n        x1 = Math.max(x1, item[0]);\n        y1 = Math.max(y1, item[1]);\n        x2 = Math.min(x2, item[0]);\n        y2 = Math.min(y2, item[1]);\n        // 控制点是相对于顶点的坐标\n        let it = inTangents[i], ot = outTangents[i];\n        if(it[0]) {\n          x1 = Math.max(x1, item[0] + it[0]);\n          x2 = Math.min(x2, item[0] + it[0]);\n        }\n        if(it[1]) {\n          y1 = Math.max(y1, item[1] + it[1]);\n          y2 = Math.min(y2, item[1] + it[1]);\n        }\n        if(ot[0]) {\n          x1 = Math.max(x1, item[0] + ot[0]);\n          x2 = Math.min(x2, item[0] + ot[0]);\n        }\n        if(ot[1]) {\n          y1 = Math.max(y1, item[1] + ot[1]);\n          y2 = Math.min(y2, item[1] + ot[1]);\n        }\n      }\n    }\n    let w = x1 - x2, h = y1 - y2;\n    let pts = [], cts = [];\n    for(let i = 0, len = vertices.length; i < len; i++) {\n      let item = vertices[i];\n      pts.push([\n        (item[0] - x2) / w,\n        (item[1] - y2) / h,\n      ]);\n      let it = inTangents[i], ot = outTangents[i];\n      // 上一个顶点到本顶点，即便控制点为空也要填补为顶点数据，为2帧之间动画过渡考虑\n      let j = i - 1;\n      if(j === -1) {\n        j = len - 1;\n      }\n      cts[j] = cts[j] || [];\n      cts[j].push(pts[i][0] + it[0] / w);\n      cts[j].push(pts[i][1] + it[1] / h);\n      // 本顶点到下一个顶点，最后一个比较特殊是到第一个，需要调整顺序\n      cts[i] = cts[i] || [];\n      let x = pts[i][0] + ot[0] / h, y = pts[i][1] + ot[1] / h;\n      if(i === len - 1) {\n        cts[i].unshift(y);\n        cts[i].unshift(x);\n      }\n      else {\n        cts[i].push(x);\n        cts[i].push(y);\n      }\n    }\n    if(closed) {\n      pts.push(pts[0].slice(0));\n    }\n    return {\n      x1,\n      y1,\n      x2,\n      y2,\n      width: w,\n      height: h,\n      points: pts,\n      controls: cts,\n    };\n  },\n  rect2polyline(width, height, roundness) {\n    roundness = roundness || 0;\n    let r = Math.min(width, height) * 0.5;\n    roundness = Math.min(roundness, r);\n    let pts = [], cts = [];\n    if(roundness && roundness > 0) {\n      let h = roundness * 0.5522847498307936;\n      pts.push([(width - roundness) / width, 0]);\n      cts.push([(width - roundness + h) / width, 0, 1, (roundness - h) / height]);\n      pts.push([1, roundness / height]);\n      cts.push([]);\n      pts.push([1, (height - roundness) / height]);\n      cts.push([1, (height - roundness + h) / height, (width - roundness + h) / width, 1]);\n      pts.push([(width - roundness) / width, 1]);\n      cts.push([]);\n      pts.push([roundness / width, 1]);\n      cts.push([(roundness - h) / width, 1, 0, (height - roundness + h) / height]);\n      pts.push([0, (height - roundness) / height]);\n      cts.push([]);\n      pts.push([0, roundness / height]);\n      cts.push([0, (roundness - h) / height, (roundness - h) / width, 0]);\n      pts.push([roundness / width, 0]);\n      cts.push([]);\n      pts.push([(width - roundness) / width, 0]);\n    }\n    else {\n      pts.push([1, 0]);\n      pts.push([1, 1]);\n      pts.push([0, 1]);\n      pts.push([0, 0]);\n      pts.push([1, 0]);\n    }\n    return {\n      points: pts,\n      controls: cts,\n    }\n  },\n  ellipse2polyline() {\n    let pts = [], cts = [];\n    let rx =  0.5 * 0.5522847498307936, ry = 0.5 * 0.5522847498307936;\n    pts.push([0.5, 0]);\n    cts.push([0.5 + rx, 0, 1, 0.5 - ry]);\n    pts.push([1, 0.5]);\n    cts.push([1, 0.5 + ry, 0.5 + rx, 1]);\n    pts.push([0.5, 1]);\n    cts.push([0.5 - rx, 1, 0, 0.5 + ry]);\n    pts.push([0, 0.5]);\n    cts.push([0, 0.5 - ry, rx, 0]);\n    pts.push([0.5, 0]);\n    return {\n      points: pts,\n      controls: cts,\n    }\n  },\n};\n","import path from './path';\n\n/**\n * 2个及以上的关键帧，获取区间，有可能有超过范围的无效关键帧，需滤除\n * 也有可能不及工作区间，需补充首尾，和原有首尾一样复制一个出来对齐区间\n * 也有可能虽然在范围外，但范围上无关键帧，需截取至范围内，由每个特效传入截取回调\n * @param list\n * @param begin\n * @param duration\n * @param reducer 当关键帧范围在工作区间外时，每个特效传入的截取函数\n * @returns {(number|number)[]}\n */\nfunction getAreaList(list, begin, duration, reducer) {\n  let len = list.length;\n  let startIndex = 0, endIndex = len - 1;\n  // 在区间外围的如果只有1帧则需包括，多余的去除，正好则符合，包含则需填补\n  for(let i = 0; i < len; i++) {\n    let item = list[i];\n    if(item.time < begin) {\n      startIndex = i;\n    }\n    else if(item.time > begin) {\n      break;\n    }\n    else {\n      startIndex = i;\n      break;\n    }\n  }\n  // 结尾同上\n  for(let i = len - 1; i >= 0; i--) {\n    let item = list[i];\n    if(item.time < begin + duration) {\n      break;\n    }\n    else if(item.time > begin + duration) {\n      endIndex = i;\n    }\n    else {\n      endIndex = i;\n      break;\n    }\n  }\n  if(startIndex > 0 || endIndex < len - 1) {\n    list = list.slice(startIndex, endIndex + 1);\n  }\n  // 补齐首帧，当关键帧在工作区间内的时候\n  let first = list[0];\n  if(first.time > begin) {\n    let o = {\n      time: begin,\n      value: Array.isArray(first.value) ? first.value.slice(0) : first.value,\n    };\n    list.unshift(o);\n  }\n  // 截取首帧部分\n  else if(first.time < begin) {\n    let next = list[1];\n    let percent = (begin - first.time) / (next.time - first.time);\n    first.time = begin;\n    first.value = reducer(first.value, next.value, percent, true);\n    if(first.easing) {\n      let points = sliceBezier([\n        [0, 0],\n        [first.easing[0], first.easing[1]],\n        [first.easing[2], first.easing[3]],\n        [1, 1],\n      ].reverse(), percent).reverse();\n      first.easing = [points[1][0], points[1][1], points[2][0], points[2][1]];\n    }\n  }\n  // 截取尾帧部分，同上\n  let last = list[list.length - 1];\n  if(last.time > begin + duration) {\n    let prev = list[list.length - 2];\n    let percent = (begin + duration - prev.time) / (last.time - prev.time);\n    last.time = begin + duration;\n    last.value = reducer(prev.value, last.value, percent);\n    if(prev.easing) {\n      let points = sliceBezier([\n        [0, 0],\n        [prev.easing[0], prev.easing[1]],\n        [prev.easing[2], prev.easing[3]],\n        [1, 1],\n      ], percent);\n      prev.easing = [points[1][0], points[1][1], points[2][0], points[2][1]];\n    }\n  }\n  // 补齐尾帧，同上\n  else if(last.time < begin + duration) {\n    let o = {\n      time: begin + duration,\n      value: Array.isArray(last.value) ? last.value.slice(0) : last.value,\n    };\n    list.push(o);\n  }\n  return list;\n}\n\n/**\n * 百分比截取贝塞尔中的一段，t为[0, 1]\n * @param points\n * @param t\n */\nfunction sliceBezier(points, t) {\n  let p1 = points[0], p2 = points[1], p3 = points[2], p4 = points[3];\n  let x1 = p1[0], y1 = p1[1];\n  let x2 = p2[0], y2 = p2[1];\n  let x3 = p3[0], y3 = p3[1];\n  let x12 = (x2 - x1) * t + x1;\n  let y12 = (y2 - y1) * t + y1;\n  let x23 = (x3 - x2) * t + x2;\n  let y23 = (y3 - y2) * t + y2;\n  let x123 = (x23 - x12) * t + x12;\n  let y123 = (y23 - y12) * t + y12;\n  if(points.length === 4) {\n    let x4 = p4[0], y4 = p4[1];\n    let x34 = (x4 - x3) * t + x3;\n    let y34 = (y4 - y3) * t + y3;\n    let x234 = (x34 - x23) * t + x23;\n    let y234 = (y34 - y23) * t + y23;\n    let x1234 = (x234 - x123) * t + x123;\n    let y1234 = (y234 - y123) * t + y123;\n    return [[x1, y1], [x12, y12], [x123, y123], [x1234, y1234]];\n  }\n  else if(points.length === 3) {\n    return [[x1, y1], [x12, y12], [x123, y123]];\n  }\n}\n\nexport function transformOrigin(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      transformOrigin: list[0][0] + ' ' + list[0][1],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        transformOrigin: item.value[0] + ' ' + item.value[1],\n        easing: item.easing,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformOpacity(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      opacity: list[0] * 0.01,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        opacity: item.value * 0.01,\n        easing: item.easing,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformPosition(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      translateX: list[0][0],\n      translateY: list[0][1],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n        prev[2] + (next[2] - prev[2]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        translateX: item.value[0],\n        translateY: item.value[1],\n        easing: item.easing,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformRotateX(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateX: -list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        rotateX: -item.value,\n        easing: item.easing,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformRotateY(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateY: -list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        rotateY: -item.value,\n        easing: item.easing,\n      });\n    }\n  }\n  return res;\n}\n\n\nexport function transformRotateZ(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateZ: -list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        rotateZ: -item.value,\n        easing: item.easing,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformScale(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let v = {\n      scaleX: list[0][0] * 0.01,\n      scaleY: list[0][1] * 0.01,\n    };\n    if(list[0].length > 2) {\n      v.scaleZ = list[0][2] * 0.01;\n    }\n    res.value.push(v);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n        prev[2] + (next[2] - prev[2]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = {\n        offset: (item.time - begin) / duration,\n        scaleX: item.value[0] * 0.01,\n        scaleY: item.value[1] * 0.01,\n        easing: item.easing,\n      };\n      if(item.value.length > 2) {\n        v.scaleZ = item.value[2] * 0.01;\n      }\n      res.value.push(v);\n    }\n  }\n  return res;\n}\n\nexport function transformPath(list, begin, duration, isEnd) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let v = {\n    };\n    if(isEnd) {\n      v.end = list[0] * 0.01;\n    }\n    else {\n      v.start = list[0] * 0.01;\n    }\n    res.value.push(v);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return (prev + (next - prev) * percent) * 0.01;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = {\n        offset: (item.time - begin) / duration,\n        easing: item.easing,\n      };\n      if(isEnd) {\n        v.end = item.value * 0.01;\n      }\n      else {\n        v.start = item.value * 0.01;\n      }\n      res.value.push(v);\n    }\n  }\n  return res;\n}\n\nexport function transformPoints(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let { vertices, inTangents, outTangents, closed } = list[0];\n    let o = path.parse(vertices, inTangents, outTangents, closed);\n    res.value.push({\n      points: o.points,\n      controls: o.controls,\n    });\n    res.data = o;\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isStart) {\n      let { vertices1, inTangents1, outTangents1, closed } = prev;\n      let { vertices2, inTangents2, outTangents2 } = next;\n      let vertices = [], inTangents = [], outTangents = [];\n      for(let i = 0, len = vertices1.len; i < len; i++) {\n        let p = vertices1[i], n = vertices2[i];\n        let pIn = inTangents1[(i + 1) % len], nIn = inTangents2[(i + 1) % len];\n        let pOut = outTangents1[i], nOut = outTangents2[i];\n        // 直线切割或贝塞尔切割\n        if(pIn[0] === 0 && pIn[1] === 0\n          && nIn[0] === 0 && nIn[1] === 0\n          && pOut[0] === 0 && pOut[1] === 0\n          && nOut[0] === 0 && nOut[1] === 0) {\n          vertices.push([\n            p[0] + (n[0] - p[0]) * percent,\n            p[1] + (n[1] - p[1]) * percent\n          ]);\n          inTangents.push([0, 0]);\n          outTangents.push([0, 0]);\n        }\n        else {\n          let arr = [\n            p,\n            pOut,\n            pIn,\n            n,\n          ];\n          if(isStart) {\n            arr.reverse();\n          }\n          let s = sliceBezier(arr, percent);\n          vertices.push(s[3]);\n          if(isStart) {\n            inTangents.push(s[1]);\n            outTangents.push(s[2]);\n          }\n          else {\n            inTangents.push(s[2]);\n            outTangents.push(s[1]);\n          }\n        }\n      }\n      return {\n        vertices,\n        inTangents,\n        outTangents,\n        closed,\n      };\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let { vertices, inTangents, outTangents, closed } = item.value;\n      let o;\n      if(i === 0) {\n        o = path.parse(vertices, inTangents, outTangents, closed);\n        res.data = o;\n      }\n      else {\n        o = path.parse(vertices, inTangents, outTangents, closed, res.data.x1, res.data.y1, res.data.x2, res.data.y2);\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        points: o.points,\n        controls: o.controls,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformFill(fill, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(fill.color.length === 1) {\n    let first = fill.color[0];\n    let v = [\n      parseInt(first[0] * 255),\n      parseInt(first[1] * 255),\n      parseInt(first[2] * 255),\n      first[3],\n    ];\n    if(fill.opacity[0] < 100) {\n      v[3] *= fill.opacity[0] * 0.01;\n    }\n    res.value.push({\n      fill: [v],\n    });\n  }\n  else {\n    let len = fill.color[0].length;\n    let list = getAreaList(fill.color, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = [\n        parseInt(item[0] * 255),\n        parseInt(item[1] * 255),\n        parseInt(item[2] * 255),\n        item[3],\n      ];\n      if(fill.opacity[i] < 100) {\n        v[3] *= fill.opacity[i] * 0.01;\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        fill: [v],\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformStroke(stroke, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(stroke.color.length === 1) {\n    let first = stroke.color[0];\n    let v = [\n      parseInt(first[0] * 255),\n      parseInt(first[1] * 255),\n      parseInt(first[2] * 255),\n      first[3],\n    ];\n    if(stroke.opacity[0] < 100) {\n      v[3] *= stroke.opacity[0] * 0.01;\n    }\n    res.value.push({\n      stroke: [v],\n    });\n  }\n  else {\n    let list = getAreaList(stroke.color, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = [\n        parseInt(item[0] * 255),\n        parseInt(item[1] * 255),\n        parseInt(item[2] * 255),\n        item[3],\n      ];\n      if(stroke.opacity[i] < 100) {\n        v[3] *= stroke.opacity[i] * 0.01;\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        stroke: [v],\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformStrokeWidth(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      strokeWidth: list,\n    });\n  }\n  else {\n    let len = list[0].length;\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeWidth: item.value,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformLineJoin(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let arr;\n    if(list[0] === 1) {\n      arr = ['miter'];\n    }\n    else if(list[0] === 2) {\n      arr = ['round'];\n    }\n    else {\n      arr = ['bevel'];\n    }\n    res.value.push({\n      strokeLinejoin: arr,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isFirst) {\n      return isFirst ? prev : next;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let arr = [];\n      for(let i = 0, len = item.value.length; i < len; i++) {\n        let item2 = item.value[i];\n        if(item2 === 1) {\n          arr.push('miter');\n        }\n        else if(item2 === 2) {\n          arr.push('round');\n        }\n        else {\n          arr.push('bevel');\n        }\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeLinejoin: arr,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformMiterLimit(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      strokeWidth: list,\n    });\n  }\n  else {\n    let len = list[0].length;\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeWidth: item.value,\n      });\n    }\n  }\n  return res;\n}\n\n// export function transformPosition(list, begin, duration) {}\n\nexport function transformSize(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      size: list,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      res.value.push({\n        size: list[i],\n      });\n    }\n  }\n  return res;\n}\n","import {\n  transformOrigin,\n  transformOpacity,\n  transformPosition,\n  transformRotateX,\n  transformRotateY,\n  transformRotateZ,\n  transformScale,\n  transformPath,\n  transformPoints,\n  transformFill,\n  transformStroke,\n  transformStrokeWidth,\n  transformLineJoin,\n  transformMiterLimit,\n  transformSize,\n} from './animate';\nimport path from './path';\n\n/**\n * 预解析父级链接，不递归深入children，返回一个普通的div\n * @param data\n * @param library\n * @param start\n * @param duration\n * @param offset\n */\nfunction preParse(data, library, start, duration, offset) {\n  let { name, width, height, inPoint, outPoint } = data;\n  let begin = start + offset;\n  // 图层在工作区外特殊处理，取最近的一帧内容\n  if(inPoint >= begin + duration || outPoint <= begin) {\n    return null;\n  }\n  let res = {\n    name,\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n        width,\n        height,\n        // overflow: 'hidden',\n      },\n    },\n    children: [],\n    animate: [],\n  };\n  parseAnimate(res, data, start, duration, offset, true, false);\n  return res;\n}\n\nfunction parseAnimate(res, data, start, duration, offset, isDirect, isGeom) {\n  let { width, height, transform } = data;\n  // 分别分析每个变换，过程很相似，当为单帧时需合并到init.style，多帧第一帧需合并且置空\n  let { anchorPoint, opacity, position, rotateX, rotateY, rotateZ, scale } = transform;\n  let begin2 = start - offset;\n  let init = isDirect ? res.props : res.init;\n  if(!isGeom && Array.isArray(anchorPoint) && anchorPoint.length) {\n    let t = transformOrigin(anchorPoint, begin2, duration);\n    let first = t.value[0];\n    let v = first.transformOrigin.split(' ');\n    v[0] = parseFloat(v[0]);\n    v[1] = parseFloat(v[1]);\n    if(v[0] !== width * 0.5 || v[1] !== height * 0.5) {\n      init.style.transformOrigin = first.transformOrigin;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      // tfo的每个动画需考虑对坐标的影响\n      for(let i = 1, len = t.value.length; i < len; i++) {\n        let item = t.value[i];\n        let tfo = item.transformOrigin.split(' ');\n        tfo[0] = parseFloat(tfo[0]);\n        tfo[1] = parseFloat(tfo[1]);\n        item.left = -tfo[0];\n        item.top = -tfo[1];\n      }\n      res.animate.push(t);\n    }\n    // ae中位置相对于anchor，而不是默认左上角原点，因此有个位置计算\n    if(v[0]) {\n      init.style.left = -v[0];\n    }\n    if(v[1]) {\n      init.style.top = -v[1];\n    }\n  }\n  if(Array.isArray(opacity) && opacity.length) {\n    let t = transformOpacity(opacity, begin2, duration);\n    let first = t.value[0];\n    if(first.opacity !== 1) {\n      init.style.opacity = first.opacity;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n    }\n  }\n  if(Array.isArray(position) && position.length) {\n    let t = transformPosition(position, begin2, duration);\n    let first = t.value[0];\n    if(first.translateX) {\n      init.style.translateX = first.translateX;\n    }\n    if(first.translateY) {\n      init.style.translateY = first.translateY;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n    }\n  }\n  let is3d;\n  if(Array.isArray(rotateX) && rotateX.length) {\n    let t = transformRotateX(rotateX, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateX) {\n      init.style.rotateX = first.rotateX;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(Array.isArray(rotateY) && rotateY.length) {\n    let t = transformRotateY(rotateY, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateY) {\n      init.style.rotateY = first.rotateY;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(Array.isArray(rotateZ) && rotateZ.length) {\n    let t = transformRotateZ(rotateZ, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateZ) {\n      init.style.rotateZ = first.rotateZ;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(is3d) {\n    init.style.perspective = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n  }\n  if(Array.isArray(scale) && scale.length) {\n    let t = transformScale(scale, begin2, duration);\n    let first = t.value[0];\n    if(first.scaleX !== 1) {\n      init.style.scaleX = first.scaleX;\n    }\n    if(first.scaleY !== 1) {\n      init.style.scaleY = first.scaleY;\n    }\n    if(first.scaleZ !== 1) {\n      init.style.scaleZ = first.scaleZ;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n    }\n  }\n  return res;\n}\n\n/**\n * 动画和初始init部分转换\n * @param data\n * @param library\n * @param newLib\n * @param start\n * @param duration\n * @param offset\n * @param parentLink\n */\nfunction recursion(data, library, newLib, start, duration, offset, parentLink) {\n  // 作为父级链接不可见时无需导出\n  if(!data.enabled) {\n    return null;\n  }\n  let { name, assetId, startTime, inPoint, outPoint, blendingMode, isMask, isClip } = data;\n  if(assetId === undefined || assetId === null) {\n    return null;\n  }\n  let begin = start + offset;\n  // 图层在工作区外可忽略\n  if(inPoint >= begin + duration || outPoint <= begin) {\n    return null;\n  }\n  let res = {\n    name,\n  };\n  res.libraryId = parse(library, assetId, newLib, start, duration, offset + startTime);\n  res.init = {\n    style: {},\n  };\n  // isMask代表是否是遮罩，isClip需在isMask的基础上判断，因为被遮罩层存储isClip值再赋给遮罩层\n  if(isMask) {\n    if(isClip) {\n      res.init.clip = true;\n    }\n    else {\n      res.init.mask = true;\n    }\n  }\n  // 混合模式\n  switch(blendingMode) {\n    case BlendingMode.MULTIPLY:\n      res.init.style.mixBlendMode = 'multiply';\n      break;\n    case BlendingMode.SCREEN:\n      res.init.style.mixBlendMode = 'screen';\n      break;\n    case BlendingMode.OVERLAY:\n      res.init.style.mixBlendMode = 'overlay';\n      break;\n    case BlendingMode.DARKEN:\n      res.init.style.mixBlendMode = 'darken';\n      break;\n    case BlendingMode.COLOR_DODGE:\n      res.init.style.mixBlendMode = 'color-dodge';\n      break;\n    case BlendingMode.COLOR_BURN:\n      res.init.style.mixBlendMode = 'color-burn';\n      break;\n    case BlendingMode.HARD_LIGHT:\n      res.init.style.mixBlendMode = 'hard-light';\n      break;\n    case BlendingMode.SOFT_LIGHT:\n      res.init.style.mixBlendMode = 'soft-light';\n      break;\n    case BlendingMode.DIFFERENCE:\n      res.init.style.mixBlendMode = 'difference';\n      break;\n    case BlendingMode.EXCLUSION:\n      res.init.style.mixBlendMode = 'exclusion';\n      break;\n    case BlendingMode.HUE:\n      res.init.style.mixBlendMode = 'hue';\n      break;\n    case BlendingMode.SATURATION:\n      res.init.style.mixBlendMode = 'saturation';\n      break;\n    case BlendingMode.COLOR:\n      res.init.style.mixBlendMode = 'color';\n      break;\n    case BlendingMode.LUMINOSITY:\n      res.init.style.mixBlendMode = 'luminosity';\n      break;\n  }\n  res.animate = [];\n  // 特殊的visibility动画，如果图层可见在工作区间内，需要有动画，否则可以无视\n  if(inPoint > begin || outPoint < begin + duration) {\n    let v = {\n      value: [],\n      options: {\n        duration,\n        fill: 'forwards',\n        iterations: 1,\n      },\n    };\n    // 开头不可见，默认init的style\n    if(inPoint > begin) {\n      res.init.style.visibility = 'hidden';\n      res.init.style.pointerEvents = 'none';\n      v.value.push({\n        offset: 0,\n      });\n      v.value.push({\n        offset: (inPoint - begin) / duration,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    // 结尾计算\n    if(outPoint < begin + duration) {\n      // 可能是第一帧但offset不为0，不用担心karas会补充空首帧\n      v.value.push({\n        offset: (outPoint - begin) / duration,\n        visibility: 'hidden',\n        pointerEvents: 'none',\n      });\n      // 默认不是隐藏需补结束帧为隐藏，否则karas会填补空关键帧\n      if(inPoint <= begin) {\n        v.value.push({\n          offset: 1,\n          visibility: 'hidden',\n          pointerEvents: 'none',\n        });\n      }\n    }\n    else {\n      v.value.push({\n        offset: 1,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    res.animate.push(v);\n  }\n  parseAnimate(res, data, start, duration, offset, false, false);\n  if(data.hasOwnProperty('asChild')) {\n    let asChild = data.asChild;\n    if(parentLink.hasOwnProperty(asChild)) {\n      let div = JSON.stringify(parentLink[asChild]);\n      div = JSON.parse(div);\n      div.children.push(res);\n      res = div;\n    }\n  }\n  return res;\n}\n\n/**\n * 静态部分转换，library中无动画的部分\n * @param library\n * @param assetId\n * @param newLib\n * @param start\n * @param duration\n * @param offset\n */\nfunction parse(library, assetId, newLib, start, duration, offset) {\n  let data = library[assetId];\n  let { type, name, src, width, height, children, geom, text } = data;\n  let res = {\n    id: -1, // 占位符\n    name,\n    tagName: type,\n    props: {\n      style: {\n        position: 'absolute',\n        width,\n        height,\n        overflow: 'hidden',\n      },\n    },\n  };\n  // 矢量图层特殊解析，添加\n  if(geom) {\n    parseGeom(res, data, start, duration, offset);\n  }\n  else if(text) {\n    let content = data.content;\n    res.props.style.color = [\n      parseInt(content.fillColor[0] * 255),\n      parseInt(content.fillColor[1] * 255),\n      parseInt(content.fillColor[2] * 255),\n    ];\n    res.props.style.fontFamily = content.fontFamily;\n    res.props.style.fontSize = content.fontSize;\n    res.props.style.fontStyle = content.fontStyle;\n    res.props.style.lineHeight = content.leading / content.fontSize;\n    res.children = [content.text];\n    // 对齐方式\n    let baselineLocs = content.baselineLocs;\n    if(baselineLocs[0] !== 0) {\n      res.props.style.left = baselineLocs[0];\n      res.props.style.textAlign = 'center';\n    }\n    res.props.style.top = -content.fontSize - baselineLocs[1];\n  }\n  // 图片无children\n  else if(type === 'img') {\n    res.props.src = src;\n  }\n  else if(Array.isArray(children)) {\n    res.children = [];\n    parseChildren(res, children, library, newLib, start, duration, offset);\n  }\n  res.id = newLib.length;\n  newLib.push(res);\n  return res.id;\n}\n\nfunction parseChildren(res, children, library, newLib, start, duration, offset) {\n  if(Array.isArray(children)) {\n    // 先一遍解析父级链接，因为父级可能不展示或者只需要父级一层不递归解析父级的children\n    let parentLink = {};\n    for(let i = 0, len = children.length; i < len; i++) {\n      let item = children[i];\n      if(item.hasOwnProperty('asParent')) {\n        parentLink[item.asParent] = preParse(item, library, start, duration, offset);\n      }\n    }\n    // 再普通解析，遇到父级链接特殊处理\n    for(let i = 0, len = children.length; i < len; i++) {\n      let item = children[i];\n      let temp = recursion(item, library, newLib, start, duration, offset, parentLink);\n      if(temp) {\n        res.children.push(temp);\n        // ppt应该放在父层，如果有父级链接，则放在其上\n        if(temp.init && temp.init.style && temp.init.style.perspective) {\n          res.props.style.perspective = temp.init.style.perspective;\n          temp.init.style.perspective = undefined;\n        }\n        if(temp.children && temp.children.length === 1) {\n          let t = temp.children[0];\n          if(t.init && t.init.style && t.init.style.perspective) {\n            temp.props.style.perspective = t.init.style.perspective;\n            t.init.style.perspective = undefined;\n          }\n        }\n        // 有mask分析mask，且要注意如果有父级链接不能直接存入当前children，要下钻一级\n        if(item.mask && item.mask.enabled) {\n          let m = parseMask(item, temp, start, duration, offset);\n          if(temp.children && temp.children.length === 1) {\n            temp.children.push(m);\n          }\n          else {\n            res.children.push(m);\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * 形状图层特殊的直接为其生成一个内联children\n * @param res\n * @param data\n * @param start\n * @param duration\n * @param offset\n */\nfunction parseGeom(res, data, start, duration, offset) {\n  let { shape: { content, fill, gFill, stroke, transform }, trim } = data;\n  $.ae2karas.log(123);\n  $.ae2karas.log(content);\n  // let { type, direction, size, position, roundness, points } = content;\n  let begin2 = start - offset;\n  let f;\n  // 矢量可能有多个，但样式共用一个\n  let children = [];\n  let len = content.length;\n  if(!len) {\n    return;\n  }\n  for(let i = 0, len = content.length; i < len; i++) {\n    let item = content[i];\n    let { type, direction, size, position, roundness, points } = item;\n    // 由于动画的特殊性，无法直接用矢量标签，需嵌套一个中间层div\n    let $geom = {\n      tagName: '$polyline',\n      props: {\n        style: {\n          position: 'absolute',\n        },\n      },\n    };\n    let child = {\n      tagName: 'div',\n      props: {\n        style: {\n          position: 'absolute',\n        },\n      },\n      children: [$geom],\n      animate: [],\n    };\n    children.push(child);\n    // 分类处理矢量\n    if(type === 'rect' || type === 'ellipse') {\n      let t = transformSize(size, begin2, duration);\n      let first = t.value[0];\n      child.props.style.width = first[0];\n      child.props.style.height = first[1];\n      if(t.value.length > 1) {\n        if(first.offset === 0) {\n          t.value[0] = {\n            offset: 0,\n          };\n        }\n        // 用缩放代替尺寸变化\n        for(let i = 1, len = t.value.length; i < len; i++) {\n          let size = t.value[i];\n          t.value[i].size = undefined;\n          t.value[i].scaleX = size[0] / first[0];\n          t.value[i].scaleY = size[1] / first[1];\n        }\n        $geom.animate.push(t);\n      }\n      if(type === 'rect') {\n        let o = path.rect2polyline(first[0], first[1], roundness);\n        $geom.props.points = o.points;\n        $geom.props.controls = o.controls;\n      }\n      else if(type === 'ellipse') {\n        let o = path.ellipse2polyline();\n        $geom.props.points = o.points;\n        $geom.props.controls = o.controls;\n      }\n    }\n    else if(type === 'star') {\n      // TODO\n    }\n  }\n  if(Array.isArray(fill.color) && fill.color.length) {\n    let t = transformFill(fill, begin2, duration);\n    let first = t.value[0];\n    // child.props.style.fill = first.fill;\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      // child.animate.push(t);\n    }\n  }\n  if(Array.isArray(stroke.color) && stroke.color.length) {\n    let t = transformStroke(stroke, begin2, duration);\n    let first = t.value[0];\n    // child.props.style.stroke = first.stroke;\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      // child.animate.push(t);\n    }\n  }\n  if(Array.isArray(stroke.width) && stroke.width.length) {\n    let t = transformStrokeWidth(stroke.width, begin2, duration);\n    let first = t.value[0];\n    // child.props.style.strokeWidth = first.strokeWidth;\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      // child.animate.push(t);\n    }\n  }\n  if(Array.isArray(stroke.lineJoin) && stroke.lineJoin.length) {\n    let t = transformLineJoin(stroke.lineJoin, begin2, duration);\n    let first = t.value[0];\n    // child.props.style.strokeLineJoin = first.strokeLineJoin;\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      // child.animate.push(t);\n    }\n  }\n  if(Array.isArray(stroke.strokeMiterlimit) && stroke.strokeMiterlimit.length) {\n    let t = transformMiterLimit(stroke.strokeMiterlimit, begin2, duration);\n    let first = t.value[0];\n    // child.props.style.strokeMiterlimit = first.strokeMiterlimit;\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      // child.animate.push(t);\n    }\n  }\n  if(stroke.dashes) {\n    // child.props.style.strokeDasharray = [stroke.dashes];\n  }\n  // if(type === 'rect' || type === 'ellipse') {\n  //   //\n  // }\n  // if(type === 'rect') {\n  //   child.props.style.width = size[0];\n  //   child.props.style.height = size[1];\n  //   let o = path.rect2polyline(size[0], size[1], roundness);\n  //   child.props.points = o.points;\n  //   child.props.controls = o.controls;\n  // }\n  // else if(type === 'ellipse') {\n  //   child.props.style.width = size[0];\n  //   child.props.style.height = size[1];\n  //   let o = path.ellipse2polyline();\n  //   child.props.points = o.points;\n  //   child.props.controls = o.controls;\n  // }\n  // else if(type === 'star') {\n  //   // TODO\n  // }\n  // else if(type === 'path') {\n  //   let t = transformPoints(points, begin2, duration);\n  //   let data = t.data;\n  //   child.props.style.width = data.width;\n  //   child.props.style.height = data.height;\n  //   // path的特殊位置计算\n  //   child.props.style.left = data.x2;\n  //   child.props.style.top = data.y2;\n  //   t.data = undefined;\n  //   let first = t.value[0];\n  //   child.props.points = first.points;\n  //   child.props.controls = first.controls;\n  //   if(t.value.length > 1) {\n  //     if(first.offset === 0) {\n  //       t.value[0] = {\n  //         offset: 0,\n  //       };\n  //     }\n  //     child.animate.push(t);\n  //   }\n  // }\n  // path没有position\n  // if(position && position[0]) {\n  //   child.props.style.left = -position[0];\n  // }\n  // if(position && position[1]) {\n  //   child.props.style.top = -position[1];\n  // }\n  // if(fill && fill.rule === 2 || gFill && gFill.rule === 2) {\n  //   child.props.style.fillRule = 'evenodd';\n  // }\n  // // geom内嵌的transform单独分析，anchorPoint比较特殊\n  // let { anchorPoint } = transform;\n  // if(Array.isArray(anchorPoint) && anchorPoint.length) {\n  //   let t = transformOrigin(anchorPoint, begin2, duration);\n  //   let first = t.value[0];\n  //   let v = first.transformOrigin.split(' ');\n  //   v[0] = parseFloat(v[0]);\n  //   v[1] = parseFloat(v[1]);\n  //   /**\n  //    * path很特殊，原始没有宽高，ae是锚点0,0相对于自身左上角原点，定位则是锚点来进行定位\n  //    * 需记录最初的位置，发生锚点动画时，其会干扰left/top，同步形成位置动画\n  //    */\n  //   if(type === 'path') {\n  //     let left = child.props.style.left;\n  //     let top = child.props.style.top;\n  //     child.props.style.left -= v[0];\n  //     child.props.style.top -= v[1];\n  //     let w = child.props.style.width;\n  //     let h = child.props.style.height;\n  //     v[0] += w * 0.5;\n  //     v[1] += h * 0.5;\n  //     if(v[0] !== w * 0.5 || v[1] !== h * 0.5) {\n  //       child.props.style.transformOrigin = first.transformOrigin;\n  //     }\n  //     if(t.value.length > 1) {\n  //       if(first.offset === 0) {\n  //         t.value[0] = {\n  //           offset: 0,\n  //         };\n  //       }\n  //       // tfo的每个动画需考虑对坐标的影响\n  //       for(let i = 1, len = t.value.length; i < len; i++) {\n  //         let item = t.value[i];\n  //         let tfo = item.transformOrigin.split(' ');\n  //         tfo[0] = parseFloat(tfo[0]);\n  //         tfo[1] = parseFloat(tfo[1]);\n  //         item.left = left - tfo[0];\n  //         item.top = top - tfo[1];\n  //       }\n  //       child.animate.push(t);\n  //     }\n  //   }\n  //   else {\n  //     // tfo中心判断，加上尺寸*0.5\n  //     v[0] += size[0] * 0.5;\n  //     v[1] += size[1] * 0.5;\n  //     if(v[0] !== size[0] * 0.5 || v[1] !== size[1] * 0.5) {\n  //       // child.props.style.transformOrigin = first.transformOrigin;\n  //     }\n  //     if(t.value.length > 1) {\n  //       if(first.offset === 0) {\n  //         t.value[0] = {\n  //           offset: 0,\n  //         };\n  //       }\n  //       // child.animate.push(t);\n  //     }\n  //     // if(v[0]) {\n  //     //   child.props.style.left = -v[0];\n  //     // }\n  //     // if(v[1]) {\n  //     //   child.props.style.top = -v[1];\n  //     // }\n  //   }\n  // }\n  // parseAnimate(child, data.shape, start, duration, offset, true, true);\n  // // gradient需要根据transformOrigin来计算\n  // if(gFill) {\n  //   let transformOrigin = child.props.style.transformOrigin;\n  //   let w = child.props.style.width, h = child.props.style.height;\n  //   let cx, cy;\n  //   if(transformOrigin) {\n  //     transformOrigin = transformOrigin.split(' ');\n  //     cx = parseFloat(transformOrigin[0]);\n  //     cy = parseFloat(transformOrigin[1]);\n  //   }\n  //   else {\n  //     cx = w * 0.5;\n  //     cy = h * 0.5;\n  //   }\n  //   let { type, start, end } = gFill;\n  //   if(type === 1) {\n  //     let x0 = position[0], y0 = position[1];\n  //     let x1 = start[0] + cx, y1 = start[1] + cy;\n  //     let x2 = end[0] + cx, y2 = end[1] + cy;\n  //     f = `linearGradient(${(x1 - x0) / w} ${(y1 - y0) / h} ${(x2 - x0) / w} ${(y2 - y0)/ h}, #FFF, #000)`;\n  //   }\n  //   else if(type === 2) {\n  //     let x0 = position[0], y0 = position[1];\n  //     let x1 = start[0] + cx, y1 = start[1] + cy;\n  //     let x2 = end[0] + cx, y2 = end[1] + cy;\n  //     f = `radialGradient(${(x1 - x0) / w} ${(y1 - y0) / h} ${(x2 - x0) / w} ${(y2 - y0)/ h}, #FFF, #000)`;\n  //   }\n  //   // child.props.style.fill = [f];\n  // }\n  // // trimPath裁剪动画或属性\n  // if(trim && trim.hasOwnProperty('start') && trim.hasOwnProperty('end')) {\n  //   let start = trim.start, end = trim.end;\n  //   if(start.length > 1) {\n  //     let t = transformPath(start, begin2, duration, false);\n  //     let first = t.value[0];\n  //     if(first.start !== 0) {\n  //       // child.props.start = first.start;\n  //     }\n  //     if(t.value.length > 1) {\n  //       if(first.offset === 0) {\n  //         t.value[0] = {\n  //           offset: 0,\n  //         };\n  //       }\n  //       // child.animate.push(t);\n  //     }\n  //   }\n  //   else {\n  //     // child.props.start = start[0] * 0.01;\n  //   }\n  //   if(end.length > 1) {\n  //     let t = transformPath(end, begin2, duration, true);\n  //     let first = t.value[0];\n  //     if(first.end !== 0) {\n  //       // child.props.end = first.end;\n  //     }\n  //     if(t.value.length > 1) {\n  //       if(first.offset === 0) {\n  //         t.value[0] = {\n  //           offset: 0,\n  //         };\n  //       }\n  //       // child.animate.push(t);\n  //     }\n  //   }\n  //   else {\n  //     // child.props.end = end[0] * 0.01;\n  //   }\n  // }\n  res.children = children;\n}\n\nfunction parseMask(data, target, start, duration, offset) {\n  $.ae2karas.log(data);\n  $.ae2karas.log(target);\n  // 会出现父级链接特殊情况，此时遮罩应该是其唯一children\n  if(target.children && target.children.length === 1) {\n    target = target.children[0];\n  }\n  let targetProps = target.init;\n  let left = targetProps.style.left || 0;\n  let top = targetProps.style.top || 0;\n  let res = {\n    tagName: '$polyline',\n    props: {\n      style: {\n        position: 'absolute',\n        fill: '#FFF',\n      },\n    },\n    animate: [],\n  };\n  let { width, height, mask: { list: { points, opacity }, mode, inverted } } = data;\n  // 相加之外都是相减\n  if(mode === MaskMode.ADD) {\n    if(inverted) {\n      res.props.clip = true;\n    }\n    else {\n      res.props.mask = true;\n    }\n  }\n  else {\n    if(inverted) {\n      res.props.mask = true;\n    }\n    else {\n      res.props.clip = true;\n    }\n  }\n  // 样式和target一致，只有位置信息需要\n  let style = targetProps.style;\n  for(let i in style) {\n    if(style.hasOwnProperty(i) && ['left', 'top', 'translateX', 'translateY'].indexOf(i) > -1) {\n      res.props.style[i] = style[i];\n    }\n  }\n  // 要显示mask，可能会被target同化\n  res.props.style.visibility = undefined;\n  res.props.style.pointerEvents = undefined;\n  // mask的2个动画，points和opacity\n  let o = {};\n  let begin2 = start - offset;\n  if(Array.isArray(points) && points.length) {\n    let t = transformPoints(points, begin2, duration);\n    o = t.data;\n    res.props.style.width = o.width;\n    res.props.style.height = o.height;\n    t.data = undefined;\n    let first = t.value[0];\n    res.props.points = first.points;\n    res.props.controls = first.controls;\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n    }\n  }\n  else {\n    return res;\n  }\n  if(Array.isArray(opacity) && opacity.length) {\n    let t = transformOpacity(opacity, begin2, duration);\n    let first = t.value[0];\n    if(first.opacity !== 1) {\n      res.props.style.opacity = first.opacity;\n    }\n    if(t.value.length > 1) {\n      if(first.offset === 0) {\n        t.value[0] = {\n          offset: 0,\n        };\n      }\n      res.animate.push(t);\n    }\n  }\n  // 获取对象锚点，mask的锚点需保持相同\n  let transformOrigin = targetProps.style.transformOrigin;\n  let cx = width * 0.5, cy = height * 0.5;\n  if(transformOrigin) {\n    let v = transformOrigin.split(' ');\n    cx = parseFloat(v[0]);\n    cy = parseFloat(v[1]);\n  }\n  // 位置和锚点保持和mask相同，由于points可能不是0，0开始，需计算偏移\n  res.props.style.transformOrigin = (cx - o.x2) + ' ' + (cy - o.y2);\n  res.props.style.left = left + o.x2;\n  res.props.style.top = top + o.y2;\n  return res;\n}\n\nlet uuid = 0;\n\nexport default function(data) {\n  $.ae2karas.error('convert');\n  let { workAreaStart, workAreaDuration, result, library } = data;\n  let { name, width, height, children } = result;\n  let newLib = [];\n  let res = {\n    uuid: uuid++,\n    name,\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n        width,\n        height,\n        // overflow: 'hidden',\n      },\n    },\n    children: [],\n    library: newLib,\n    abbr: false,\n  };\n  parseChildren(res, children, library, newLib, workAreaStart, workAreaDuration, 0);\n  return res;\n}\n","import enums from './enums';\nimport parse from './parse/index';\nimport convert from './convert/index';\n\nconst { ES_TYPE, EVENT } = enums;\n\nlet ae2karas = $.ae2karas = $.ae2karas || {};\n\nae2karas.dispatch = (function() {\n  let xLib;\n  try {\n    xLib = new ExternalObject('lib:PlugPlugExternalObject');\n  } catch(e) {\n    alert('Missing ExternalObject: ');\n  }\n  return function(type, data) {\n    if(xLib) {\n      if(data && data instanceof Object) {\n        data = JSON.stringify(data);\n      }\n      else if(data === undefined) {\n        data = 'undefined';\n      }\n      else if(data === null) {\n        data = 'null';\n      }\n      else if(data === true) {\n        data = 'true';\n      }\n      else if(data === false) {\n        data = 'false';\n      }\n      // if(typeof data === 'number') {\n      //   data = data.toString();\n      // }\n      var eventObj = new CSXSEvent();\n      eventObj.type = type;\n      eventObj.data = data;\n      eventObj.dispatch();\n    }\n  };\n})();\n\nae2karas.log = function(s) {\n  $.ae2karas.dispatch(enums.EVENT.LOG, s);\n};\n\nae2karas.warn = function(s) {\n  $.ae2karas.dispatch(enums.EVENT.WARN, s);\n};\n\nae2karas.error = function(s) {\n  $.ae2karas.dispatch(enums.EVENT.ERROR, s);\n};\n\nfunction getItemType(item) {\n  if(item instanceof CompItem) {\n    return ES_TYPE.COMP_ITEM;\n  }\n  if(item instanceof FolderItem) {\n    return ES_TYPE.FOLDER_ITEM;\n  }\n  if(item instanceof FootageItem) {\n    return ES_TYPE.FOOTAGE_ITEM;\n  }\n  return ES_TYPE.UNKNOWN;\n}\n\nae2karas.getCompositions = function() {\n  let folderItem = app.project;\n  let list = [];\n  // 所有的合成都在app.project下，包含文件夹递归树的\n  for(let i = 1; i <= folderItem.numItems; i++) {\n    let compItem = folderItem.item(i);\n    let type = getItemType(compItem);\n    if(type === ES_TYPE.COMP_ITEM) {\n      list.push({\n        id: compItem.id,\n        name: compItem.name,\n        width: compItem.width,\n        height: compItem.height,\n        type,\n      });\n    }\n  }\n  $.ae2karas.dispatch(EVENT.INIT, list);\n};\n\nfunction findCompositionById(id) {\n  for(let i = 1; i <= app.project.numItems; i++) {\n    const compItem = app.project.item(i);\n    if(compItem.id === id) {\n      return compItem;\n    }\n  }\n  return null;\n}\n\nae2karas.convert = function(id) {\n  $.ae2karas.error('start');\n  let composition = findCompositionById(id);\n  if(!composition) {\n    $.ae2karas.error('error: no composition');\n    $.ae2karas.dispatch(enums.EVENT.CANCEL);\n    return;\n  }\n  // 递归遍历分析合成对象，转换ae的图层为普通js对象，留给后续转换karas用\n  let res = parse(composition);\n  $.ae2karas.dispatch(enums.EVENT.FINISH, convert(res));\n  // 结束后才能删除临时生成的导出psd的合成和渲染队列\n  $.ae2karas.delTemp();\n  $.ae2karas.error('finish');\n};\n\nlet list = [];\nae2karas.addTemp = function(o) {\n  list.push(o);\n};\nae2karas.delTemp = function() {\n  while(list.length) {\n    list.pop().remove();\n  }\n};\n\nae2karas.export = function(data) {\n  $.ae2karas.error('export');\n  $.ae2karas.log(data);\n  let file = File.saveDialog();\n  if(!file) {\n    return;\n  }\n  (new Folder(file)).create();\n  let f = new File(file.fsName + '.json');\n  f.open('w');\n  f.encoding = 'utf-8';\n  f.write(data);\n  f.close();\n};\n"],"names":["ES_TYPE","FOLDER_ITEM","FOOTAGE_ITEM","COMP_ITEM","UNKNOWN","EVENT","INIT","LOG","WARN","ERROR","FINISH","CANCEL","ADD_TEMP","DEL_TEMP","LAYER_TRANSFORM","VECTOR_TRANSFORM","MASK_TRANSFORM","getPropertyValues","prop","noEasing","numKeys","arr","i","o","time","keyTime","value","keyValue","easing","getEasing","push","start","end","t1","t2","v1","v2","e1","keyOutTemporalEase","e2","keyInTemporalEase","x1","influence","x2","y1","y2","matchName","indexOf","avSpeedX","Math","abs","avSpeedY","avSpeed","sqrt","speed","undefined","transformLayer","res","numProperties","item","property","enabled","hasOwnProperty","transformVector","transformMask","transformGeom","group","content","transform","name","rect","ellipse","star","path","stroke","fill","gFill","type","direction","size","position","roundness","starType","points","innerRadius","outerRadius","innerRoundness","outerRoundness","rotation","color","opacity","width","lineCap","lineJoin","miterLimit","dashes","d","g","canSetExpression","j","exec","length","v","len","rule","library","shape","trim","uuid","recursion","composition","layers","height","duration","$","ae2karas","error","hasSolo","solo","asParent","asChild","parent","index","children","isTrackMatte","parseLayer","isClip","last","isMask","reverse","layer","startTime","inPoint","outPoint","blendingMode","trackMatteType","TrackMatteType","ALPHA_INVERTED","warn","geom","txt","vector","mask","text","source","id","assetId","asset","FootageItem","src","file","fsName","test","replace","newName","hasExist","CompItem","maskMode","MaskMode","NONE","list","mode","inverted","fillColor","font","fontFamily","fontStyle","fontSize","leading","baselineLocs","workAreaStart","workAreaDuration","log","result","parse","vertices","inTangents","outTangents","closed","it","ot","max","min","w","h","pts","cts","x","y","unshift","slice","controls","rect2polyline","r","ellipse2polyline","rx","ry","getAreaList","begin","reducer","startIndex","endIndex","first","Array","isArray","next","percent","sliceBezier","prev","t","p1","p2","p3","p4","x3","y3","x12","y12","x23","y23","x123","y123","x4","y4","x34","y34","x234","y234","x1234","y1234","transformOrigin","options","iterations","offset","transformOpacity","transformPosition","translateX","translateY","transformRotateX","rotateX","transformRotateY","rotateY","transformRotateZ","rotateZ","transformScale","scaleX","scaleY","scaleZ","transformPoints","data","isStart","vertices1","inTangents1","outTangents1","vertices2","inTangents2","outTangents2","p","n","pIn","nIn","pOut","nOut","s","transformFill","parseInt","transformStroke","transformStrokeWidth","strokeWidth","transformLineJoin","strokeLinejoin","isFirst","item2","transformMiterLimit","transformSize","preParse","tagName","props","style","animate","parseAnimate","isDirect","isGeom","anchorPoint","scale","begin2","init","split","parseFloat","tfo","left","top","is3d","perspective","pow","newLib","parentLink","libraryId","clip","BlendingMode","MULTIPLY","mixBlendMode","SCREEN","OVERLAY","DARKEN","COLOR_DODGE","COLOR_BURN","HARD_LIGHT","SOFT_LIGHT","DIFFERENCE","EXCLUSION","HUE","SATURATION","COLOR","LUMINOSITY","visibility","pointerEvents","div","JSON","stringify","overflow","parseGeom","lineHeight","textAlign","parseChildren","temp","m","parseMask","$geom","child","strokeMiterlimit","target","targetProps","ADD","cx","cy","abbr","enums","dispatch","xLib","ExternalObject","e","alert","Object","eventObj","CSXSEvent","getItemType","FolderItem","getCompositions","folderItem","app","project","numItems","compItem","findCompositionById","convert","delTemp","addTemp","pop","remove","File","saveDialog","Folder","create","f","open","encoding","write","close"],"mappings":"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IAAC,CAACvL,KAAF,CAAQ,CAAR,IAAa;AACX+M,UAAAA,MAAM,EAAE;AADG,SAAb;AAGD,OALoB;;AAOtB;AACF;;AACD,MAAG9B,KAAK,CAACC,OAAN,CAAclI,MAAM,CAACgQ,gBAArB,KAA0ChQ,MAAM,CAACgQ,gBAAP,CAAwBrO,MAArE,EAA6E;AAC3E,QAAI4G,IAAC,GAAGgE,mBAAmB,CAACvM,MAAM,CAACgQ,gBAAR,EAA0B7C,MAA1B,EAAkC5K,QAAlC,CAA3B;;AACA,QAAIyF,QAAK,GAAGO,IAAC,CAACvL,KAAF,CAAQ,CAAR,CAAZ,CAF2E;;AAI3E,QAAGuL,IAAC,CAACvL,KAAF,CAAQ2E,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAGqG,QAAK,CAAC+B,MAAN,KAAiB,CAApB,EAAuB;AACrBxB,QAAAA,IAAC,CAACvL,KAAF,CAAQ,CAAR,IAAa;AACX+M,UAAAA,MAAM,EAAE;AADG,SAAb;AAGD,OALoB;;AAOtB;AACF;;AACD,MAAG/J,MAAM,CAACqB,MAAV,EAAkB,CAzImC;AA6IrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAtC,EAAAA,GAAG,CAACkE,QAAJ,GAAeA,QAAf;AACD;;AAED,SAAS4M,SAAT,CAAmB9E,IAAnB,EAAyBkF,MAAzB,EAAiC5S,KAAjC,EAAwCkF,QAAxC,EAAkDwH,MAAlD,EAA0D;AACxDvH,EAAAA,CAAC,CAACC,QAAF,CAAWyD,GAAX,CAAe6E,IAAf;AACAvI,EAAAA,CAAC,CAACC,QAAF,CAAWyD,GAAX,CAAe+J,MAAf,EAFwD;;AAIxD,MAAGA,MAAM,CAAChN,QAAP,IAAmBgN,MAAM,CAAChN,QAAP,CAAgBtB,MAAhB,KAA2B,CAAjD,EAAoD;AAClDsO,IAAAA,MAAM,GAAGA,MAAM,CAAChN,QAAP,CAAgB,CAAhB,CAAT;AACD;;AACD,MAAIiN,WAAW,GAAGD,MAAM,CAAC7C,IAAzB;AACA,MAAII,IAAI,GAAG0C,WAAW,CAACtD,KAAZ,CAAkBY,IAAlB,IAA0B,CAArC;AACA,MAAIC,GAAG,GAAGyC,WAAW,CAACtD,KAAZ,CAAkBa,GAAlB,IAAyB,CAAnC;AACA,MAAI1O,GAAG,GAAG;AACR2N,IAAAA,OAAO,EAAE,WADD;AAERC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AACLtM,QAAAA,QAAQ,EAAE,UADL;AAELL,QAAAA,IAAI,EAAE;AAFD;AADF,KAFC;AAQR4M,IAAAA,OAAO,EAAE;AARD,GAAV;AAUA,MAAM5L,KAAN,GAA6E8J,IAA7E,CAAM9J,KAAN;AAAA,MAAaqB,MAAb,GAA6EyI,IAA7E,CAAazI,MAAb;AAAA,mBAA6EyI,IAA7E,CAAqB3G,IAArB;AAAA,mCAA6BkB,IAA7B;AAAA,MAAqC7E,MAArC,mBAAqCA,MAArC;AAAA,MAA6CO,OAA7C,mBAA6CA,OAA7C;AAAA,MAAwDuE,IAAxD,cAAwDA,IAAxD;AAAA,MAA8DC,QAA9D,cAA8DA,QAA9D,CApBwD;;AAsBxD,MAAGD,IAAI,KAAKH,QAAQ,CAAC+K,GAArB,EAA0B;AACxB,QAAG3K,QAAH,EAAa;AACXzG,MAAAA,GAAG,CAAC4N,KAAJ,CAAUqB,IAAV,GAAiB,IAAjB;AACD,KAFD,MAGK;AACHjP,MAAAA,GAAG,CAAC4N,KAAJ,CAAUvI,IAAV,GAAiB,IAAjB;AACD;AACF,GAPD,MAQK;AACH,QAAGoB,QAAH,EAAa;AACXzG,MAAAA,GAAG,CAAC4N,KAAJ,CAAUvI,IAAV,GAAiB,IAAjB;AACD,KAFD,MAGK;AACHrF,MAAAA,GAAG,CAAC4N,KAAJ,CAAUqB,IAAV,GAAiB,IAAjB;AACD;AACF,GArCuD;;;AAuCxD,MAAIpB,KAAK,GAAGsD,WAAW,CAACtD,KAAxB;;AACA,OAAI,IAAIhQ,CAAR,IAAagQ,KAAb,EAAoB;AAClB,QAAGA,KAAK,CAACxN,cAAN,CAAqBxC,CAArB,KAA2B,CAAC,MAAD,EAAS,KAAT,EAAgB,YAAhB,EAA8B,YAA9B,EAA4CyB,OAA5C,CAAoDzB,CAApD,IAAyD,CAAC,CAAxF,EAA2F;AACzFmC,MAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgBhQ,CAAhB,IAAqBgQ,KAAK,CAAChQ,CAAD,CAA1B;AACD;AACF,GA5CuD;;;AA8CxDmC,EAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgBqC,UAAhB,GAA6BpQ,SAA7B;AACAE,EAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgBsC,aAAhB,GAAgCrQ,SAAhC,CA/CwD;;AAiDxD,MAAIhC,CAAC,GAAG,EAAR;AACA,MAAIsQ,MAAM,GAAG9P,KAAK,GAAG0M,MAArB;;AACA,MAAG9B,KAAK,CAACC,OAAN,CAAczH,MAAd,KAAyBA,MAAM,CAACkB,MAAnC,EAA2C;AACzC,QAAI4G,CAAC,GAAGuC,eAAe,CAACrK,MAAD,EAAS0M,MAAT,EAAiB5K,QAAjB,CAAvB;AACA1F,IAAAA,CAAC,GAAG0L,CAAC,CAACwC,IAAN;AACAhM,IAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgB3L,KAAhB,GAAwBpE,CAAC,CAACoE,KAA1B;AACAlC,IAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgBtK,MAAhB,GAAyBzF,CAAC,CAACyF,MAA3B;AACAiG,IAAAA,CAAC,CAACwC,IAAF,GAASlM,SAAT;AACA,QAAImJ,KAAK,GAAGO,CAAC,CAACvL,KAAF,CAAQ,CAAR,CAAZ;AACA+B,IAAAA,GAAG,CAAC4N,KAAJ,CAAUlM,MAAV,GAAmBuH,KAAK,CAACvH,MAAzB;AACA1B,IAAAA,GAAG,CAAC4N,KAAJ,CAAUtF,QAAV,GAAqBW,KAAK,CAACX,QAA3B;;AACA,QAAGkB,CAAC,CAACvL,KAAF,CAAQ2E,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAGqG,KAAK,CAAC+B,MAAN,KAAiB,CAApB,EAAuB;AACrBxB,QAAAA,CAAC,CAACvL,KAAF,CAAQ,CAAR,IAAa;AACX+M,UAAAA,MAAM,EAAE;AADG,SAAb;AAGD;;AACDhL,MAAAA,GAAG,CAAC8N,OAAJ,CAAYzP,IAAZ,CAAiBmL,CAAjB;AACD;AACF,GAjBD,MAkBK;AACH,WAAOxJ,GAAP;AACD;;AACD,MAAGkJ,KAAK,CAACC,OAAN,CAAclH,OAAd,KAA0BA,OAAO,CAACW,MAArC,EAA6C;AAC3C,QAAI4G,IAAC,GAAGyB,gBAAgB,CAAChJ,OAAD,EAAUmM,MAAV,EAAkB5K,QAAlB,CAAxB;;AACA,QAAIyF,QAAK,GAAGO,IAAC,CAACvL,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAGgL,QAAK,CAAChH,OAAN,KAAkB,CAArB,EAAwB;AACtBjC,MAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgB5L,OAAhB,GAA0BgH,QAAK,CAAChH,OAAhC;AACD;;AACD,QAAGuH,IAAC,CAACvL,KAAF,CAAQ2E,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAGqG,QAAK,CAAC+B,MAAN,KAAiB,CAApB,EAAuB;AACrBxB,QAAAA,IAAC,CAACvL,KAAF,CAAQ,CAAR,IAAa;AACX+M,UAAAA,MAAM,EAAE;AADG,SAAb;AAGD;;AACDhL,MAAAA,GAAG,CAAC8N,OAAJ,CAAYzP,IAAZ,CAAiBmL,IAAjB;AACD;AACF,GAtFuD;;;AAwFxD,MAAIqB,eAAe,GAAGsG,WAAW,CAACtD,KAAZ,CAAkBhD,eAAxC;AACA,MAAIwG,EAAE,GAAGnP,KAAK,GAAG,GAAjB;AAAA,MAAsBoP,EAAE,GAAG/N,MAAM,GAAG,GAApC;;AACA,MAAGsH,eAAH,EAAoB;AAClB,QAAIhI,CAAC,GAAGgI,eAAe,CAACyD,KAAhB,CAAsB,GAAtB,CAAR;AACA+C,IAAAA,EAAE,GAAG9C,UAAU,CAAC1L,CAAC,CAAC,CAAD,CAAF,CAAf;AACAyO,IAAAA,EAAE,GAAG/C,UAAU,CAAC1L,CAAC,CAAC,CAAD,CAAF,CAAf;AACD,GA9FuD;;;AAgGxD7C,EAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgBhD,eAAhB,GAAmCwG,EAAE,GAAGvT,CAAC,CAACoB,EAAR,GAAc,GAAd,IAAqBoS,EAAE,GAAGxT,CAAC,CAACsB,EAA5B,CAAlC;AACAY,EAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgBY,IAAhB,GAAuBA,IAAI,GAAG3Q,CAAC,CAACoB,EAAhC;AACAc,EAAAA,GAAG,CAAC4N,KAAJ,CAAUC,KAAV,CAAgBa,GAAhB,GAAsBA,GAAG,GAAG5Q,CAAC,CAACsB,EAA9B;AACA,SAAOY,GAAP;AACD;;AAED,IAAImD,IAAI,GAAG,CAAX;AAEe,kBAAS6I,IAAT,EAAe;AAC5BvI,EAAAA,CAAC,CAACC,QAAF,CAAWC,KAAX,CAAiB,SAAjB;AACA,MAAMsD,aAAN,GAA2D+E,IAA3D,CAAM/E,aAAN;AAAA,MAAqBC,gBAArB,GAA2D8E,IAA3D,CAAqB9E,gBAArB;AAAA,MAAuCE,MAAvC,GAA2D4E,IAA3D,CAAuC5E,MAAvC;AAAA,MAA+CpE,OAA/C,GAA2DgJ,IAA3D,CAA+ChJ,OAA/C;AACA,MAAMpC,IAAN,GAAwCwG,MAAxC,CAAMxG,IAAN;AAAA,MAAYsB,KAAZ,GAAwCkF,MAAxC,CAAYlF,KAAZ;AAAA,MAAmBqB,MAAnB,GAAwC6D,MAAxC,CAAmB7D,MAAnB;AAAA,MAA2BW,QAA3B,GAAwCkD,MAAxC,CAA2BlD,QAA3B;AACA,MAAI4K,MAAM,GAAG,EAAb;AACA,MAAI9O,GAAG,GAAG;AACRmD,IAAAA,IAAI,EAAEA,IAAI,EADF;AAERvC,IAAAA,IAAI,EAAJA,IAFQ;AAGR+M,IAAAA,OAAO,EAAE,KAHD;AAIRC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AACLtM,QAAAA,QAAQ,EAAE,UADL;AAELW,QAAAA,KAAK,EAALA,KAFK;AAGLqB,QAAAA,MAAM,EAANA,MAHK;;AAAA;AADF,KAJC;AAYRW,IAAAA,QAAQ,EAAE,EAZF;AAaRlB,IAAAA,OAAO,EAAE8L,MAbD;AAcRyC,IAAAA,IAAI,EAAE;AAdE,GAAV;AAgBAZ,EAAAA,aAAa,CAAC3Q,GAAD,EAAMkE,QAAN,EAAgBlB,OAAhB,EAAyB8L,MAAzB,EAAiC7H,aAAjC,EAAgDC,gBAAhD,EAAkE,CAAlE,CAAb;AACA,SAAOlH,GAAP;AACD;;ACr5BD,IAAQzD,OAAR,GAA2BiV,KAA3B,CAAQjV,OAAR;AAAA,IAAiBK,KAAjB,GAA2B4U,KAA3B,CAAiB5U,KAAjB;AAEA,IAAI8G,QAAQ,GAAGD,CAAC,CAACC,QAAF,GAAaD,CAAC,CAACC,QAAF,IAAc,EAA1C;;AAEAA,QAAQ,CAAC+N,QAAT,GAAqB,YAAW;AAC9B,MAAIC,IAAJ;;AACA,MAAI;AACFA,IAAAA,IAAI,GAAG,IAAIC,cAAJ,CAAmB,4BAAnB,CAAP;AACD,GAFD,CAEE,OAAMC,CAAN,EAAS;AACTC,IAAAA,KAAK,CAAC,0BAAD,CAAL;AACD;;AACD,SAAO,UAASzQ,IAAT,EAAe4K,IAAf,EAAqB;AAC1B,QAAG0F,IAAH,EAAS;AACP,UAAG1F,IAAI,IAAIA,IAAI,YAAY8F,MAA3B,EAAmC;AACjC9F,QAAAA,IAAI,GAAGqE,IAAI,CAACC,SAAL,CAAetE,IAAf,CAAP;AACD,OAFD,MAGK,IAAGA,IAAI,KAAKlM,SAAZ,EAAuB;AAC1BkM,QAAAA,IAAI,GAAG,WAAP;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,KAAZ,EAAmB;AACtBA,QAAAA,IAAI,GAAG,OAAP;AACD,OAfM;AAiBP;AACA;;;AACA,UAAI+F,QAAQ,GAAG,IAAIC,SAAJ,EAAf;AACAD,MAAAA,QAAQ,CAAC3Q,IAAT,GAAgBA,IAAhB;AACA2Q,MAAAA,QAAQ,CAAC/F,IAAT,GAAgBA,IAAhB;AACA+F,MAAAA,QAAQ,CAACN,QAAT;AACD;AACF,GAzBD;AA0BD,CAjCmB,EAApB;;AAmCA/N,QAAQ,CAACyD,GAAT,GAAe,UAAS2F,CAAT,EAAY;AACzBrJ,EAAAA,CAAC,CAACC,QAAF,CAAW+N,QAAX,CAAoBD,KAAK,CAAC5U,KAAN,CAAYE,GAAhC,EAAqCgQ,CAArC;AACD,CAFD;;AAIApJ,QAAQ,CAACuB,IAAT,GAAgB,UAAS6H,CAAT,EAAY;AAC1BrJ,EAAAA,CAAC,CAACC,QAAF,CAAW+N,QAAX,CAAoBD,KAAK,CAAC5U,KAAN,CAAYG,IAAhC,EAAsC+P,CAAtC;AACD,CAFD;;AAIApJ,QAAQ,CAACC,KAAT,GAAiB,UAASmJ,CAAT,EAAY;AAC3BrJ,EAAAA,CAAC,CAACC,QAAF,CAAW+N,QAAX,CAAoBD,KAAK,CAAC5U,KAAN,CAAYI,KAAhC,EAAuC8P,CAAvC;AACD,CAFD;;AAIA,SAASmF,WAAT,CAAqB/R,IAArB,EAA2B;AACzB,MAAGA,IAAI,YAAYiG,QAAnB,EAA6B;AAC3B,WAAO5J,OAAO,CAACG,SAAf;AACD;;AACD,MAAGwD,IAAI,YAAYgS,UAAnB,EAA+B;AAC7B,WAAO3V,OAAO,CAACC,WAAf;AACD;;AACD,MAAG0D,IAAI,YAAYyF,WAAnB,EAAgC;AAC9B,WAAOpJ,OAAO,CAACE,YAAf;AACD;;AACD,SAAOF,OAAO,CAACI,OAAf;AACD;;AAED+G,QAAQ,CAACyO,eAAT,GAA2B,YAAW;AACpC,MAAIC,UAAU,GAAGC,GAAG,CAACC,OAArB;AACA,MAAI/L,IAAI,GAAG,EAAX,CAFoC;;AAIpC,OAAI,IAAI1I,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIuU,UAAU,CAACG,QAA/B,EAAyC1U,CAAC,EAA1C,EAA8C;AAC5C,QAAI2U,QAAQ,GAAGJ,UAAU,CAAClS,IAAX,CAAgBrC,CAAhB,CAAf;AACA,QAAIuD,IAAI,GAAG6Q,WAAW,CAACO,QAAD,CAAtB;;AACA,QAAGpR,IAAI,KAAK7E,OAAO,CAACG,SAApB,EAA+B;AAC7B6J,MAAAA,IAAI,CAAClI,IAAL,CAAU;AACRmH,QAAAA,EAAE,EAAEgN,QAAQ,CAAChN,EADL;AAER5E,QAAAA,IAAI,EAAE4R,QAAQ,CAAC5R,IAFP;AAGRsB,QAAAA,KAAK,EAAEsQ,QAAQ,CAACtQ,KAHR;AAIRqB,QAAAA,MAAM,EAAEiP,QAAQ,CAACjP,MAJT;AAKRnC,QAAAA,IAAI,EAAJA;AALQ,OAAV;AAOD;AACF;;AACDqC,EAAAA,CAAC,CAACC,QAAF,CAAW+N,QAAX,CAAoB7U,KAAK,CAACC,IAA1B,EAAgC0J,IAAhC;AACD,CAlBD;;AAoBA,SAASkM,mBAAT,CAA6BjN,EAA7B,EAAiC;AAC/B,OAAI,IAAI3H,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIwU,GAAG,CAACC,OAAJ,CAAYC,QAAhC,EAA0C1U,CAAC,EAA3C,EAA+C;AAC7C,QAAM2U,QAAQ,GAAGH,GAAG,CAACC,OAAJ,CAAYpS,IAAZ,CAAiBrC,CAAjB,CAAjB;;AACA,QAAG2U,QAAQ,CAAChN,EAAT,KAAgBA,EAAnB,EAAuB;AACrB,aAAOgN,QAAP;AACD;AACF;;AACD,SAAO,IAAP;AACD;;AAED9O,QAAQ,CAACgP,OAAT,GAAmB,UAASlN,EAAT,EAAa;AAC9B/B,EAAAA,CAAC,CAACC,QAAF,CAAWC,KAAX,CAAiB,OAAjB;AACA,MAAIN,WAAW,GAAGoP,mBAAmB,CAACjN,EAAD,CAArC;;AACA,MAAG,CAACnC,WAAJ,EAAiB;AACfI,IAAAA,CAAC,CAACC,QAAF,CAAWC,KAAX,CAAiB,uBAAjB;AACAF,IAAAA,CAAC,CAACC,QAAF,CAAW+N,QAAX,CAAoBD,KAAK,CAAC5U,KAAN,CAAYM,MAAhC;AACA;AACD,GAP6B;;;AAS9B,MAAI8C,GAAG,GAAGqH,OAAK,CAAChE,WAAD,CAAf;AACAI,EAAAA,CAAC,CAACC,QAAF,CAAW+N,QAAX,CAAoBD,KAAK,CAAC5U,KAAN,CAAYK,MAAhC,EAAwCyV,OAAO,CAAC1S,GAAD,CAA/C,EAV8B;;AAY9ByD,EAAAA,CAAC,CAACC,QAAF,CAAWiP,OAAX;AACAlP,EAAAA,CAAC,CAACC,QAAF,CAAWC,KAAX,CAAiB,QAAjB;AACD,CAdD;;AAgBA,IAAI4C,IAAI,GAAG,EAAX;;AACA7C,QAAQ,CAACkP,OAAT,GAAmB,UAAS9U,CAAT,EAAY;AAC7ByI,EAAAA,IAAI,CAAClI,IAAL,CAAUP,CAAV;AACD,CAFD;;AAGA4F,QAAQ,CAACiP,OAAT,GAAmB,YAAW;AAC5B,SAAMpM,IAAI,CAAC3D,MAAX,EAAmB;AACjB2D,IAAAA,IAAI,CAACsM,GAAL,GAAWC,MAAX;AACD;AACF,CAJD;;AAMApP,QAAQ,UAAR,GAAkB,UAASsI,IAAT,EAAe;AAC/BvI,EAAAA,CAAC,CAACC,QAAF,CAAWC,KAAX,CAAiB,QAAjB;AACAF,EAAAA,CAAC,CAACC,QAAF,CAAWyD,GAAX,CAAe6E,IAAf;AACA,MAAInG,IAAI,GAAGkN,IAAI,CAACC,UAAL,EAAX;;AACA,MAAG,CAACnN,IAAJ,EAAU;AACR;AACD;;AACA,MAAIoN,MAAJ,CAAWpN,IAAX,CAAD,CAAmBqN,MAAnB;AACA,MAAIC,CAAC,GAAG,IAAIJ,IAAJ,CAASlN,IAAI,CAACC,MAAL,GAAc,OAAvB,CAAR;AACAqN,EAAAA,CAAC,CAACC,IAAF,CAAO,GAAP;AACAD,EAAAA,CAAC,CAACE,QAAF,GAAa,OAAb;AACAF,EAAAA,CAAC,CAACG,KAAF,CAAQtH,IAAR;AACAmH,EAAAA,CAAC,CAACI,KAAF;AACD,CAbD;;"}