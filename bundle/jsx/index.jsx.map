{"version":3,"file":"index.jsx","sources":["../../es/enums.js","../../es/parse/transform.js","../../es/parse/vector.js","../../es/render.js","../../es/parse/index.js","../../es/convert/path.js","../../es/math.js","../../es/easing.js","../../es/convert/animate.js","../../src/util/animation.js","../../es/convert/camera.js","../../es/convert/index.js","../../es/json.js","../../es/index.js"],"sourcesContent":["export default {\n  ES_TYPE: {\n    FOLDER_ITEM: 'FolderItem',\n    FOOTAGE_ITEM: 'FootageItem',\n    COMP_ITEM: 'CompItem',\n    UNKNOWN: 'unknown',\n  },\n  EVENT: {\n    INIT: 'ae2karas:init',\n    LOG: 'ae2karas:log',\n    WARN: 'ae2karas:warn',\n    ERROR: 'ae2karas:error',\n    FINISH: 'ae2karas:finish',\n    CANCEL: 'ae2karas:cancel',\n    ADD_TEMP: 'ae2karas:addTemp',\n    DEL_TEMP: 'ae2karas:delTemp',\n  },\n};\n","const LAYER_TRANSFORM = {\n  'ADBE Anchor Point': 'anchorPoint',\n  'ADBE Position': 'position',\n  'ADBE Position_0': 'position_0',\n  'ADBE Position_1': 'position_1',\n  'ADBE Position_2': 'position_2',\n  'ADBE Scale': 'scale',\n  'ADBE Orientation': 'orientation',\n  'ADBE Rotate X': 'rotateX',\n  'ADBE Rotate Y': 'rotateY',\n  'ADBE Rotate Z': 'rotateZ',\n  'ADBE Opacity': 'opacity',\n};\n\nconst VECTOR_TRANSFORM = {\n  'ADBE Vector Anchor': 'anchorPoint',\n  'ADBE Vector Position': 'position',\n  'ADBE Vector Scale': 'scale',\n  'ADBE Vector Skew': 'skew',\n  'ADBE Vector Skew Axis': 'skewAxis',\n  'ADBE Vector Rotation': 'rotateZ',\n  'ADBE Vector Group Opacity': 'opacity',\n  'ADBE Vector Trim Start': 'start',\n  'ADBE Vector Trim End': 'end',\n};\n\nconst MASK_TRANSFORM = {\n  'ADBE Mask Shape': 'points',\n  'ADBE Mask Opacity': 'opacity',\n};\n\nfunction getPropertyValues(prop, matchName, noEasing) {\n  let { numKeys } = prop;\n  // 根据关键帧数量，2+帧是普通变化，1帧等同于0帧value\n  if(numKeys && numKeys > 1) {\n    let arr = [];\n    for(let i = 1; i <= numKeys; i++) {\n      // 特殊的曲线位移动画用translatePath表示\n      if(i !== numKeys && (matchName === 'ADBE Position' || matchName === 'ADBE Vector Position')) {\n        let v1 = prop.keyValue(i), v2 = prop.keyValue(i + 1);\n        let c1 = prop.keyOutSpatialTangent(i), c2 = prop.keyInSpatialTangent(i + 1);\n        // y = kx + b，看是否有曲线，没有忽略\n        let x1 = v1[0], y1 = v1[1], x2 = v2[0], y2 = v2[1];\n        // 有z失效，因为是3d空间变换\n        let isZ = v1.length > 2 && v1[2] || v2.length > 2 && v2[2];\n        if((x1 !== x2 || y1 !== y2) && !isZ && (c1[0] !== 0 || c1[1] !== 0 || c2[0] !== 0 || c2[1] !== 0)) {\n          let p1 = [v1[0] + c1[0], v1[1] + c1[1]], p2 = [v2[0] + c2[0], v2[1] + c2[1]];\n          // 垂直特殊情况\n          if(x1 === 0 && x2 === 0) {\n            if(Math.abs(c1[0]) >= 1 || Math.abs(c2[0]) >= 1) {\n              let o = {\n                time: prop.keyTime(i) * 1000,\n                value: [x1, y1, p1[0], p1[1], p2[0], p2[1], x2, y2],\n              };\n              if(i !== numKeys && !noEasing) {\n                let e = getEasing(prop, i, i + 1);\n                if(e) {\n                  o.easing = e;\n                }\n              }\n              arr.push(o);\n              continue;\n            }\n          }\n          // 二元一次方程\n          else {\n            let k, b;\n            if(x1 === 0) {\n              b = y1;\n              k = (y2 - b) / x2;\n            }\n            else if(x2 === 0) {\n              b = y2;\n              k = (y1 - b) / x1;\n            }\n            else {\n              let r = x1 / x2;\n              b = (y1 - y2 * r) / (1 - r);\n              k = (y1 - b) / x1;\n            }\n            // 精度小于一定认为无效\n            let is1 = Math.abs(k * p1[0] + b - p1[1]) >= 1;\n            let is2 = Math.abs(k * p2[0] + b - p2[1]) >= 1;\n            if(is1 || is2) {\n              let o = {\n                time: prop.keyTime(i) * 1000,\n                value: [x1, y1, p1[0], p1[1], p2[0], p2[1], x2, y2],\n              };\n              if(i !== numKeys && !noEasing) {\n                let e = getEasing(prop, i, i + 1);\n                if(e) {\n                  o.easing = e;\n                }\n              }\n              arr.push(o);\n              continue;\n            }\n          }\n        }\n      }\n      let o = {\n        time: prop.keyTime(i) * 1000,\n        value: prop.keyValue(i),\n      };\n      if(i !== numKeys && !noEasing) {\n        let e = getEasing(prop, i, i + 1);\n        if(e) {\n          o.easing = e;\n        }\n        if(matchName === 'ADBE Position'\n          && (prop.keyValue(i)[2] || prop.keyValue(i + 1)[2])\n          && prop.keyValue(i)[2] !== prop.keyValue(i + 1)[2]) {\n          let e = getEasing(prop, i, i + 1, true);\n          if(e) {\n            o.easing2 = e;\n          }\n        }\n      }\n      arr.push(o);\n    }\n    return arr;\n  }\n  else if(numKeys && numKeys > 0) {\n    return [prop.keyValue(1)];\n  }\n  else {\n    return [prop.value];\n  }\n}\n\n/**\n * https://www.zhihu.com/question/24404065\n * 柄点1的X值 = 关键帧1的影响值/100\n * 柄点1的Y值 = 关键帧1的输出速度/两关键帧平均速度*柄点1的X值\n * 柄点2的X值 = 1 - 关键帧2的影响值/100\n * 柄点2的Y值 = 1 - 关键帧2的输入速度/两关键帧平均速度*柄点2的X值\n * @param prop\n * @param start\n * @param end\n * @param isZ\n */\nfunction getEasing(prop, start, end, isZ) {\n  let t1 = prop.keyTime(start), t2 = prop.keyTime(end);\n  let v1 = prop.keyValue(start), v2 = prop.keyValue(end);\n  let e1 = prop.keyOutTemporalEase(start)[0], e2 = prop.keyInTemporalEase(end)[0];\n  // let c1 = prop.keyOutSpatialTangent(start), c2 = prop.keyInSpatialTangent(end);\n  // $.ae2karas.warn(t1);\n  // $.ae2karas.warn(t2);\n  // $.ae2karas.warn(isZ);\n  // $.ae2karas.log(v1);\n  // $.ae2karas.log(v2);\n  // $.ae2karas.log(e1);\n  // $.ae2karas.log(e2);\n  // $.ae2karas.log(c1);\n  // $.ae2karas.log(c2);\n  let interpolationType = '';\n  if(prop.keyOutInterpolationType(start) === KeyframeInterpolationType.LINEAR\n    && prop.keyOutInterpolationType(end) === KeyframeInterpolationType.LINEAR) {\n    interpolationType = 'linear';\n  }\n  let x1 = e1.influence * 0.01, x2 = 1 - e2.influence * 0.01;\n  let y1, y2;\n  let matchName = prop.matchName;\n  if([\n    'ADBE Anchor Point', 'ADBE Position',\n    'ADBE Vector Anchor', 'ADBE Vector Position',\n    'ADBE Scale', 'ADBE Vector Scale',\n    'ADBE Vector Skew'].indexOf(matchName) > -1) {\n    let avSpeedX = Math.abs(v2[0] - v1[0]) / (t2 - t1);\n    let avSpeedY = Math.abs(v2[1] - v1[1]) / (t2 - t1);\n    if(isZ) {\n      avSpeedY = Math.abs(v2[2] - v1[2]) / (t2 - t1);\n    }\n    let avSpeed = Math.sqrt(avSpeedX * avSpeedX + avSpeedY * avSpeedY);\n    if(v2.length > 2 && v1.length > 2) {\n      let avSpeedZ = Math.abs(v2[2] - v1[2]) / (t2 - t1);\n      avSpeed = Math.sqrt(avSpeedX * avSpeedX + avSpeedY * avSpeedY + avSpeedZ * avSpeedZ);\n    }\n    if(avSpeed !== 0) {\n      y1 = x1 * e1.speed / avSpeed;\n      // y2 = 1 - (1 - x2) * e2.speed / avSpeed;\n      y2 = 1 - x2 * e2.speed / avSpeed;\n    }\n  }\n  else if(v2 !== v1) {\n    let avSpeed = Math.abs(v2 - v1) / (t2 - t1);\n    y1 = x1 * e1.speed / avSpeed;\n    // y2 = 1 - (1 - x2) * e2.speed / avSpeed;\n    y2 = 1 - x2 * e2.speed / avSpeed;\n  }\n  if(x1 === y1 && x2 === y2 || y1 === undefined || y2 === undefined) {\n    return;\n  }\n  x1 = Math.max(x1, 0);\n  x1 = Math.min(x1, 1);\n  x2 = Math.max(x2, 0);\n  x2 = Math.min(x2, 1);\n  if(interpolationType === 'linear') {\n    y1 = x1;\n    y2 = x2;\n  }\n  return [x1, y1, x2, y2];\n}\n\nexport function transformLayer(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(LAYER_TRANSFORM.hasOwnProperty(matchName)) {\n        res[LAYER_TRANSFORM[matchName]] = getPropertyValues(item, matchName, false);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformVector(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(VECTOR_TRANSFORM.hasOwnProperty(matchName)) {\n        res[VECTOR_TRANSFORM[matchName]] = getPropertyValues(item, matchName, false);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformMask(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(MASK_TRANSFORM.hasOwnProperty(matchName)) {\n        res[MASK_TRANSFORM[matchName]] = getPropertyValues(item, matchName, true);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformGeom(prop) {\n  return getPropertyValues(prop, '', true);\n}\n","import { transformVector, transformGeom } from './transform';\n\nfunction group(prop, navigationShapeTree) {\n  let res = {};\n  // 这里是矩形1层，主要关注Groups属性即可，blendMode暂时无视，transform被上钻2层提前\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vectors Group':\n          res.content = content(item, navigationShapeTree);\n          break;\n        case 'ADBE Vector Transform Group':\n          // 奇怪的地方，显示应该下钻2层到如rect同级，可实际提前了\n          res.transform = transformVector(item);\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  res.content.transform = res.transform;\n  return res.content;\n}\n\nfunction content(prop, navigationShapeTree) {\n  // 矩形1下面会多出一层内容层看不见，就是本层，其下面则是可视的子属性层\n  let res = {\n    name: prop.name,\n    content: [],\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vector Shape - Rect':\n          res.content.push(rect(item));\n          break;\n        case 'ADBE Vector Shape - Ellipse':\n          res.content.push(ellipse(item));\n          break;\n        case 'ADBE Vector Shape - Star':\n          res.content.push(star(item));\n          break;\n        case 'ADBE Vector Shape - Group':\n          res.content.push(path(item));\n          break;\n        case 'ADBE Vector Graphic - Stroke':\n          res.stroke = stroke(item);\n          break;\n        case 'ADBE Vector Graphic - Fill':\n          res.fill = fill(item);\n          break;\n        case 'ADBE Vector Graphic - G-Fill':\n          res.gFill = gFill(item, navigationShapeTree);\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  return res;\n}\n\nfunction rect(prop) {\n  // 矩形路径层\n  let res = {\n    type: 'rect',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Rect Size':\n          res.size = transformGeom(item);\n          break;\n        case 'ADBE Vector Rect Position':\n          res.position = transformGeom(item);\n          break;\n        case 'ADBE Vector Rect Roundness':\n          res.roundness = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction ellipse(prop) {\n  let res = {\n    type: 'ellipse',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Ellipse Size':\n          res.size = transformGeom(item);\n          break;\n        case 'ADBE Vector Ellipse Position':\n          res.position = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction star(prop) {\n  let res = {\n    type: 'star',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Star Type':\n          res.starType = item.value;\n          break;\n        case 'ADBE Vector Star Points':\n          res.points = item.value;\n          break;\n        case 'ADBE Vector Star Position':\n          res.position = item.value;\n          break;\n        case 'ADBE Vector Star Inner Radius':\n          res.innerRadius = item.value;\n          break;\n        case 'ADBE Vector Star Outer Radius':\n          res.outerRadius = item.value;\n          break;\n        case 'ADBE Vector Star Inner Roundess':\n          res.innerRoundness = item.value;\n          break;\n        case 'ADBE Vector Star Outer Roundess':\n          res.outerRoundness = item.value;\n          break;\n        case 'ADBE Vector Star Rotation':\n          res.rotation = item.value;\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction stroke(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Stroke Color':\n          res.color = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Opacity':\n          res.opacity = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Width':\n          res.width = transformGeom(item);\n          break;\n        case 'ADBE Vector Line Cap':\n          res.lineCap = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Line Join':\n          res.lineJoin = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Miter Limit':\n          res.miterLimit = transformGeom(item);\n          break;\n        // case 'ADBE Vector Stroke Dashes':\n        //   res.dashes = dash(item);\n        //   break;\n      }\n    }\n  }\n  // 特殊的获取虚线样式\n  let dashes = prop.property('Dashes');\n  if(dashes) {\n    let d = [];\n    let g = [];\n    for(let i = 1; i <= dashes.numProperties; i++) {\n      let item = dashes.property(i);\n      if(item && item.enabled) {\n        let matchName = item.matchName;\n        if(item.canSetExpression) {\n          if(matchName.indexOf('ADBE Vector Stroke Dash') > -1) {\n            let j = /\\d+/.exec(matchName);\n            d[j[0] - 1] = item.value;\n          }\n          else if(matchName.indexOf('ADBE Vector Stroke Gap') > -1) {\n            let j = /\\d+/.exec(matchName);\n            g[j[0] - 1] = item.value;\n          }\n        }\n      }\n    }\n    if(d.length) {\n      let v = [];\n      for(let i = 0, len = d.length; i < len; i++) {\n        v.push(d[i]);\n        if(g[i] === undefined) {\n          v.push(d[i]);\n        }\n        else {\n          v.push(g[i]);\n        }\n      }\n      res.dashes = v;\n    }\n  }\n  return res;\n}\n\nfunction path(prop) {\n  let res = {\n    type: 'path',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Shape':\n          res.points = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction fill(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Fill Rule':\n          res.rule = item.value;\n          break;\n        case 'ADBE Vector Fill Color':\n          res.color = transformGeom(item);\n          break;\n        case 'ADBE Vector Fill Opacity':\n          res.opacity = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction gFill(prop, navigationShapeTree) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vector Composite Order':\n          break;\n        case 'ADBE Vector Fill Rule':\n          res.rule = item.value;\n          break;\n        case 'ADBE Vector Grad Type':\n          res.type = item.value;\n          break;\n        case 'ADBE Vector Grad Start Pt':\n          res.start = item.value;\n          break;\n        case 'ADBE Vector Grad End Pt':\n          res.end = item.value;\n          break;\n        case 'ADBE Vector Grad Colors':\n          res.colors = gradient(item, navigationShapeTree);\n          break;\n        case 'ADBE Vector Fill Opacity':\n          res.opacity = item.value;\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  return res;\n}\n\nfunction gradient(prop, navigationShapeTree) {\n  let numKeys = prop.numKeys || 1;\n  let ff = app.project.file;\n  if(ff) {\n    let demoFile = new File(ff.absoluteURI);\n    demoFile.open('r', 'TEXT', '????');\n    let fileString = demoFile.read(demoFile.length);\n    fileString = fileString\n      .replace('渐变填充', 'Gradient Fill')\n      .replace('渐变描边', 'Gradient Stroke');\n    let hasNoGradColorData = false;\n    if(fileString.indexOf('ADBE Vector Grad Colors') === -1) {\n      hasNoGradColorData = true;\n    }\n\n    let gradientIndex = 0, navigationIndex = 0;\n    let i = 0, len = navigationShapeTree.length;\n    while(i < len) {\n      let encoded = unescape(encodeURIComponent(navigationShapeTree[i] + 'LIST'));\n      let stringIndex = fileString.indexOf(encoded, navigationIndex + 1);\n      if(stringIndex === -1) {\n        encoded = unescape(encodeURIComponent(navigationShapeTree[i] + ' LIST'));\n        stringIndex = fileString.indexOf(encoded, navigationIndex + 1);\n      }\n      if(stringIndex === -1) {\n        encoded = unescape(encodeURIComponent(navigationShapeTree[i]));\n        stringIndex = fileString.indexOf(encoded, navigationIndex + 1);\n      }\n      navigationIndex = stringIndex;\n      i += 1;\n    }\n    gradientIndex = fileString.indexOf('ADBE Vector Grad Colors', navigationIndex);\n    let gradFillIndex = fileString.indexOf('ADBE Vector Graphic - G-Fill', navigationIndex);\n    let gradStrokeIndex = fileString.indexOf('ADBE Vector Graphic - G-Stroke', navigationIndex);\n    let limitIndex;\n    if(gradStrokeIndex !== -1 && gradFillIndex !== -1) {\n      limitIndex = Math.min(gradFillIndex, gradStrokeIndex);\n    }\n    else {\n      limitIndex = Math.max(gradFillIndex, gradStrokeIndex);\n    }\n    if(limitIndex === -1) {\n      limitIndex = Number.MAX_VALUE;\n    }\n    let lastIndex;\n    let currentKey = 0, keyframes = [], hasOpacity = false, maxOpacities = 0, maxColors = 0;\n    while(currentKey < numKeys) {\n      let gradientData = {};\n      gradientIndex = fileString.indexOf('<prop.map', gradientIndex);\n      if(hasNoGradColorData || gradientIndex > limitIndex || (gradientIndex === -1 && limitIndex === Number.MAX_VALUE)) {\n        gradientData.c = [[0, 1, 1, 1], [1, 0, 0, 0]];\n        maxColors = Math.max(maxColors, 2);\n      }\n      else {\n        let endMatch = '</prop.map>';\n        lastIndex = fileString.indexOf(endMatch, gradientIndex);\n        let xmlString = fileString.substr(gradientIndex, lastIndex + endMatch.length - gradientIndex);\n        xmlString = xmlString.replace(/\\n/g, '');\n        let XML_Ob = new XML(xmlString);\n        let stops = XML_Ob['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'];\n        let colors = XML_Ob['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'][1]['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'];\n        i = 0;\n        len = stops.length();\n        let opacitiesArr = [], op, floats, nextFloats, midPoint, midPosition;\n        while(i < len) {\n          floats = stops[i]['prop.list'][0]['prop.pair'][0]['array'][0].float;\n          op = [];\n          op.push(roundNumber(Number(floats[0].toString()), 3));\n          op.push(roundNumber(Number(floats[2].toString()), 3));\n          if(op[1] !== 1) {\n            hasOpacity = true;\n          }\n          opacitiesArr.push(op);\n          midPosition = roundNumber(Number(floats[1].toString()), 3);\n          if(i < len - 1 /*&& midPosition !== 0.5*/) {\n            op = [];\n            nextFloats = stops[i + 1]['prop.list'][0]['prop.pair'][0]['array'][0].float;\n            midPoint = Number(floats[0].toString()) + (Number(nextFloats[0].toString()) - Number(floats[0].toString())) * midPosition;\n            let midPointValue = Number(floats[2].toString()) + (Number(nextFloats[2].toString()) - Number(floats[2].toString())) * 0.5;\n            op.push(roundNumber(midPoint, 3));\n            op.push(roundNumber(midPointValue, 3));\n            opacitiesArr.push(op);\n          }\n          i += 1;\n        }\n        i = 0;\n        len = colors.length();\n        let colorsArr = [];\n        let sortedColors = [];\n        while(i < len) {\n          sortedColors.push(colors[i]['prop.list'][0]['prop.pair'][0]['array'][0].float);\n          i += 1;\n        }\n\n        sortedColors.sort(sortFunction);\n\n        i = 0;\n\n        while(i < len) {\n          floats = sortedColors[i];\n          op = [];\n          op.push(roundNumber(Number(floats[0].toString()), 3));\n          op.push(roundNumber(Number(floats[2].toString()), 3));\n          op.push(roundNumber(Number(floats[3].toString()), 3));\n          op.push(roundNumber(Number(floats[4].toString()), 3));\n          colorsArr.push(op);\n          midPosition = roundNumber(Number(floats[1].toString()), 3);\n          if(i < len - 1 /*&& midPosition !== 0.5*/) {\n            op = [];\n            nextFloats = sortedColors[i + 1];\n            midPoint = Number(floats[0].toString()) + (Number(nextFloats[0].toString()) - Number(floats[0].toString())) * midPosition;\n            let midPointValueR = Number(floats[2].toString()) + (Number(nextFloats[2].toString()) - Number(floats[2].toString())) * 0.5;\n            let midPointValueG = Number(floats[3].toString()) + (Number(nextFloats[3].toString()) - Number(floats[3].toString())) * 0.5;\n            let midPointValueB = Number(floats[4].toString()) + (Number(nextFloats[4].toString()) - Number(floats[4].toString())) * 0.5;\n            op.push(roundNumber(midPoint, 3));\n            op.push(roundNumber(midPointValueR, 3));\n            op.push(roundNumber(midPointValueG, 3));\n            op.push(roundNumber(midPointValueB, 3));\n            colorsArr.push(op);\n          }\n          i += 1;\n        }\n        gradientData.c = colorsArr;\n        gradientData.o = opacitiesArr;\n        maxOpacities = Math.max(maxOpacities, opacitiesArr.length);\n        maxColors = Math.max(maxColors, colorsArr.length);\n      }\n\n      gradientIndex = lastIndex;\n\n      keyframes.push(gradientData);\n      currentKey += 1;\n    }\n    i = 0;\n    let arr, arrayLength, count, lastValue, offsetValue, mergedKeys = [], mergedArr, j;\n    while(i < numKeys) {\n      mergedArr = [];\n      if(keyframes[i].c.length < maxColors) {\n        arr = keyframes[i].c;\n        arrayLength = arr.length;\n        lastValue = arr[arrayLength - 1];\n        offsetValue = lastValue[0];\n        count = 0;\n        while(arrayLength + count < maxColors) {\n          offsetValue -= 0.001;\n          arr.splice(arrayLength - 1, 0, [offsetValue, lastValue[1], lastValue[2], lastValue[3]]);\n          count += 1;\n        }\n      }\n      for(j = 0; j < maxColors; j += 1) {\n        for(let k = 0; k < 4; k += 1) {\n          mergedArr.push(keyframes[i].c[j][k]);\n        }\n      }\n      if(!hasOpacity) {\n        delete keyframes[i].o;\n      }\n      else {\n        if(keyframes[i].o.length < maxOpacities) {\n          arr = keyframes[i].o;\n          arrayLength = arr.length;\n          lastValue = arr[arrayLength - 1];\n          offsetValue = lastValue[0];\n          count = 0;\n          while(arrayLength + count < maxOpacities) {\n            offsetValue -= 0.001;\n            arr.splice(arrayLength - 1, 0, [offsetValue, lastValue[1], lastValue[2], lastValue[3]]);\n            count += 1;\n          }\n        }\n        for(j = 0; j < maxOpacities; j += 1) {\n          for(let l = 0; l < 2; l += 1) {\n            mergedArr.push(keyframes[i].o[j][l]);\n          }\n        }\n      }\n      if(numKeys <= 1) {\n        mergedKeys = mergedArr;\n      }\n      else {\n        mergedKeys.push(mergedArr);\n      }\n      i += 1;\n    }\n    return {\n      m: mergedKeys,\n      p: maxColors\n    };\n  }\n}\n\nfunction roundNumber(num, decimals) {\n  num = num || 0;\n  if(typeof num === 'number') {\n    return parseFloat(num.toFixed(decimals));\n  }\n  else {\n    return roundArray(num, decimals);\n  }\n}\n\nfunction roundArray(arr, decimals) {\n  var i, len = arr.length;\n  var retArray = [];\n  for(i = 0; i < len; i += 1) {\n    if(typeof arr[i] === 'number') {\n      retArray.push(roundNumber(arr[i], decimals));\n    }\n    else {\n      retArray.push(roundArray(arr[i], decimals));\n    }\n  }\n  return retArray;\n}\n\nfunction sortFunction(a, b) {\n  var a_0 = Number(a[0].toString())\n  var b_0 = Number(b[0].toString())\n  if(a_0 === b_0) {\n    return 0;\n  }\n  else {\n    return (a_0 < b_0) ? -1 : 1;\n  }\n}\n\nexport default function(prop, navigationShapeTree) {\n  let res = {};\n  // 这里是内容层，一般只有1个属性，如矩形1\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vector Group':\n          res.shape = group(item, navigationShapeTree);\n          break;\n        case 'ADBE Vector Filter - Trim':\n          res.trim = transformVector(item);\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  return res;\n};\n","export default {\n  psd2png(source, path, name) {\n    let helperSequenceComp = app.project.items.addComp('tempConverterComp', source.width, source.height, 1, 1, 1);\n    helperSequenceComp.layers.add(source);\n    $.ae2karas.addTemp(helperSequenceComp);\n\n    let item = app.project.renderQueue.items.add(helperSequenceComp);\n    $.ae2karas.addTemp(item);\n\n    let outputModule = item.outputModule(1);\n    outputModule.applyTemplate(\"_HIDDEN X-Factor 8 Premul\");\n    let fileName = path + name;\n    let file = new File(fileName);\n    if(file.exists) {\n      file.remove();\n    }\n    outputModule.file = new File(fileName);\n\n    item.onStatusChanged = function() {\n      // 完成后要重命名，因为ae会追加00000到文件名末尾\n      if(item.status === RQItemStatus.DONE) {\n        let bug = new File(fileName + '00000');\n        if(bug.exists) {\n          bug.rename(name);\n        }\n      }\n    };\n    app.project.renderQueue.render();\n  },\n};\n","import { transformLayer, transformMask } from './transform';\nimport vector from './vector';\nimport render from '../render';\n\nlet uuid = 0;\nlet compList = [];\n\nfunction recursion(composition, library, navigationShapeTree) {\n  let { name, layers, width, height, displayStartTime, duration } = composition;\n  $.ae2karas.error('composition: ' + name);\n  // 是否是独奏模式\n  let hasSolo;\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    if(item.solo) {\n      hasSolo = true;\n      break;\n    }\n  }\n  // 再统计哪些层被作为父级链接，asParent以索引为key是否父级链接为值，asChild以索引为key父级索引为值\n  let asParent = {}, asChild = {};\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    // mask经常为不可见状态，不能忽略掉，所以关系全部记下来，不可见layer在转化那里剔除\n    // if(hasSolo) {\n    //   if(!item.solo) {\n    //     continue;\n    //   }\n    // }\n    // else {\n    //   if(!item.enabled) {\n    //     continue;\n    //   }\n    // }\n    if(item.parent && item.parent.index) {\n      asParent[item.parent.index] = true;\n      asChild[item.index] = item.parent.index;\n    }\n  }\n  // 遍历分析图层，独奏时只看独奏图层，否则看可见图层\n  let children = [];\n  outer:\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    let index = item.index;\n    // 根据是否独奏或可见决定是否分析或跳过，被作为父级链接的即便不可见也要统计\n    if(!asParent.hasOwnProperty(index)) {\n      if(hasSolo) {\n        if(!item.solo && !item.isTrackMatte) {\n          continue;\n        }\n      }\n      else {\n        if(!item.enabled && !item.isTrackMatte) {\n          continue;\n        }\n      }\n    }\n    // mask看应用图层对象是否可见\n    if(item.isTrackMatte) {\n      for(let j = i + 1; j <= layers.length; j++) {\n        let item2 = layers[j];\n        if(!item2.isTrackMatte) {\n          if(hasSolo) {\n            if(!item2.solo) {\n              continue outer;\n            }\n            else {\n              break;\n            }\n          }\n          else {\n            if(!item2.enabled) {\n              continue outer;\n            }\n            else {\n              break;\n            }\n          }\n        }\n      }\n    }\n    let o = parseLayer(item, library, navigationShapeTree, hasSolo);\n    if(o) {\n      // 父级打标uuid的同时，之前记录的hash也记录下来\n      if(asParent.hasOwnProperty(index)) {\n        asParent[index] = o.asParent = uuid++;\n      }\n      // mask/clip类型在被遮罩层上\n      if(i > 1 && o.isClip) {\n        let last = children[children.length - 1];\n        if(last && last.isMask) {\n          last.isClip = true;\n        }\n      }\n      children.push(o);\n    }\n  }\n  // children还要遍历一遍，根据父级链接增加指向父级的字段\n  for(let i = 0; i < children.length; i++) {\n    let item = children[i];\n    let index = item.index;\n    if(asChild.hasOwnProperty(index)) {\n      item.asChild = asParent[asChild[index]];\n    }\n  }\n  children.reverse();\n  return {\n    type: 'div',\n    name,\n    width,\n    height,\n    displayStartTime: displayStartTime * 1000, // 开始时间码\n    duration: duration * 1000, // 合成的总时长\n    children,\n  };\n}\n\nfunction parseLayer(layer, library, navigationShapeTree, hasSolo) {\n  let res = {\n    name: layer.name,\n    index: layer.index,\n    width: layer.width,\n    height: layer.height,\n    startTime: layer.startTime * 1000, // 开始时间，即时间轴上本图层初始位置\n    inPoint: layer.inPoint * 1000, // 真正开始显示时间，>= startTime，可能有前置空白不显示的一段\n    outPoint: layer.outPoint * 1000, // 真正结束显示时间，<= duration绝对值，可能有后置空白不显示的一段\n    blendingMode: layer.blendingMode,\n    guide: layer.guideLayer,\n    ddd: layer.threeDLayer,\n  };\n  // 摄像机图层特殊处理，其它看遮罩\n  let matchName = layer.matchName;\n  if(matchName === 'ADBE Camera Layer') {\n    res.ddd = true;\n    res.isCamera = true;\n  }\n  else if(layer.isTrackMatte) {\n    res.isMask = true;\n    res.isClip = layer.trackMatteType === TrackMatteType.ALPHA_INVERTED\n      || layer.trackMatteType === TrackMatteType.LUMA_INVERTED;\n  }\n  navigationShapeTree.push(res.name);\n  // 标明图层是否可见，也许不可见但作为父级链接也要分析\n  if(hasSolo) {\n    res.enabled = layer.solo || layer.isTrackMatte;\n  }\n  else {\n    res.enabled = layer.enabled || layer.isTrackMatte;\n  }\n  $.ae2karas.warn('layer: ' + res.name);\n  let geom, txt;\n  for(let i = 1; i <= layer.numProperties; i++) {\n    let prop = layer.property(i);\n    if(prop && prop.enabled) {\n      let matchName = prop.matchName;\n      navigationShapeTree.push(prop.name);\n      switch(matchName) {\n        case 'ADBE Transform Group':\n          res.transform = transformLayer(prop);\n          break;\n        case 'ADBE Root Vectors Group':\n          // 形状图层中的内容子属性\n          if(res.enabled) {\n            geom = vector(prop, navigationShapeTree);\n          }\n          break;\n        case 'ADBE Mask Parade':\n          if(res.enabled) {\n            res.mask = mask(prop);\n          }\n          break;\n        case 'ADBE Text Properties':\n          if(res.enabled) {\n            txt = text(prop);\n          }\n          break;\n        case 'ADBE Camera Options Group':\n          if(res.isCamera) {\n            for(let i = 1; prop && i <= prop.numProperties; i++) {\n              let item = prop.property(i);\n              if(item && item.enabled) {\n                let matchName = item.matchName;\n                if(matchName === 'ADBE Camera Zoom') {\n                  res.cameraZoom = item.value;\n                }\n                else if(matchName === 'ADBE Camera Depth of Field') {\n                  res.cameraDepthOfField = item.value;\n                }\n                else if(matchName === 'ADBE Camera Focus Distance') {\n                  res.cameraFocusDistance = item.value;\n                }\n                else if(matchName === 'ADBE Camera Aperture') {\n                  res.cameraAperture = item.value;\n                }\n                else if(matchName === 'ADBE Camera Blur Level') {\n                  res.cameraBlurLevel = item.value;\n                }\n              }\n            }\n          }\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  // 可能是作为父级链接，如果不可见则不需要内容\n  if(res.enabled) {\n    let source = layer.source;\n    if(geom && geom.shape && geom.shape.content && geom.shape.content.length) {\n      geom.geom = true; // 特殊标识\n      geom.type = 'div';\n      geom.id = library.length;\n      library.push(geom);\n      res.assetId = geom.id;\n    }\n    else if(txt) {\n      txt.text = true; // 特殊标识\n      txt.type = 'span';\n      txt.id = library.length;\n      library.push(txt);\n      res.assetId = txt.id;\n    }\n    else if(source) {\n      let asset, hasExist;\n      // 图片图形等独立资源，将其解析为被link的放入library即可\n      if(source instanceof FootageItem) {\n        let src = source.file && source.file.fsName;\n        // 空图层偶现有source但无source.file，视作空图层\n        if(src) {\n          let name = source.name;\n          let newName;\n          let path;\n          let isPsd = /\\.psd$/.test(name) || /\\.ai$/.test(name);\n          if(isPsd) {\n            path = src.replace(/[^\\/]*\\.\\w+$/, '');\n            newName = name.replace(/[\\/.:?*<>|\\\\'\"]/g, '_') + '.png';\n            src = path + newName;\n          }\n          if(!/\\.jpg$/.test(src)\n            && !/\\.jpeg$/.test(src)\n            && !/\\.png/.test(src)\n            && !/\\.webp/.test(src)\n            && !/\\.gif/.test(src)) {\n            return;\n          }\n          for(let i = 0; i < library.length; i++) {\n            let item = library[i];\n            if(item.src === src && item.type === 'img') {\n              asset = item;\n              hasExist = true;\n              break;\n            }\n          }\n          if(!hasExist) {\n            if(isPsd) {\n              render.psd2png(source, path, newName);\n            }\n            asset = {\n              type: 'img',\n              name,\n              width: source.width,\n              height: source.height,\n              src,\n            };\n          }\n        }\n        // 颜色类型没有src\n        else {\n          asset = {\n            type: 'div',\n            width: source.width,\n            height: source.height,\n          }\n        }\n      }\n      // 合成，递归分析，需要缓存起来，防止重复使用合成生成多余的library对象\n      else if(source instanceof CompItem) {\n        // TODO，仅静态无动画可复用，否则时间轴对不齐\n        // for(let i = 0, len = compList.length; i < len; i++) {\n        //   if(source === compList[i].source) {\n        //     hasExist = true;\n        //     asset = compList[i].asset;\n        //     break;\n        //   }\n        // }\n        if(!hasExist) {\n          asset = recursion(source, library, navigationShapeTree);\n          asset.type = 'div';\n          compList.push({\n            source,\n            asset,\n          });\n        }\n      }\n      if(asset) {\n        if(!hasExist) {\n          asset.id = library.length;\n          library.push(asset);\n        }\n        res.assetId = asset.id;\n      }\n    }\n  }\n  navigationShapeTree.pop();\n  return res;\n}\n\nfunction mask(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(matchName === 'ADBE Mask Atom') {\n        if(item.maskMode !== MaskMode.NONE) {\n          res.enabled = true;\n        }\n        res.list = transformMask(item);\n        res.mode = item.maskMode;\n        res.inverted = item.inverted;\n      }\n    }\n  }\n  return res;\n}\n\nfunction text(prop) {\n  let res = {\n    name: prop.name,\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Text Document':\n          let value = item.value;\n          res.content = {\n            font: value.font,\n            fontFamily: value.fontFamily,\n            fontStyle: value.fontStyle,\n            fontSize: value.fontSize,\n            leading: value.leading,\n            baselineLocs: value.baselineLocs,\n            text: value.text,\n          };\n          if(value.applyFill) {\n            res.content.fillColor = value.fillColor;\n            res.content.strokeOver = value.strokeOverFill;\n          }\n          if(value.applyStroke) {\n            res.content.stroke = value.strokeColor;\n            res.content.strokeWidth = value.strokeWidth;\n          }\n          // 固定已知尺寸时有\n          if(value.boxText) {\n            res.content.size = value.boxTextSize;\n            res.content.position = value.boxTextPos;\n          }\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nexport default function(composition) {\n  $.ae2karas.error('parse');\n  compList.splice(0);\n  // 递归遍历合成，转换ae的图层为普通js对象\n  let { workAreaStart, workAreaDuration } = composition;\n  workAreaStart *= 1000;\n  workAreaDuration *= 1000;\n  $.ae2karas.log('workArea: ' + workAreaStart + ',' + workAreaDuration);\n  let library = [], navigationShapeTree = [];\n  let result = recursion(composition, library, navigationShapeTree);\n  $.ae2karas.log(result);\n  $.ae2karas.log(library);\n  return {\n    workAreaStart,\n    workAreaDuration,\n    result,\n    library,\n  };\n}\n","export default {\n  parse(vertices, inTangents, outTangents, closed, x1, y1, x2, y2) {\n    if(x1 === undefined) {\n      x1 = x2 = vertices[0][0];\n      y1 = y2 = vertices[0][1];\n      // 控制点是相对于顶点的坐标\n      let it = inTangents[0], ot = outTangents[0];\n      if(it[0]) {\n        x1 = Math.max(x1, x1 + it[0]);\n        x2 = Math.min(x2, x1 + it[0]);\n      }\n      if(it[1]) {\n        y1 = Math.max(y1, y1 + it[1]);\n        y2 = Math.min(y2, y1 + it[1]);\n      }\n      if(ot[0]) {\n        x1 = Math.max(x1, x1 + ot[0]);\n        x2 = Math.min(x2, x1 + ot[0]);\n      }\n      if(ot[1]) {\n        y1 = Math.max(y1, y1 + ot[1]);\n        y2 = Math.min(y2, y1 + ot[1]);\n      }\n      // 循环获取极值\n      for(let i = 1, len = vertices.length; i < len; i++) {\n        let item = vertices[i];\n        x1 = Math.max(x1, item[0]);\n        y1 = Math.max(y1, item[1]);\n        x2 = Math.min(x2, item[0]);\n        y2 = Math.min(y2, item[1]);\n        // 控制点是相对于顶点的坐标\n        let it = inTangents[i], ot = outTangents[i];\n        if(it[0]) {\n          x1 = Math.max(x1, item[0] + it[0]);\n          x2 = Math.min(x2, item[0] + it[0]);\n        }\n        if(it[1]) {\n          y1 = Math.max(y1, item[1] + it[1]);\n          y2 = Math.min(y2, item[1] + it[1]);\n        }\n        if(ot[0]) {\n          x1 = Math.max(x1, item[0] + ot[0]);\n          x2 = Math.min(x2, item[0] + ot[0]);\n        }\n        if(ot[1]) {\n          y1 = Math.max(y1, item[1] + ot[1]);\n          y2 = Math.min(y2, item[1] + ot[1]);\n        }\n      }\n    }\n    let w = x1 - x2, h = y1 - y2;\n    let pts = [], cts = [];\n    for(let i = 0, len = vertices.length; i < len; i++) {\n      let item = vertices[i];\n      pts.push([\n        (item[0] - x2) / w,\n        (item[1] - y2) / h,\n      ]);\n      let it = inTangents[i], ot = outTangents[i];\n      // 上一个顶点到本顶点，即便控制点为空也要填补为顶点数据，为2帧之间动画过渡考虑\n      let j = i - 1;\n      if(j === -1) {\n        j = len - 1;\n      }\n      cts[j] = cts[j] || [];\n      cts[j].push((vertices[i][0] + it[0] - x2) / w);\n      cts[j].push((vertices[i][1] + it[1] - y2) / h);\n      // 本顶点到下一个顶点，最后一个比较特殊是到第一个，需要调整顺序\n      cts[i] = cts[i] || [];\n      let x = (vertices[i][0] + ot[0] - x2) / w, y = (vertices[i][1] + ot[1] - y2) / h;\n      if(i === len - 1) {\n        cts[i].unshift(y);\n        cts[i].unshift(x);\n      }\n      else {\n        cts[i].push(x);\n        cts[i].push(y);\n      }\n    }\n    if(closed) {\n      pts.push(pts[0].slice(0));\n    }\n    return {\n      x1,\n      y1,\n      x2,\n      y2,\n      width: w,\n      height: h,\n      points: pts,\n      controls: cts,\n    };\n  },\n  rect2polyline(width, height, roundness) {\n    roundness = roundness || 0;\n    let r = Math.min(width, height) * 0.5;\n    roundness = Math.min(roundness, r);\n    let pts = [], cts = [];\n    if(roundness && roundness > 0) {\n      let h = roundness * 0.5522847498307936;\n      pts.push([(width - roundness) / width, 0]);\n      cts.push([(width - roundness + h) / width, 0, 1, (roundness - h) / height]);\n      pts.push([1, roundness / height]);\n      cts.push([]);\n      pts.push([1, (height - roundness) / height]);\n      cts.push([1, (height - roundness + h) / height, (width - roundness + h) / width, 1]);\n      pts.push([(width - roundness) / width, 1]);\n      cts.push([]);\n      pts.push([roundness / width, 1]);\n      cts.push([(roundness - h) / width, 1, 0, (height - roundness + h) / height]);\n      pts.push([0, (height - roundness) / height]);\n      cts.push([]);\n      pts.push([0, roundness / height]);\n      cts.push([0, (roundness - h) / height, (roundness - h) / width, 0]);\n      pts.push([roundness / width, 0]);\n      cts.push([]);\n      pts.push([(width - roundness) / width, 0]);\n    }\n    else {\n      pts.push([1, 0]);\n      pts.push([1, 1]);\n      pts.push([0, 1]);\n      pts.push([0, 0]);\n      pts.push([1, 0]);\n    }\n    return {\n      points: pts,\n      controls: cts,\n    }\n  },\n  ellipse2polyline() {\n    let pts = [], cts = [];\n    let rx =  0.5 * 0.5522847498307936, ry = 0.5 * 0.5522847498307936;\n    pts.push([0.5, 0]);\n    cts.push([0.5 + rx, 0, 1, 0.5 - ry]);\n    pts.push([1, 0.5]);\n    cts.push([1, 0.5 + ry, 0.5 + rx, 1]);\n    pts.push([0.5, 1]);\n    cts.push([0.5 - rx, 1, 0, 0.5 + ry]);\n    pts.push([0, 0.5]);\n    cts.push([0, 0.5 - ry, rx, 0]);\n    pts.push([0.5, 0]);\n    return {\n      points: pts,\n      controls: cts,\n    }\n  },\n};\n","export function r2d(n) {\n  return n * 180 / Math.PI;\n}\n\n/**\n * 百分比截取贝塞尔中的一段，t为[0, 1]\n * @param points\n * @param t\n */\nexport function sliceBezier(points, t) {\n  let p1, p2, p3, p4;\n  if(points.length === 8) {\n    p1 = points.slice(0, 2);\n    p2 = points.slice(2, 4);\n    p3 = points.slice(4, 8);\n    p4 = points.slice(6, 8);\n  }\n  else {\n    p1 = points[0];\n    p2 = points[1];\n    p3 = points[2];\n    p4 = points[3];\n  }\n  let x1 = p1[0], y1 = p1[1];\n  let x2 = p2[0], y2 = p2[1];\n  let x3 = p3[0], y3 = p3[1];\n  let x12 = (x2 - x1) * t + x1;\n  let y12 = (y2 - y1) * t + y1;\n  let x23 = (x3 - x2) * t + x2;\n  let y23 = (y3 - y2) * t + y2;\n  let x123 = (x23 - x12) * t + x12;\n  let y123 = (y23 - y12) * t + y12;\n  if(points.length === 4 || points.length === 8) {\n    let x4 = p4[0], y4 = p4[1];\n    let x34 = (x4 - x3) * t + x3;\n    let y34 = (y4 - y3) * t + y3;\n    let x234 = (x34 - x23) * t + x23;\n    let y234 = (y34 - y23) * t + y23;\n    let x1234 = (x234 - x123) * t + x123;\n    let y1234 = (y234 - y123) * t + y123;\n    if(points.length === 8) {\n      return [x1, y1, x12, y12, x123, y123, x1234, y1234];\n    }\n    return [[x1, y1], [x12, y12], [x123, y123], [x1234, y1234]];\n  }\n  else if(points.length === 3) {\n    return [[x1, y1], [x12, y12], [x123, y123]];\n  }\n}\n\nexport function sliceBezier2Both(points, start = 0, end = 1) {\n  start = Math.max(start, 0);\n  end = Math.min(end, 1);\n  if(start === 0 && end === 1) {\n    return points;\n  }\n  if(end < 1) {\n    points = sliceBezier(points, end);\n  }\n  if(start > 0) {\n    if(end < 1) {\n      start = start / end;\n    }\n    points = sliceBezier(points.reverse(), (1 - start)).reverse();\n  }\n  return points;\n}\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nlet NEWTON_ITERATIONS = 4;\nlet NEWTON_MIN_SLOPE = 0.001;\nlet SUBDIVISION_PRECISION = 0.0000001;\nlet SUBDIVISION_MAX_ITERATIONS = 10;\n\nlet kSplineTableSize = 11;\nlet kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nlet float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n}\n\nfunction B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n}\n\nfunction C(aA1) {\n  return 3.0 * aA1;\n}\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n}\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n}\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  let currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if(currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while(Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for(let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    let currentSlope = getSlope(aGuessT, mX1, mX2);\n    if(currentSlope === 0.0) {\n      return aGuessT;\n    }\n    let currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n}\n\nfunction LinearEasing(x) {\n  return x;\n}\n\nfunction bezier(mX1, mY1, mX2, mY2) {\n  if(!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if(mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  let sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for(let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX(aX) {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    let lastSample = kSplineTableSize - 1;\n\n    for(; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    let dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    let guessForT = intervalStart + dist * kSampleStepSize;\n\n    let initialSlope = getSlope(guessForT, mX1, mX2);\n    if(initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if(initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing(x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if(x === 0 || x === 1) {\n      return x;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n}\n\nlet easing = {\n  linear: bezier(1, 1, 0, 0),\n  easeIn: bezier(0.42, 0, 1, 1),\n  easeOut: bezier(0, 0, 0.58, 1),\n  ease: bezier(0.25, 0.1, 0.25, 1),\n  easeInOut: bezier(0.42, 0, 0.58, 1),\n  cubicBezier: bezier,\n  getEasing(v, v1, v2, v3) {\n    if(arguments.length === 4) {\n      return bezier(v, v1, v2, v3);\n    }\n    else if(Array.isArray(v) && v.length === 4) {\n      return bezier(v[0], v[1], v[2], v[3]);\n    }\n    else if(v) {\n      v = v.toString();\n      let timingFunction;\n      if(/^\\s*(?:cubic-bezier\\s*)?\\(\\s*[\\d.]+\\s*,\\s*[-\\d.]+\\s*,\\s*[\\d.]+\\s*,\\s*[-\\d.]+\\s*\\)\\s*$/i.test(v)) {\n        v = v.match(/[\\d.]+/g);\n        timingFunction = bezier(v[0], v[1], v[2], v[3]);\n      }\n      else if(v !== 'getEasing') {\n        timingFunction = this[v];\n      }\n      return timingFunction;\n    }\n  },\n};\n\neasing['ease-in'] = easing.easeIn;\neasing['ease-out'] = easing.easeOut;\neasing['ease-in-out'] = easing.easeInOut;\n\nexport default easing;\n","import path from './path';\nimport { sliceBezier } from '../math';\nimport easing from '../easing';\n\n/**\n * 2个及以上的关键帧，获取区间，有可能有超过范围的无效关键帧，需滤除\n * 也有可能不及工作区间，需补充首尾，和原有首尾一样复制一个出来对齐区间\n * 也有可能虽然在范围外，但范围上无关键帧，需截取至范围内，由每个特效传入截取回调\n * @param list\n * @param begin\n * @param duration\n * @param reducer 当关键帧范围在工作区间外时，每个特效传入的截取函数\n * @returns {(number|number)[]}\n */\nfunction getAreaList(list, begin, duration, reducer) {\n  let len = list.length;\n  let startIndex = 0, endIndex = len - 1;\n  // 在区间外围的如果只有1帧则需包括，多余的去除，正好则符合，包含则需填补\n  for(let i = 0; i < len; i++) {\n    let item = list[i];\n    if(item.time < begin) {\n      startIndex = i;\n    }\n    else if(item.time > begin) {\n      break;\n    }\n    else {\n      startIndex = i;\n      break;\n    }\n  }\n  // 结尾同上\n  for(let i = len - 1; i >= 0; i--) {\n    let item = list[i];\n    if(item.time < begin + duration) {\n      break;\n    }\n    else if(item.time > begin + duration) {\n      endIndex = i;\n    }\n    else {\n      endIndex = i;\n      break;\n    }\n  }\n  if(startIndex > 0 || endIndex < len - 1) {\n    list = list.slice(startIndex, endIndex + 1);\n  }\n  if(list.length < 2) {\n    return list;\n  }\n  // 补齐首帧，当关键帧在工作区间内的时候\n  let first = list[0];\n  if(first.time > begin) {\n    let o = {\n      time: begin,\n      value: Array.isArray(first.value) ? first.value.slice(0) : first.value,\n    };\n    // translatePath特殊处理，前补第一帧转为translate\n    if(Array.isArray(first.value) && first.value.length === 8) {\n      o.value = first.value.slice(0, 2);\n    }\n    list.unshift(o);\n  }\n  // 截取首帧部分\n  else if(first.time < begin) {\n    let next = list[1];\n    let percent = (begin - first.time) / (next.time - first.time);\n    first.time = begin;\n    first.value = reducer(first.value, next.value, percent, true);\n    if(first.easing) {\n      let points = sliceBezier([\n        [0, 0],\n        [first.easing[0], first.easing[1]],\n        [first.easing[2], first.easing[3]],\n        [1, 1],\n      ].reverse(), (1 - percent)).reverse();\n      first.easing = [\n        points[1][0] / (1 - percent),\n        points[1][1],\n        points[2][0] / (1 - percent),\n        points[2][1],\n      ];\n      first.easing[0] = Math.max(first.easing[0], 0);\n      first.easing[0] = Math.min(first.easing[0], 1);\n      first.easing[2] = Math.max(first.easing[2], 0);\n      first.easing[2] = Math.min(first.easing[2], 1);\n    }\n  }\n  // 截取尾帧部分，同上\n  let last = list[list.length - 1];\n  if(last.time > begin + duration) {\n    let prev = list[list.length - 2];\n    let percent = (begin + duration - prev.time) / (last.time - prev.time);\n    last.time = begin + duration;\n    let p = percent;\n    if(prev.easing) {\n      p = easing.getEasing(prev.easing)(percent);\n    }\n    // 很特殊的地方，如果是普通的关键帧，直接截取并赋值尾帧即可，\n    // translatePath需要将截取值赋给倒数第2帧，并尾帧使用结束位置\n    let v = reducer(prev.value, last.value, p);\n    if(v.length === 8) {\n      prev.value = v;\n      last.value = v.slice(6, 8);\n    }\n    else {\n      last.value = v;\n    }\n    if(prev.easing) {\n      let points = sliceBezier([\n        [0, 0],\n        [prev.easing[0], prev.easing[1]],\n        [prev.easing[2], prev.easing[3]],\n        [1, 1],\n      ], percent);\n      prev.easing = [\n        points[1][0] / percent,\n        points[1][1],\n        points[2][0] / percent,\n        points[2][1],\n      ];\n      prev.easing[0] = Math.max(prev.easing[0], 0);\n      prev.easing[0] = Math.min(prev.easing[0], 1);\n      prev.easing[2] = Math.max(prev.easing[2], 0);\n      prev.easing[2] = Math.min(prev.easing[2], 1);\n    }\n  }\n  // 补齐尾帧，同上\n  else if(last.time < begin + duration) {\n    let o = {\n      time: begin + duration,\n      value: Array.isArray(last.value) ? last.value.slice(0) : last.value,\n    };\n    list.push(o);\n  }\n  return list;\n}\n\nexport function transformOrigin(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let r = list[0][0] + ' ' + list[0][1];\n    if(list[0].length > 2) {\n      r += ' ' + -list[0][2];\n    }\n    res.value.push({\n      transformOrigin: r,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let r = [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n      if(prev.length > 2) {\n        r.push(prev[2] + (next[2] - prev[2]) * percent);\n      }\n      return r;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let r = item.value[0] + ' ' + item.value[1];\n      if(item.value.length > 2) {\n        r += ' ' + -item.value[2];\n      }\n      let o = {\n        offset: (item.time - begin) / duration,\n        transformOrigin: r,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformOpacity(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      opacity: list[0] * 0.01,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        opacity: item.value * 0.01,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformPosition(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let r = {\n      translateX: list[0][0],\n      translateY: list[0][1],\n    };\n    res.value.push(r);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isStart) {\n      // 特殊的translatePath曲线动画\n      if(prev.length === 8) {\n        if(isStart) {\n          let points = [];\n          for(let i = 0, len = prev.length; i < len; i++) {\n            let item = prev[i];\n            points.push(item);\n          }\n          // start的话translatePath是个bezier，percent很特殊反过来\n          points = sliceBezier(points.reverse(), 1 - percent);\n          return points.reverse();\n        }\n        else {\n          return sliceBezier(prev, percent);\n        }\n      }\n      let r = [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n      return r;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      if(item.value.length === 8) {\n        o.translatePath = item.value;\n      }\n      else {\n        o.translateX = item.value[0];\n        o.translateY = item.value[1];\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function translateXYZ(list, begin, duration, key) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let o = {};\n    o[key] = list[0];\n    res.value.push(o);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isStart) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      o[key] = key === 'translateZ' ? -item.value : item.value;\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformRotateX(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateX: -list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        rotateX: -item.value,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformRotateY(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateY: -list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        rotateY: -item.value,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\n\nexport function transformRotateZ(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateZ: list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        rotateZ: item.value,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformScale(list, begin, duration, is3d) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let v = {\n      scaleX: list[0][0] * 0.01,\n      scaleY: list[0][1] * 0.01,\n    };\n    if(list[0].length > 2 && is3d) {\n      v.scaleZ = list[0][2] * 0.01;\n    }\n    res.value.push(v);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n        prev[2] + (next[2] - prev[2]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = {\n        offset: (item.time - begin) / duration,\n        scaleX: item.value[0] * 0.01,\n        scaleY: item.value[1] * 0.01,\n      };\n      if(item.easing) {\n        v.easing = item.easing;\n      }\n      if(item.value.length > 2 && is3d) {\n        v.scaleZ = item.value[2] * 0.01;\n      }\n      res.value.push(v);\n    }\n  }\n  return res;\n}\n\nexport function transformPath(list, begin, duration, isEnd) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let v = {\n    };\n    if(isEnd) {\n      v.end = list[0] * 0.01;\n    }\n    else {\n      v.start = list[0] * 0.01;\n    }\n    res.value.push(v);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return (prev + (next - prev) * percent) * 0.01;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = {\n        offset: (item.time - begin) / duration,\n      };\n      if(item.easing) {\n        v.easing = item.easing;\n      }\n      if(isEnd) {\n        v.end = item.value * 0.01;\n      }\n      else {\n        v.start = item.value * 0.01;\n      }\n      res.value.push(v);\n    }\n  }\n  return res;\n}\n\nexport function transformPoints(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let { vertices, inTangents, outTangents, closed } = list[0];\n    let o = path.parse(vertices, inTangents, outTangents, closed);\n    res.value.push({\n      points: o.points,\n      controls: o.controls,\n    });\n    res.data = o;\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isStart) {\n      let { vertices1, inTangents1, outTangents1, closed } = prev;\n      let { vertices2, inTangents2, outTangents2 } = next;\n      let vertices = [], inTangents = [], outTangents = [];\n      for(let i = 0, len = vertices1.len; i < len; i++) {\n        let p = vertices1[i], n = vertices2[i];\n        let pIn = inTangents1[(i + 1) % len], nIn = inTangents2[(i + 1) % len];\n        let pOut = outTangents1[i], nOut = outTangents2[i];\n        // 直线切割或贝塞尔切割\n        if(pIn[0] === 0 && pIn[1] === 0\n          && nIn[0] === 0 && nIn[1] === 0\n          && pOut[0] === 0 && pOut[1] === 0\n          && nOut[0] === 0 && nOut[1] === 0) {\n          vertices.push([\n            p[0] + (n[0] - p[0]) * percent,\n            p[1] + (n[1] - p[1]) * percent\n          ]);\n          inTangents.push([0, 0]);\n          outTangents.push([0, 0]);\n        }\n        else {\n          let arr = [\n            p,\n            pOut,\n            pIn,\n            n,\n          ];\n          if(isStart) {\n            arr.reverse();\n          }\n          let s = sliceBezier(arr, percent);\n          vertices.push(s[3]);\n          if(isStart) {\n            inTangents.push(s[1]);\n            outTangents.push(s[2]);\n          }\n          else {\n            inTangents.push(s[2]);\n            outTangents.push(s[1]);\n          }\n        }\n      }\n      return {\n        vertices,\n        inTangents,\n        outTangents,\n        closed,\n      };\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let { vertices, inTangents, outTangents, closed } = item.value;\n      let o;\n      if(i === 0) {\n        o = path.parse(vertices, inTangents, outTangents, closed);\n        res.data = o;\n      }\n      else {\n        o = path.parse(vertices, inTangents, outTangents, closed, res.data.x1, res.data.y1, res.data.x2, res.data.y2);\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        points: o.points,\n        controls: o.controls,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformFill(fill, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(fill.color.length === 1) {\n    let first = fill.color[0];\n    let v = [\n      parseInt(first[0] * 255),\n      parseInt(first[1] * 255),\n      parseInt(first[2] * 255),\n      first[3],\n    ];\n    if(fill.opacity[0] < 100) {\n      v[3] *= fill.opacity[0] * 0.01;\n    }\n    res.value.push({\n      fill: [v],\n    });\n  }\n  else {\n    let len = fill.color[0].length;\n    let list = getAreaList(fill.color, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = [\n        parseInt(item[0] * 255),\n        parseInt(item[1] * 255),\n        parseInt(item[2] * 255),\n        item[3],\n      ];\n      if(fill.opacity[i] < 100) {\n        v[3] *= fill.opacity[i] * 0.01;\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        fill: [v],\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformStroke(stroke, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(stroke.color.length === 1) {\n    let first = stroke.color[0];\n    let v = [\n      parseInt(first[0] * 255),\n      parseInt(first[1] * 255),\n      parseInt(first[2] * 255),\n      first[3],\n    ];\n    if(stroke.opacity[0] < 100) {\n      v[3] *= stroke.opacity[0] * 0.01;\n    }\n    res.value.push({\n      stroke: [v],\n    });\n  }\n  else {\n    let list = getAreaList(stroke.color, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = [\n        parseInt(item[0] * 255),\n        parseInt(item[1] * 255),\n        parseInt(item[2] * 255),\n        item[3],\n      ];\n      if(stroke.opacity[i] < 100) {\n        v[3] *= stroke.opacity[i] * 0.01;\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        stroke: [v],\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformStrokeWidth(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      strokeWidth: list,\n    });\n  }\n  else {\n    let len = list[0].length;\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeWidth: item.value,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformLineJoin(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let arr;\n    if(list[0] === 1) {\n      arr = ['miter'];\n    }\n    else if(list[0] === 2) {\n      arr = ['round'];\n    }\n    else {\n      arr = ['bevel'];\n    }\n    res.value.push({\n      strokeLinejoin: arr,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isFirst) {\n      return isFirst ? prev : next;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let arr = [];\n      for(let i = 0, len = item.value.length; i < len; i++) {\n        let item2 = item.value[i];\n        if(item2 === 1) {\n          arr.push('miter');\n        }\n        else if(item2 === 2) {\n          arr.push('round');\n        }\n        else {\n          arr.push('bevel');\n        }\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeLinejoin: arr,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformMiterLimit(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      strokeWidth: list,\n    });\n  }\n  else {\n    let len = list[0].length;\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeWidth: item.value,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformSize(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      size: list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        size: item.value,\n      });\n    }\n  }\n  return res;\n}\n","function getDuration(data) {\n  let animate = data.animate;\n  if(Array.isArray(animate) && animate.length) {\n    return data.animate[0].options.duration;\n  }\n  let children = data.children;\n  if(Array.isArray(children)) {\n    for(let i = 0, len = children.length; i < len; i++) {\n      let child = children[i];\n      let res = getDuration(child);\n      if(res !== undefined) {\n        return res;\n      }\n    }\n  }\n}\n\nfunction getKeyFrames(data, list, hash, ks) {\n  let animate = data.animate;\n  if(Array.isArray(animate)) {\n    for(let i = 0, len = animate.length; i < len; i++) {\n      let item = animate[i].value;\n      if(item.length && item.length > 1) {\n        let one = item[1];\n        // 传入必需的关键帧样式key则要包含，否则为全部\n        let has = !Array.isArray(ks);\n        if(!has) {\n          for(let j = 0, len2 = ks.length; j < len2; j++) {\n            if(one.hasOwnProperty(ks[j])) {\n              has = true;\n              break;\n            }\n          }\n        }\n        if(has) {\n          for(let j = 0, len2 = item.length; j < len2; j++) {\n            let offset = item[j].offset || 0;\n            if(!hash.hasOwnProperty(offset)) {\n              hash[offset] = true;\n              list.push(offset);\n            }\n          }\n        }\n      }\n    }\n  }\n  let children = data.children;\n  if(Array.isArray(children)) {\n    for(let i = 0, len = children.length; i < len; i++) {\n      let child = children[i];\n      getKeyFrames(child, list, hash, ks);\n    }\n  }\n}\n\nexport default {\n  getDuration(data) {\n    let res = getDuration(data);\n    if(res !== undefined) {\n      return res;\n    }\n    let library = data.library;\n    for(let i = 0, len = library.length; i < len; i++) {\n      let item = library[i];\n      let res = getDuration(item);\n      if(res !== undefined) {\n        return res;\n      }\n    }\n    return 0;\n  },\n  getKeyFrames(data, ks) {\n    let list = [0], hash = {0:true};\n    getKeyFrames(data, list, hash, ks);\n    let library = data.library;\n    for(let i = 0, len = library.length; i < len; i++) {\n      let item = library[i];\n      getKeyFrames(item, list, hash, ks);\n    }\n    return list.sort(function(a, b) {\n      return a - b;\n    });\n  },\n};\n","import { r2d, sliceBezier } from '../math';\nimport easing from '../easing';\nimport animation from '../../src/util/animation';\n\nfunction getOffset(offsetList, offsetHash, list, key) {\n  for(let i = 0, len = list.length; i < len; i++) {\n    let item = list[i].value;\n    let item2 = item[1];\n    if(!item2.hasOwnProperty(key)) {\n      continue;\n    }\n    for(let j = 1, len2 = item.length; j < len2; j++) {\n      let offset = item[j].offset;\n      if(!offsetHash.hasOwnProperty(offset)) {\n        offsetList.push(offset);\n        offsetHash[offset] = true;\n      }\n    }\n  }\n}\n\nfunction insertKf(offsetList, offsetHash, list, style, key) {\n  let length = offsetList.length;\n  for(let i = 0, len = list.length; i < len; i++) {\n    let item = list[i].value;\n    let item2 = item[1];\n    if(!item2.hasOwnProperty(key)) {\n      continue;\n    }\n    for(let j = 1; j < length - 1; j++) {\n      if(item[j].offset !== offsetList[j]) {\n        let prev = item[j - 1], next = item[j];\n        let percent = (offsetList[j] - prev.offset) / (next.offset - prev.offset);\n        let ea = prev.easing;\n        let p = percent;\n        if(ea) {\n          p = easing.getEasing(ea)(percent);\n        }\n        let obj = {\n          offset: offsetList[j],\n        };\n        if(ea) {\n          let points = sliceBezier([\n            [0, 0],\n            [ea[0], ea[1]],\n            [ea[2], ea[3]],\n            [1, 1],\n          ], percent);\n          prev.easing = [\n            points[1][0] / points[3][0],\n            points[1][1] / points[3][1],\n            points[2][0] / points[3][0],\n            points[2][1] / points[3][1],\n          ];\n          points = sliceBezier([\n            [0, 0],\n            [ea[0], ea[1]],\n            [ea[2], ea[3]],\n            [1, 1],\n          ].reverse(), 1 - percent).reverse();\n          let x = 1 - points[0][0], y = 1 - points[0][1];\n          obj.easing = [\n            (points[1][0] - points[0][0]) / x,\n            (points[1][1] - points[0][1]) / y,\n            (points[2][0] - points[0][0]) / x,\n            (points[2][1] - points[0][1]) / y,\n          ];\n        }\n        let pv = j === 1 ? (style[key] || '') : (prev[key] || '');\n        let nv = next[key] || '';\n        if(key === 'transformOrigin') {\n          pv = pv.split(' ');\n          pv[0] = parseFloat(pv[0]) || 0;\n          pv[1] = parseFloat(pv[1]) || 0;\n          pv[2] = parseFloat(pv[2]) || 0;\n          nv = nv.split(' ');\n          nv[0] = parseFloat(nv[0]) || 0;\n          nv[1] = parseFloat(nv[1]) || 0;\n          nv[2] = parseFloat(nv[2]) || 0;\n          let diff = [\n            nv[0] - pv[0],\n            nv[1] - pv[1],\n            nv[2] - pv[2],\n          ];\n          obj[key] = (pv[0] + diff[0] * p)\n            + ' ' + (pv[1] + diff[1] * p)\n            + ' ' + (pv[2] + diff[2] * p);\n        }\n        // 这3个key可能同时出现在一帧里\n        else if(key === 'translateX' || key === 'translateY' || key === 'translateZ') {\n          let diff = (nv || 0) - (pv || 0);\n          obj[key] = (pv || 0) + diff * p;\n          let arr = ['translateX', 'translateY', 'translateZ'];\n          for(let m = 0; m < 3; m++) {\n            let k = arr[m];\n            if(k !== key && (prev.hasOwnProperty(k) || next.hasOwnProperty(k))) {\n              let pv = j === 1 ? (style[k] || 0) : (prev[k] || 0);\n              let diff = (next[k] || 0) - pv;\n              obj[k] = pv + diff * p;\n            }\n          }\n        }\n        else if(key === 'rotateX' || key === 'rotateY' || key === 'rotateZ') {\n          let diff = (nv || 0) - ( pv || 0);\n          obj[key] = (pv || 0) + diff * p;\n        }\n        item.splice(j, 0, obj);\n      }\n    }\n  }\n}\n\nfunction getPerspectiveAndScale(data, index) {\n  let look, eyeX, eyeY, eyeZ, lookX, lookY, lookZ;\n  // 可能缺省和init一样，所以先赋值，首帧也是init\n  look = (data.init.style.transformOrigin || '').split(' ');\n  eyeX = data.init.style.translateX || 0;\n  eyeY = data.init.style.translateY || 0;\n  eyeZ = data.init.style.translateZ || 0;\n  // animate取\n  if(index) {\n    let animate = data.animate;\n    for(let i = 0, len = animate.length; i < len; i++) {\n      let item = animate[i].value[index];\n      // 没有的话说明没有执行统一插帧操作，不是需要考虑的变换属性\n      if(!item) {\n        continue;\n      }\n      if(item.hasOwnProperty('transformOrigin')) {\n        look = (item.transformOrigin || '').split(' ');\n      }\n      else if(item.hasOwnProperty('translateX')\n        || item.hasOwnProperty('translateY')\n        || item.hasOwnProperty('translateZ')) {\n        if(item.hasOwnProperty('translateX')) {\n          eyeX = item.translateX;\n        }\n        if(item.hasOwnProperty('translateY')) {\n          eyeY = item.translateY;\n        }\n        if(item.hasOwnProperty('translateZ')) {\n          eyeZ = item.translateZ;\n        }\n      }\n    }\n  }\n  lookX = parseFloat(look[0]) || 0;\n  lookY = parseFloat(look[1]) || 0;\n  lookZ = parseFloat(look[2]) || 0;\n  let perspective = Math.floor(Math.sqrt(Math.pow(eyeX - lookX, 2) + Math.pow(eyeY - lookY, 2) + Math.pow(eyeZ - lookZ, 2)));\n  let scale = Math.floor(data.cameraZoom) / perspective;\n  // $.ae2karas.log('perspective: ' + perspective + ', zoom: ' + data.cameraZoom);\n  return {\n    eyeX,\n    eyeY,\n    eyeZ,\n    lookX,\n    lookY,\n    lookZ,\n    perspective,\n    scale,\n  };\n}\n\nfunction setTranslateAndRotate(w, h, child, index, offsetList, duration, eyeX, eyeY, eyeZ, lookX, lookY, lookZ) {\n  let style = child.init.style;\n  // 可能缺省和init一样，所以先赋值，首帧也是init\n  let tfo = (style.transformOrigin || '').split(' ');\n  let tx = style.translateX || 0, ty = style.translateY || 0, tz = style.translateZ || 0;\n  let animate = child.animate;\n  // 非首帧从animate取\n  if(index) {\n    for(let i = 0, len = animate.length; i < len; i++) {\n      let item = animate[i].value[index];\n      // 没有的话说明没有执行统一插帧操作，不是需要考虑的变换属性\n      if(!item) {\n        continue;\n      }\n      if(item.hasOwnProperty('transformOrigin')) {\n        tfo = (item.transformOrigin || '').split(' ');\n      }\n      else if(item.hasOwnProperty('translateX')\n        || item.hasOwnProperty('translateY')\n        || item.hasOwnProperty('translateZ')) {\n        if(item.hasOwnProperty('translateX')) {\n          tx = item.translateX;\n        }\n        if(item.hasOwnProperty('translateY')) {\n          ty = item.translateY;\n        }\n        if(item.hasOwnProperty('translateZ')) {\n          tz = item.translateZ;\n        }\n      }\n    }\n  }\n  let x = (style.left || 0) + parseFloat(tfo[0]) || 0;\n  let y = (style.top || 0) + parseFloat(tfo[1]) || 0;\n  let z = parseFloat(tfo[2]) || 0;\n  x += tx;\n  y += ty;\n  z += tz;\n  // $.ae2karas.warn(eyeX + ',' + eyeY + ',' + eyeZ + '; ' + lookX + ',' + lookY + ',' + lookZ);\n  // $.ae2karas.log({ x, y, z });\n  let o = convert(w, h, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, { x, y, z });\n  // $.ae2karas.log(o);\n  // 也是区分首帧和其它\n  if(index) {\n    for(let i = 0, len = animate.length; i < len; i++) {\n      let item = animate[i].value[index];\n      // 没有的话说明没有执行统一插帧操作，不是需要考虑的变换属性\n      if(!item) {\n        continue;\n      }\n      if(item.hasOwnProperty('translateX')\n        || item.hasOwnProperty('translateY')\n        || item.hasOwnProperty('translateZ')) {\n        if(item.hasOwnProperty('translateX')) {\n          item.translateX += o.translateX;\n        }\n        if(item.hasOwnProperty('translateY')) {\n          item.translateY += o.translateY;\n        }\n        // 特殊直接赋值\n        if(item.hasOwnProperty('translateZ')) {\n          item.translateZ = o.translateZ;\n        }\n      }\n      else if(item.hasOwnProperty('rotateX')) {\n        item.rotateX += o.rotateX;\n      }\n      else if(item.hasOwnProperty('rotateY')) {\n        item.rotateY += o.rotateY;\n      }\n    }\n  }\n  else {\n    // 需要临时保存最初值，因为变换后的保存在style上会覆盖掉\n    let temp = {\n      translateX: style.translateX || 0,\n      translateY: style.translateY || 0,\n      translateZ: style.translateZ || 0,\n      rotateX: style.rotateX || 0,\n      rotateY: style.rotateY || 0,\n    };\n    style.rotateX = style.rotateX || 0;\n    style.rotateX += o.rotateX;\n    style.rotateY = style.rotateY || 0;\n    style.rotateY += o.rotateY;\n    style.translateX = style.translateX || 0;\n    style.translateX += o.translateX;\n    style.translateY = style.translateY || 0;\n    style.translateY += o.translateY;\n    style.translateZ = o.translateZ;\n    // 需要特殊处理，可能这个child没有translate、rotate动画，需要加上，可能白加无所谓，交给压缩去除\n    let record = {};\n    outer:\n    for(let i = 0, len = animate.length; i < len; i++) {\n      let item = animate[i].value;\n      for(let j = 0, len2 = item.length; j < len2; j++) {\n        let item2 = item[j];\n        if(item2.hasOwnProperty('translateX')) {\n          record.translateX = true;\n        }\n        if(item2.hasOwnProperty('translateY')) {\n          record.translateY = true;\n        }\n        if(item2.hasOwnProperty('translateZ')) {\n          record.translateZ = true;\n        }\n        if(item2.hasOwnProperty('rotateX')) {\n          record.rotateX = true;\n        }\n        if(item2.hasOwnProperty('rotateY')) {\n          record.rotateY = true;\n        }\n        if(record.translateX && record.translateY && record.translateZ && record.rotateX && record.rotateY) {\n          break outer;\n        }\n      }\n    }\n    // $.ae2karas.log(JSON.stringify(animate));\n    // $.ae2karas.log(record);\n    // $.ae2karas.log(temp);\n    let list = ['translateX', 'translateY', 'translateZ', 'rotateX', 'rotateY'];\n    for(let i = 0, len = list.length; i < len; i++) {\n      let k = list[i];\n      if(!record[k]) {\n        let item = {\n          value: [{\n            offset: 0,\n          }],\n          options: {\n            duration,\n            fill: 'forwards',\n            iterations: 1,\n          },\n        }\n        for(let j = 1, len2 = offsetList.length; j < len2; j++) {\n          let o = {\n            offset: offsetList[j],\n          };\n          o[k] = temp[k] || 0;\n          item.value.push(o);\n        }\n        animate.push(item);\n      }\n    }\n  }\n}\n\nfunction convert(w, h, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, data) {\n  let cx = w * 0.5;\n  let cy = h * 0.5;\n  let x = convertX(cx, eyeX, eyeZ, lookX, lookZ, data);\n  let y = convertY(cy, eyeY, eyeZ, lookY, lookZ, data);\n  let a = eyeX - lookX, b = eyeY - lookY, c = eyeZ - lookZ, d = -a * lookX - b * lookY - c * lookZ;\n  // $.ae2karas.log('a: ' + a + ', b: ' + b + ', c: ' + c + ', d: ' + d);\n  let translateZ = (data.x * a + data.y * b + data.z * c + d) / Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2) + Math.pow(c, 2));\n  return {\n    rotateX: y.rotateX,\n    rotateY: -x.rotateY,\n    translateX: x.translateX,\n    translateY: y.translateY,\n    translateZ,\n  };\n}\n\n// 顶视图往下看，左到右为x，上到下为z，朝向为y\nfunction convertX(cx, eyeX, eyeZ, lookX, lookZ, data) {\n  // 特殊情况\n  if(eyeX === lookX || cx === eyeX) {\n    return {\n      rotateY: 0,\n      translateX: 0,\n    };\n  }\n  let tan = (eyeX - lookX) / (eyeZ - lookZ);\n  let alpha = Math.atan(tan);\n  let sin = Math.sin(alpha);\n  let cos = Math.cos(alpha);\n  let bd = (data.z - lookZ);\n  let ab = bd / sin;\n  let ad = bd / tan;\n  let ag = ad + (data.x - lookX);\n  let ac = cos * ag;\n  let bc = ac - ab;\n  let tx = bc - (data.x - cx);\n  return {\n    rotateY: r2d(alpha),\n    translateX: tx,\n  };\n}\n\n// 左视图往右看，左到右为z，下到上为y，朝向为x\nfunction convertY(cy, eyeY, eyeZ, lookY, lookZ, data) {\n  // 特殊情况\n  if(eyeY === lookY || cy === eyeY) {\n    return {\n      rotateX: 0,\n      translateY: 0,\n    };\n  }\n  let tan = (eyeY - lookY) / (eyeZ - lookZ);\n  let alpha = Math.atan(tan);\n  let sin = Math.sin(alpha);\n  let cos = Math.cos(alpha);\n  let bd = (data.z - lookZ);\n  let ab = bd / sin;\n  let ad = bd / tan;\n  let ag = ad + (data.y - lookY);\n  let ac = cos * ag;\n  let bc = ac - ab;\n  let ty = bc - (data.y - cy);\n  return {\n    rotateX: r2d(alpha),\n    translateY: ty,\n  };\n}\n\nexport default function(data, res) {\n  $.ae2karas.error('camera');\n  delete res.props.style.perspective;\n  delete res.props.style.perspectiveOrigin;\n  // $.ae2karas.log(JSON.stringify(res));\n  let w = res.props.style.width, h = res.props.style.height;\n  let children = res.children;\n  // 时长\n  let duration = animation.getDuration(data);\n  // 求出camera的tfo/translate动画的关键帧时间和所有children的tfo/translate/rotate的合集\n  let offsetList = [0], offsetHash = { 0: true };\n  getOffset(offsetList, offsetHash, data.animate, 'transformOrigin');\n  getOffset(offsetList, offsetHash, data.animate, 'translateX');\n  getOffset(offsetList, offsetHash, data.animate, 'translateY');\n  getOffset(offsetList, offsetHash, data.animate, 'translateZ');\n  let str = JSON.stringify(data);\n  // 由于zIndex影响，2d图层不涉及透视变换，需遍历每个3d图层单独计算摄像机perspective变化动画\n  for(let i = 0, len = children.length; i < len; i++) {\n    let child = children[i];\n    if(child.ddd) {\n      let clone = JSON.parse(str);\n      // 求出child的tfo/translate/rotate的合集，和摄像机的并集，每个child用的都是clone备份\n      let osList = [], osHash = {};\n      for(let j = 0, len2 = offsetList.length; j < len2; j++) {\n        let k = offsetList[j];\n        osList.push(parseFloat(k)); // 神奇的现象，number必须parse下，否则会不等于自己\n        osHash[k] = true;\n      }\n      getOffset(osList, osHash, child.animate, 'transformOrigin');\n      getOffset(osList, osHash, child.animate, 'translateX');\n      getOffset(osList, osHash, child.animate, 'translateY');\n      getOffset(osList, osHash, child.animate, 'translateZ');\n      getOffset(osList, osHash, child.animate, 'rotateX');\n      getOffset(osList, osHash, child.animate, 'rotateY');\n      osList.sort(function(a, b) {\n        return a - b;\n      });\n      $.ae2karas.warn(i);\n      $.ae2karas.log(osList);\n      // 为不存在于offset合集的动画插入中间关键帧，先是摄像头最外围的图层\n      insertKf(osList, osHash, clone.animate, clone.init.style, 'transformOrigin');\n      insertKf(osList, osHash, clone.animate, clone.init.style, 'translateX');\n      insertKf(osList, osHash, clone.animate, clone.init.style, 'translateY');\n      insertKf(osList, osHash, clone.animate, clone.init.style, 'translateZ');\n      // child节点本身\n      insertKf(osList, osHash, child.animate, child.init.style, 'transformOrigin');\n      insertKf(osList, osHash, child.animate, child.init.style, 'translateX');\n      insertKf(osList, osHash, child.animate, child.init.style, 'translateY');\n      insertKf(osList, osHash, child.animate, child.init.style, 'translateZ');\n      insertKf(osList, osHash, child.animate, child.init.style, 'rotateX');\n      insertKf(osList, osHash, child.animate, child.init.style, 'rotateY');\n      insertKf(osList, osHash, child.animate, child.init.style, 'rotateZ');\n      // 计算每帧的perspective，存入动画，scale是AE固定焦距导致的缩放\n      let wrap = {\n        tagName: 'div',\n        props: {\n          style: {\n            position: 'absolute',\n            left: 0,\n            top: 0,\n            width: '100%',\n            height: '100%',\n          },\n        },\n      };\n      let wrapAnimate = [];\n      for(let j = 0, len2 = osList.length; j < len2; j++) {\n        let { eyeX, eyeY, eyeZ, lookX, lookY, lookZ, perspective, scale } = getPerspectiveAndScale(clone, j);\n        // 非首帧\n        if(j) {\n          wrapAnimate.push({\n            offset: osList[j],\n            perspective,\n            scale,\n          });\n        }\n        // 首帧填空\n        else {\n          wrapAnimate.push({\n            offset: 0,\n          });\n          wrap.props.style.perspective = perspective;\n          if(scale !== 1) {\n            wrap.props.style.scale = scale;\n          }\n        }\n        setTranslateAndRotate(w, h, child, j, osList, duration, eyeX, eyeY, eyeZ, lookX, lookY, lookZ);\n      }\n      if(wrapAnimate.length > 1) {\n        wrap.animate = [\n          {\n            value: wrapAnimate,\n            options: {\n              duration,\n              fill: 'forwards',\n              iterations: 1,\n            },\n          },\n        ];\n      }\n      // 特殊插入zIndex，值等同于translateZ\n      let style = child.init.style;\n      let animate = child.animate;\n      if(style.translateZ) {\n        wrap.props.style.zIndex = style.translateZ;\n      }\n      let zIndex = [];\n      for(let j = 0, len2 = osList.length; j < len2; j++) {\n        if(j) {\n          let has;\n          for(let k = 0, len3 = animate.length; k < len3; k++) {\n            let item = animate[k];\n            let item2 = item.value[j];\n            if(!item2) {\n              continue;\n            }\n            if(item2.hasOwnProperty('translateZ')) {\n              zIndex.push({\n                offset: osList[j],\n                zIndex: item2.translateZ,\n              });\n              has = true;\n              break;\n            }\n          }\n          if(!has) {\n            zIndex.push({\n              offset: osList[j],\n            });\n          }\n        }\n        else {\n          zIndex.push({\n            offset: 0,\n          });\n        }\n      }\n      if(wrap.animate) {\n        wrap.animate.push({\n          value: zIndex,\n          options: {\n            duration,\n            iterations: 1,\n            fill: 'forwards',\n          },\n        });\n      }\n      wrap.children = [child];\n      children.splice(i, 1, wrap);\n    }\n  }\n};\n","import {\n  transformOrigin,\n  transformOpacity,\n  transformPosition,\n  transformRotateX,\n  transformRotateY,\n  transformRotateZ,\n  transformScale,\n  transformPath,\n  transformPoints,\n  transformFill,\n  transformStroke,\n  transformStrokeWidth,\n  transformLineJoin,\n  transformMiterLimit,\n  transformSize,\n  translateXYZ,\n} from './animate';\nimport path from './path';\nimport camera from './camera';\n\n/**\n * 预解析父级链接，不递归深入children，返回一个普通的div\n * @param data\n * @param library\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n */\nfunction preParse(data, library, start, duration, displayStartTime, offset) {\n  let { name, width, height, asParent, asChild, ddd } = data;\n  let res = {\n    name,\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n        width,\n        height,\n        // overflow: 'hidden',\n      },\n    },\n    children: [],\n    animate: [],\n    asParent,\n    asChild,\n  };\n  if(ddd) {\n    res.ddd = true;\n  }\n  parseAnimate(res, data, start, duration, displayStartTime, offset, true, false);\n  // 父链接不跟随透明度，所以删掉opacity的静态属性\n  if(res.props.style.hasOwnProperty('opacity')) {\n    delete res.props.style.opacity;\n    let animate = res.animate;\n    outer:\n    for(let i = animate.length - 1; i >= 0; i--) {\n      let item = animate[i].value;\n      for(let j = 1, len = item.length; j < len; j++) {\n        if(item[j].hasOwnProperty('opacity')) {\n          animate.splice(i, 1);\n          break outer;\n        }\n      }\n    }\n  }\n  return res;\n}\n\nfunction parseAnimate(res, data, start, duration, displayStartTime, offset, isDirect, isGeom) {\n  let { width, height, transform } = data;\n  // 分别分析每个变换，过程很相似，当为单帧时需合并到init.style，多帧第一帧需合并且置空\n  let { anchorPoint, opacity, position, position_0, position_1, position_2, rotateX, rotateY, rotateZ, scale } = transform;\n  let begin2 = start - offset - displayStartTime;\n  let init = isDirect ? res.props : res.init;\n  if(!isGeom && Array.isArray(anchorPoint) && anchorPoint.length) {\n    let t = transformOrigin(anchorPoint, begin2, duration);\n    let first = t.value[0];\n    let v = first.transformOrigin.split(' ');\n    v[0] = parseFloat(v[0]);\n    v[1] = parseFloat(v[1]);\n    if(v[0] !== width * 0.5 || v[1] !== height * 0.5) {\n      init.style.transformOrigin = first.transformOrigin;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      // tfo的每个动画需考虑对坐标的影响\n      for(let i = 1, len = t.value.length; i < len; i++) {\n        let item = t.value[i];\n        let tfo = item.transformOrigin.split(' ');\n        tfo[0] = parseFloat(tfo[0]);\n        tfo[1] = parseFloat(tfo[1]);\n        item.left = -tfo[0];\n        item.top = -tfo[1];\n      }\n      res.animate.push(t);\n    }\n    // ae中位置相对于anchor，而不是默认左上角原点，因此有个位置计算\n    if(v[0]) {\n      init.style.left = -v[0];\n    }\n    if(v[1]) {\n      init.style.top = -v[1];\n    }\n  }\n  if(Array.isArray(opacity) && opacity.length) {\n    let t = transformOpacity(opacity, begin2, duration);\n    let first = t.value[0];\n    if(first.opacity !== 1) {\n      init.style.opacity = first.opacity;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n    }\n  }\n  let is3d;\n  // position要考虑x/y/z拆开\n  let translateAbbr = true;\n  if(Array.isArray(position_0) && position_0.length > 1) {\n    translateAbbr = false;\n  }\n  if(Array.isArray(position_1) && position_1.length > 1) {\n    translateAbbr = false;\n  }\n  if(Array.isArray(position_2) && position_2.length > 1 && res.ddd) {\n    translateAbbr = false;\n  }\n  if(Array.isArray(position) && position.length && translateAbbr) {\n    // 需要特殊把translateZ拆开，因为独占一个easing2属性，不能和xy共用\n    if(position.length > 1 && res.ddd) {\n      let hasZ;\n      for(let i = 0, len = position.length; i < len; i++) {\n        let item = position[i];\n        if(item.value[2] || item.easing2) {\n          hasZ = true;\n          break;\n        }\n      }\n      let za;\n      if(hasZ) {\n        za = [];\n        for(let i = 0, len = position.length; i < len; i++) {\n          let item = position[i];\n          let o = {\n            time: item.time,\n            value: item.value[2],\n          };\n          if(item.easing2) {\n            o.easing = item.easing2;\n          }\n          za.push(o);\n          delete item.easing2;\n        }\n        let t = translateXYZ(za, begin2, duration, 'translateZ');\n        let first = t.value[0];\n        if(first.translateZ) {\n          init.style.translateZ = first.translateZ;\n        }\n        if(t.value.length > 1) {\n          t.value[0] = {\n            offset: 0,\n            easing: first.easing,\n          };\n          res.animate.push(t);\n        }\n        is3d = true;\n      }\n    }\n    else {\n      if(position[0][2] && res.ddd) {\n        init.style.translateZ = -position[0][2];\n        is3d = true;\n      }\n    }\n    let t = transformPosition(position, begin2, duration);\n    let first = t.value[0];\n    if(first.translatePath) {\n      init.style.translateX = first.translatePath[0];\n      init.style.translateY = first.translatePath[1];\n    }\n    else {\n      if(first.translateX) {\n        init.style.translateX = first.translateX;\n      }\n      if(first.translateY) {\n        init.style.translateY = first.translateY;\n      }\n    }\n    if(t.value.length > 1) {\n      if(!first.translatePath) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n      }\n      res.animate.push(t);\n    }\n  }\n  else {\n    if(Array.isArray(position_0) && position_0.length) {\n      let t = translateXYZ(position_0, begin2, duration, 'translateX');\n      let first = t.value[0];\n      if(first.translateX) {\n        init.style.translateX = first.translateX;\n      }\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n        res.animate.push(t);\n      }\n    }\n    if(Array.isArray(position_1) && position_1.length) {\n      let t = translateXYZ(position_1, begin2, duration, 'translateY');\n      let first = t.value[0];\n      if(first.translateY) {\n        init.style.translateY = first.translateY;\n      }\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n        res.animate.push(t);\n      }\n    }\n    if(Array.isArray(position_2) && position_2.length && res.ddd) {\n      let t = translateXYZ(position_2, begin2, duration, 'translateZ');\n      let first = t.value[0];\n      if(first.translateZ) {\n        init.style.translateZ = first.translateZ;\n        is3d = true;\n      }\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n        res.animate.push(t);\n        is3d = true;\n      }\n    }\n  }\n  if(Array.isArray(rotateX) && rotateX.length && res.ddd) {\n    let t = transformRotateX(rotateX, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateX) {\n      init.style.rotateX = first.rotateX;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(Array.isArray(rotateY) && rotateY.length && res.ddd) {\n    let t = transformRotateY(rotateY, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateY) {\n      init.style.rotateY = first.rotateY;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(Array.isArray(rotateZ) && rotateZ.length) {\n    let t = transformRotateZ(rotateZ, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateZ) {\n      init.style.rotateZ = first.rotateZ;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n    }\n  }\n  if(is3d && !res.isCamera) {\n    init.style.perspective = true;\n    // path没有width和height，在处理geom时会添加上\n    // init.style.perspective = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n  }\n  if(Array.isArray(scale) && scale.length) {\n    let t = transformScale(scale, begin2, duration, res.ddd);\n    let first = t.value[0];\n    if(first.scaleX !== 1 && first.scaleX !== undefined && first.scaleX !== null) {\n      init.style.scaleX = first.scaleX;\n    }\n    if(first.scaleY !== 1 && first.scaleY !== undefined && first.scaleY !== null) {\n      init.style.scaleY = first.scaleY;\n    }\n    if(first.scaleZ !== 1 && first.scaleZ !== undefined && first.scaleZ !== null) {\n      init.style.scaleZ = first.scaleZ;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n    }\n  }\n  return res;\n}\n\n/**\n * 动画和初始init部分转换\n * @param data\n * @param library\n * @param newLib\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n * @param parentLink\n */\nfunction recursion(data, library, newLib, start, duration, displayStartTime, offset, parentLink) {\n  // 作为父级链接不可见时无需导出\n  if(!data.enabled) {\n    return null;\n  }\n  let { name, assetId, startTime, inPoint, outPoint, blendingMode, ddd, isCamera, isMask, isClip } = data;\n  if(!isCamera && (assetId === undefined || assetId === null)) {\n    return null;\n  }\n  inPoint += offset + displayStartTime;\n  outPoint += offset + displayStartTime;\n  // 图层在工作区外可忽略\n  if(inPoint >= start + duration || outPoint <= start) {\n    return null;\n  }\n  let res = {\n    name,\n  };\n  if(isCamera) {\n    res.tagName = 'div';\n    res.isCamera = isCamera;\n    res.cameraZoom = data.cameraZoom;\n    res.cameraDepthOfField = data.cameraDepthOfField;\n    res.cameraFocusDistance = data.cameraFocusDistance;\n    res.cameraAperture = data.cameraAperture;\n    res.cameraBlurLevel = data.cameraBlurLevel;\n    res.props = {\n      style: {\n        display: 'none',\n      },\n    };\n  }\n  else {\n    if(!newLib[assetId]) {\n      parse(library, assetId, newLib, start, duration, displayStartTime, offset + startTime);\n    }\n    res.libraryId = assetId;\n  }\n  if(ddd) {\n    res.ddd = true;\n  }\n  res.init = {\n    style: {},\n  };\n  // isMask代表是否是遮罩，isClip需在isMask的基础上判断，因为被遮罩层存储isClip值再赋给遮罩层\n  if(isMask) {\n    if(isClip) {\n      res.init.clip = true;\n    }\n    else {\n      res.init.mask = true;\n    }\n  }\n  // 混合模式\n  if(!isCamera) {\n    switch(blendingMode) {\n      case BlendingMode.MULTIPLY:\n        res.init.style.mixBlendMode = 'multiply';\n        break;\n      case BlendingMode.SCREEN:\n        res.init.style.mixBlendMode = 'screen';\n        break;\n      case BlendingMode.OVERLAY:\n        res.init.style.mixBlendMode = 'overlay';\n        break;\n      case BlendingMode.DARKEN:\n        res.init.style.mixBlendMode = 'darken';\n        break;\n      case BlendingMode.COLOR_DODGE:\n        res.init.style.mixBlendMode = 'color-dodge';\n        break;\n      case BlendingMode.COLOR_BURN:\n        res.init.style.mixBlendMode = 'color-burn';\n        break;\n      case BlendingMode.HARD_LIGHT:\n        res.init.style.mixBlendMode = 'hard-light';\n        break;\n      case BlendingMode.SOFT_LIGHT:\n        res.init.style.mixBlendMode = 'soft-light';\n        break;\n      case BlendingMode.DIFFERENCE:\n        res.init.style.mixBlendMode = 'difference';\n        break;\n      case BlendingMode.EXCLUSION:\n        res.init.style.mixBlendMode = 'exclusion';\n        break;\n      case BlendingMode.HUE:\n        res.init.style.mixBlendMode = 'hue';\n        break;\n      case BlendingMode.SATURATION:\n        res.init.style.mixBlendMode = 'saturation';\n        break;\n      case BlendingMode.COLOR:\n        res.init.style.mixBlendMode = 'color';\n        break;\n      case BlendingMode.LUMINOSITY:\n        res.init.style.mixBlendMode = 'luminosity';\n        break;\n    }\n  }\n  res.animate = [];\n  // 特殊的visibility动画，如果图层可见在工作区间内，需要有动画，否则可以无视\n  if(inPoint > start || outPoint < start + duration) {\n    let v = {\n      value: [],\n      options: {\n        duration,\n        fill: 'forwards',\n        iterations: 1,\n      },\n    };\n    // 开头不可见，默认init的style\n    if(inPoint > start) {\n      res.init.style.visibility = 'hidden';\n      res.init.style.pointerEvents = 'none';\n      v.value.push({\n        offset: 0,\n      });\n      v.value.push({\n        offset: (inPoint - start) / duration,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    else {\n      v.value.push({\n        offset: 0,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    // 结尾计算\n    if(outPoint < start + duration) {\n      // 可能是第一帧但offset不为0，不用担心karas会补充空首帧\n      v.value.push({\n        offset: (outPoint - start) / duration,\n        visibility: 'hidden',\n        pointerEvents: 'none',\n      });\n      // 默认不是隐藏需补结束帧为隐藏，否则karas会填补空关键帧\n      if(inPoint <= start) {\n        v.value.push({\n          offset: 1,\n          visibility: 'hidden',\n          pointerEvents: 'none',\n        });\n      }\n    }\n    else {\n      v.value.push({\n        offset: 1,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    res.animate.push(v);\n  }\n  parseAnimate(res, data, start, duration, displayStartTime, offset, false, false);\n  // text的位置修正，init的left/top会覆盖props的，多嵌套一层也可以但麻烦\n  let lib = newLib[res.libraryId];\n  if(lib && lib.tagName === 'span') {\n    res.init.style.left = res.init.style.left || 0;\n    res.init.style.left += lib.props.style.left || 0;\n    res.init.style.top = res.init.style.top || 0;\n    res.init.style.top += lib.props.style.top || 0;\n  }\n  // 父级链接塞进父级作为唯一children，有可能父级是递归嵌套的，需到达最里层\n  if(data.hasOwnProperty('asChild')) {\n    let asChild = data.asChild;\n    if(parentLink.hasOwnProperty(asChild)) {\n      let div = $.ae2karas.JSON.stringify(parentLink[asChild]);\n      div = $.ae2karas.JSON.parse(div);\n      let target = div;\n      delete target.asParent;\n      delete target.asChild;\n      while(target.children.length) {\n        target = target.children[0];\n        delete target.asParent;\n        delete target.asChild;\n      }\n      target.children.push(res);\n      res = div;\n    }\n  }\n  return res;\n}\n\n/**\n * 静态部分转换，library中无动画的部分\n * @param library\n * @param assetId\n * @param newLib\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n */\nfunction parse(library, assetId, newLib, start, duration, displayStartTime, offset) {\n  let data = library[assetId];\n  let { type, name, src, width, height, children, geom, text } = data;\n  let res = {\n    id: -1, // 占位符\n    name,\n    tagName: type,\n    props: {\n      style: {\n        position: 'absolute',\n        // width,\n        // height,\n        // overflow: 'hidden',\n      },\n    },\n  };\n  if(width) {\n    res.props.style.width = width;\n  }\n  if(height) {\n    res.props.style.height = height;\n  }\n  if(type === 'div' && !geom && !text) {\n    res.props.style.overflow = 'hidden';\n  }\n  // 矢量图层特殊解析，添加\n  if(geom) {\n    parseGeom(res, data, start, duration, displayStartTime, offset);\n  }\n  else if(text) {\n    let content = data.content;\n    if(content.fillColor) {\n      res.props.style.color = [\n        parseInt(content.fillColor[0] * 255),\n        parseInt(content.fillColor[1] * 255),\n        parseInt(content.fillColor[2] * 255),\n      ];\n    }\n    else {\n      res.props.style.color = 'transparent';\n    }\n    if(content.stroke && content.strokeWidth) {\n      res.props.style.textStrokeColor = [\n        parseInt(content.stroke[0] * 255),\n        parseInt(content.stroke[1] * 255),\n        parseInt(content.stroke[2] * 255),\n      ];\n      res.props.style.textStrokeWidth = content.strokeWidth;\n      if(content.strokeOver) {\n        res.props.style.textStrokeOver = 'fill';\n      }\n    }\n    res.props.style.fontFamily = content.fontFamily;\n    res.props.style.fontSize = content.fontSize;\n    // res.props.style.fontStyle = content.fontStyle;\n    // res.props.style.lineHeight = (content.fontSize + content.leading) / content.fontSize;\n    res.props.style.lineHeight = 1.2;\n    res.children = [content.text];\n    // 对齐方式\n    let baselineLocs = content.baselineLocs;\n    let left = 0, right = 0;\n    for(let i = 0, len = baselineLocs.length; i < len; i += 4) {\n      left = Math.min(left, baselineLocs[i]);\n      right = Math.max(right, baselineLocs[i + 2]);\n    }\n    if(content.position) {\n      res.props.style.left = content.position[0];\n      res.props.style.top = content.position[1];\n    }\n    else {\n      if(left) {\n        res.props.style.left = left;\n        res.props.style.width = right - left;\n        res.props.style.textAlign = 'center';\n      }\n      res.props.style.top = -content.fontSize + baselineLocs[1];\n    }\n  }\n  // 图片无children\n  else if(type === 'img') {\n    res.props.src = src;\n  }\n  else if(Array.isArray(children)) {\n    res.children = [];\n    parseChildren(res, children, library, newLib, start, duration, displayStartTime, offset);\n  }\n  res.id = assetId;\n  newLib[assetId] = res;\n  return res.id;\n}\n\nfunction parseChildren(res, children, library, newLib, start, duration, displayStartTime, offset) {\n  if(Array.isArray(children)) {\n    // 先一遍解析父级链接，因为父级可能不展示或者只需要父级一层不递归解析父级的children\n    let parentLink = {};\n    for(let i = 0, len = children.length; i < len; i++) {\n      let item = children[i];\n      if(item.hasOwnProperty('asParent')) {\n        parentLink[item.asParent] = preParse(item, library, start, duration, displayStartTime, offset);\n      }\n    }\n    // 因为父级链接可能产生递归嵌套，需要再循环处理一遍parentLink\n    for(let i in parentLink) {\n      if(parentLink.hasOwnProperty(i)) {\n        let item = parentLink[i];\n        let asChild = item.asChild;\n        while(asChild !== undefined && asChild !== null && parentLink[asChild]) {\n          let parent = $.ae2karas.JSON.stringify(parentLink[asChild]);\n          parent = $.ae2karas.JSON.parse(parent);\n          // 可能出现嵌套，需放在最里层\n          let target = parent;\n          while(target.children.length) {\n            target = target.children[0];\n          }\n          target.children.push(item);\n          item = parent;\n          asChild = parent.asChild;\n        }\n        if(item !== parentLink[i]) {\n          parentLink[i] = item;\n        }\n      }\n    }\n    // 再普通解析，遇到父级链接特殊处理\n    for(let i = 0, len = children.length; i < len; i++) {\n      let item = children[i];\n      // 参考线图层跳过\n      if(item.guide) {\n        continue;\n      }\n      let temp = recursion(item, library, newLib, start, duration, displayStartTime, offset, parentLink);\n      if(temp) {\n        res.children.push(temp);\n        // ppt应该放在父层合成层，有父级链接要跳过，另外ppt计算应该用合成的尺寸，而非节点自身的尺寸\n        if(temp.init && temp.init.style && temp.init.style.perspective) {\n          // res.props.style.perspective = temp.init.style.perspective || undefined;\n          res.props.style.perspective = Math.sqrt(Math.pow(res.props.style.width, 2) + Math.pow(res.props.style.height, 2));\n          delete temp.init.style.perspective;\n        }\n        if(temp.children && temp.children.length === 1) {\n          let t = temp.children[0];\n          if(t.init && t.init.style && t.init.style.perspective) {\n            // temp.props.style.perspective = t.init.style.perspective || undefined;\n            res.props.style.perspective = Math.sqrt(Math.pow(res.props.style.width, 2) + Math.pow(res.props.style.height, 2));\n            delete t.init.style.perspective;\n          }\n        }\n        /**\n         * 有mask分析mask，特殊的这里有2种mask：\n         * 1种是图层自带的mask属性，这时mask是个矢量，它需要跟随本图层的父链接，\n         * 因此不能直接存入当前children，要下钻；\n         * 2种是TrkMat图层，这时mask可能会是个图片，它不跟随被遮罩图层但可能有自己的父链接\n         * 需要将mask标识上移到父链接层\n         */\n        if(item.mask) {\n          // 这种是自带的属性矢量mask\n          if(item.mask.enabled) {\n            let m = parseMask(item, temp, start, duration, displayStartTime, offset);\n            let target = res;\n            while(temp.children && temp.children.length === 1) {\n              target = temp;\n              temp = temp.children[0];\n            }\n            let prev = target.children[target.children.length - 1];\n            // 特殊的地方，被遮罩的可能有init样式，mask需同等赋值，位置锚点会有冲突其它不会\n            let style = prev.init.style;\n            let mStyle = m.props.style;\n            if(style) {\n              for(let i in style) {\n                if(style.hasOwnProperty(i) && {\n                  'scaleX': true,\n                  'scaleY': true,\n                  'scaleZ': true,\n                  'rotateZ': true,\n                }.hasOwnProperty(i)) {\n                  mStyle[i] = style[i];\n                }\n              }\n            }\n            let a = prev.animate;\n            // mask本身会有动画，还会继承同层被遮罩的位置锚点的动画，不能直接赋予，需计算每帧差值应用过来\n            if(a && a.length) {\n              m.animate = m.animate || [];\n              for(let i = 0, len = a.length; i < len; i++) {\n                let item = a[i], value = item.value, value1 = value[1];\n                // tfo和left/top是一起的，可直接计算\n                if(value1.hasOwnProperty('transformOrigin')) {\n                  let tfo = {\n                    value: [{\n                      offset: 0,\n                    }],\n                    options: item.options,\n                  };\n                  if(value[0].hasOwnProperty('easing')) {\n                    tfo.value[0].easing = value[0].easing;\n                  }\n                  let arr = mStyle.transformOrigin.split(' ');\n                  arr[0] = parseFloat(arr[0]);\n                  arr[1] = parseFloat(arr[1]);\n                  for(let j = 1, len2 = value.length; j < len2; j++) {\n                    let item2 = value[j];\n                    let diffX = item2.left - (style.left || 0);\n                    let diffY = item2.top - (style.top || 0);\n                    let arr2 = [arr[0] - diffX, arr[1] - diffY];\n                    let o = {\n                      offset: item2.offset,\n                      left: mStyle.left + diffX,\n                      top: mStyle.top + diffY,\n                      transformOrigin: arr2.join(' '),\n                    };\n                    if(item2.hasOwnProperty('easing')) {\n                      o.easing = item2.easing;\n                    }\n                    tfo.value.push(o);\n                  }\n                  m.animate.push(tfo);\n                }\n                else if(value1.hasOwnProperty('translatePath')\n                  || value1.hasOwnProperty('translateX')\n                  || value1.hasOwnProperty('translateY')\n                  || value1.hasOwnProperty('translateZ')) {\n                  m.animate.push(JSON.parse(JSON.stringify(item)));\n                }\n              }\n            }\n            target.children.push(m);\n          }\n          // 另外这种是独立mask图层，看有无嵌套，有则提升mask属性\n          else {\n            let needFix;\n            // 嵌套都是父级只有props不会出现init\n            if(temp.props) {\n              if(temp.props.mask || temp.props.clip) {}\n              else {\n                needFix = true;\n              }\n            }\n            if(needFix) {\n              let child = temp;\n              while(child.children && child.children[0]) {\n                child = child.children[0];\n              }\n              if(child.init && (child.init.mask || child.init.clip)) {\n                if(child.init.mask) {\n                  delete child.init.mask;\n                  temp.props.mask = true;\n                }\n                else {\n                  delete child.props.mask;\n                  temp.props.clip = true;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * 形状图层特殊的直接为其生成一个内联children\n * @param res\n * @param data\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n */\nfunction parseGeom(res, data, start, duration, displayStartTime, offset) {\n  let { shape: { content, fill, gFill, stroke, transform }, trim } = data;\n  let begin2 = start - offset - displayStartTime;\n  // 矢量可能有多个，但样式共用一个\n  let children = [];\n  let len = content.length;\n  if(!len) {\n    return;\n  }\n  // 由于动画的特殊性，无法直接用矢量标签，需嵌套一个中间层div\n  let child = {\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n      },\n    },\n    children,\n    animate: [],\n  };\n  for(let i = 0, len = content.length; i < len; i++) {\n    let item = content[i];\n    let { type, direction, size, position, roundness, points } = item;\n    let f;\n    // 由于动画的特殊性，无法直接用矢量标签，需嵌套一个中间层div\n    let $geom = {\n      tagName: '$polyline',\n      props: {\n        style: {\n          position: 'absolute',\n        },\n      },\n      animate: [],\n    };\n    children.push($geom);\n    // 分类处理矢量\n    if(type === 'rect' || type === 'ellipse') {\n      let t = transformSize(size, begin2, duration);\n      let first = t.value[0];\n      $geom.props.style.width = first.size[0];\n      $geom.props.style.height = first.size[1];\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n        };\n        // 用缩放代替尺寸变化\n        for(let i = 1, len = t.value.length; i < len; i++) {\n          let item = t.value[i];\n          let size = item.size;\n          item.size = undefined;\n          item.scaleX = size[0] / first.size[0];\n          item.scaleY = size[1] / first.size[1];\n        }\n        $geom.animate.push(t);\n      }\n      if(type === 'rect') {\n        let o = path.rect2polyline(first.size[0], first.size[1], roundness[0]);\n        $geom.props.points = o.points;\n        $geom.props.controls = o.controls;\n      }\n      else if(type === 'ellipse') {\n        let o = path.ellipse2polyline();\n        $geom.props.points = o.points;\n        $geom.props.controls = o.controls;\n      }\n    }\n    else if(type === 'star') {\n      // TODO\n    }\n    else if(type === 'path') {\n      let t = transformPoints(points, begin2, duration);\n      let d = t.data;\n      // path特殊没尺寸，3d等计算ppt需赋值\n      $geom.props.style.width = data.shape.width = d.width;\n      $geom.props.style.height = data.shape.height = d.height;\n      // path的特殊位置计算，因为ae中尺寸为0\n      $geom.props.style.left = d.x2;\n      $geom.props.style.top = d.y2;\n      t.data = undefined;\n      let first = t.value[0];\n      $geom.props.points = first.points;\n      $geom.props.controls = first.controls;\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n        };\n        $geom.animate.push(t);\n      }\n    }\n    // path没有position\n    if(position && position.length) {\n      let t = transformPosition(position, begin2, duration);\n      let first = t.value[0];\n      $geom.props.style.translateX = first.translateX;\n      $geom.props.style.translateY = first.translateY;\n      $geom.props.style.translateZ = first.translateZ;\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n        };\n        for(let i = 1; i < t.value.length; i++) {\n          let item = t.value[i];\n          item.translateX -= first.translateX;\n          item.translateY -= first.translateY;\n          item.translateZ -= first.translateZ;\n        }\n        $geom.animate.push(t);\n      }\n    }\n    if(fill && fill.rule === 2 || gFill && gFill.rule === 2) {\n      $geom.props.style.fillRule = 'evenodd';\n    }\n    // geom内嵌的transform单独分析，都作用在中间层div上，anchorPoint比较特殊\n    let { anchorPoint } = transform;\n    if(Array.isArray(anchorPoint) && anchorPoint.length) {\n      let t = transformOrigin(anchorPoint, begin2, duration);\n      let first = t.value[0];\n      let v = first.transformOrigin.split(' ');\n      v[0] = parseFloat(v[0]);\n      v[1] = parseFloat(v[1]);\n      /**\n       * path很特殊，原始没有宽高，ae是锚点0,0相对于自身左上角原点，定位则是锚点来进行定位\n       * 需记录最初的位置，发生锚点动画时，其会干扰left/top，同步形成位置动画\n       */\n      if(type === 'path') {\n        let left = $geom.props.style.left;\n        let top = $geom.props.style.top;\n        $geom.props.style.left -= v[0];\n        $geom.props.style.top -= v[1];\n        let w = $geom.props.style.width;\n        let h = $geom.props.style.height;\n        v[0] += w * 0.5;\n        v[1] += h * 0.5;\n        if(v[0] !== w * 0.5 || v[1] !== h * 0.5) {\n          $geom.props.style.transformOrigin = first.transformOrigin;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          // tfo的每个动画需考虑对坐标的影响\n          for(let i = 1, len = t.value.length; i < len; i++) {\n            let item = t.value[i];\n            let tfo = item.transformOrigin.split(' ');\n            tfo[0] = parseFloat(tfo[0]);\n            tfo[1] = parseFloat(tfo[1]);\n            item.left = left - tfo[0];\n            item.top = top - tfo[1];\n          }\n          $geom.animate.push(t);\n        }\n      }\n      else {\n        // tfo中心判断，加上尺寸*0.5\n        v[0] += $geom.props.style.width * 0.5;\n        v[1] += $geom.props.style.height * 0.5;\n        if(v[0] !== $geom.props.style.width * 0.5 || v[1] !== $geom.props.style.height * 0.5) {\n          $geom.props.style.transformOrigin = first.transformOrigin;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          $geom.animate.push(t);\n        }\n        if(v[0]) {\n          $geom.props.style.left = -v[0];\n        }\n        if(v[1]) {\n          $geom.props.style.top = -v[1];\n        }\n      }\n    }\n    parseAnimate(child, data.shape, start, duration, offset, true, true);\n    // gradient需要根据transformOrigin来计算\n    if(gFill) {\n      let transformOrigin = $geom.props.style.transformOrigin;\n      let w = $geom.props.style.width, h = $geom.props.style.height;\n      let cx, cy;\n      if(transformOrigin) {\n        transformOrigin = transformOrigin.split(' ');\n        cx = parseFloat(transformOrigin[0]);\n        cy = parseFloat(transformOrigin[1]);\n      }\n      else {\n        cx = w * 0.5;\n        cy = h * 0.5;\n      }\n      let { type, start, end, colors: { m, p } } = gFill;\n      let steps = '';\n      for(let i = 0; i < p; i++) {\n        if(i) {\n          steps += ', ';\n        }\n        steps += 'rgba(' + Math.floor(m[i * 4 + 1] * 255);\n        steps += ',' + Math.floor(m[i * 4 + 2] * 255);\n        steps += ',' + Math.floor(m[i * 4 + 3] * 255);\n        // 可能有透明度\n        if(m.length >= p * 4 + (i + 1) * 2) {\n          steps += ',' + m[p * 4 + (i + 1) * 2 - 1];\n        }\n        else {\n          steps += ',1';\n        }\n        steps += ') ';\n        steps += m[i * 4] * 100 + '%';\n      }\n      if(!steps) {\n        steps = '#F00, #00F';\n      }\n      if(type === 1) {\n        let x0 = $geom.props.style.translateX || 0, y0 = $geom.props.style.translateY || 0;\n        let x1 = start[0] + cx, y1 = start[1] + cy;\n        let x2 = end[0] + cx, y2 = end[1] + cy;\n        f = `linearGradient(${(x1 - x0) / w} ${(y1 - y0) / h} ${(x2 - x0) / w} ${(y2 - y0)/ h}, ${steps})`;\n      }\n      else if(type === 2) {\n        let x0 = $geom.props.style.translateX || 0, y0 = $geom.props.style.translateY || 0;\n        let x1 = start[0] + cx, y1 = start[1] + cy;\n        let x2 = end[0] + cx, y2 = end[1] + cy;\n        f = `radialGradient(${(x1 - x0) / w} ${(y1 - y0) / h} ${(x2 - x0) / w} ${(y2 - y0)/ h}, ${steps})`;\n      }\n      $geom.props.style.fill = [f];\n    }\n    // trimPath裁剪动画或属性\n    if(trim && trim.hasOwnProperty('start') && trim.hasOwnProperty('end')) {\n      let start = trim.start, end = trim.end;\n      if(start.length > 1) {\n        let t = transformPath(start, begin2, duration, false);\n        let first = t.value[0];\n        if(first.start !== 0) {\n          $geom.props.start = first.start;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          $geom.animate.push(t);\n        }\n      }\n      else {\n        $geom.props.start = start[0] * 0.01;\n      }\n      if(end.length > 1) {\n        let t = transformPath(end, begin2, duration, true);\n        let first = t.value[0];\n        if(first.end !== 0) {\n          $geom.props.end = first.end;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          $geom.animate.push(t);\n        }\n      }\n      else {\n        $geom.props.end = end[0] * 0.01;\n      }\n    }\n  }\n  if(fill && Array.isArray(fill.color) && fill.color.length) {\n    let t = transformFill(fill, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.fill = first.fill;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.color) && stroke.color.length) {\n    let t = transformStroke(stroke, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.stroke = first.stroke;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.width) && stroke.width.length) {\n    let t = transformStrokeWidth(stroke.width, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeWidth = first.strokeWidth;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.lineJoin) && stroke.lineJoin.length) {\n    let t = transformLineJoin(stroke.lineJoin, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeLineJoin = first.strokeLineJoin;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.strokeMiterlimit) && stroke.strokeMiterlimit.length) {\n    let t = transformMiterLimit(stroke.strokeMiterlimit, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeMiterlimit = first.strokeMiterlimit;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && stroke.dashes) {\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeDasharray = [stroke.dashes];\n    }\n  }\n  if(!stroke) {\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeWidth = [0];\n    }\n  }\n  res.children = [child];\n}\n\nfunction parseMask(data, target, start, duration, displayStartTime, offset) {\n  // $.ae2karas.log(data);\n  // $.ae2karas.log(target);\n  // 会出现父级链接特殊情况，此时遮罩应该是其唯一children\n  while(target.children && target.children.length === 1) {\n    target = target.children[0];\n  }\n  let targetProps = target.init;\n  let left = targetProps.style.left || 0;\n  let top = targetProps.style.top || 0;\n  let res = {\n    tagName: '$polyline',\n    props: {\n      style: {\n        position: 'absolute',\n        fill: '#FFF',\n      },\n    },\n    animate: [],\n  };\n  let { width, height, mask: { list: { points, opacity }, mode, inverted } } = data;\n  // 相加之外都是相减\n  if(mode === MaskMode.ADD) {\n    if(inverted) {\n      res.props.clip = true;\n    }\n    else {\n      res.props.mask = true;\n    }\n  }\n  else {\n    if(inverted) {\n      res.props.mask = true;\n    }\n    else {\n      res.props.clip = true;\n    }\n  }\n  // 样式和target一致，只有位置信息需要，锚点单独处理\n  let style = targetProps.style;\n  for(let i in style) {\n    if(style.hasOwnProperty(i) && ['left', 'top', 'translateX', 'translateY', 'translateZ'].indexOf(i) > -1) {\n      res.props.style[i] = style[i];\n    }\n  }\n  // 要显示mask，可能会被target同化\n  delete res.props.style.visibility;\n  delete res.props.style.pointerEvents;\n  // mask的2个动画，points和opacity\n  let o = {};\n  let begin2 = start - offset - displayStartTime;\n  if(Array.isArray(points) && points.length) {\n    let t = transformPoints(points, begin2, duration);\n    o = t.data;\n    res.props.style.width = o.width;\n    res.props.style.height = o.height;\n    t.data = undefined;\n    let first = t.value[0];\n    res.props.points = first.points;\n    res.props.controls = first.controls;\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      res.animate.push(t);\n    }\n  }\n  else {\n    return res;\n  }\n  if(Array.isArray(opacity) && opacity.length) {\n    let t = transformOpacity(opacity, begin2, duration);\n    let first = t.value[0];\n    if(first.opacity !== 1) {\n      res.props.style.opacity = first.opacity;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      res.animate.push(t);\n    }\n  }\n  // 获取对象锚点，mask的锚点需保持相同\n  let transformOrigin = targetProps.style.transformOrigin;\n  let cx = width * 0.5, cy = height * 0.5;\n  if(transformOrigin) {\n    let v = transformOrigin.split(' ');\n    cx = parseFloat(v[0]);\n    cy = parseFloat(v[1]);\n  }\n  // 位置和锚点保持和mask相同，由于points可能不是0，0开始，需计算偏移\n  res.props.style.transformOrigin = (cx - o.x2) + ' ' + (cy - o.y2);\n  res.props.style.left = left + o.x2;\n  res.props.style.top = top + o.y2;\n  return res;\n}\n\nfunction recursionId(data, map) {\n  if(data.hasOwnProperty('libraryId')) {\n    if(map.hasOwnProperty(data.libraryId)) {\n      data.libraryId = map[data.libraryId];\n    }\n  }\n  let children = data.children;\n  if(Array.isArray(children)) {\n    for(let i = 0, len = children.length; i < len; i++) {\n      recursionId(children[i], map);\n    }\n  }\n}\n\nlet uuid = 0;\n\nexport default function(data) {\n  $.ae2karas.error('convert');\n  let { workAreaStart, workAreaDuration, result, library } = data;\n  let { name, width, height, children, displayStartTime } = result;\n  let newLib = [];\n  let res = {\n    uuid: uuid++,\n    name,\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n        width,\n        height,\n        // overflow: 'hidden',\n      },\n    },\n    children: [],\n    library: newLib,\n    abbr: false,\n  };\n  parseChildren(res, children, library, newLib, workAreaStart, workAreaDuration, displayStartTime, 0);\n  // library可能出现null，需排除，然后要把id重新映射一下\n  let map = {}, count = 0, ol = newLib.length;\n  for(let i = 0, len = newLib.length; i < len; i++) {\n    let item = newLib[i];\n    if(item) {\n      let nid = count;\n      map[item.id] = count++;\n      item.id = nid;\n    }\n    else {\n      newLib.splice(i, 1);\n      i--;\n      len--;\n    }\n  }\n  if(ol > newLib.length) {\n    recursionId(res, map);\n    for(let i = 0, len = newLib.length; i < len; i++) {\n      recursionId(newLib[i], map);\n    }\n  }\n  // 检查直接孩子中的camera，删除并转换为3d\n  let cd = res.children;\n  for(let i = 0, len = cd.length; i < len; i++) {\n    let child = cd[i];\n    if(child.isCamera) {\n      let cameraData = {\n        name: child.name,\n        cameraZoom: child.cameraZoom,\n        cameraDepthOfField: child.cameraDepthOfField,\n        cameraFocusDistance: child.cameraFocusDistance,\n        cameraAperture: child.cameraAperture,\n        cameraBlurLevel: child.cameraBlurLevel,\n        init: child.init,\n        animate: child.animate,\n      };\n      cd.splice(i, 1);\n      camera(cameraData, res);\n      break;\n    }\n  }\n  return res;\n}\n","export default function(ae2karas) {\n  if(!ae2karas.JSON) {\n    if(typeof JSON !== 'undefined') {\n      return ae2karas.JSON = JSON;\n    }\n    let JSON = ae2karas.JSON = {};\n    (function() {\n      let toString = {}.toString;\n\n      function isType(type) {\n        return function(obj) {\n          return toString.call(obj) === '[object ' + type + ']';\n        }\n      }\n\n      let isObject = isType('Object');\n      let isString = isType('String');\n      let isFunction = isType('Function');\n      let isNumber = isType('Number');\n      let isBoolean = isType('Boolean');\n\n      function f(n) {\n        return n < 10 ? '0' + n : n;\n      }\n\n      if(!isFunction(Date.prototype.toJSON)) {\n\n        Date.prototype.toJSON = function() {\n\n          return isFinite(this.valueOf())\n            ? this.getUTCFullYear() + '-' +\n            f(this.getUTCMonth() + 1) + '-' +\n            f(this.getUTCDate()) + 'T' +\n            f(this.getUTCHours()) + ':' +\n            f(this.getUTCMinutes()) + ':' +\n            f(this.getUTCSeconds()) + 'Z'\n            : null;\n        };\n\n        String.prototype.toJSON =\n          Number.prototype.toJSON =\n            Boolean.prototype.toJSON = function() {\n              return this.valueOf();\n            };\n      }\n\n      var cx,\n        escapable,\n        gap,\n        indent,\n        meta,\n        rep;\n\n      function quote(string) {\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function(a) {\n          var c = meta[a];\n          return isString(c)\n            ? c\n            : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n      }\n\n\n      function str(key, holder) {\n        var i,\n\n          k,\n          v,\n          length,\n          mind = gap,\n          partial,\n          value = holder[key];\n        if(value && isObject(value) &&\n          isFunction(value.toJSON)) {\n          value = value.toJSON(key);\n        }\n        if(isFunction(rep)) {\n          value = rep.call(holder, key, value);\n        }\n        if(isString(value)) {\n          return quote(value);\n        }\n        else if(isNumber(value)) {\n          return isFinite(value) ? String(value) : 'null';\n        }\n        else if(isBoolean(value) || value === null) {\n          return String(value);\n        }\n        else {\n          if(!value) {\n            return 'null';\n          }\n          gap += indent;\n          partial = [];\n          if(Array.isArray(value)) {\n            length = value.length;\n            for(i = 0; i < length; i += 1) {\n              partial[i] = str(i, value) || 'null';\n            }\n            v = partial.length === 0\n              ? '[]'\n              : gap\n                ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']'\n                : '[' + partial.join(',') + ']';\n            gap = mind;\n            return v;\n          }\n          if(rep && isObject(rep)) {\n            length = rep.length;\n            for(i = 0; i < length; i += 1) {\n              if(isString(rep[i])) {\n                k = rep[i];\n                v = str(k, value);\n                if(v) {\n                  partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                }\n              }\n            }\n          }\n          else {\n            for(k in value) {\n              if(value.hasOwnProperty(k)) {\n                v = str(k, value);\n                if(v) {\n                  partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                }\n              }\n            }\n          }\n          v = partial.length === 0\n            ? '{}'\n            : gap\n              ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}'\n              : '{' + partial.join(',') + '}';\n          gap = mind;\n          return v;\n        }\n      }\n\n      if(!isFunction(JSON.stringify)) {\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n        meta = {\n          '\\b': '\\\\b',\n          '\\t': '\\\\t',\n          '\\n': '\\\\n',\n          '\\f': '\\\\f',\n          '\\r': '\\\\r',\n          '\"': '\\\\\"',\n          '\\\\': '\\\\\\\\'\n        };\n        JSON.stringify = function(value, replacer, space) {\n          var i;\n          gap = '';\n          indent = '';\n          if(isNumber(space)) {\n            for(i = 0; i < space; i += 1) {\n              indent += ' ';\n            }\n          }\n          else if(isString(space)) {\n            indent = space;\n          }\n          rep = replacer;\n          if(replacer && !isFunction(replacer) &&\n            (!isObject(replacer) ||\n              !isNumber(replacer.length))) {\n            throw new Error('JSON.stringify');\n          }\n          return str('', { '': value });\n        };\n      }\n      if(!isFunction(JSON.parse)) {\n        cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n        JSON.parse = function(text, reviver) {\n          var j;\n\n          function walk(holder, key) {\n            var k, v, value = holder[key];\n            if(value && isObject(value)) {\n              for(k in value) {\n                if(value.hasOwnProperty(k)) {\n                  v = walk(value, k);\n                  if(v !== undefined) {\n                    value[k] = v;\n                  }\n                  else {\n                    delete value[k];\n                  }\n                }\n              }\n            }\n            return reviver.call(holder, key, value);\n          }\n\n          text = String(text);\n          cx.lastIndex = 0;\n          if(cx.test(text)) {\n            text = text.replace(cx, function(a) {\n              return '\\\\u' +\n                ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            });\n          }\n          if(/^[\\],:{}\\s]*$/\n            .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n              .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n              .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n            let eval2 = eval;\n            j = eval2('(' + text + ')');\n            return isFunction(reviver)\n              ? walk({ '': j }, '')\n              : j;\n          }\n          throw new SyntaxError('JSON.parse');\n        };\n      }\n    }());\n    return JSON;\n  }\n  return ae2karas.JSON;\n}\n","import enums from './enums';\nimport parse from './parse/index';\nimport convert from './convert/index';\nimport json from './json';\n\nconst { ES_TYPE, EVENT } = enums;\n\nArray.isArray = Array.isArray || function(arr) {\n  return arr instanceof Array;\n};\n\nArray.prototype.indexOf = Array.prototype.indexOf || function(o) {\n  for(let i = 0, len = this.length; i < len; i++) {\n    if(this[i] === o) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nif (!Array.prototype.forEach) {\n  Array.prototype.forEach = function(callback, thisArg) {\n    var T, k;\n    if (this == null) {\n      throw new TypeError(' this is null or not defined');\n    }\n    var O = Object(this);\n    var len = O.length >>> 0;\n    if (typeof callback !== \"function\") {\n      throw new TypeError(callback + ' is not a function');\n    }\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n    k = 0;\n    while (k < len) {\n      var kValue;\n      if (k in O) {\n        kValue = O[k];\n        callback.call(T, kValue, k, O);\n      }\n      k++;\n    }\n  };\n}\n\nlet ae2karas = $.ae2karas = $.ae2karas || {};\njson(ae2karas);\n\nae2karas.dispatch = (function() {\n  let xLib;\n  try {\n    xLib = new ExternalObject('lib:PlugPlugExternalObject');\n  } catch(e) {\n    alert('Missing ExternalObject: ');\n  }\n  return function(type, data) {\n    if(xLib) {\n      if(data && data instanceof Object) {\n        data = ae2karas.JSON.stringify(data);\n      }\n      else if(data === undefined) {\n        data = 'undefined';\n      }\n      else if(data === null) {\n        data = 'null';\n      }\n      else if(data === true) {\n        data = 'true';\n      }\n      else if(data === false) {\n        data = 'false';\n      }\n      var eventObj = new CSXSEvent();\n      eventObj.type = type;\n      eventObj.data = data;\n      eventObj.dispatch();\n    }\n  };\n})();\n\nae2karas.log = function(s) {\n  let len = arguments.length;\n  if(arguments.length > 1) {\n    for(let i = 1; i < len; i++) {\n      let item = arguments[i];\n      if(item === undefined) {\n        item = 'undefined';\n      }\n      else if(item === null) {\n        item = 'null';\n      }\n      s += ', ' + item.toString();\n    }\n    $.ae2karas.dispatch(enums.EVENT.LOG, s);\n  }\n  else {\n    $.ae2karas.dispatch(enums.EVENT.LOG, s);\n  }\n};\n\nae2karas.warn = function(s) {\n  let len = arguments.length;\n  if(arguments.length > 1) {\n    for(let i = 1; i < len; i++) {\n      let item = arguments[i];\n      if(item === undefined) {\n        item = 'undefined';\n      }\n      else if(item === null) {\n        item = 'null';\n      }\n      s += ', ' + item.toString();\n    }\n    $.ae2karas.dispatch(enums.EVENT.WARN, s);\n  }\n  else {\n    $.ae2karas.dispatch(enums.EVENT.WARN, s);\n  }\n};\n\nae2karas.error = function(s) {\n  let len = arguments.length;\n  if(arguments.length > 1) {\n    for(let i = 1; i < len; i++) {\n      let item = arguments[i];\n      if(item === undefined) {\n        item = 'undefined';\n      }\n      else if(item === null) {\n        item = 'null';\n      }\n      s += ', ' + item.toString();\n    }\n    $.ae2karas.dispatch(enums.EVENT.ERROR, s);\n  }\n  else {\n    $.ae2karas.dispatch(enums.EVENT.ERROR, s);\n  }\n};\n\nfunction getItemType(item) {\n  if(item instanceof CompItem) {\n    return ES_TYPE.COMP_ITEM;\n  }\n  if(item instanceof FolderItem) {\n    return ES_TYPE.FOLDER_ITEM;\n  }\n  if(item instanceof FootageItem) {\n    return ES_TYPE.FOOTAGE_ITEM;\n  }\n  return ES_TYPE.UNKNOWN;\n}\n\nae2karas.getCompositions = function() {\n  let folderItem = app.project;\n  let list = [];\n  // 所有的合成都在app.project下，包含文件夹递归树的\n  for(let i = 1; i <= folderItem.numItems; i++) {\n    let compItem = folderItem.item(i);\n    let type = getItemType(compItem);\n    if(type === ES_TYPE.COMP_ITEM) {\n      list.push({\n        id: compItem.id,\n        name: compItem.name,\n        width: compItem.width,\n        height: compItem.height,\n        type,\n      });\n    }\n  }\n  $.ae2karas.dispatch(EVENT.INIT, list);\n};\n\nfunction findCompositionById(id) {\n  for(let i = 1; i <= app.project.numItems; i++) {\n    const compItem = app.project.item(i);\n    if(compItem.id === id) {\n      return compItem;\n    }\n  }\n  return null;\n}\n\nae2karas.convert = function(id) {\n  $.ae2karas.error('start');\n  let composition = findCompositionById(id);\n  if(!composition) {\n    $.ae2karas.error('error: no composition');\n    $.ae2karas.dispatch(enums.EVENT.CANCEL);\n    return;\n  }\n  // 递归遍历分析合成对象，转换ae的图层为普通js对象，留给后续转换karas用\n  let res = parse(composition);\n  $.ae2karas.dispatch(enums.EVENT.FINISH, convert(res));\n  // 结束后才能删除临时生成的导出psd的合成和渲染队列\n  $.ae2karas.delTemp();\n  $.ae2karas.error('finish');\n};\n\nlet list = [];\nae2karas.addTemp = function(o) {\n  list.push(o);\n};\nae2karas.delTemp = function() {\n  while(list.length) {\n    list.pop().remove();\n  }\n};\n\nae2karas.export = function(data) {\n  $.ae2karas.error('export');\n  $.ae2karas.log(data);\n  let file = File.saveDialog();\n  if(!file) {\n    return;\n  }\n  let name = file.fsName;\n  if(!/\\.json$/.test(name)) {\n    name += '.json';\n  }\n  let f = new File(name);\n  f.open('w');\n  f.encoding = 'utf-8';\n  f.write(data);\n  f.close();\n  return true;\n};\n"],"names":["ES_TYPE","FOLDER_ITEM","FOOTAGE_ITEM","COMP_ITEM","UNKNOWN","EVENT","INIT","LOG","WARN","ERROR","FINISH","CANCEL","ADD_TEMP","DEL_TEMP","LAYER_TRANSFORM","VECTOR_TRANSFORM","MASK_TRANSFORM","getPropertyValues","prop","matchName","noEasing","numKeys","arr","i","v1","keyValue","v2","c1","keyOutSpatialTangent","c2","keyInSpatialTangent","x1","y1","x2","y2","isZ","length","p1","p2","Math","abs","o","time","keyTime","value","e","getEasing","easing","push","k","b","r","is1","is2","easing2","start","end","t1","t2","e1","keyOutTemporalEase","e2","keyInTemporalEase","interpolationType","keyOutInterpolationType","KeyframeInterpolationType","LINEAR","influence","indexOf","avSpeedX","avSpeedY","avSpeed","sqrt","avSpeedZ","speed","undefined","max","min","transformLayer","res","numProperties","item","property","enabled","hasOwnProperty","transformVector","transformMask","transformGeom","group","navigationShapeTree","name","content","transform","pop","rect","ellipse","star","path","stroke","fill","gFill","type","direction","size","position","roundness","starType","points","innerRadius","outerRadius","innerRoundness","outerRoundness","rotation","color","opacity","width","lineCap","lineJoin","miterLimit","dashes","d","g","canSetExpression","j","exec","v","len","rule","colors","gradient","ff","app","project","file","demoFile","File","absoluteURI","open","fileString","read","replace","hasNoGradColorData","gradientIndex","navigationIndex","encoded","unescape","encodeURIComponent","stringIndex","gradFillIndex","gradStrokeIndex","limitIndex","Number","MAX_VALUE","lastIndex","currentKey","keyframes","hasOpacity","maxOpacities","maxColors","gradientData","c","endMatch","xmlString","substr","XML_Ob","XML","stops","opacitiesArr","op","floats","nextFloats","midPoint","midPosition","roundNumber","toString","midPointValue","colorsArr","sortedColors","sort","sortFunction","midPointValueR","midPointValueG","midPointValueB","arrayLength","count","lastValue","offsetValue","mergedKeys","mergedArr","splice","l","m","p","num","decimals","parseFloat","toFixed","roundArray","retArray","a","a_0","b_0","shape","trim","psd2png","source","helperSequenceComp","items","addComp","height","layers","add","$","ae2karas","addTemp","renderQueue","outputModule","applyTemplate","fileName","exists","remove","onStatusChanged","status","RQItemStatus","DONE","bug","rename","render","uuid","recursion","composition","library","displayStartTime","duration","error","hasSolo","solo","asParent","asChild","parent","index","children","outer","isTrackMatte","item2","parseLayer","isClip","last","isMask","reverse","layer","startTime","inPoint","outPoint","blendingMode","guide","guideLayer","ddd","threeDLayer","isCamera","trackMatteType","TrackMatteType","ALPHA_INVERTED","LUMA_INVERTED","warn","geom","txt","vector","mask","text","cameraZoom","cameraDepthOfField","cameraFocusDistance","cameraAperture","cameraBlurLevel","id","assetId","asset","hasExist","FootageItem","src","fsName","newName","isPsd","test","CompItem","maskMode","MaskMode","NONE","list","mode","inverted","font","fontFamily","fontStyle","fontSize","leading","baselineLocs","applyFill","fillColor","strokeOver","strokeOverFill","applyStroke","strokeColor","strokeWidth","boxText","boxTextSize","boxTextPos","workAreaStart","workAreaDuration","log","result","parse","vertices","inTangents","outTangents","closed","it","ot","w","h","pts","cts","x","y","unshift","slice","controls","rect2polyline","ellipse2polyline","rx","ry","r2d","n","PI","sliceBezier","t","p3","p4","x3","y3","x12","y12","x23","y23","x123","y123","x4","y4","x34","y34","x234","y234","x1234","y1234","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","bezier","mY1","mY2","Error","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","BezierEasing","linear","easeIn","easeOut","ease","easeInOut","cubicBezier","v3","arguments","isArray","timingFunction","match","getAreaList","begin","reducer","startIndex","endIndex","first","next","percent","prev","transformOrigin","options","iterations","offset","transformOpacity","transformPosition","translateX","translateY","isStart","translatePath","translateXYZ","key","transformRotateX","rotateX","transformRotateY","rotateY","transformRotateZ","rotateZ","transformScale","is3d","scaleX","scaleY","scaleZ","transformPath","isEnd","transformPoints","data","vertices1","inTangents1","outTangents1","vertices2","inTangents2","outTangents2","pIn","nIn","pOut","nOut","s","transformFill","parseInt","transformStroke","transformStrokeWidth","transformLineJoin","strokeLinejoin","isFirst","transformMiterLimit","transformSize","getDuration","animate","child","getKeyFrames","hash","ks","one","has","len2","getOffset","offsetList","offsetHash","insertKf","style","ea","obj","pv","nv","split","diff","getPerspectiveAndScale","look","eyeX","eyeY","eyeZ","lookX","lookY","lookZ","init","translateZ","perspective","floor","pow","scale","setTranslateAndRotate","tfo","tx","ty","tz","left","top","z","convert","temp","record","cx","cy","convertX","convertY","tan","alpha","atan","sin","cos","bd","ab","ad","ag","ac","bc","props","perspectiveOrigin","animation","str","JSON","stringify","clone","osList","osHash","wrap","tagName","wrapAnimate","zIndex","len3","preParse","parseAnimate","isDirect","isGeom","anchorPoint","position_0","position_1","position_2","begin2","translateAbbr","hasZ","za","newLib","parentLink","display","libraryId","clip","BlendingMode","MULTIPLY","mixBlendMode","SCREEN","OVERLAY","DARKEN","COLOR_DODGE","COLOR_BURN","HARD_LIGHT","SOFT_LIGHT","DIFFERENCE","EXCLUSION","HUE","SATURATION","COLOR","LUMINOSITY","visibility","pointerEvents","lib","div","target","overflow","parseGeom","textStrokeColor","textStrokeWidth","textStrokeOver","lineHeight","right","textAlign","parseChildren","parseMask","mStyle","value1","diffX","diffY","arr2","join","needFix","f","$geom","fillRule","steps","x0","y0","strokeLineJoin","strokeMiterlimit","strokeDasharray","targetProps","ADD","recursionId","map","abbr","ol","nid","cd","cameraData","camera","isType","call","isObject","isString","isFunction","isNumber","isBoolean","Date","prototype","toJSON","isFinite","valueOf","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","String","Boolean","escapable","gap","indent","meta","rep","quote","string","charCodeAt","holder","mind","partial","replacer","space","reviver","walk","eval2","eval","SyntaxError","enums","forEach","callback","thisArg","T","TypeError","O","Object","kValue","json","dispatch","xLib","ExternalObject","alert","eventObj","CSXSEvent","getItemType","FolderItem","getCompositions","folderItem","numItems","compItem","findCompositionById","delTemp","saveDialog","encoding","write","close"],"mappings":";;AAAA,YAAe;AACbA,EAAAA,OAAO,EAAE;AACPC,IAAAA,WAAW,EAAE,YADN;AAEPC,IAAAA,YAAY,EAAE,aAFP;AAGPC,IAAAA,SAAS,EAAE,UAHJ;AAIPC,IAAAA,OAAO,EAAE,SAAA;GALE;AAObC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAE,eADD;AAELC,IAAAA,GAAG,EAAE,cAFA;AAGLC,IAAAA,IAAI,EAAE,eAHD;AAILC,IAAAA,KAAK,EAAE,gBAJF;AAKLC,IAAAA,MAAM,EAAE,iBALH;AAMLC,IAAAA,MAAM,EAAE,iBANH;AAOLC,IAAAA,QAAQ,EAAE,kBAPL;AAQLC,IAAAA,QAAQ,EAAE,kBAAA;AARL,GAAA;AAPM,CAAf;;ACAA,IAAMC,eAAe,GAAG;AACtB,EAAA,mBAAA,EAAqB,aADC;AAEtB,EAAA,eAAA,EAAiB,UAFK;AAGtB,EAAA,iBAAA,EAAmB,YAHG;AAItB,EAAA,iBAAA,EAAmB,YAJG;AAKtB,EAAA,iBAAA,EAAmB,YALG;AAMtB,EAAA,YAAA,EAAc,OANQ;AAOtB,EAAA,kBAAA,EAAoB,aAPE;AAQtB,EAAA,eAAA,EAAiB,SARK;AAStB,EAAA,eAAA,EAAiB,SATK;AAUtB,EAAA,eAAA,EAAiB,SAVK;EAWtB,cAAgB,EAAA,SAAA;AAXM,CAAxB,CAAA;AAcA,IAAMC,gBAAgB,GAAG;AACvB,EAAA,oBAAA,EAAsB,aADC;AAEvB,EAAA,sBAAA,EAAwB,UAFD;AAGvB,EAAA,mBAAA,EAAqB,OAHE;AAIvB,EAAA,kBAAA,EAAoB,MAJG;AAKvB,EAAA,uBAAA,EAAyB,UALF;AAMvB,EAAA,sBAAA,EAAwB,SAND;AAOvB,EAAA,2BAAA,EAA6B,SAPN;AAQvB,EAAA,wBAAA,EAA0B,OARH;EASvB,sBAAwB,EAAA,KAAA;AATD,CAAzB,CAAA;AAYA,IAAMC,cAAc,GAAG;AACrB,EAAA,iBAAA,EAAmB,QADE;EAErB,mBAAqB,EAAA,SAAA;AAFA,CAAvB,CAAA;;AAKA,SAASC,iBAAT,CAA2BC,IAA3B,EAAiCC,SAAjC,EAA4CC,QAA5C,EAAsD;AACpD,EAAA,IAAMC,OAAN,GAAkBH,IAAlB,CAAMG,OAAN,CADoD;;AAGpD,EAAA,IAAGA,OAAO,IAAIA,OAAO,GAAG,CAAxB,EAA2B;IACzB,IAAIC,GAAG,GAAG,EAAV,CAAA;;IACA,KAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIF,OAApB,EAA6BE,CAAC,EAA9B,EAAkC;AAChC;AACA,MAAA,IAAGA,CAAC,KAAKF,OAAN,KAAkBF,SAAS,KAAK,eAAd,IAAiCA,SAAS,KAAK,sBAAjE,CAAH,EAA6F;AAC3F,QAAA,IAAIK,EAAE,GAAGN,IAAI,CAACO,QAAL,CAAcF,CAAd,CAAT;YAA2BG,EAAE,GAAGR,IAAI,CAACO,QAAL,CAAcF,CAAC,GAAG,CAAlB,CAAhC,CAAA;AACA,QAAA,IAAII,EAAE,GAAGT,IAAI,CAACU,oBAAL,CAA0BL,CAA1B,CAAT;YAAuCM,EAAE,GAAGX,IAAI,CAACY,mBAAL,CAAyBP,CAAC,GAAG,CAA7B,CAA5C,CAF2F;;AAI3F,QAAA,IAAIQ,EAAE,GAAGP,EAAE,CAAC,CAAD,CAAX;AAAA,YAAgBQ,EAAE,GAAGR,EAAE,CAAC,CAAD,CAAvB;AAAA,YAA4BS,EAAE,GAAGP,EAAE,CAAC,CAAD,CAAnC;AAAA,YAAwCQ,EAAE,GAAGR,EAAE,CAAC,CAAD,CAA/C,CAJ2F;;QAM3F,IAAIS,GAAG,GAAGX,EAAE,CAACY,MAAH,GAAY,CAAZ,IAAiBZ,EAAE,CAAC,CAAD,CAAnB,IAA0BE,EAAE,CAACU,MAAH,GAAY,CAAZ,IAAiBV,EAAE,CAAC,CAAD,CAAvD,CAAA;;AACA,QAAA,IAAG,CAACK,EAAE,KAAKE,EAAP,IAAaD,EAAE,KAAKE,EAArB,KAA4B,CAACC,GAA7B,KAAqCR,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAeA,EAAE,CAAC,CAAD,CAAF,KAAU,CAAzB,IAA8BE,EAAE,CAAC,CAAD,CAAF,KAAU,CAAxC,IAA6CA,EAAE,CAAC,CAAD,CAAF,KAAU,CAA5F,CAAH,EAAmG;UACjG,IAAIQ,EAAE,GAAG,CAACb,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAAX,EAAgBH,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAA1B,CAAT;cAAyCW,EAAE,GAAG,CAACZ,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAAX,EAAgBH,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAA1B,CAA9C,CADiG;;AAGjG,UAAA,IAAGE,EAAE,KAAK,CAAP,IAAYE,EAAE,KAAK,CAAtB,EAAyB;YACvB,IAAGM,IAAI,CAACC,GAAL,CAASb,EAAE,CAAC,CAAD,CAAX,CAAmB,IAAA,CAAnB,IAAwBY,IAAI,CAACC,GAAL,CAASX,EAAE,CAAC,CAAD,CAAX,CAAmB,IAAA,CAA9C,EAAiD;AAC/C,cAAA,IAAIY,EAAC,GAAG;AACNC,gBAAAA,IAAI,EAAExB,IAAI,CAACyB,OAAL,CAAapB,CAAb,IAAkB,IADlB;AAENqB,gBAAAA,KAAK,EAAE,CAACb,EAAD,EAAKC,EAAL,EAASK,EAAE,CAAC,CAAD,CAAX,EAAgBA,EAAE,CAAC,CAAD,CAAlB,EAAuBC,EAAE,CAAC,CAAD,CAAzB,EAA8BA,EAAE,CAAC,CAAD,CAAhC,EAAqCL,EAArC,EAAyCC,EAAzC,CAAA;eAFT,CAAA;;AAIA,cAAA,IAAGX,CAAC,KAAKF,OAAN,IAAiB,CAACD,QAArB,EAA+B;gBAC7B,IAAIyB,CAAC,GAAGC,SAAS,CAAC5B,IAAD,EAAOK,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAjB,CAAA;;AACA,gBAAA,IAAGsB,CAAH,EAAM;kBACJJ,EAAC,CAACM,MAAF,GAAWF,CAAX,CAAA;AACD,iBAAA;AACF,eAAA;;cACDvB,GAAG,CAAC0B,IAAJ,CAASP,EAAT,CAAA,CAAA;AACA,cAAA,SAAA;AACD,aAAA;AACF,WAfD;eAiBK;AACH,YAAA,IAAIQ,CAAC,GAAL,KAAA,CAAA;AAAA,gBAAOC,CAAC,GAAR,KAAA,CAAA,CAAA;;YACA,IAAGnB,EAAE,KAAK,CAAV,EAAa;AACXmB,cAAAA,CAAC,GAAGlB,EAAJ,CAAA;AACAiB,cAAAA,CAAC,GAAG,CAACf,EAAE,GAAGgB,CAAN,IAAWjB,EAAf,CAAA;AACD,aAHD,MAIK,IAAGA,EAAE,KAAK,CAAV,EAAa;AAChBiB,cAAAA,CAAC,GAAGhB,EAAJ,CAAA;AACAe,cAAAA,CAAC,GAAG,CAACjB,EAAE,GAAGkB,CAAN,IAAWnB,EAAf,CAAA;AACD,aAHI,MAIA;AACH,cAAA,IAAIoB,CAAC,GAAGpB,EAAE,GAAGE,EAAb,CAAA;cACAiB,CAAC,GAAG,CAAClB,EAAE,GAAGE,EAAE,GAAGiB,CAAX,KAAiB,CAAIA,GAAAA,CAArB,CAAJ,CAAA;AACAF,cAAAA,CAAC,GAAG,CAACjB,EAAE,GAAGkB,CAAN,IAAWnB,EAAf,CAAA;AACD,aAdE;;;YAgBH,IAAIqB,GAAG,GAAGb,IAAI,CAACC,GAAL,CAASS,CAAC,GAAGZ,EAAE,CAAC,CAAD,CAAN,GAAYa,CAAZ,GAAgBb,EAAE,CAAC,CAAD,CAA3B,KAAmC,CAA7C,CAAA;YACA,IAAIgB,GAAG,GAAGd,IAAI,CAACC,GAAL,CAASS,CAAC,GAAGX,EAAE,CAAC,CAAD,CAAN,GAAYY,CAAZ,GAAgBZ,EAAE,CAAC,CAAD,CAA3B,KAAmC,CAA7C,CAAA;;YACA,IAAGc,GAAG,IAAIC,GAAV,EAAe;AACb,cAAA,IAAIZ,GAAC,GAAG;AACNC,gBAAAA,IAAI,EAAExB,IAAI,CAACyB,OAAL,CAAapB,CAAb,IAAkB,IADlB;AAENqB,gBAAAA,KAAK,EAAE,CAACb,EAAD,EAAKC,EAAL,EAASK,EAAE,CAAC,CAAD,CAAX,EAAgBA,EAAE,CAAC,CAAD,CAAlB,EAAuBC,EAAE,CAAC,CAAD,CAAzB,EAA8BA,EAAE,CAAC,CAAD,CAAhC,EAAqCL,EAArC,EAAyCC,EAAzC,CAAA;eAFT,CAAA;;AAIA,cAAA,IAAGX,CAAC,KAAKF,OAAN,IAAiB,CAACD,QAArB,EAA+B;gBAC7B,IAAIyB,EAAC,GAAGC,SAAS,CAAC5B,IAAD,EAAOK,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAjB,CAAA;;AACA,gBAAA,IAAGsB,EAAH,EAAM;kBACJJ,GAAC,CAACM,MAAF,GAAWF,EAAX,CAAA;AACD,iBAAA;AACF,eAAA;;cACDvB,GAAG,CAAC0B,IAAJ,CAASP,GAAT,CAAA,CAAA;AACA,cAAA,SAAA;AACD,aAAA;AACF,WAAA;AACF,SAAA;AACF,OAAA;;AACD,MAAA,IAAIA,CAAC,GAAG;AACNC,QAAAA,IAAI,EAAExB,IAAI,CAACyB,OAAL,CAAapB,CAAb,IAAkB,IADlB;AAENqB,QAAAA,KAAK,EAAE1B,IAAI,CAACO,QAAL,CAAcF,CAAd,CAAA;OAFT,CAAA;;AAIA,MAAA,IAAGA,CAAC,KAAKF,OAAN,IAAiB,CAACD,QAArB,EAA+B;QAC7B,IAAIyB,GAAC,GAAGC,SAAS,CAAC5B,IAAD,EAAOK,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAjB,CAAA;;AACA,QAAA,IAAGsB,GAAH,EAAM;UACJJ,CAAC,CAACM,MAAF,GAAWF,GAAX,CAAA;AACD,SAAA;;AACD,QAAA,IAAG1B,SAAS,KAAK,eAAd,KACGD,IAAI,CAACO,QAAL,CAAcF,CAAd,CAAiB,CAAA,CAAjB,KAAuBL,IAAI,CAACO,QAAL,CAAcF,CAAC,GAAG,CAAlB,CAAA,CAAqB,CAArB,CAD1B,KAEEL,IAAI,CAACO,QAAL,CAAcF,CAAd,EAAiB,CAAjB,CAAA,KAAwBL,IAAI,CAACO,QAAL,CAAcF,CAAC,GAAG,CAAlB,CAAqB,CAAA,CAArB,CAF7B,EAEsD;AACpD,UAAA,IAAIsB,GAAC,GAAGC,SAAS,CAAC5B,IAAD,EAAOK,CAAP,EAAUA,CAAC,GAAG,CAAd,EAAiB,IAAjB,CAAjB,CAAA;;AACA,UAAA,IAAGsB,GAAH,EAAM;YACJJ,CAAC,CAACa,OAAF,GAAYT,GAAZ,CAAA;AACD,WAAA;AACF,SAAA;AACF,OAAA;;MACDvB,GAAG,CAAC0B,IAAJ,CAASP,CAAT,CAAA,CAAA;AACD,KAAA;;AACD,IAAA,OAAOnB,GAAP,CAAA;AACD,GAvFD,MAwFK,IAAGD,OAAO,IAAIA,OAAO,GAAG,CAAxB,EAA2B;AAC9B,IAAA,OAAO,CAACH,IAAI,CAACO,QAAL,CAAc,CAAd,CAAD,CAAP,CAAA;AACD,GAFI,MAGA;AACH,IAAA,OAAO,CAACP,IAAI,CAAC0B,KAAN,CAAP,CAAA;AACD,GAAA;AACF,CAAA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASE,SAAT,CAAmB5B,IAAnB,EAAyBqC,KAAzB,EAAgCC,GAAhC,EAAqCrB,GAArC,EAA0C;AACxC,EAAA,IAAIsB,EAAE,GAAGvC,IAAI,CAACyB,OAAL,CAAaY,KAAb,CAAT;AAAA,MAA8BG,EAAE,GAAGxC,IAAI,CAACyB,OAAL,CAAaa,GAAb,CAAnC,CAAA;AACA,EAAA,IAAIhC,EAAE,GAAGN,IAAI,CAACO,QAAL,CAAc8B,KAAd,CAAT;AAAA,MAA+B7B,EAAE,GAAGR,IAAI,CAACO,QAAL,CAAc+B,GAAd,CAApC,CAAA;EACA,IAAIG,EAAE,GAAGzC,IAAI,CAAC0C,kBAAL,CAAwBL,KAAxB,CAA+B,CAAA,CAA/B,CAAT;MAA4CM,EAAE,GAAG3C,IAAI,CAAC4C,iBAAL,CAAuBN,GAAvB,CAA4B,CAAA,CAA5B,CAAjD,CAHwC;AAKxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EACA,IAAIO,iBAAiB,GAAG,EAAxB,CAAA;;AACA,EAAA,IAAG7C,IAAI,CAAC8C,uBAAL,CAA6BT,KAA7B,CAAA,KAAwCU,yBAAyB,CAACC,MAAlE,IACEhD,IAAI,CAAC8C,uBAAL,CAA6BR,GAA7B,MAAsCS,yBAAyB,CAACC,MADrE,EAC6E;AAC3EH,IAAAA,iBAAiB,GAAG,QAApB,CAAA;AACD,GAAA;;AACD,EAAA,IAAIhC,EAAE,GAAG4B,EAAE,CAACQ,SAAH,GAAe,IAAxB;AAAA,MAA8BlC,EAAE,GAAG,CAAA,GAAI4B,EAAE,CAACM,SAAH,GAAe,IAAtD,CAAA;EACA,IAAInC,EAAJ,EAAQE,EAAR,CAAA;AACA,EAAA,IAAIf,SAAS,GAAGD,IAAI,CAACC,SAArB,CAAA;;EACA,IAAG,CACD,mBADC,EACoB,eADpB,EAED,oBAFC,EAEqB,sBAFrB,EAGD,YAHC,EAGa,mBAHb,EAID,kBAJC,CAImBiD,CAAAA,OAJnB,CAI2BjD,SAJ3B,CAAA,GAIwC,CAAC,CAJ5C,EAI+C;AAC7C,IAAA,IAAIkD,QAAQ,GAAG9B,IAAI,CAACC,GAAL,CAASd,EAAE,CAAC,CAAD,CAAF,GAAQF,EAAE,CAAC,CAAD,CAAnB,KAA2BkC,EAAE,GAAGD,EAAhC,CAAf,CAAA;AACA,IAAA,IAAIa,QAAQ,GAAG/B,IAAI,CAACC,GAAL,CAASd,EAAE,CAAC,CAAD,CAAF,GAAQF,EAAE,CAAC,CAAD,CAAnB,KAA2BkC,EAAE,GAAGD,EAAhC,CAAf,CAAA;;AACA,IAAA,IAAGtB,GAAH,EAAQ;AACNmC,MAAAA,QAAQ,GAAG/B,IAAI,CAACC,GAAL,CAASd,EAAE,CAAC,CAAD,CAAF,GAAQF,EAAE,CAAC,CAAD,CAAnB,KAA2BkC,EAAE,GAAGD,EAAhC,CAAX,CAAA;AACD,KAAA;;AACD,IAAA,IAAIc,OAAO,GAAGhC,IAAI,CAACiC,IAAL,CAAUH,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAA3C,CAAd,CAAA;;IACA,IAAG5C,EAAE,CAACU,MAAH,GAAY,CAAZ,IAAiBZ,EAAE,CAACY,MAAH,GAAY,CAAhC,EAAmC;AACjC,MAAA,IAAIqC,QAAQ,GAAGlC,IAAI,CAACC,GAAL,CAASd,EAAE,CAAC,CAAD,CAAF,GAAQF,EAAE,CAAC,CAAD,CAAnB,KAA2BkC,EAAE,GAAGD,EAAhC,CAAf,CAAA;AACAc,MAAAA,OAAO,GAAGhC,IAAI,CAACiC,IAAL,CAAUH,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAAjC,GAA4CG,QAAQ,GAAGA,QAAjE,CAAV,CAAA;AACD,KAAA;;IACD,IAAGF,OAAO,KAAK,CAAf,EAAkB;MAChBvC,EAAE,GAAGD,EAAE,GAAG4B,EAAE,CAACe,KAAR,GAAgBH,OAArB,CADgB;;MAGhBrC,EAAE,GAAG,IAAID,EAAE,GAAG4B,EAAE,CAACa,KAAR,GAAgBH,OAAzB,CAAA;AACD,KAAA;AACF,GApBD,MAqBK,IAAG7C,EAAE,KAAKF,EAAV,EAAc;AACjB,IAAA,IAAI+C,QAAO,GAAGhC,IAAI,CAACC,GAAL,CAASd,EAAE,GAAGF,EAAd,CAAA,IAAqBkC,EAAE,GAAGD,EAA1B,CAAd,CAAA;;IACAzB,EAAE,GAAGD,EAAE,GAAG4B,EAAE,CAACe,KAAR,GAAgBH,QAArB,CAFiB;;IAIjBrC,EAAE,GAAG,IAAID,EAAE,GAAG4B,EAAE,CAACa,KAAR,GAAgBH,QAAzB,CAAA;AACD,GAAA;;AACD,EAAA,IAAGxC,EAAE,KAAKC,EAAP,IAAaC,EAAE,KAAKC,EAApB,IAA0BF,EAAE,KAAK2C,SAAjC,IAA8CzC,EAAE,KAAKyC,SAAxD,EAAmE;AACjE,IAAA,OAAA;AACD,GAAA;;EACD5C,EAAE,GAAGQ,IAAI,CAACqC,GAAL,CAAS7C,EAAT,EAAa,CAAb,CAAL,CAAA;EACAA,EAAE,GAAGQ,IAAI,CAACsC,GAAL,CAAS9C,EAAT,EAAa,CAAb,CAAL,CAAA;EACAE,EAAE,GAAGM,IAAI,CAACqC,GAAL,CAAS3C,EAAT,EAAa,CAAb,CAAL,CAAA;EACAA,EAAE,GAAGM,IAAI,CAACsC,GAAL,CAAS5C,EAAT,EAAa,CAAb,CAAL,CAAA;;EACA,IAAG8B,iBAAiB,KAAK,QAAzB,EAAmC;AACjC/B,IAAAA,EAAE,GAAGD,EAAL,CAAA;AACAG,IAAAA,EAAE,GAAGD,EAAL,CAAA;AACD,GAAA;;EACD,OAAO,CAACF,EAAD,EAAKC,EAAL,EAASC,EAAT,EAAaC,EAAb,CAAP,CAAA;AACD,CAAA;;AAEM,SAAS4C,cAAT,CAAwB5D,IAAxB,EAA8B;EACnC,IAAI6D,GAAG,GAAG,EAAV,CAAA;;AACA,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,CAAC,IAAIL,IAAI,CAAC8D,aAAjC,EAAgDzD,CAAC,EAAjD,EAAqD;AACnD,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,IAAGL,eAAe,CAACsE,cAAhB,CAA+BjE,SAA/B,CAAH,EAA8C;AAC5C4D,QAAAA,GAAG,CAACjE,eAAe,CAACK,SAAD,CAAhB,CAAH,GAAkCF,iBAAiB,CAACgE,IAAD,EAAO9D,SAAP,EAAkB,KAAlB,CAAnD,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,OAAO4D,GAAP,CAAA;AACD,CAAA;AAEM,SAASM,eAAT,CAAyBnE,IAAzB,EAA+B;EACpC,IAAI6D,GAAG,GAAG,EAAV,CAAA;;AACA,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,CAAC,IAAIL,IAAI,CAAC8D,aAAjC,EAAgDzD,CAAC,EAAjD,EAAqD;AACnD,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,IAAGJ,gBAAgB,CAACqE,cAAjB,CAAgCjE,SAAhC,CAAH,EAA+C;AAC7C4D,QAAAA,GAAG,CAAChE,gBAAgB,CAACI,SAAD,CAAjB,CAAH,GAAmCF,iBAAiB,CAACgE,IAAD,EAAO9D,SAAP,EAAkB,KAAlB,CAApD,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,OAAO4D,GAAP,CAAA;AACD,CAAA;AAEM,SAASO,aAAT,CAAuBpE,IAAvB,EAA6B;EAClC,IAAI6D,GAAG,GAAG,EAAV,CAAA;;AACA,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,CAAC,IAAIL,IAAI,CAAC8D,aAAjC,EAAgDzD,CAAC,EAAjD,EAAqD;AACnD,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,IAAGH,cAAc,CAACoE,cAAf,CAA8BjE,SAA9B,CAAH,EAA6C;AAC3C4D,QAAAA,GAAG,CAAC/D,cAAc,CAACG,SAAD,CAAf,CAAH,GAAiCF,iBAAiB,CAACgE,IAAD,EAAO9D,SAAP,EAAkB,IAAlB,CAAlD,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,OAAO4D,GAAP,CAAA;AACD,CAAA;AAEM,SAASQ,aAAT,CAAuBrE,IAAvB,EAA6B;AAClC,EAAA,OAAOD,iBAAiB,CAACC,IAAD,EAAO,EAAP,EAAW,IAAX,CAAxB,CAAA;AACD;;ACtPD,SAASsE,KAAT,CAAetE,IAAf,EAAqBuE,mBAArB,EAA0C;AACxC,EAAA,IAAIV,GAAG,GAAG,EAAV,CADwC;;AAGxC,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;AACAsE,MAAAA,mBAAmB,CAACzC,IAApB,CAAyBiC,IAAI,CAACS,IAA9B,CAAA,CAAA;;AACA,MAAA,QAAOvE,SAAP;AACE,QAAA,KAAK,oBAAL;UACE4D,GAAG,CAACY,OAAJ,GAAcA,OAAO,CAACV,IAAD,EAAOQ,mBAAP,CAArB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,6BAAL;AACE;AACAV,UAAAA,GAAG,CAACa,SAAJ,GAAgBP,eAAe,CAACJ,IAAD,CAA/B,CAAA;AACA,UAAA,MAAA;AAPJ,OAAA;;AASAQ,MAAAA,mBAAmB,CAACI,GAApB,EAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACDd,EAAAA,GAAG,CAACY,OAAJ,CAAYC,SAAZ,GAAwBb,GAAG,CAACa,SAA5B,CAAA;EACA,OAAOb,GAAG,CAACY,OAAX,CAAA;AACD,CAAA;;AAED,SAASA,OAAT,CAAiBzE,IAAjB,EAAuBuE,mBAAvB,EAA4C;AAC1C;AACA,EAAA,IAAIV,GAAG,GAAG;IACRW,IAAI,EAAExE,IAAI,CAACwE,IADH;AAERC,IAAAA,OAAO,EAAE,EAAA;GAFX,CAAA;;AAIA,EAAA,KAAI,IAAIpE,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;AACAsE,MAAAA,mBAAmB,CAACzC,IAApB,CAAyBiC,IAAI,CAACS,IAA9B,CAAA,CAAA;;AACA,MAAA,QAAOvE,SAAP;AACE,QAAA,KAAK,0BAAL;UACE4D,GAAG,CAACY,OAAJ,CAAY3C,IAAZ,CAAiB8C,IAAI,CAACb,IAAD,CAArB,CAAA,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,6BAAL;UACEF,GAAG,CAACY,OAAJ,CAAY3C,IAAZ,CAAiB+C,OAAO,CAACd,IAAD,CAAxB,CAAA,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,0BAAL;UACEF,GAAG,CAACY,OAAJ,CAAY3C,IAAZ,CAAiBgD,IAAI,CAACf,IAAD,CAArB,CAAA,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,2BAAL;UACEF,GAAG,CAACY,OAAJ,CAAY3C,IAAZ,CAAiBiD,MAAI,CAAChB,IAAD,CAArB,CAAA,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,8BAAL;AACEF,UAAAA,GAAG,CAACmB,MAAJ,GAAaA,MAAM,CAACjB,IAAD,CAAnB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,4BAAL;AACEF,UAAAA,GAAG,CAACoB,IAAJ,GAAWA,IAAI,CAAClB,IAAD,CAAf,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,8BAAL;UACEF,GAAG,CAACqB,KAAJ,GAAYA,KAAK,CAACnB,IAAD,EAAOQ,mBAAP,CAAjB,CAAA;AACA,UAAA,MAAA;AArBJ,OAAA;;AAuBAA,MAAAA,mBAAmB,CAACI,GAApB,EAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOd,GAAP,CAAA;AACD,CAAA;;AAED,SAASe,IAAT,CAAc5E,IAAd,EAAoB;AAClB;AACA,EAAA,IAAI6D,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE,MAAA;GADR,CAAA;;AAGA,EAAA,KAAI,IAAI9E,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,QAAOA,SAAP;AACE,QAAA,KAAK,6BAAL;AACE4D,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAACrC,KAArB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,uBAAL;AACEmC,UAAAA,GAAG,CAACwB,IAAJ,GAAWhB,aAAa,CAACN,IAAD,CAAxB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,2BAAL;AACEF,UAAAA,GAAG,CAACyB,QAAJ,GAAejB,aAAa,CAACN,IAAD,CAA5B,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,4BAAL;AACEF,UAAAA,GAAG,CAAC0B,SAAJ,GAAgBlB,aAAa,CAACN,IAAD,CAA7B,CAAA;AACA,UAAA,MAAA;AAZJ,OAAA;AAcD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOF,GAAP,CAAA;AACD,CAAA;;AAED,SAASgB,OAAT,CAAiB7E,IAAjB,EAAuB;AACrB,EAAA,IAAI6D,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE,SAAA;GADR,CAAA;;AAGA,EAAA,KAAI,IAAI9E,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,QAAOA,SAAP;AACE,QAAA,KAAK,6BAAL;AACE4D,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAACrC,KAArB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,0BAAL;AACEmC,UAAAA,GAAG,CAACwB,IAAJ,GAAWhB,aAAa,CAACN,IAAD,CAAxB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,8BAAL;AACEF,UAAAA,GAAG,CAACyB,QAAJ,GAAejB,aAAa,CAACN,IAAD,CAA5B,CAAA;AACA,UAAA,MAAA;AATJ,OAAA;AAWD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOF,GAAP,CAAA;AACD,CAAA;;AAED,SAASiB,IAAT,CAAc9E,IAAd,EAAoB;AAClB,EAAA,IAAI6D,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE,MAAA;GADR,CAAA;;AAGA,EAAA,KAAI,IAAI9E,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,QAAOA,SAAP;AACE,QAAA,KAAK,6BAAL;AACE4D,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAACrC,KAArB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,uBAAL;AACEmC,UAAAA,GAAG,CAAC2B,QAAJ,GAAezB,IAAI,CAACrC,KAApB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,yBAAL;AACEmC,UAAAA,GAAG,CAAC4B,MAAJ,GAAa1B,IAAI,CAACrC,KAAlB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,2BAAL;AACEmC,UAAAA,GAAG,CAACyB,QAAJ,GAAevB,IAAI,CAACrC,KAApB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,+BAAL;AACEmC,UAAAA,GAAG,CAAC6B,WAAJ,GAAkB3B,IAAI,CAACrC,KAAvB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,+BAAL;AACEmC,UAAAA,GAAG,CAAC8B,WAAJ,GAAkB5B,IAAI,CAACrC,KAAvB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,iCAAL;AACEmC,UAAAA,GAAG,CAAC+B,cAAJ,GAAqB7B,IAAI,CAACrC,KAA1B,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,iCAAL;AACEmC,UAAAA,GAAG,CAACgC,cAAJ,GAAqB9B,IAAI,CAACrC,KAA1B,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,2BAAL;AACEmC,UAAAA,GAAG,CAACiC,QAAJ,GAAe/B,IAAI,CAACrC,KAApB,CAAA;AACA,UAAA,MAAA;AA3BJ,OAAA;AA6BD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOmC,GAAP,CAAA;AACD,CAAA;;AAED,SAASmB,MAAT,CAAgBhF,IAAhB,EAAsB;EACpB,IAAI6D,GAAG,GAAG,EAAV,CAAA;;AACA,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,QAAOA,SAAP;AACE,QAAA,KAAK,0BAAL;AACE4D,UAAAA,GAAG,CAACkC,KAAJ,GAAY1B,aAAa,CAACN,IAAD,CAAzB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,4BAAL;AACEF,UAAAA,GAAG,CAACmC,OAAJ,GAAc3B,aAAa,CAACN,IAAD,CAA3B,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,0BAAL;AACEF,UAAAA,GAAG,CAACoC,KAAJ,GAAY5B,aAAa,CAACN,IAAD,CAAzB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,sBAAL;AACEF,UAAAA,GAAG,CAACqC,OAAJ,GAAc7B,aAAa,CAACN,IAAD,CAA3B,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,8BAAL;AACEF,UAAAA,GAAG,CAACsC,QAAJ,GAAe9B,aAAa,CAACN,IAAD,CAA5B,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,gCAAL;AACEF,UAAAA,GAAG,CAACuC,UAAJ,GAAiB/B,aAAa,CAACN,IAAD,CAA9B,CAAA;AACA,UAAA,MAAA;AACF;AACA;AACA;AArBF,OAAA;AAuBD,KAAA;AACF,GA9BmB;;;AAgCpB,EAAA,IAAIsC,MAAM,GAAGrG,IAAI,CAACgE,QAAL,CAAc,QAAd,CAAb,CAAA;;AACA,EAAA,IAAGqC,MAAH,EAAW;IACT,IAAIC,CAAC,GAAG,EAAR,CAAA;IACA,IAAIC,CAAC,GAAG,EAAR,CAAA;;AACA,IAAA,KAAI,IAAIlG,EAAC,GAAG,CAAZ,EAAeA,EAAC,IAAIgG,MAAM,CAACvC,aAA3B,EAA0CzD,EAAC,EAA3C,EAA+C;AAC7C,MAAA,IAAI0D,KAAI,GAAGsC,MAAM,CAACrC,QAAP,CAAgB3D,EAAhB,CAAX,CAAA;;AACA,MAAA,IAAG0D,KAAI,IAAIA,KAAI,CAACE,OAAhB,EAAyB;AACvB,QAAA,IAAIhE,UAAS,GAAG8D,KAAI,CAAC9D,SAArB,CAAA;;QACA,IAAG8D,KAAI,CAACyC,gBAAR,EAA0B;UACxB,IAAGvG,UAAS,CAACiD,OAAV,CAAkB,yBAAlB,CAA+C,GAAA,CAAC,CAAnD,EAAsD;AACpD,YAAA,IAAIuD,CAAC,GAAG,KAAA,CAAMC,IAAN,CAAWzG,UAAX,CAAR,CAAA;YACAqG,CAAC,CAACG,CAAC,CAAC,CAAD,CAAD,GAAO,CAAR,CAAD,GAAc1C,KAAI,CAACrC,KAAnB,CAAA;WAFF,MAIK,IAAGzB,UAAS,CAACiD,OAAV,CAAkB,wBAAlB,CAAA,GAA8C,CAAC,CAAlD,EAAqD;AACxD,YAAA,IAAIuD,EAAC,GAAG,KAAA,CAAMC,IAAN,CAAWzG,UAAX,CAAR,CAAA;;YACAsG,CAAC,CAACE,EAAC,CAAC,CAAD,CAAD,GAAO,CAAR,CAAD,GAAc1C,KAAI,CAACrC,KAAnB,CAAA;AACD,WAAA;AACF,SAAA;AACF,OAAA;AACF,KAAA;;IACD,IAAG4E,CAAC,CAACpF,MAAL,EAAa;MACX,IAAIyF,CAAC,GAAG,EAAR,CAAA;;AACA,MAAA,KAAI,IAAItG,GAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGN,CAAC,CAACpF,MAAvB,EAA+Bb,GAAC,GAAGuG,GAAnC,EAAwCvG,GAAC,EAAzC,EAA6C;AAC3CsG,QAAAA,CAAC,CAAC7E,IAAF,CAAOwE,CAAC,CAACjG,GAAD,CAAR,CAAA,CAAA;;AACA,QAAA,IAAGkG,CAAC,CAAClG,GAAD,CAAD,KAASoD,SAAZ,EAAuB;AACrBkD,UAAAA,CAAC,CAAC7E,IAAF,CAAOwE,CAAC,CAACjG,GAAD,CAAR,CAAA,CAAA;AACD,SAFD,MAGK;AACHsG,UAAAA,CAAC,CAAC7E,IAAF,CAAOyE,CAAC,CAAClG,GAAD,CAAR,CAAA,CAAA;AACD,SAAA;AACF,OAAA;;MACDwD,GAAG,CAACwC,MAAJ,GAAaM,CAAb,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAO9C,GAAP,CAAA;AACD,CAAA;;AAED,SAASkB,MAAT,CAAc/E,IAAd,EAAoB;AAClB,EAAA,IAAI6D,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE,MAAA;GADR,CAAA;;AAGA,EAAA,KAAI,IAAI9E,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,QAAOA,SAAP;AACE,QAAA,KAAK,6BAAL;AACE4D,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAACrC,KAArB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,mBAAL;AACEmC,UAAAA,GAAG,CAAC4B,MAAJ,GAAapB,aAAa,CAACN,IAAD,CAA1B,CAAA;AACA,UAAA,MAAA;AANJ,OAAA;AAQD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOF,GAAP,CAAA;AACD,CAAA;;AAED,SAASoB,IAAT,CAAcjF,IAAd,EAAoB;EAClB,IAAI6D,GAAG,GAAG,EAAV,CAAA;;AACA,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,QAAOA,SAAP;AACE,QAAA,KAAK,uBAAL;AACE4D,UAAAA,GAAG,CAACgD,IAAJ,GAAW9C,IAAI,CAACrC,KAAhB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,wBAAL;AACEmC,UAAAA,GAAG,CAACkC,KAAJ,GAAY1B,aAAa,CAACN,IAAD,CAAzB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,0BAAL;AACEF,UAAAA,GAAG,CAACmC,OAAJ,GAAc3B,aAAa,CAACN,IAAD,CAA3B,CAAA;AACA,UAAA,MAAA;AATJ,OAAA;AAWD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOF,GAAP,CAAA;AACD,CAAA;;AAED,SAASqB,KAAT,CAAelF,IAAf,EAAqBuE,mBAArB,EAA0C;EACxC,IAAIV,GAAG,GAAG,EAAV,CAAA;;AACA,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;AACAsE,MAAAA,mBAAmB,CAACzC,IAApB,CAAyBiC,IAAI,CAACS,IAA9B,CAAA,CAAA;;AACA,MAAA,QAAOvE,SAAP;AACE,QAAA,KAAK,6BAAL;AACE,UAAA,MAAA;;AACF,QAAA,KAAK,uBAAL;AACE4D,UAAAA,GAAG,CAACgD,IAAJ,GAAW9C,IAAI,CAACrC,KAAhB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,uBAAL;AACEmC,UAAAA,GAAG,CAACsB,IAAJ,GAAWpB,IAAI,CAACrC,KAAhB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,2BAAL;AACEmC,UAAAA,GAAG,CAACxB,KAAJ,GAAY0B,IAAI,CAACrC,KAAjB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,yBAAL;AACEmC,UAAAA,GAAG,CAACvB,GAAJ,GAAUyB,IAAI,CAACrC,KAAf,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,yBAAL;UACEmC,GAAG,CAACiD,MAAJ,GAAaC,QAAQ,CAAChD,IAAD,EAAOQ,mBAAP,CAArB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,0BAAL;AACEV,UAAAA,GAAG,CAACmC,OAAJ,GAAcjC,IAAI,CAACrC,KAAnB,CAAA;AACA,UAAA,MAAA;AApBJ,OAAA;;AAsBA6C,MAAAA,mBAAmB,CAACI,GAApB,EAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOd,GAAP,CAAA;AACD,CAAA;;AAED,SAASkD,QAAT,CAAkB/G,IAAlB,EAAwBuE,mBAAxB,EAA6C;AAC3C,EAAA,IAAIpE,OAAO,GAAGH,IAAI,CAACG,OAAL,IAAgB,CAA9B,CAAA;AACA,EAAA,IAAI6G,EAAE,GAAGC,GAAG,CAACC,OAAJ,CAAYC,IAArB,CAAA;;AACA,EAAA,IAAGH,EAAH,EAAO;IACL,IAAII,QAAQ,GAAG,IAAIC,IAAJ,CAASL,EAAE,CAACM,WAAZ,CAAf,CAAA;AACAF,IAAAA,QAAQ,CAACG,IAAT,CAAc,GAAd,EAAmB,MAAnB,EAA2B,MAA3B,CAAA,CAAA;IACA,IAAIC,UAAU,GAAGJ,QAAQ,CAACK,IAAT,CAAcL,QAAQ,CAAClG,MAAvB,CAAjB,CAAA;AACAsG,IAAAA,UAAU,GAAGA,UAAU,CACpBE,OADU,CACF,MADE,EACM,eADN,CAAA,CAEVA,OAFU,CAEF,MAFE,EAEM,iBAFN,CAAb,CAAA;IAGA,IAAIC,kBAAkB,GAAG,KAAzB,CAAA;;IACA,IAAGH,UAAU,CAACtE,OAAX,CAAmB,yBAAnB,CAAkD,KAAA,CAAC,CAAtD,EAAyD;AACvDyE,MAAAA,kBAAkB,GAAG,IAArB,CAAA;AACD,KAAA;;IAED,IAAIC,aAAa,GAAG,CAApB;QAAuBC,eAAe,GAAG,CAAzC,CAAA;IACA,IAAIxH,CAAC,GAAG,CAAR;AAAA,QAAWuG,GAAG,GAAGrC,mBAAmB,CAACrD,MAArC,CAAA;;IACA,OAAMb,CAAC,GAAGuG,GAAV,EAAe;AACb,MAAA,IAAIkB,OAAO,GAAGC,QAAQ,CAACC,kBAAkB,CAACzD,mBAAmB,CAAClE,CAAD,CAAnB,GAAyB,MAA1B,CAAnB,CAAtB,CAAA;MACA,IAAI4H,WAAW,GAAGT,UAAU,CAACtE,OAAX,CAAmB4E,OAAnB,EAA4BD,eAAe,GAAG,CAA9C,CAAlB,CAAA;;AACA,MAAA,IAAGI,WAAW,KAAK,CAAC,CAApB,EAAuB;AACrBH,QAAAA,OAAO,GAAGC,QAAQ,CAACC,kBAAkB,CAACzD,mBAAmB,CAAClE,CAAD,CAAnB,GAAyB,OAA1B,CAAnB,CAAlB,CAAA;QACA4H,WAAW,GAAGT,UAAU,CAACtE,OAAX,CAAmB4E,OAAnB,EAA4BD,eAAe,GAAG,CAA9C,CAAd,CAAA;AACD,OAAA;;AACD,MAAA,IAAGI,WAAW,KAAK,CAAC,CAApB,EAAuB;QACrBH,OAAO,GAAGC,QAAQ,CAACC,kBAAkB,CAACzD,mBAAmB,CAAClE,CAAD,CAApB,CAAnB,CAAlB,CAAA;QACA4H,WAAW,GAAGT,UAAU,CAACtE,OAAX,CAAmB4E,OAAnB,EAA4BD,eAAe,GAAG,CAA9C,CAAd,CAAA;AACD,OAAA;;AACDA,MAAAA,eAAe,GAAGI,WAAlB,CAAA;AACA5H,MAAAA,CAAC,IAAI,CAAL,CAAA;AACD,KAAA;;IACDuH,aAAa,GAAGJ,UAAU,CAACtE,OAAX,CAAmB,yBAAnB,EAA8C2E,eAA9C,CAAhB,CAAA;IACA,IAAIK,aAAa,GAAGV,UAAU,CAACtE,OAAX,CAAmB,8BAAnB,EAAmD2E,eAAnD,CAApB,CAAA;IACA,IAAIM,eAAe,GAAGX,UAAU,CAACtE,OAAX,CAAmB,gCAAnB,EAAqD2E,eAArD,CAAtB,CAAA;AACA,IAAA,IAAIO,UAAJ,CAAA;;IACA,IAAGD,eAAe,KAAK,CAAC,CAArB,IAA0BD,aAAa,KAAK,CAAC,CAAhD,EAAmD;MACjDE,UAAU,GAAG/G,IAAI,CAACsC,GAAL,CAASuE,aAAT,EAAwBC,eAAxB,CAAb,CAAA;AACD,KAFD,MAGK;MACHC,UAAU,GAAG/G,IAAI,CAACqC,GAAL,CAASwE,aAAT,EAAwBC,eAAxB,CAAb,CAAA;AACD,KAAA;;AACD,IAAA,IAAGC,UAAU,KAAK,CAAC,CAAnB,EAAsB;MACpBA,UAAU,GAAGC,MAAM,CAACC,SAApB,CAAA;AACD,KAAA;;AACD,IAAA,IAAIC,SAAJ,CAAA;IACA,IAAIC,UAAU,GAAG,CAAjB;QAAoBC,SAAS,GAAG,EAAhC;QAAoCC,UAAU,GAAG,KAAjD;QAAwDC,YAAY,GAAG,CAAvE;QAA0EC,SAAS,GAAG,CAAtF,CAAA;;IACA,OAAMJ,UAAU,GAAGrI,OAAnB,EAA4B;MAC1B,IAAI0I,YAAY,GAAG,EAAnB,CAAA;MACAjB,aAAa,GAAGJ,UAAU,CAACtE,OAAX,CAAmB,WAAnB,EAAgC0E,aAAhC,CAAhB,CAAA;;AACA,MAAA,IAAGD,kBAAkB,IAAIC,aAAa,GAAGQ,UAAtC,IAAqDR,aAAa,KAAK,CAAC,CAAnB,IAAwBQ,UAAU,KAAKC,MAAM,CAACC,SAAtG,EAAkH;QAChHO,YAAY,CAACC,CAAb,GAAiB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAf,CAAjB,CAAA;QACAF,SAAS,GAAGvH,IAAI,CAACqC,GAAL,CAASkF,SAAT,EAAoB,CAApB,CAAZ,CAAA;AACD,OAHD,MAIK;QACH,IAAIG,QAAQ,GAAG,aAAf,CAAA;QACAR,SAAS,GAAGf,UAAU,CAACtE,OAAX,CAAmB6F,QAAnB,EAA6BnB,aAA7B,CAAZ,CAAA;AACA,QAAA,IAAIoB,SAAS,GAAGxB,UAAU,CAACyB,MAAX,CAAkBrB,aAAlB,EAAiCW,SAAS,GAAGQ,QAAQ,CAAC7H,MAArB,GAA8B0G,aAA/D,CAAhB,CAAA;QACAoB,SAAS,GAAGA,SAAS,CAACtB,OAAV,CAAkB,KAAlB,EAAyB,EAAzB,CAAZ,CAAA;AACA,QAAA,IAAIwB,MAAM,GAAG,IAAIC,GAAJ,CAAQH,SAAR,CAAb,CAAA;AACA,QAAA,IAAII,KAAK,GAAGF,MAAM,CAAC,WAAD,CAAN,CAAoB,CAApB,CAAA,CAAuB,WAAvB,CAAoC,CAAA,CAApC,CAAuC,CAAA,WAAvC,EAAoD,CAApD,CAAA,CAAuD,WAAvD,CAAA,CAAoE,CAApE,CAAA,CAAuE,WAAvE,CAAA,CAAoF,CAApF,CAAuF,CAAA,WAAvF,CAAoG,CAAA,CAApG,EAAuG,WAAvG,CAAA,CAAoH,CAApH,CAAA,CAAuH,WAAvH,CAAZ,CAAA;AACA,QAAA,IAAIpC,MAAM,GAAGoC,MAAM,CAAC,WAAD,CAAN,CAAoB,CAApB,CAAA,CAAuB,WAAvB,CAAoC,CAAA,CAApC,CAAuC,CAAA,WAAvC,EAAoD,CAApD,CAAA,CAAuD,WAAvD,CAAA,CAAoE,CAApE,CAAA,CAAuE,WAAvE,CAAA,CAAoF,CAApF,CAAuF,CAAA,WAAvF,CAAoG,CAAA,CAApG,EAAuG,WAAvG,CAAA,CAAoH,CAApH,CAAA,CAAuH,WAAvH,CAAb,CAAA;AACA7I,QAAAA,CAAC,GAAG,CAAJ,CAAA;AACAuG,QAAAA,GAAG,GAAGwC,KAAK,CAAClI,MAAN,EAAN,CAAA;QACA,IAAImI,YAAY,GAAG,EAAnB;AAAA,YAAuBC,EAAE,GAAzB,KAAA,CAAA;AAAA,YAA2BC,MAAM,GAAjC,KAAA,CAAA;AAAA,YAAmCC,UAAU,GAA7C,KAAA,CAAA;AAAA,YAA+CC,QAAQ,GAAvD,KAAA,CAAA;AAAA,YAAyDC,WAAW,GAApE,KAAA,CAAA,CAAA;;QACA,OAAMrJ,CAAC,GAAGuG,GAAV,EAAe;AACb2C,UAAAA,MAAM,GAAGH,KAAK,CAAC/I,CAAD,CAAL,CAAS,WAAT,CAAA,CAAsB,CAAtB,CAAA,CAAyB,WAAzB,CAAsC,CAAA,CAAtC,EAAyC,OAAzC,CAAA,CAAkD,CAAlD,CAAT,CAAA,OAAA,CAAA,CAAA;AACAiJ,UAAAA,EAAE,GAAG,EAAL,CAAA;AACAA,UAAAA,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB,CAAA,CAAA;AACAN,UAAAA,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB,CAAA,CAAA;;AACA,UAAA,IAAGN,EAAE,CAAC,CAAD,CAAF,KAAU,CAAb,EAAgB;AACdZ,YAAAA,UAAU,GAAG,IAAb,CAAA;AACD,WAAA;;UACDW,YAAY,CAACvH,IAAb,CAAkBwH,EAAlB,CAAA,CAAA;AACAI,UAAAA,WAAW,GAAGC,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAzB,CAAA;;UACA,IAAGvJ,CAAC,GAAGuG,GAAG,GAAG,CAAA;AAAE;YAA4B;AACzC0C,YAAAA,EAAE,GAAG,EAAL,CAAA;AACAE,YAAAA,UAAU,GAAGJ,KAAK,CAAC/I,CAAC,GAAG,CAAL,CAAL,CAAa,WAAb,EAA0B,CAA1B,CAAA,CAA6B,WAA7B,CAA0C,CAAA,CAA1C,EAA6C,OAA7C,CAAA,CAAsD,CAAtD,CAAb,CAAA,OAAA,CAAA,CAAA;AACAoJ,YAAAA,QAAQ,GAAGpB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoEF,WAA9G,CAAA;AACA,YAAA,IAAIG,aAAa,GAAGxB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAvH,CAAA;YACAN,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACF,QAAD,EAAW,CAAX,CAAnB,CAAA,CAAA;YACAH,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACE,aAAD,EAAgB,CAAhB,CAAnB,CAAA,CAAA;YACAR,YAAY,CAACvH,IAAb,CAAkBwH,EAAlB,CAAA,CAAA;AACD,WAAA;;AACDjJ,UAAAA,CAAC,IAAI,CAAL,CAAA;AACD,SAAA;;AACDA,QAAAA,CAAC,GAAG,CAAJ,CAAA;AACAuG,QAAAA,GAAG,GAAGE,MAAM,CAAC5F,MAAP,EAAN,CAAA;QACA,IAAI4I,SAAS,GAAG,EAAhB,CAAA;QACA,IAAIC,YAAY,GAAG,EAAnB,CAAA;;QACA,OAAM1J,CAAC,GAAGuG,GAAV,EAAe;AACbmD,UAAAA,YAAY,CAACjI,IAAb,CAAkBgF,MAAM,CAACzG,CAAD,CAAN,CAAU,WAAV,EAAuB,CAAvB,CAAA,CAA0B,WAA1B,CAAuC,CAAA,CAAvC,EAA0C,OAA1C,CAAA,CAAmD,CAAnD,CAAlB,CAAA,OAAA,CAAA,CAAA,CAAA;AACAA,UAAAA,CAAC,IAAI,CAAL,CAAA;AACD,SAAA;;QAED0J,YAAY,CAACC,IAAb,CAAkBC,YAAlB,CAAA,CAAA;AAEA5J,QAAAA,CAAC,GAAG,CAAJ,CAAA;;QAEA,OAAMA,CAAC,GAAGuG,GAAV,EAAe;AACb2C,UAAAA,MAAM,GAAGQ,YAAY,CAAC1J,CAAD,CAArB,CAAA;AACAiJ,UAAAA,EAAE,GAAG,EAAL,CAAA;AACAA,UAAAA,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB,CAAA,CAAA;AACAN,UAAAA,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB,CAAA,CAAA;AACAN,UAAAA,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB,CAAA,CAAA;AACAN,UAAAA,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB,CAAA,CAAA;UACAE,SAAS,CAAChI,IAAV,CAAewH,EAAf,CAAA,CAAA;AACAI,UAAAA,WAAW,GAAGC,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAzB,CAAA;;UACA,IAAGvJ,CAAC,GAAGuG,GAAG,GAAG,CAAA;AAAE;YAA4B;AACzC0C,YAAAA,EAAE,GAAG,EAAL,CAAA;AACAE,YAAAA,UAAU,GAAGO,YAAY,CAAC1J,CAAC,GAAG,CAAL,CAAzB,CAAA;AACAoJ,YAAAA,QAAQ,GAAGpB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoEF,WAA9G,CAAA;AACA,YAAA,IAAIQ,cAAc,GAAG7B,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAxH,CAAA;AACA,YAAA,IAAIO,cAAc,GAAG9B,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAxH,CAAA;AACA,YAAA,IAAIQ,cAAc,GAAG/B,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAxH,CAAA;YACAN,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACF,QAAD,EAAW,CAAX,CAAnB,CAAA,CAAA;YACAH,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACO,cAAD,EAAiB,CAAjB,CAAnB,CAAA,CAAA;YACAZ,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACQ,cAAD,EAAiB,CAAjB,CAAnB,CAAA,CAAA;YACAb,EAAE,CAACxH,IAAH,CAAQ6H,WAAW,CAACS,cAAD,EAAiB,CAAjB,CAAnB,CAAA,CAAA;YACAN,SAAS,CAAChI,IAAV,CAAewH,EAAf,CAAA,CAAA;AACD,WAAA;;AACDjJ,UAAAA,CAAC,IAAI,CAAL,CAAA;AACD,SAAA;;QACDwI,YAAY,CAACC,CAAb,GAAiBgB,SAAjB,CAAA;QACAjB,YAAY,CAACtH,CAAb,GAAiB8H,YAAjB,CAAA;QACAV,YAAY,GAAGtH,IAAI,CAACqC,GAAL,CAASiF,YAAT,EAAuBU,YAAY,CAACnI,MAApC,CAAf,CAAA;QACA0H,SAAS,GAAGvH,IAAI,CAACqC,GAAL,CAASkF,SAAT,EAAoBkB,SAAS,CAAC5I,MAA9B,CAAZ,CAAA;AACD,OAAA;;AAED0G,MAAAA,aAAa,GAAGW,SAAhB,CAAA;MAEAE,SAAS,CAAC3G,IAAV,CAAe+G,YAAf,CAAA,CAAA;AACAL,MAAAA,UAAU,IAAI,CAAd,CAAA;AACD,KAAA;;AACDnI,IAAAA,CAAC,GAAG,CAAJ,CAAA;AACA,IAAA,IAAID,GAAJ;AAAA,QAASiK,WAAT;AAAA,QAAsBC,KAAtB;AAAA,QAA6BC,SAA7B;AAAA,QAAwCC,WAAxC;QAAqDC,UAAU,GAAG,EAAlE;AAAA,QAAsEC,SAAtE;AAAA,QAAiFjE,CAAjF,CAAA;;IACA,OAAMpG,CAAC,GAAGF,OAAV,EAAmB;AACjBuK,MAAAA,SAAS,GAAG,EAAZ,CAAA;;MACA,IAAGjC,SAAS,CAACpI,CAAD,CAAT,CAAayI,CAAb,CAAe5H,MAAf,GAAwB0H,SAA3B,EAAsC;AACpCxI,QAAAA,GAAG,GAAGqI,SAAS,CAACpI,CAAD,CAAT,CAAayI,CAAnB,CAAA;QACAuB,WAAW,GAAGjK,GAAG,CAACc,MAAlB,CAAA;AACAqJ,QAAAA,SAAS,GAAGnK,GAAG,CAACiK,WAAW,GAAG,CAAf,CAAf,CAAA;AACAG,QAAAA,WAAW,GAAGD,SAAS,CAAC,CAAD,CAAvB,CAAA;AACAD,QAAAA,KAAK,GAAG,CAAR,CAAA;;AACA,QAAA,OAAMD,WAAW,GAAGC,KAAd,GAAsB1B,SAA5B,EAAuC;AACrC4B,UAAAA,WAAW,IAAI,KAAf,CAAA;UACApK,GAAG,CAACuK,MAAJ,CAAWN,WAAW,GAAG,CAAzB,EAA4B,CAA5B,EAA+B,CAACG,WAAD,EAAcD,SAAS,CAAC,CAAD,CAAvB,EAA4BA,SAAS,CAAC,CAAD,CAArC,EAA0CA,SAAS,CAAC,CAAD,CAAnD,CAA/B,CAAA,CAAA;AACAD,UAAAA,KAAK,IAAI,CAAT,CAAA;AACD,SAAA;AACF,OAAA;;MACD,KAAI7D,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGmC,SAAf,EAA0BnC,CAAC,IAAI,CAA/B,EAAkC;AAChC,QAAA,KAAI,IAAI1E,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,CAAnB,EAAsBA,CAAC,IAAI,CAA3B,EAA8B;AAC5B2I,UAAAA,SAAS,CAAC5I,IAAV,CAAe2G,SAAS,CAACpI,CAAD,CAAT,CAAayI,CAAb,CAAerC,CAAf,CAAA,CAAkB1E,CAAlB,CAAf,CAAA,CAAA;AACD,SAAA;AACF,OAAA;;MACD,IAAG,CAAC2G,UAAJ,EAAgB;AACd,QAAA,OAAOD,SAAS,CAACpI,CAAD,CAAT,CAAakB,CAApB,CAAA;AACD,OAFD,MAGK;QACH,IAAGkH,SAAS,CAACpI,CAAD,CAAT,CAAakB,CAAb,CAAeL,MAAf,GAAwByH,YAA3B,EAAyC;AACvCvI,UAAAA,GAAG,GAAGqI,SAAS,CAACpI,CAAD,CAAT,CAAakB,CAAnB,CAAA;UACA8I,WAAW,GAAGjK,GAAG,CAACc,MAAlB,CAAA;AACAqJ,UAAAA,SAAS,GAAGnK,GAAG,CAACiK,WAAW,GAAG,CAAf,CAAf,CAAA;AACAG,UAAAA,WAAW,GAAGD,SAAS,CAAC,CAAD,CAAvB,CAAA;AACAD,UAAAA,KAAK,GAAG,CAAR,CAAA;;AACA,UAAA,OAAMD,WAAW,GAAGC,KAAd,GAAsB3B,YAA5B,EAA0C;AACxC6B,YAAAA,WAAW,IAAI,KAAf,CAAA;YACApK,GAAG,CAACuK,MAAJ,CAAWN,WAAW,GAAG,CAAzB,EAA4B,CAA5B,EAA+B,CAACG,WAAD,EAAcD,SAAS,CAAC,CAAD,CAAvB,EAA4BA,SAAS,CAAC,CAAD,CAArC,EAA0CA,SAAS,CAAC,CAAD,CAAnD,CAA/B,CAAA,CAAA;AACAD,YAAAA,KAAK,IAAI,CAAT,CAAA;AACD,WAAA;AACF,SAAA;;QACD,KAAI7D,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGkC,YAAf,EAA6BlC,CAAC,IAAI,CAAlC,EAAqC;AACnC,UAAA,KAAI,IAAImE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,CAAnB,EAAsBA,CAAC,IAAI,CAA3B,EAA8B;AAC5BF,YAAAA,SAAS,CAAC5I,IAAV,CAAe2G,SAAS,CAACpI,CAAD,CAAT,CAAakB,CAAb,CAAekF,CAAf,CAAA,CAAkBmE,CAAlB,CAAf,CAAA,CAAA;AACD,WAAA;AACF,SAAA;AACF,OAAA;;MACD,IAAGzK,OAAO,IAAI,CAAd,EAAiB;AACfsK,QAAAA,UAAU,GAAGC,SAAb,CAAA;AACD,OAFD,MAGK;QACHD,UAAU,CAAC3I,IAAX,CAAgB4I,SAAhB,CAAA,CAAA;AACD,OAAA;;AACDrK,MAAAA,CAAC,IAAI,CAAL,CAAA;AACD,KAAA;;IACD,OAAO;AACLwK,MAAAA,CAAC,EAAEJ,UADE;AAELK,MAAAA,CAAC,EAAElC,SAAAA;KAFL,CAAA;AAID,GAAA;AACF,CAAA;;AAED,SAASe,WAAT,CAAqBoB,GAArB,EAA0BC,QAA1B,EAAoC;EAClCD,GAAG,GAAGA,GAAG,IAAI,CAAb,CAAA;;AACA,EAAA,IAAG,OAAOA,GAAP,KAAe,QAAlB,EAA4B;IAC1B,OAAOE,UAAU,CAACF,GAAG,CAACG,OAAJ,CAAYF,QAAZ,CAAD,CAAjB,CAAA;AACD,GAFD,MAGK;AACH,IAAA,OAAOG,UAAU,CAACJ,GAAD,EAAMC,QAAN,CAAjB,CAAA;AACD,GAAA;AACF,CAAA;;AAED,SAASG,UAAT,CAAoB/K,GAApB,EAAyB4K,QAAzB,EAAmC;AACjC,EAAA,IAAI3K,CAAJ;AAAA,MAAOuG,GAAG,GAAGxG,GAAG,CAACc,MAAjB,CAAA;EACA,IAAIkK,QAAQ,GAAG,EAAf,CAAA;;EACA,KAAI/K,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGuG,GAAf,EAAoBvG,CAAC,IAAI,CAAzB,EAA4B;AAC1B,IAAA,IAAG,OAAOD,GAAG,CAACC,CAAD,CAAV,KAAkB,QAArB,EAA+B;MAC7B+K,QAAQ,CAACtJ,IAAT,CAAc6H,WAAW,CAACvJ,GAAG,CAACC,CAAD,CAAJ,EAAS2K,QAAT,CAAzB,CAAA,CAAA;AACD,KAFD,MAGK;MACHI,QAAQ,CAACtJ,IAAT,CAAcqJ,UAAU,CAAC/K,GAAG,CAACC,CAAD,CAAJ,EAAS2K,QAAT,CAAxB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOI,QAAP,CAAA;AACD,CAAA;;AAED,SAASnB,YAAT,CAAsBoB,CAAtB,EAAyBrJ,CAAzB,EAA4B;EAC1B,IAAIsJ,GAAG,GAAGjD,MAAM,CAACgD,CAAC,CAAC,CAAD,CAAD,CAAKzB,QAAL,EAAD,CAAhB,CAAA;EACA,IAAI2B,GAAG,GAAGlD,MAAM,CAACrG,CAAC,CAAC,CAAD,CAAD,CAAK4H,QAAL,EAAD,CAAhB,CAAA;;EACA,IAAG0B,GAAG,KAAKC,GAAX,EAAgB;AACd,IAAA,OAAO,CAAP,CAAA;AACD,GAFD,MAGK;AACH,IAAA,OAAQD,GAAG,GAAGC,GAAP,GAAc,CAAC,CAAf,GAAmB,CAA1B,CAAA;AACD,GAAA;AACF,CAAA;;AAEc,eAASvL,EAAAA,IAAT,EAAeuE,mBAAf,EAAoC;AACjD,EAAA,IAAIV,GAAG,GAAG,EAAV,CADiD;;AAGjD,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;AACAsE,MAAAA,mBAAmB,CAACzC,IAApB,CAAyBiC,IAAI,CAACS,IAA9B,CAAA,CAAA;;AACA,MAAA,QAAOvE,SAAP;AACE,QAAA,KAAK,mBAAL;UACE4D,GAAG,CAAC2H,KAAJ,GAAYlH,KAAK,CAACP,IAAD,EAAOQ,mBAAP,CAAjB,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,2BAAL;AACEV,UAAAA,GAAG,CAAC4H,IAAJ,GAAWtH,eAAe,CAACJ,IAAD,CAA1B,CAAA;AACA,UAAA,MAAA;AANJ,OAAA;;AAQAQ,MAAAA,mBAAmB,CAACI,GAApB,EAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOd,GAAP,CAAA;AACD;;ACziBD,aAAe;AACb6H,EAAAA,OADa,mBACLC,MADK,EACG5G,IADH,EACSP,IADT,EACe;IAC1B,IAAIoH,kBAAkB,GAAG3E,GAAG,CAACC,OAAJ,CAAY2E,KAAZ,CAAkBC,OAAlB,CAA0B,mBAA1B,EAA+CH,MAAM,CAAC1F,KAAtD,EAA6D0F,MAAM,CAACI,MAApE,EAA4E,CAA5E,EAA+E,CAA/E,EAAkF,CAAlF,CAAzB,CAAA;AACAH,IAAAA,kBAAkB,CAACI,MAAnB,CAA0BC,GAA1B,CAA8BN,MAA9B,CAAA,CAAA;AACAO,IAAAA,CAAC,CAACC,QAAF,CAAWC,OAAX,CAAmBR,kBAAnB,CAAA,CAAA;AAEA,IAAA,IAAI7H,IAAI,GAAGkD,GAAG,CAACC,OAAJ,CAAYmF,WAAZ,CAAwBR,KAAxB,CAA8BI,GAA9B,CAAkCL,kBAAlC,CAAX,CAAA;AACAM,IAAAA,CAAC,CAACC,QAAF,CAAWC,OAAX,CAAmBrI,IAAnB,CAAA,CAAA;AAEA,IAAA,IAAIuI,YAAY,GAAGvI,IAAI,CAACuI,YAAL,CAAkB,CAAlB,CAAnB,CAAA;IACAA,YAAY,CAACC,aAAb,CAA2B,2BAA3B,CAAA,CAAA;AACA,IAAA,IAAIC,QAAQ,GAAGzH,IAAI,GAAGP,IAAtB,CAAA;AACA,IAAA,IAAI2C,IAAI,GAAG,IAAIE,IAAJ,CAASmF,QAAT,CAAX,CAAA;;IACA,IAAGrF,IAAI,CAACsF,MAAR,EAAgB;AACdtF,MAAAA,IAAI,CAACuF,MAAL,EAAA,CAAA;AACD,KAAA;;AACDJ,IAAAA,YAAY,CAACnF,IAAb,GAAoB,IAAIE,IAAJ,CAASmF,QAAT,CAApB,CAAA;;IAEAzI,IAAI,CAAC4I,eAAL,GAAuB,YAAW;AAChC;AACA,MAAA,IAAG5I,IAAI,CAAC6I,MAAL,KAAgBC,YAAY,CAACC,IAAhC,EAAsC;QACpC,IAAIC,GAAG,GAAG,IAAI1F,IAAJ,CAASmF,QAAQ,GAAG,OAApB,CAAV,CAAA;;QACA,IAAGO,GAAG,CAACN,MAAP,EAAe;UACbM,GAAG,CAACC,MAAJ,CAAWxI,IAAX,CAAA,CAAA;AACD,SAAA;AACF,OAAA;KAPH,CAAA;;AASAyC,IAAAA,GAAG,CAACC,OAAJ,CAAYmF,WAAZ,CAAwBY,MAAxB,EAAA,CAAA;AACD,GAAA;AA5BY,CAAf;;ACIA,IAAIC,MAAI,GAAG,CAAX,CAAA;;AAGA,SAASC,WAAT,CAAmBC,WAAnB,EAAgCC,OAAhC,EAAyC9I,mBAAzC,EAA8D;AAC5D,EAAA,IAAMC,IAAN,GAAkE4I,WAAlE,CAAM5I,IAAN;AAAA,MAAYwH,MAAZ,GAAkEoB,WAAlE,CAAYpB,MAAZ;AAAA,MAAoB/F,KAApB,GAAkEmH,WAAlE,CAAoBnH,KAApB;AAAA,MAA2B8F,MAA3B,GAAkEqB,WAAlE,CAA2BrB,MAA3B;AAAA,MAAmCuB,gBAAnC,GAAkEF,WAAlE,CAAmCE,gBAAnC;AAAA,MAAqDC,QAArD,GAAkEH,WAAlE,CAAqDG,QAArD,CAAA;EACArB,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,eAAkBhJ,GAAAA,IAAnC,EAF4D;;AAI5D,EAAA,IAAIiJ,OAAJ,CAAA;;AACA,EAAA,KAAI,IAAIpN,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAI2L,MAAM,CAAC9K,MAA3B,EAAmCb,CAAC,EAApC,EAAwC;AACtC,IAAA,IAAI0D,IAAI,GAAGiI,MAAM,CAAC3L,CAAD,CAAjB,CAAA;;IACA,IAAG0D,IAAI,CAAC2J,IAAR,EAAc;AACZD,MAAAA,OAAO,GAAG,IAAV,CAAA;AACA,MAAA,MAAA;AACD,KAAA;AACF,GAX2D;;;EAa5D,IAAIE,QAAQ,GAAG,EAAf;MAAmBC,OAAO,GAAG,EAA7B,CAAA;;AACA,EAAA,KAAI,IAAIvN,EAAC,GAAG,CAAZ,EAAeA,EAAC,IAAI2L,MAAM,CAAC9K,MAA3B,EAAmCb,EAAC,EAApC,EAAwC;AACtC,IAAA,IAAI0D,KAAI,GAAGiI,MAAM,CAAC3L,EAAD,CAAjB,CADsC;AAGtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACA,IAAG0D,KAAI,CAAC8J,MAAL,IAAe9J,KAAI,CAAC8J,MAAL,CAAYC,KAA9B,EAAqC;MACnCH,QAAQ,CAAC5J,KAAI,CAAC8J,MAAL,CAAYC,KAAb,CAAR,GAA8B,IAA9B,CAAA;MACAF,OAAO,CAAC7J,KAAI,CAAC+J,KAAN,CAAP,GAAsB/J,KAAI,CAAC8J,MAAL,CAAYC,KAAlC,CAAA;AACD,KAAA;AACF,GA/B2D;;;EAiC5D,IAAIC,QAAQ,GAAG,EAAf,CAAA;;AACAC,EAAAA,KAAK,EACL,KAAI,IAAI3N,GAAC,GAAG,CAAZ,EAAeA,GAAC,IAAI2L,MAAM,CAAC9K,MAA3B,EAAmCb,GAAC,EAApC,EAAwC;AACtC,IAAA,IAAI0D,MAAI,GAAGiI,MAAM,CAAC3L,GAAD,CAAjB,CAAA;AACA,IAAA,IAAIyN,KAAK,GAAG/J,MAAI,CAAC+J,KAAjB,CAFsC;;AAItC,IAAA,IAAG,CAACH,QAAQ,CAACzJ,cAAT,CAAwB4J,KAAxB,CAAJ,EAAoC;AAClC,MAAA,IAAGL,OAAH,EAAY;QACV,IAAG,CAAC1J,MAAI,CAAC2J,IAAN,IAAc,CAAC3J,MAAI,CAACkK,YAAvB,EAAqC;AACnC,UAAA,SAAA;AACD,SAAA;AACF,OAJD,MAKK;QACH,IAAG,CAAClK,MAAI,CAACE,OAAN,IAAiB,CAACF,MAAI,CAACkK,YAA1B,EAAwC;AACtC,UAAA,SAAA;AACD,SAAA;AACF,OAAA;AACF,KAfqC;;;IAiBtC,IAAGlK,MAAI,CAACkK,YAAR,EAAsB;AACpB,MAAA,KAAI,IAAIxH,CAAC,GAAGpG,GAAC,GAAG,CAAhB,EAAmBoG,CAAC,IAAIuF,MAAM,CAAC9K,MAA/B,EAAuCuF,CAAC,EAAxC,EAA4C;AAC1C,QAAA,IAAIyH,KAAK,GAAGlC,MAAM,CAACvF,CAAD,CAAlB,CAAA;;AACA,QAAA,IAAG,CAACyH,KAAK,CAACD,YAAV,EAAwB;AACtB,UAAA,IAAGR,OAAH,EAAY;AACV,YAAA,IAAG,CAACS,KAAK,CAACR,IAAV,EAAgB;AACd,cAAA,SAASM,KAAT,CAAA;AACD,aAFD,MAGK;AACH,cAAA,MAAA;AACD,aAAA;AACF,WAPD,MAQK;AACH,YAAA,IAAG,CAACE,KAAK,CAACjK,OAAV,EAAmB;AACjB,cAAA,SAAS+J,KAAT,CAAA;AACD,aAFD,MAGK;AACH,cAAA,MAAA;AACD,aAAA;AACF,WAAA;AACF,SAAA;AACF,OAAA;AACF,KAAA;;IACD,IAAIzM,CAAC,GAAG4M,UAAU,CAACpK,MAAD,EAAOsJ,OAAP,EAAgB9I,mBAAhB,EAAqCkJ,OAArC,CAAlB,CAAA;;AACA,IAAA,IAAGlM,CAAH,EAAM;AACJ;AACA,MAAA,IAAGoM,QAAQ,CAACzJ,cAAT,CAAwB4J,KAAxB,CAAH,EAAmC;QACjCH,QAAQ,CAACG,KAAD,CAAR,GAAkBvM,CAAC,CAACoM,QAAF,GAAaT,MAAI,EAAnC,CAAA;AACD,OAJG;;;AAMJ,MAAA,IAAG7M,GAAC,GAAG,CAAJ,IAASkB,CAAC,CAAC6M,MAAd,EAAsB;QACpB,IAAIC,IAAI,GAAGN,QAAQ,CAACA,QAAQ,CAAC7M,MAAT,GAAkB,CAAnB,CAAnB,CAAA;;AACA,QAAA,IAAGmN,IAAI,IAAIA,IAAI,CAACC,MAAhB,EAAwB;UACtBD,IAAI,CAACD,MAAL,GAAc,IAAd,CAAA;AACD,SAAA;AACF,OAAA;;MACDL,QAAQ,CAACjM,IAAT,CAAcP,CAAd,CAAA,CAAA;AACD,KAAA;AACF,GA1F2D;;;AA4F5D,EAAA,KAAI,IAAIlB,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG0N,QAAQ,CAAC7M,MAA5B,EAAoCb,GAAC,EAArC,EAAyC;AACvC,IAAA,IAAI0D,MAAI,GAAGgK,QAAQ,CAAC1N,GAAD,CAAnB,CAAA;AACA,IAAA,IAAIyN,MAAK,GAAG/J,MAAI,CAAC+J,KAAjB,CAAA;;AACA,IAAA,IAAGF,OAAO,CAAC1J,cAAR,CAAuB4J,MAAvB,CAAH,EAAkC;MAChC/J,MAAI,CAAC6J,OAAL,GAAeD,QAAQ,CAACC,OAAO,CAACE,MAAD,CAAR,CAAvB,CAAA;AACD,KAAA;AACF,GAAA;;AACDC,EAAAA,QAAQ,CAACQ,OAAT,EAAA,CAAA;EACA,OAAO;AACLpJ,IAAAA,IAAI,EAAE,KADD;AAELX,IAAAA,IAAI,EAAJA,IAFK;AAGLyB,IAAAA,KAAK,EAALA,KAHK;AAIL8F,IAAAA,MAAM,EAANA,MAJK;IAKLuB,gBAAgB,EAAEA,gBAAgB,GAAG,IALhC;AAKsC;IAC3CC,QAAQ,EAAEA,QAAQ,GAAG,IANhB;AAMsB;AAC3BQ,IAAAA,QAAQ,EAARA,QAAAA;GAPF,CAAA;AASD,CAAA;;AAED,SAASI,UAAT,CAAoBK,KAApB,EAA2BnB,OAA3B,EAAoC9I,mBAApC,EAAyDkJ,OAAzD,EAAkE;AAChE,EAAA,IAAI5J,GAAG,GAAG;IACRW,IAAI,EAAEgK,KAAK,CAAChK,IADJ;IAERsJ,KAAK,EAAEU,KAAK,CAACV,KAFL;IAGR7H,KAAK,EAAEuI,KAAK,CAACvI,KAHL;IAIR8F,MAAM,EAAEyC,KAAK,CAACzC,MAJN;AAKR0C,IAAAA,SAAS,EAAED,KAAK,CAACC,SAAN,GAAkB,IALrB;AAK2B;AACnCC,IAAAA,OAAO,EAAEF,KAAK,CAACE,OAAN,GAAgB,IANjB;AAMuB;AAC/BC,IAAAA,QAAQ,EAAEH,KAAK,CAACG,QAAN,GAAiB,IAPnB;AAOyB;IACjCC,YAAY,EAAEJ,KAAK,CAACI,YARZ;IASRC,KAAK,EAAEL,KAAK,CAACM,UATL;IAURC,GAAG,EAAEP,KAAK,CAACQ,WAAAA;AAVH,GAAV,CADgE;;AAchE,EAAA,IAAI/O,SAAS,GAAGuO,KAAK,CAACvO,SAAtB,CAAA;;EACA,IAAGA,SAAS,KAAK,mBAAjB,EAAsC;IACpC4D,GAAG,CAACkL,GAAJ,GAAU,IAAV,CAAA;IACAlL,GAAG,CAACoL,QAAJ,GAAe,IAAf,CAAA;AACD,GAHD,MAIK,IAAGT,KAAK,CAACP,YAAT,EAAuB;IAC1BpK,GAAG,CAACyK,MAAJ,GAAa,IAAb,CAAA;AACAzK,IAAAA,GAAG,CAACuK,MAAJ,GAAaI,KAAK,CAACU,cAAN,KAAyBC,cAAc,CAACC,cAAxC,IACRZ,KAAK,CAACU,cAAN,KAAyBC,cAAc,CAACE,aAD7C,CAAA;AAED,GAAA;;AACD9K,EAAAA,mBAAmB,CAACzC,IAApB,CAAyB+B,GAAG,CAACW,IAA7B,EAxBgE;;AA0BhE,EAAA,IAAGiJ,OAAH,EAAY;IACV5J,GAAG,CAACI,OAAJ,GAAcuK,KAAK,CAACd,IAAN,IAAcc,KAAK,CAACP,YAAlC,CAAA;AACD,GAFD,MAGK;IACHpK,GAAG,CAACI,OAAJ,GAAcuK,KAAK,CAACvK,OAAN,IAAiBuK,KAAK,CAACP,YAArC,CAAA;AACD,GAAA;;EACD/B,CAAC,CAACC,QAAF,CAAWmD,IAAX,CAAgB,SAAYzL,GAAAA,GAAG,CAACW,IAAhC,CAAA,CAAA;EACA,IAAI+K,IAAJ,EAAUC,GAAV,CAAA;;AACA,EAAA,KAAI,IAAInP,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAImO,KAAK,CAAC1K,aAA1B,EAAyCzD,CAAC,EAA1C,EAA8C;AAC5C,IAAA,IAAIL,IAAI,GAAGwO,KAAK,CAACxK,QAAN,CAAe3D,CAAf,CAAX,CAAA;;AACA,IAAA,IAAGL,IAAI,IAAIA,IAAI,CAACiE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,UAAS,GAAGD,IAAI,CAACC,SAArB,CAAA;AACAsE,MAAAA,mBAAmB,CAACzC,IAApB,CAAyB9B,IAAI,CAACwE,IAA9B,CAAA,CAAA;;AACA,MAAA,QAAOvE,UAAP;AACE,QAAA,KAAK,sBAAL;AACE4D,UAAAA,GAAG,CAACa,SAAJ,GAAgBd,cAAc,CAAC5D,IAAD,CAA9B,CAAA;AACA,UAAA,MAAA;;AACF,QAAA,KAAK,yBAAL;AACE;UACA,IAAG6D,GAAG,CAACI,OAAP,EAAgB;AACdsL,YAAAA,IAAI,GAAGE,MAAM,CAACzP,IAAD,EAAOuE,mBAAP,CAAb,CAAA;AACD,WAAA;;AACD,UAAA,MAAA;;AACF,QAAA,KAAK,kBAAL;UACE,IAAGV,GAAG,CAACI,OAAP,EAAgB;AACdJ,YAAAA,GAAG,CAAC6L,IAAJ,GAAWA,IAAI,CAAC1P,IAAD,CAAf,CAAA;AACD,WAAA;;AACD,UAAA,MAAA;;AACF,QAAA,KAAK,sBAAL;UACE,IAAG6D,GAAG,CAACI,OAAP,EAAgB;AACduL,YAAAA,GAAG,GAAGG,IAAI,CAAC3P,IAAD,CAAV,CAAA;AACD,WAAA;;AACD,UAAA,MAAA;;AACF,QAAA,KAAK,2BAAL;UACE,IAAG6D,GAAG,CAACoL,QAAP,EAAiB;AACf,YAAA,KAAI,IAAI5O,GAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,GAAC,IAAIL,IAAI,CAAC8D,aAAjC,EAAgDzD,GAAC,EAAjD,EAAqD;AACnD,cAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,GAAd,CAAX,CAAA;;AACA,cAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,gBAAA,IAAIhE,WAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;gBACA,IAAGA,WAAS,KAAK,kBAAjB,EAAqC;AACnC4D,kBAAAA,GAAG,CAAC+L,UAAJ,GAAiB7L,IAAI,CAACrC,KAAtB,CAAA;AACD,iBAFD,MAGK,IAAGzB,WAAS,KAAK,4BAAjB,EAA+C;AAClD4D,kBAAAA,GAAG,CAACgM,kBAAJ,GAAyB9L,IAAI,CAACrC,KAA9B,CAAA;AACD,iBAFI,MAGA,IAAGzB,WAAS,KAAK,4BAAjB,EAA+C;AAClD4D,kBAAAA,GAAG,CAACiM,mBAAJ,GAA0B/L,IAAI,CAACrC,KAA/B,CAAA;AACD,iBAFI,MAGA,IAAGzB,WAAS,KAAK,sBAAjB,EAAyC;AAC5C4D,kBAAAA,GAAG,CAACkM,cAAJ,GAAqBhM,IAAI,CAACrC,KAA1B,CAAA;AACD,iBAFI,MAGA,IAAGzB,WAAS,KAAK,wBAAjB,EAA2C;AAC9C4D,kBAAAA,GAAG,CAACmM,eAAJ,GAAsBjM,IAAI,CAACrC,KAA3B,CAAA;AACD,iBAAA;AACF,eAAA;AACF,aAAA;AACF,WAAA;;AACD,UAAA,MAAA;AA5CJ,OAAA;;AA8CA6C,MAAAA,mBAAmB,CAACI,GAApB,EAAA,CAAA;AACD,KAAA;AACF,GAvF+D;;;EAyFhE,IAAGd,GAAG,CAACI,OAAP,EAAgB;AACd,IAAA,IAAI0H,MAAM,GAAG6C,KAAK,CAAC7C,MAAnB,CAAA;;AACA,IAAA,IAAG4D,IAAI,IAAIA,IAAI,CAAC/D,KAAb,IAAsB+D,IAAI,CAAC/D,KAAL,CAAW/G,OAAjC,IAA4C8K,IAAI,CAAC/D,KAAL,CAAW/G,OAAX,CAAmBvD,MAAlE,EAA0E;AACxEqO,MAAAA,IAAI,CAACA,IAAL,GAAY,IAAZ,CADwE;;MAExEA,IAAI,CAACpK,IAAL,GAAY,KAAZ,CAAA;AACAoK,MAAAA,IAAI,CAACU,EAAL,GAAU5C,OAAO,CAACnM,MAAlB,CAAA;MACAmM,OAAO,CAACvL,IAAR,CAAayN,IAAb,CAAA,CAAA;AACA1L,MAAAA,GAAG,CAACqM,OAAJ,GAAcX,IAAI,CAACU,EAAnB,CAAA;KALF,MAOK,IAAGT,GAAH,EAAQ;AACXA,MAAAA,GAAG,CAACG,IAAJ,GAAW,IAAX,CADW;;MAEXH,GAAG,CAACrK,IAAJ,GAAW,MAAX,CAAA;AACAqK,MAAAA,GAAG,CAACS,EAAJ,GAAS5C,OAAO,CAACnM,MAAjB,CAAA;MACAmM,OAAO,CAACvL,IAAR,CAAa0N,GAAb,CAAA,CAAA;AACA3L,MAAAA,GAAG,CAACqM,OAAJ,GAAcV,GAAG,CAACS,EAAlB,CAAA;KALG,MAOA,IAAGtE,MAAH,EAAW;AACd,MAAA,IAAIwE,KAAJ,EAAWC,QAAX,CADc;;MAGd,IAAGzE,MAAM,YAAY0E,WAArB,EAAkC;AAChC,QAAA,IAAIC,GAAG,GAAG3E,MAAM,CAACxE,IAAP,IAAewE,MAAM,CAACxE,IAAP,CAAYoJ,MAArC,CADgC;;AAGhC,QAAA,IAAGD,GAAH,EAAQ;AACN,UAAA,IAAI9L,IAAI,GAAGmH,MAAM,CAACnH,IAAlB,CAAA;AACA,UAAA,IAAIgM,OAAJ,CAAA;AACA,UAAA,IAAIzL,IAAJ,CAAA;UACA,IAAI0L,KAAK,GAAG,QAAA,CAASC,IAAT,CAAclM,IAAd,CAAA,IAAuB,OAAQkM,CAAAA,IAAR,CAAalM,IAAb,CAAnC,CAAA;;AACA,UAAA,IAAGiM,KAAH,EAAU;YACR1L,IAAI,GAAGuL,GAAG,CAAC5I,OAAJ,CAAY,cAAZ,EAA4B,EAA5B,CAAP,CAAA;YACA8I,OAAO,GAAGhM,IAAI,CAACkD,OAAL,CAAa,kBAAb,EAAiC,GAAjC,CAAA,GAAwC,MAAlD,CAAA;YACA4I,GAAG,GAAGvL,IAAI,GAAGyL,OAAb,CAAA;AACD,WAAA;;AACD,UAAA,IAAG,CAAC,QAAA,CAASE,IAAT,CAAcJ,GAAd,CAAD,IACE,CAAC,SAAA,CAAUI,IAAV,CAAeJ,GAAf,CADH,IAEE,CAAC,OAAQI,CAAAA,IAAR,CAAaJ,GAAb,CAFH,IAGE,CAAC,QAAA,CAASI,IAAT,CAAcJ,GAAd,CAHH,IAIE,CAAC,OAAQI,CAAAA,IAAR,CAAaJ,GAAb,CAJN,EAIyB;AACvB,YAAA,OAAA;AACD,WAAA;;AACD,UAAA,KAAI,IAAIjQ,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGgN,OAAO,CAACnM,MAA3B,EAAmCb,GAAC,EAApC,EAAwC;AACtC,YAAA,IAAI0D,MAAI,GAAGsJ,OAAO,CAAChN,GAAD,CAAlB,CAAA;;YACA,IAAG0D,MAAI,CAACuM,GAAL,KAAaA,GAAb,IAAoBvM,MAAI,CAACoB,IAAL,KAAc,KAArC,EAA4C;AAC1CgL,cAAAA,KAAK,GAAGpM,MAAR,CAAA;AACAqM,cAAAA,QAAQ,GAAG,IAAX,CAAA;AACA,cAAA,MAAA;AACD,aAAA;AACF,WAAA;;UACD,IAAG,CAACA,QAAJ,EAAc;AACZ,YAAA,IAAGK,KAAH,EAAU;AACRxD,cAAAA,MAAM,CAACvB,OAAP,CAAeC,MAAf,EAAuB5G,IAAvB,EAA6ByL,OAA7B,CAAA,CAAA;AACD,aAAA;;AACDL,YAAAA,KAAK,GAAG;AACNhL,cAAAA,IAAI,EAAE,KADA;AAENX,cAAAA,IAAI,EAAJA,IAFM;cAGNyB,KAAK,EAAE0F,MAAM,CAAC1F,KAHR;cAIN8F,MAAM,EAAEJ,MAAM,CAACI,MAJT;AAKNuE,cAAAA,GAAG,EAAHA,GAAAA;aALF,CAAA;AAOD,WAAA;AACF,SArCD;aAuCK;AACHH,UAAAA,KAAK,GAAG;AACNhL,YAAAA,IAAI,EAAE,KADA;YAENc,KAAK,EAAE0F,MAAM,CAAC1F,KAFR;YAGN8F,MAAM,EAAEJ,MAAM,CAACI,MAAAA;WAHjB,CAAA;AAKD,SAAA;AACF,OAjDD;AAAA,WAmDK,IAAGJ,MAAM,YAAYgF,QAArB,EAA+B;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QACA,IAAG,CAACP,QAAJ,EAAc;UACZD,KAAK,GAAGhD,WAAS,CAACxB,MAAD,EAAS0B,OAAT,EAAkB9I,mBAAlB,CAAjB,CAAA;UACA4L,KAAK,CAAChL,IAAN,GAAa,KAAb,CAAA;AAKD,SAAA;AACF,OAAA;;AACD,MAAA,IAAGgL,KAAH,EAAU;QACR,IAAG,CAACC,QAAJ,EAAc;AACZD,UAAAA,KAAK,CAACF,EAAN,GAAW5C,OAAO,CAACnM,MAAnB,CAAA;UACAmM,OAAO,CAACvL,IAAR,CAAaqO,KAAb,CAAA,CAAA;AACD,SAAA;;AACDtM,QAAAA,GAAG,CAACqM,OAAJ,GAAcC,KAAK,CAACF,EAApB,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD1L,EAAAA,mBAAmB,CAACI,GAApB,EAAA,CAAA;AACA,EAAA,OAAOd,GAAP,CAAA;AACD,CAAA;;AAED,SAAS6L,IAAT,CAAc1P,IAAd,EAAoB;EAClB,IAAI6D,GAAG,GAAG,EAAV,CAAA;;AACA,EAAA,KAAI,IAAIxD,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;MACA,IAAGA,SAAS,KAAK,gBAAjB,EAAmC;AACjC,QAAA,IAAG8D,IAAI,CAAC6M,QAAL,KAAkBC,QAAQ,CAACC,IAA9B,EAAoC;UAClCjN,GAAG,CAACI,OAAJ,GAAc,IAAd,CAAA;AACD,SAAA;;AACDJ,QAAAA,GAAG,CAACkN,IAAJ,GAAW3M,aAAa,CAACL,IAAD,CAAxB,CAAA;AACAF,QAAAA,GAAG,CAACmN,IAAJ,GAAWjN,IAAI,CAAC6M,QAAhB,CAAA;AACA/M,QAAAA,GAAG,CAACoN,QAAJ,GAAelN,IAAI,CAACkN,QAApB,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,OAAOpN,GAAP,CAAA;AACD,CAAA;;AAED,SAAS8L,IAAT,CAAc3P,IAAd,EAAoB;AAClB,EAAA,IAAI6D,GAAG,GAAG;IACRW,IAAI,EAAExE,IAAI,CAACwE,IAAAA;GADb,CAAA;;AAGA,EAAA,KAAI,IAAInE,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAAC8D,aAAzB,EAAwCzD,CAAC,EAAzC,EAA6C;AAC3C,IAAA,IAAI0D,IAAI,GAAG/D,IAAI,CAACgE,QAAL,CAAc3D,CAAd,CAAX,CAAA;;AACA,IAAA,IAAG0D,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,MAAA,IAAIhE,SAAS,GAAG8D,IAAI,CAAC9D,SAArB,CAAA;;AACA,MAAA,QAAOA,SAAP;AACE,QAAA,KAAK,oBAAL;AACE,UAAA,IAAIyB,KAAK,GAAGqC,IAAI,CAACrC,KAAjB,CAAA;UACAmC,GAAG,CAACY,OAAJ,GAAc;YACZyM,IAAI,EAAExP,KAAK,CAACwP,IADA;YAEZC,UAAU,EAAEzP,KAAK,CAACyP,UAFN;YAGZC,SAAS,EAAE1P,KAAK,CAAC0P,SAHL;YAIZC,QAAQ,EAAE3P,KAAK,CAAC2P,QAJJ;YAKZC,OAAO,EAAE5P,KAAK,CAAC4P,OALH;YAMZC,YAAY,EAAE7P,KAAK,CAAC6P,YANR;YAOZ5B,IAAI,EAAEjO,KAAK,CAACiO,IAAAA;WAPd,CAAA;;UASA,IAAGjO,KAAK,CAAC8P,SAAT,EAAoB;AAClB3N,YAAAA,GAAG,CAACY,OAAJ,CAAYgN,SAAZ,GAAwB/P,KAAK,CAAC+P,SAA9B,CAAA;AACA5N,YAAAA,GAAG,CAACY,OAAJ,CAAYiN,UAAZ,GAAyBhQ,KAAK,CAACiQ,cAA/B,CAAA;AACD,WAAA;;UACD,IAAGjQ,KAAK,CAACkQ,WAAT,EAAsB;AACpB/N,YAAAA,GAAG,CAACY,OAAJ,CAAYO,MAAZ,GAAqBtD,KAAK,CAACmQ,WAA3B,CAAA;AACAhO,YAAAA,GAAG,CAACY,OAAJ,CAAYqN,WAAZ,GAA0BpQ,KAAK,CAACoQ,WAAhC,CAAA;AACD,WAlBH;;;UAoBE,IAAGpQ,KAAK,CAACqQ,OAAT,EAAkB;AAChBlO,YAAAA,GAAG,CAACY,OAAJ,CAAYY,IAAZ,GAAmB3D,KAAK,CAACsQ,WAAzB,CAAA;AACAnO,YAAAA,GAAG,CAACY,OAAJ,CAAYa,QAAZ,GAAuB5D,KAAK,CAACuQ,UAA7B,CAAA;AACD,WAAA;;AACD,UAAA,MAAA;AAzBJ,OAAA;AA2BD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOpO,GAAP,CAAA;AACD,CAAA;;AAEc,gBAAA,EAASuJ,WAAT,EAAsB;AACnClB,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,OAAjB,CAAA,CAAA;;AAGA,EAAA,IAAM0E,aAAN,GAA0C9E,WAA1C,CAAM8E,aAAN;AAAA,MAAqBC,gBAArB,GAA0C/E,WAA1C,CAAqB+E,gBAArB,CAAA;AACAD,EAAAA,aAAa,IAAI,IAAjB,CAAA;AACAC,EAAAA,gBAAgB,IAAI,IAApB,CAAA;EACAjG,CAAC,CAACC,QAAF,CAAWiG,GAAX,CAAe,eAAeF,aAAf,GAA+B,GAA/B,GAAqCC,gBAApD,CAAA,CAAA;EACA,IAAI9E,OAAO,GAAG,EAAd;MAAkB9I,mBAAmB,GAAG,EAAxC,CAAA;EACA,IAAI8N,MAAM,GAAGlF,WAAS,CAACC,WAAD,EAAcC,OAAd,EAAuB9I,mBAAvB,CAAtB,CAAA;AACA2H,EAAAA,CAAC,CAACC,QAAF,CAAWiG,GAAX,CAAeC,MAAf,CAAA,CAAA;AACAnG,EAAAA,CAAC,CAACC,QAAF,CAAWiG,GAAX,CAAe/E,OAAf,CAAA,CAAA;EACA,OAAO;AACL6E,IAAAA,aAAa,EAAbA,aADK;AAELC,IAAAA,gBAAgB,EAAhBA,gBAFK;AAGLE,IAAAA,MAAM,EAANA,MAHK;AAILhF,IAAAA,OAAO,EAAPA,OAAAA;GAJF,CAAA;AAMD;;ACjYD,WAAe;AACbiF,EAAAA,KADa,iBACPC,QADO,EACGC,UADH,EACeC,WADf,EAC4BC,MAD5B,EACoC7R,EADpC,EACwCC,EADxC,EAC4CC,EAD5C,EACgDC,EADhD,EACoD;IAC/D,IAAGH,EAAE,KAAK4C,SAAV,EAAqB;MACnB5C,EAAE,GAAGE,EAAE,GAAGwR,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,CAAV,CAAA;MACAzR,EAAE,GAAGE,EAAE,GAAGuR,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,CAAV,CAFmB;;AAInB,MAAA,IAAII,EAAE,GAAGH,UAAU,CAAC,CAAD,CAAnB;AAAA,UAAwBI,EAAE,GAAGH,WAAW,CAAC,CAAD,CAAxC,CAAA;;AACA,MAAA,IAAGE,EAAE,CAAC,CAAD,CAAL,EAAU;AACR9R,QAAAA,EAAE,GAAGQ,IAAI,CAACqC,GAAL,CAAS7C,EAAT,EAAaA,EAAE,GAAG8R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACA5R,QAAAA,EAAE,GAAGM,IAAI,CAACsC,GAAL,CAAS5C,EAAT,EAAaF,EAAE,GAAG8R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACD,OAAA;;AACD,MAAA,IAAGA,EAAE,CAAC,CAAD,CAAL,EAAU;AACR7R,QAAAA,EAAE,GAAGO,IAAI,CAACqC,GAAL,CAAS5C,EAAT,EAAaA,EAAE,GAAG6R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACA3R,QAAAA,EAAE,GAAGK,IAAI,CAACsC,GAAL,CAAS3C,EAAT,EAAaF,EAAE,GAAG6R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACD,OAAA;;AACD,MAAA,IAAGC,EAAE,CAAC,CAAD,CAAL,EAAU;AACR/R,QAAAA,EAAE,GAAGQ,IAAI,CAACqC,GAAL,CAAS7C,EAAT,EAAaA,EAAE,GAAG+R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACA7R,QAAAA,EAAE,GAAGM,IAAI,CAACsC,GAAL,CAAS5C,EAAT,EAAaF,EAAE,GAAG+R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACD,OAAA;;AACD,MAAA,IAAGA,EAAE,CAAC,CAAD,CAAL,EAAU;AACR9R,QAAAA,EAAE,GAAGO,IAAI,CAACqC,GAAL,CAAS5C,EAAT,EAAaA,EAAE,GAAG8R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACA5R,QAAAA,EAAE,GAAGK,IAAI,CAACsC,GAAL,CAAS3C,EAAT,EAAaF,EAAE,GAAG8R,EAAE,CAAC,CAAD,CAApB,CAAL,CAAA;AACD,OApBkB;;;AAsBnB,MAAA,KAAI,IAAIvS,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAG2L,QAAQ,CAACrR,MAA9B,EAAsCb,CAAC,GAAGuG,GAA1C,EAA+CvG,CAAC,EAAhD,EAAoD;AAClD,QAAA,IAAI0D,IAAI,GAAGwO,QAAQ,CAAClS,CAAD,CAAnB,CAAA;QACAQ,EAAE,GAAGQ,IAAI,CAACqC,GAAL,CAAS7C,EAAT,EAAakD,IAAI,CAAC,CAAD,CAAjB,CAAL,CAAA;QACAjD,EAAE,GAAGO,IAAI,CAACqC,GAAL,CAAS5C,EAAT,EAAaiD,IAAI,CAAC,CAAD,CAAjB,CAAL,CAAA;QACAhD,EAAE,GAAGM,IAAI,CAACsC,GAAL,CAAS5C,EAAT,EAAagD,IAAI,CAAC,CAAD,CAAjB,CAAL,CAAA;AACA/C,QAAAA,EAAE,GAAGK,IAAI,CAACsC,GAAL,CAAS3C,EAAT,EAAa+C,IAAI,CAAC,CAAD,CAAjB,CAAL,CALkD;;AAOlD,QAAA,IAAI4O,GAAE,GAAGH,UAAU,CAACnS,CAAD,CAAnB;AAAA,YAAwBuS,GAAE,GAAGH,WAAW,CAACpS,CAAD,CAAxC,CAAA;;AACA,QAAA,IAAGsS,GAAE,CAAC,CAAD,CAAL,EAAU;AACR9R,UAAAA,EAAE,GAAGQ,IAAI,CAACqC,GAAL,CAAS7C,EAAT,EAAakD,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACA5R,UAAAA,EAAE,GAAGM,IAAI,CAACsC,GAAL,CAAS5C,EAAT,EAAagD,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACD,SAAA;;AACD,QAAA,IAAGA,GAAE,CAAC,CAAD,CAAL,EAAU;AACR7R,UAAAA,EAAE,GAAGO,IAAI,CAACqC,GAAL,CAAS5C,EAAT,EAAaiD,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACA3R,UAAAA,EAAE,GAAGK,IAAI,CAACsC,GAAL,CAAS3C,EAAT,EAAa+C,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACD,SAAA;;AACD,QAAA,IAAGC,GAAE,CAAC,CAAD,CAAL,EAAU;AACR/R,UAAAA,EAAE,GAAGQ,IAAI,CAACqC,GAAL,CAAS7C,EAAT,EAAakD,IAAI,CAAC,CAAD,CAAJ,GAAU6O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACA7R,UAAAA,EAAE,GAAGM,IAAI,CAACsC,GAAL,CAAS5C,EAAT,EAAagD,IAAI,CAAC,CAAD,CAAJ,GAAU6O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACD,SAAA;;AACD,QAAA,IAAGA,GAAE,CAAC,CAAD,CAAL,EAAU;AACR9R,UAAAA,EAAE,GAAGO,IAAI,CAACqC,GAAL,CAAS5C,EAAT,EAAaiD,IAAI,CAAC,CAAD,CAAJ,GAAU6O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACA5R,UAAAA,EAAE,GAAGK,IAAI,CAACsC,GAAL,CAAS3C,EAAT,EAAa+C,IAAI,CAAC,CAAD,CAAJ,GAAU6O,GAAE,CAAC,CAAD,CAAzB,CAAL,CAAA;AACD,SAAA;AACF,OAAA;AACF,KAAA;;AACD,IAAA,IAAIC,CAAC,GAAGhS,EAAE,GAAGE,EAAb;AAAA,QAAiB+R,CAAC,GAAGhS,EAAE,GAAGE,EAA1B,CAAA;IACA,IAAI+R,GAAG,GAAG,EAAV;QAAcC,GAAG,GAAG,EAApB,CAAA;;AACA,IAAA,KAAI,IAAI3S,EAAC,GAAG,CAAR,EAAWuG,IAAG,GAAG2L,QAAQ,CAACrR,MAA9B,EAAsCb,EAAC,GAAGuG,IAA1C,EAA+CvG,EAAC,EAAhD,EAAoD;AAClD,MAAA,IAAI0D,KAAI,GAAGwO,QAAQ,CAAClS,EAAD,CAAnB,CAAA;MACA0S,GAAG,CAACjR,IAAJ,CAAS,CACP,CAACiC,KAAI,CAAC,CAAD,CAAJ,GAAUhD,EAAX,IAAiB8R,CADV,EAEP,CAAC9O,KAAI,CAAC,CAAD,CAAJ,GAAU/C,EAAX,IAAiB8R,CAFV,CAAT,CAAA,CAAA;AAIA,MAAA,IAAIH,IAAE,GAAGH,UAAU,CAACnS,EAAD,CAAnB;AAAA,UAAwBuS,IAAE,GAAGH,WAAW,CAACpS,EAAD,CAAxC,CANkD;;AAQlD,MAAA,IAAIoG,CAAC,GAAGpG,EAAC,GAAG,CAAZ,CAAA;;AACA,MAAA,IAAGoG,CAAC,KAAK,CAAC,CAAV,EAAa;QACXA,CAAC,GAAGG,IAAG,GAAG,CAAV,CAAA;AACD,OAAA;;MACDoM,GAAG,CAACvM,CAAD,CAAH,GAASuM,GAAG,CAACvM,CAAD,CAAH,IAAU,EAAnB,CAAA;MACAuM,GAAG,CAACvM,CAAD,CAAH,CAAO3E,IAAP,CAAY,CAACyQ,QAAQ,CAAClS,EAAD,CAAR,CAAY,CAAZ,IAAiBsS,IAAE,CAAC,CAAD,CAAnB,GAAyB5R,EAA1B,IAAgC8R,CAA5C,CAAA,CAAA;MACAG,GAAG,CAACvM,CAAD,CAAH,CAAO3E,IAAP,CAAY,CAACyQ,QAAQ,CAAClS,EAAD,CAAR,CAAY,CAAZ,CAAA,GAAiBsS,IAAE,CAAC,CAAD,CAAnB,GAAyB3R,EAA1B,IAAgC8R,CAA5C,CAAA,CAdkD;;MAgBlDE,GAAG,CAAC3S,EAAD,CAAH,GAAS2S,GAAG,CAAC3S,EAAD,CAAH,IAAU,EAAnB,CAAA;AACA,MAAA,IAAI4S,CAAC,GAAG,CAACV,QAAQ,CAAClS,EAAD,CAAR,CAAY,CAAZ,CAAA,GAAiBuS,IAAE,CAAC,CAAD,CAAnB,GAAyB7R,EAA1B,IAAgC8R,CAAxC;AAAA,UAA2CK,CAAC,GAAG,CAACX,QAAQ,CAAClS,EAAD,CAAR,CAAY,CAAZ,CAAA,GAAiBuS,IAAE,CAAC,CAAD,CAAnB,GAAyB5R,EAA1B,IAAgC8R,CAA/E,CAAA;;AACA,MAAA,IAAGzS,EAAC,KAAKuG,IAAG,GAAG,CAAf,EAAkB;AAChBoM,QAAAA,GAAG,CAAC3S,EAAD,CAAH,CAAO8S,OAAP,CAAeD,CAAf,CAAA,CAAA;;AACAF,QAAAA,GAAG,CAAC3S,EAAD,CAAH,CAAO8S,OAAP,CAAeF,CAAf,CAAA,CAAA;AACD,OAHD,MAIK;AACHD,QAAAA,GAAG,CAAC3S,EAAD,CAAH,CAAOyB,IAAP,CAAYmR,CAAZ,CAAA,CAAA;;AACAD,QAAAA,GAAG,CAAC3S,EAAD,CAAH,CAAOyB,IAAP,CAAYoR,CAAZ,CAAA,CAAA;AACD,OAAA;AACF,KAAA;;AACD,IAAA,IAAGR,MAAH,EAAW;MACTK,GAAG,CAACjR,IAAJ,CAASiR,GAAG,CAAC,CAAD,CAAH,CAAOK,KAAP,CAAa,CAAb,CAAT,CAAA,CAAA;AACD,KAAA;;IACD,OAAO;AACLvS,MAAAA,EAAE,EAAFA,EADK;AAELC,MAAAA,EAAE,EAAFA,EAFK;AAGLC,MAAAA,EAAE,EAAFA,EAHK;AAILC,MAAAA,EAAE,EAAFA,EAJK;AAKLiF,MAAAA,KAAK,EAAE4M,CALF;AAML9G,MAAAA,MAAM,EAAE+G,CANH;AAOLrN,MAAAA,MAAM,EAAEsN,GAPH;AAQLM,MAAAA,QAAQ,EAAEL,GAAAA;KARZ,CAAA;GAlFW;AA6FbM,EAAAA,aA7Fa,yBA6FCrN,KA7FD,EA6FQ8F,MA7FR,EA6FgBxG,SA7FhB,EA6F2B;IACtCA,SAAS,GAAGA,SAAS,IAAI,CAAzB,CAAA;IACA,IAAItD,CAAC,GAAGZ,IAAI,CAACsC,GAAL,CAASsC,KAAT,EAAgB8F,MAAhB,CAAA,GAA0B,GAAlC,CAAA;IACAxG,SAAS,GAAGlE,IAAI,CAACsC,GAAL,CAAS4B,SAAT,EAAoBtD,CAApB,CAAZ,CAAA;IACA,IAAI8Q,GAAG,GAAG,EAAV;QAAcC,GAAG,GAAG,EAApB,CAAA;;AACA,IAAA,IAAGzN,SAAS,IAAIA,SAAS,GAAG,CAA5B,EAA+B;AAC7B,MAAA,IAAIuN,CAAC,GAAGvN,SAAS,GAAG,kBAApB,CAAA;AACAwN,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAACmE,KAAK,GAAGV,SAAT,IAAsBU,KAAvB,EAA8B,CAA9B,CAAT,CAAA,CAAA;MACA+M,GAAG,CAAClR,IAAJ,CAAS,CAAC,CAACmE,KAAK,GAAGV,SAAR,GAAoBuN,CAArB,IAA0B7M,KAA3B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAACV,SAAS,GAAGuN,CAAb,IAAkB/G,MAA1D,CAAT,CAAA,CAAA;MACAgH,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAIyD,SAAS,GAAGwG,MAAhB,CAAT,CAAA,CAAA;MACAiH,GAAG,CAAClR,IAAJ,CAAS,EAAT,CAAA,CAAA;AACAiR,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAACiK,MAAM,GAAGxG,SAAV,IAAuBwG,MAA3B,CAAT,CAAA,CAAA;MACAiH,GAAG,CAAClR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAACiK,MAAM,GAAGxG,SAAT,GAAqBuN,CAAtB,IAA2B/G,MAA/B,EAAuC,CAAC9F,KAAK,GAAGV,SAAR,GAAoBuN,CAArB,IAA0B7M,KAAjE,EAAwE,CAAxE,CAAT,CAAA,CAAA;AACA8M,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAACmE,KAAK,GAAGV,SAAT,IAAsBU,KAAvB,EAA8B,CAA9B,CAAT,CAAA,CAAA;MACA+M,GAAG,CAAClR,IAAJ,CAAS,EAAT,CAAA,CAAA;MACAiR,GAAG,CAACjR,IAAJ,CAAS,CAACyD,SAAS,GAAGU,KAAb,EAAoB,CAApB,CAAT,CAAA,CAAA;MACA+M,GAAG,CAAClR,IAAJ,CAAS,CAAC,CAACyD,SAAS,GAAGuN,CAAb,IAAkB7M,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAC8F,MAAM,GAAGxG,SAAT,GAAqBuN,CAAtB,IAA2B/G,MAA3D,CAAT,CAAA,CAAA;AACAgH,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAACiK,MAAM,GAAGxG,SAAV,IAAuBwG,MAA3B,CAAT,CAAA,CAAA;MACAiH,GAAG,CAAClR,IAAJ,CAAS,EAAT,CAAA,CAAA;MACAiR,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAIyD,SAAS,GAAGwG,MAAhB,CAAT,CAAA,CAAA;MACAiH,GAAG,CAAClR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAACyD,SAAS,GAAGuN,CAAb,IAAkB/G,MAAtB,EAA8B,CAACxG,SAAS,GAAGuN,CAAb,IAAkB7M,KAAhD,EAAuD,CAAvD,CAAT,CAAA,CAAA;MACA8M,GAAG,CAACjR,IAAJ,CAAS,CAACyD,SAAS,GAAGU,KAAb,EAAoB,CAApB,CAAT,CAAA,CAAA;MACA+M,GAAG,CAAClR,IAAJ,CAAS,EAAT,CAAA,CAAA;AACAiR,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAACmE,KAAK,GAAGV,SAAT,IAAsBU,KAAvB,EAA8B,CAA9B,CAAT,CAAA,CAAA;AACD,KAnBD,MAoBK;AACH8M,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAA,CAAA;AACAiR,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAA,CAAA;AACAiR,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAA,CAAA;AACAiR,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAA,CAAA;AACAiR,MAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAA,CAAA;AACD,KAAA;;IACD,OAAO;AACL2D,MAAAA,MAAM,EAAEsN,GADH;AAELM,MAAAA,QAAQ,EAAEL,GAAAA;KAFZ,CAAA;GA7HW;AAkIbO,EAAAA,gBAlIa,EAkIM,SAAA,gBAAA,GAAA;IACjB,IAAIR,GAAG,GAAG,EAAV;QAAcC,GAAG,GAAG,EAApB,CAAA;IACA,IAAIQ,EAAE,GAAI,GAAA,GAAM,kBAAhB;QAAoCC,EAAE,GAAG,GAAA,GAAM,kBAA/C,CAAA;AACAV,IAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,GAAD,EAAM,CAAN,CAAT,CAAA,CAAA;AACAkR,IAAAA,GAAG,CAAClR,IAAJ,CAAS,CAAC,GAAM0R,GAAAA,EAAP,EAAW,CAAX,EAAc,CAAd,EAAiB,GAAA,GAAMC,EAAvB,CAAT,CAAA,CAAA;AACAV,IAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,GAAJ,CAAT,CAAA,CAAA;AACAkR,IAAAA,GAAG,CAAClR,IAAJ,CAAS,CAAC,CAAD,EAAI,GAAM2R,GAAAA,EAAV,EAAc,GAAA,GAAMD,EAApB,EAAwB,CAAxB,CAAT,CAAA,CAAA;AACAT,IAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,GAAD,EAAM,CAAN,CAAT,CAAA,CAAA;AACAkR,IAAAA,GAAG,CAAClR,IAAJ,CAAS,CAAC,GAAM0R,GAAAA,EAAP,EAAW,CAAX,EAAc,CAAd,EAAiB,GAAA,GAAMC,EAAvB,CAAT,CAAA,CAAA;AACAV,IAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,CAAD,EAAI,GAAJ,CAAT,CAAA,CAAA;AACAkR,IAAAA,GAAG,CAAClR,IAAJ,CAAS,CAAC,CAAD,EAAI,GAAM2R,GAAAA,EAAV,EAAcD,EAAd,EAAkB,CAAlB,CAAT,CAAA,CAAA;AACAT,IAAAA,GAAG,CAACjR,IAAJ,CAAS,CAAC,GAAD,EAAM,CAAN,CAAT,CAAA,CAAA;IACA,OAAO;AACL2D,MAAAA,MAAM,EAAEsN,GADH;AAELM,MAAAA,QAAQ,EAAEL,GAAAA;KAFZ,CAAA;AAID,GAAA;AAlJY,CAAf;;ACAO,SAASU,GAAT,CAAaC,CAAb,EAAgB;AACrB,EAAA,OAAOA,CAAC,GAAG,GAAJ,GAAUtS,IAAI,CAACuS,EAAtB,CAAA;AACD,CAAA;AAED;AACA;AACA;AACA;AACA;;AACO,SAASC,WAAT,CAAqBpO,MAArB,EAA6BqO,CAA7B,EAAgC;AACrC,EAAA,IAAI3S,EAAJ,EAAQC,EAAR,EAAY2S,EAAZ,EAAgBC,EAAhB,CAAA;;AACA,EAAA,IAAGvO,MAAM,CAACvE,MAAP,KAAkB,CAArB,EAAwB;IACtBC,EAAE,GAAGsE,MAAM,CAAC2N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL,CAAA;IACAhS,EAAE,GAAGqE,MAAM,CAAC2N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL,CAAA;IACAW,EAAE,GAAGtO,MAAM,CAAC2N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL,CAAA;IACAY,EAAE,GAAGvO,MAAM,CAAC2N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL,CAAA;AACD,GALD,MAMK;AACHjS,IAAAA,EAAE,GAAGsE,MAAM,CAAC,CAAD,CAAX,CAAA;AACArE,IAAAA,EAAE,GAAGqE,MAAM,CAAC,CAAD,CAAX,CAAA;AACAsO,IAAAA,EAAE,GAAGtO,MAAM,CAAC,CAAD,CAAX,CAAA;AACAuO,IAAAA,EAAE,GAAGvO,MAAM,CAAC,CAAD,CAAX,CAAA;AACD,GAAA;;AACD,EAAA,IAAI5E,EAAE,GAAGM,EAAE,CAAC,CAAD,CAAX;AAAA,MAAgBL,EAAE,GAAGK,EAAE,CAAC,CAAD,CAAvB,CAAA;AACA,EAAA,IAAIJ,EAAE,GAAGK,EAAE,CAAC,CAAD,CAAX;AAAA,MAAgBJ,EAAE,GAAGI,EAAE,CAAC,CAAD,CAAvB,CAAA;AACA,EAAA,IAAI6S,EAAE,GAAGF,EAAE,CAAC,CAAD,CAAX;AAAA,MAAgBG,EAAE,GAAGH,EAAE,CAAC,CAAD,CAAvB,CAAA;EACA,IAAII,GAAG,GAAG,CAACpT,EAAE,GAAGF,EAAN,IAAYiT,CAAZ,GAAgBjT,EAA1B,CAAA;EACA,IAAIuT,GAAG,GAAG,CAACpT,EAAE,GAAGF,EAAN,IAAYgT,CAAZ,GAAgBhT,EAA1B,CAAA;EACA,IAAIuT,GAAG,GAAG,CAACJ,EAAE,GAAGlT,EAAN,IAAY+S,CAAZ,GAAgB/S,EAA1B,CAAA;EACA,IAAIuT,GAAG,GAAG,CAACJ,EAAE,GAAGlT,EAAN,IAAY8S,CAAZ,GAAgB9S,EAA1B,CAAA;EACA,IAAIuT,IAAI,GAAG,CAACF,GAAG,GAAGF,GAAP,IAAcL,CAAd,GAAkBK,GAA7B,CAAA;EACA,IAAIK,IAAI,GAAG,CAACF,GAAG,GAAGF,GAAP,IAAcN,CAAd,GAAkBM,GAA7B,CAAA;;EACA,IAAG3O,MAAM,CAACvE,MAAP,KAAkB,CAAlB,IAAuBuE,MAAM,CAACvE,MAAP,KAAkB,CAA5C,EAA+C;AAC7C,IAAA,IAAIuT,EAAE,GAAGT,EAAE,CAAC,CAAD,CAAX;AAAA,QAAgBU,EAAE,GAAGV,EAAE,CAAC,CAAD,CAAvB,CAAA;IACA,IAAIW,GAAG,GAAG,CAACF,EAAE,GAAGR,EAAN,IAAYH,CAAZ,GAAgBG,EAA1B,CAAA;IACA,IAAIW,GAAG,GAAG,CAACF,EAAE,GAAGR,EAAN,IAAYJ,CAAZ,GAAgBI,EAA1B,CAAA;IACA,IAAIW,IAAI,GAAG,CAACF,GAAG,GAAGN,GAAP,IAAcP,CAAd,GAAkBO,GAA7B,CAAA;IACA,IAAIS,IAAI,GAAG,CAACF,GAAG,GAAGN,GAAP,IAAcR,CAAd,GAAkBQ,GAA7B,CAAA;IACA,IAAIS,KAAK,GAAG,CAACF,IAAI,GAAGN,IAAR,IAAgBT,CAAhB,GAAoBS,IAAhC,CAAA;IACA,IAAIS,KAAK,GAAG,CAACF,IAAI,GAAGN,IAAR,IAAgBV,CAAhB,GAAoBU,IAAhC,CAAA;;AACA,IAAA,IAAG/O,MAAM,CAACvE,MAAP,KAAkB,CAArB,EAAwB;AACtB,MAAA,OAAO,CAACL,EAAD,EAAKC,EAAL,EAASqT,GAAT,EAAcC,GAAd,EAAmBG,IAAnB,EAAyBC,IAAzB,EAA+BO,KAA/B,EAAsCC,KAAtC,CAAP,CAAA;AACD,KAAA;;IACD,OAAO,CAAC,CAACnU,EAAD,EAAKC,EAAL,CAAD,EAAW,CAACqT,GAAD,EAAMC,GAAN,CAAX,EAAuB,CAACG,IAAD,EAAOC,IAAP,CAAvB,EAAqC,CAACO,KAAD,EAAQC,KAAR,CAArC,CAAP,CAAA;AACD,GAZD,MAaK,IAAGvP,MAAM,CAACvE,MAAP,KAAkB,CAArB,EAAwB;AAC3B,IAAA,OAAO,CAAC,CAACL,EAAD,EAAKC,EAAL,CAAD,EAAW,CAACqT,GAAD,EAAMC,GAAN,CAAX,EAAuB,CAACG,IAAD,EAAOC,IAAP,CAAvB,CAAP,CAAA;AACD,GAAA;AACF;;AChDD;AACA;AACA;AACA;AACA;AAEA;AACA,IAAIS,iBAAiB,GAAG,CAAxB,CAAA;AACA,IAAIC,gBAAgB,GAAG,KAAvB,CAAA;AACA,IAAIC,qBAAqB,GAAG,SAA5B,CAAA;AACA,IAAIC,0BAA0B,GAAG,EAAjC,CAAA;AAEA,IAAIC,gBAAgB,GAAG,EAAvB,CAAA;AACA,IAAIC,eAAe,GAAG,GAAA,IAAOD,gBAAgB,GAAG,GAA1B,CAAtB,CAAA;AAEA,IAAIE,qBAAqB,GAAG,OAAOC,YAAP,KAAwB,UAApD,CAAA;;AAEA,SAASC,CAAT,CAAWC,GAAX,EAAgBC,GAAhB,EAAqB;AACnB,EAAA,OAAO,GAAM,GAAA,GAAA,GAAMA,GAAZ,GAAkB,MAAMD,GAA/B,CAAA;AACD,CAAA;;AAED,SAASE,CAAT,CAAWF,GAAX,EAAgBC,GAAhB,EAAqB;AACnB,EAAA,OAAO,GAAMA,GAAAA,GAAN,GAAY,GAAA,GAAMD,GAAzB,CAAA;AACD,CAAA;;AAED,SAASG,CAAT,CAAWH,GAAX,EAAgB;AACd,EAAA,OAAO,MAAMA,GAAb,CAAA;AACD;;;AAGD,SAASI,UAAT,CAAoBC,EAApB,EAAwBL,GAAxB,EAA6BC,GAA7B,EAAkC;EAChC,OAAO,CAAC,CAACF,CAAC,CAACC,GAAD,EAAMC,GAAN,CAAD,GAAcI,EAAd,GAAmBH,CAAC,CAACF,GAAD,EAAMC,GAAN,CAArB,IAAmCI,EAAnC,GAAwCF,CAAC,CAACH,GAAD,CAA1C,IAAmDK,EAA1D,CAAA;AACD;;;AAGD,SAASC,QAAT,CAAkBD,EAAlB,EAAsBL,GAAtB,EAA2BC,GAA3B,EAAgC;EAC9B,OAAO,GAAA,GAAMF,CAAC,CAACC,GAAD,EAAMC,GAAN,CAAP,GAAoBI,EAApB,GAAyBA,EAAzB,GAA8B,MAAMH,CAAC,CAACF,GAAD,EAAMC,GAAN,CAAP,GAAoBI,EAAlD,GAAuDF,CAAC,CAACH,GAAD,CAA/D,CAAA;AACD,CAAA;;AAED,SAASO,eAAT,CAAyBC,EAAzB,EAA6BC,EAA7B,EAAiCC,EAAjC,EAAqCC,GAArC,EAA0CC,GAA1C,EAA+C;AAC7C,EAAA,IAAIC,QAAJ;AAAA,MAAcC,QAAd;MAAwBnW,CAAC,GAAG,CAA5B,CAAA;;EACA,GAAG;IACDmW,QAAQ,GAAGL,EAAE,GAAG,CAACC,EAAE,GAAGD,EAAN,IAAY,GAA5B,CAAA;IACAI,QAAQ,GAAGT,UAAU,CAACU,QAAD,EAAWH,GAAX,EAAgBC,GAAhB,CAAV,GAAiCJ,EAA5C,CAAA;;IACA,IAAGK,QAAQ,GAAG,GAAd,EAAmB;AACjBH,MAAAA,EAAE,GAAGI,QAAL,CAAA;AACD,KAFD,MAEO;AACLL,MAAAA,EAAE,GAAGK,QAAL,CAAA;AACD,KAAA;AACF,GARD,QAQQnV,IAAI,CAACC,GAAL,CAASiV,QAAT,CAAqBpB,GAAAA,qBAArB,IAA8C,EAAE9U,CAAF,GAAM+U,0BAR5D,EAAA;;AASA,EAAA,OAAOoB,QAAP,CAAA;AACD,CAAA;;AAED,SAASC,oBAAT,CAA8BP,EAA9B,EAAkCQ,OAAlC,EAA2CL,GAA3C,EAAgDC,GAAhD,EAAqD;EACnD,KAAI,IAAIjW,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG4U,iBAAnB,EAAsC,EAAE5U,CAAxC,EAA2C;IACzC,IAAIsW,YAAY,GAAGX,QAAQ,CAACU,OAAD,EAAUL,GAAV,EAAeC,GAAf,CAA3B,CAAA;;IACA,IAAGK,YAAY,KAAK,GAApB,EAAyB;AACvB,MAAA,OAAOD,OAAP,CAAA;AACD,KAAA;;IACD,IAAIH,QAAQ,GAAGT,UAAU,CAACY,OAAD,EAAUL,GAAV,EAAeC,GAAf,CAAV,GAAgCJ,EAA/C,CAAA;IACAQ,OAAO,IAAIH,QAAQ,GAAGI,YAAtB,CAAA;AACD,GAAA;;AACD,EAAA,OAAOD,OAAP,CAAA;AACD,CAAA;;AAED,SAASE,YAAT,CAAsB3D,CAAtB,EAAyB;AACvB,EAAA,OAAOA,CAAP,CAAA;AACD,CAAA;;AAED,SAAS4D,MAAT,CAAgBR,GAAhB,EAAqBS,GAArB,EAA0BR,GAA1B,EAA+BS,GAA/B,EAAoC;AAClC,EAAA,IAAG,EAAE,CAAA,IAAKV,GAAL,IAAYA,GAAG,IAAI,CAAnB,IAAwB,CAAA,IAAKC,GAA7B,IAAoCA,GAAG,IAAI,CAA7C,CAAH,EAAoD;AAClD,IAAA,MAAM,IAAIU,KAAJ,CAAU,yCAAV,CAAN,CAAA;AACD,GAAA;;AAED,EAAA,IAAGX,GAAG,KAAKS,GAAR,IAAeR,GAAG,KAAKS,GAA1B,EAA+B;AAC7B,IAAA,OAAOH,YAAP,CAAA;AACD,GAPiC;;;AAUlC,EAAA,IAAIK,YAAY,GAAG1B,qBAAqB,GAAG,IAAIC,YAAJ,CAAiBH,gBAAjB,CAAH,GAAwC,IAAI6B,KAAJ,CAAU7B,gBAAV,CAAhF,CAAA;;EACA,KAAI,IAAIhV,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGgV,gBAAnB,EAAqC,EAAEhV,CAAvC,EAA0C;AACxC4W,IAAAA,YAAY,CAAC5W,CAAD,CAAZ,GAAkByV,UAAU,CAACzV,CAAC,GAAGiV,eAAL,EAAsBe,GAAtB,EAA2BC,GAA3B,CAA5B,CAAA;AACD,GAAA;;EAED,SAASa,QAAT,CAAkBjB,EAAlB,EAAsB;IACpB,IAAIkB,aAAa,GAAG,GAApB,CAAA;IACA,IAAIC,aAAa,GAAG,CAApB,CAAA;AACA,IAAA,IAAIC,UAAU,GAAGjC,gBAAgB,GAAG,CAApC,CAAA;;AAEA,IAAA,OAAMgC,aAAa,KAAKC,UAAlB,IAAgCL,YAAY,CAACI,aAAD,CAAZ,IAA+BnB,EAArE,EAAyE,EAAEmB,aAA3E,EAA0F;AACxFD,MAAAA,aAAa,IAAI9B,eAAjB,CAAA;AACD,KAAA;;IACD,EAAE+B,aAAF,CARoB;;IAWpB,IAAIE,IAAI,GAAG,CAACrB,EAAE,GAAGe,YAAY,CAACI,aAAD,CAAlB,KAAsCJ,YAAY,CAACI,aAAa,GAAG,CAAjB,CAAZ,GAAkCJ,YAAY,CAACI,aAAD,CAApF,CAAX,CAAA;AACA,IAAA,IAAIG,SAAS,GAAGJ,aAAa,GAAGG,IAAI,GAAGjC,eAAvC,CAAA;IAEA,IAAImC,YAAY,GAAGzB,QAAQ,CAACwB,SAAD,EAAYnB,GAAZ,EAAiBC,GAAjB,CAA3B,CAAA;;IACA,IAAGmB,YAAY,IAAIvC,gBAAnB,EAAqC;MACnC,OAAOuB,oBAAoB,CAACP,EAAD,EAAKsB,SAAL,EAAgBnB,GAAhB,EAAqBC,GAArB,CAA3B,CAAA;AACD,KAFD,MAEO,IAAGmB,YAAY,KAAK,GAApB,EAAyB;AAC9B,MAAA,OAAOD,SAAP,CAAA;AACD,KAFM,MAEA;AACL,MAAA,OAAOvB,eAAe,CAACC,EAAD,EAAKkB,aAAL,EAAoBA,aAAa,GAAG9B,eAApC,EAAqDe,GAArD,EAA0DC,GAA1D,CAAtB,CAAA;AACD,KAAA;AACF,GAAA;;AAED,EAAA,OAAO,SAASoB,YAAT,CAAsBzE,CAAtB,EAAyB;AAC9B;AACA,IAAA,IAAGA,CAAC,KAAK,CAAN,IAAWA,CAAC,KAAK,CAApB,EAAuB;AACrB,MAAA,OAAOA,CAAP,CAAA;AACD,KAAA;;IACD,OAAO6C,UAAU,CAACqB,QAAQ,CAAClE,CAAD,CAAT,EAAc6D,GAAd,EAAmBC,GAAnB,CAAjB,CAAA;GALF,CAAA;AAOD,CAAA;;AAED,IAAIlV,MAAM,GAAG;EACX8V,MAAM,EAAEd,MAAM,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CADH;EAEXe,MAAM,EAAEf,MAAM,CAAC,IAAD,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAFH;EAGXgB,OAAO,EAAEhB,MAAM,CAAC,CAAD,EAAI,CAAJ,EAAO,IAAP,EAAa,CAAb,CAHJ;EAIXiB,IAAI,EAAEjB,MAAM,CAAC,IAAD,EAAO,GAAP,EAAY,IAAZ,EAAkB,CAAlB,CAJD;EAKXkB,SAAS,EAAElB,MAAM,CAAC,IAAD,EAAO,CAAP,EAAU,IAAV,EAAgB,CAAhB,CALN;AAMXmB,EAAAA,WAAW,EAAEnB,MANF;EAOXjV,SAPW,EAAA,SAAA,SAAA,CAOD+E,CAPC,EAOErG,EAPF,EAOME,EAPN,EAOUyX,EAPV,EAOc;AACvB,IAAA,IAAGC,SAAS,CAAChX,MAAV,KAAqB,CAAxB,EAA2B;MACzB,OAAO2V,MAAM,CAAClQ,CAAD,EAAIrG,EAAJ,EAAQE,EAAR,EAAYyX,EAAZ,CAAb,CAAA;AACD,KAFD,MAGK,IAAGf,KAAK,CAACiB,OAAN,CAAcxR,CAAd,CAAA,IAAoBA,CAAC,CAACzF,MAAF,KAAa,CAApC,EAAuC;MAC1C,OAAO2V,MAAM,CAAClQ,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,EAAaA,CAAC,CAAC,CAAD,CAAd,EAAmBA,CAAC,CAAC,CAAD,CAApB,CAAb,CAAA;KADG,MAGA,IAAGA,CAAH,EAAM;AACTA,MAAAA,CAAC,GAAGA,CAAC,CAACiD,QAAF,EAAJ,CAAA;AACA,MAAA,IAAIwO,cAAJ,CAAA;;AACA,MAAA,IAAG,wFAAyF1H,CAAAA,IAAzF,CAA8F/J,CAA9F,CAAH,EAAqG;AACnGA,QAAAA,CAAC,GAAGA,CAAC,CAAC0R,KAAF,CAAQ,SAAR,CAAJ,CAAA;QACAD,cAAc,GAAGvB,MAAM,CAAClQ,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,EAAaA,CAAC,CAAC,CAAD,CAAd,EAAmBA,CAAC,CAAC,CAAD,CAApB,CAAvB,CAAA;AACD,OAHD,MAIK,IAAGA,CAAC,KAAK,WAAT,EAAsB;QACzByR,cAAc,GAAG,IAAKzR,CAAAA,CAAL,CAAjB,CAAA;AACD,OAAA;;AACD,MAAA,OAAOyR,cAAP,CAAA;AACD,KAAA;AACF,GAAA;AA1BU,CAAb,CAAA;AA6BAvW,MAAM,CAAC,SAAD,CAAN,GAAoBA,MAAM,CAAC+V,MAA3B,CAAA;AACA/V,MAAM,CAAC,UAAD,CAAN,GAAqBA,MAAM,CAACgW,OAA5B,CAAA;AACAhW,MAAM,CAAC,aAAD,CAAN,GAAwBA,MAAM,CAACkW,SAA/B;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASO,WAAT,CAAqBvH,IAArB,EAA2BwH,KAA3B,EAAkChL,QAAlC,EAA4CiL,OAA5C,EAAqD;AACnD,EAAA,IAAI5R,GAAG,GAAGmK,IAAI,CAAC7P,MAAf,CAAA;EACA,IAAIuX,UAAU,GAAG,CAAjB;AAAA,MAAoBC,QAAQ,GAAG9R,GAAG,GAAG,CAArC,CAFmD;;EAInD,KAAI,IAAIvG,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuG,GAAnB,EAAwBvG,CAAC,EAAzB,EAA6B;AAC3B,IAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;;AACA,IAAA,IAAG0D,IAAI,CAACvC,IAAL,GAAY+W,KAAf,EAAsB;AACpBE,MAAAA,UAAU,GAAGpY,CAAb,CAAA;AACD,KAFD,MAGK,IAAG0D,IAAI,CAACvC,IAAL,GAAY+W,KAAf,EAAsB;AACzB,MAAA,MAAA;AACD,KAFI,MAGA;AACHE,MAAAA,UAAU,GAAGpY,CAAb,CAAA;AACA,MAAA,MAAA;AACD,KAAA;AACF,GAhBkD;;;AAkBnD,EAAA,KAAI,IAAIA,EAAC,GAAGuG,GAAG,GAAG,CAAlB,EAAqBvG,EAAC,IAAI,CAA1B,EAA6BA,EAAC,EAA9B,EAAkC;AAChC,IAAA,IAAI0D,KAAI,GAAGgN,IAAI,CAAC1Q,EAAD,CAAf,CAAA;;AACA,IAAA,IAAG0D,KAAI,CAACvC,IAAL,GAAY+W,KAAK,GAAGhL,QAAvB,EAAiC;AAC/B,MAAA,MAAA;KADF,MAGK,IAAGxJ,KAAI,CAACvC,IAAL,GAAY+W,KAAK,GAAGhL,QAAvB,EAAiC;AACpCmL,MAAAA,QAAQ,GAAGrY,EAAX,CAAA;AACD,KAFI,MAGA;AACHqY,MAAAA,QAAQ,GAAGrY,EAAX,CAAA;AACA,MAAA,MAAA;AACD,KAAA;AACF,GAAA;;EACD,IAAGoY,UAAU,GAAG,CAAb,IAAkBC,QAAQ,GAAG9R,GAAG,GAAG,CAAtC,EAAyC;IACvCmK,IAAI,GAAGA,IAAI,CAACqC,KAAL,CAAWqF,UAAX,EAAuBC,QAAQ,GAAG,CAAlC,CAAP,CAAA;AACD,GAAA;;AACD,EAAA,IAAG3H,IAAI,CAAC7P,MAAL,GAAc,CAAjB,EAAoB;AAClB,IAAA,OAAO6P,IAAP,CAAA;AACD,GApCkD;;;AAsCnD,EAAA,IAAI4H,KAAK,GAAG5H,IAAI,CAAC,CAAD,CAAhB,CAAA;;AACA,EAAA,IAAG4H,KAAK,CAACnX,IAAN,GAAa+W,KAAhB,EAAuB;AACrB,IAAA,IAAIhX,CAAC,GAAG;AACNC,MAAAA,IAAI,EAAE+W,KADA;AAEN7W,MAAAA,KAAK,EAAEwV,KAAK,CAACiB,OAAN,CAAcQ,KAAK,CAACjX,KAApB,CAAA,GAA6BiX,KAAK,CAACjX,KAAN,CAAY0R,KAAZ,CAAkB,CAAlB,CAA7B,GAAoDuF,KAAK,CAACjX,KAAAA;AAF3D,KAAR,CADqB;;AAMrB,IAAA,IAAGwV,KAAK,CAACiB,OAAN,CAAcQ,KAAK,CAACjX,KAApB,CAA8BiX,IAAAA,KAAK,CAACjX,KAAN,CAAYR,MAAZ,KAAuB,CAAxD,EAA2D;AACzDK,MAAAA,CAAC,CAACG,KAAF,GAAUiX,KAAK,CAACjX,KAAN,CAAY0R,KAAZ,CAAkB,CAAlB,EAAqB,CAArB,CAAV,CAAA;AACD,KAAA;;IACDrC,IAAI,CAACoC,OAAL,CAAa5R,CAAb,CAAA,CAAA;AACD,GAVD;AAAA,OAYK,IAAGoX,KAAK,CAACnX,IAAN,GAAa+W,KAAhB,EAAuB;AAC1B,IAAA,IAAIK,IAAI,GAAG7H,IAAI,CAAC,CAAD,CAAf,CAAA;AACA,IAAA,IAAI8H,OAAO,GAAG,CAACN,KAAK,GAAGI,KAAK,CAACnX,IAAf,KAAwBoX,IAAI,CAACpX,IAAL,GAAYmX,KAAK,CAACnX,IAA1C,CAAd,CAAA;IACAmX,KAAK,CAACnX,IAAN,GAAa+W,KAAb,CAAA;AACAI,IAAAA,KAAK,CAACjX,KAAN,GAAc8W,OAAO,CAACG,KAAK,CAACjX,KAAP,EAAckX,IAAI,CAAClX,KAAnB,EAA0BmX,OAA1B,EAAmC,IAAnC,CAArB,CAAA;;IACA,IAAGF,KAAK,CAAC9W,MAAT,EAAiB;MACf,IAAI4D,MAAM,GAAGoO,WAAW,CAAC,CACvB,CAAC,CAAD,EAAI,CAAJ,CADuB,EAEvB,CAAC8E,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAD,EAAkB8W,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAlB,CAFuB,EAGvB,CAAC8W,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAD,EAAkB8W,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAlB,CAHuB,EAIvB,CAAC,CAAD,EAAI,CAAJ,CAJuB,CAAA,CAKvB0M,OALuB,EAAD,EAKV,CAAA,GAAIsK,OALM,CAAX,CAKetK,OALf,EAAb,CAAA;AAMAoK,MAAAA,KAAK,CAAC9W,MAAN,GAAe,CACb4D,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,IAAgB,IAAIoT,OAApB,CADa,EAEbpT,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAFa,EAGbA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAgB,IAAA,CAAA,GAAIoT,OAApB,CAHa,EAIbpT,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAJa,CAAf,CAAA;AAMAkT,MAAAA,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAA,GAAkBR,IAAI,CAACqC,GAAL,CAASiV,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAT,EAA0B,CAA1B,CAAlB,CAAA;AACA8W,MAAAA,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAA,GAAkBR,IAAI,CAACsC,GAAL,CAASgV,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAT,EAA0B,CAA1B,CAAlB,CAAA;AACA8W,MAAAA,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAA,GAAkBR,IAAI,CAACqC,GAAL,CAASiV,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAT,EAA0B,CAA1B,CAAlB,CAAA;AACA8W,MAAAA,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAA,GAAkBR,IAAI,CAACsC,GAAL,CAASgV,KAAK,CAAC9W,MAAN,CAAa,CAAb,CAAT,EAA0B,CAA1B,CAAlB,CAAA;AACD,KAAA;AACF,GA1EkD;;;EA4EnD,IAAIwM,IAAI,GAAG0C,IAAI,CAACA,IAAI,CAAC7P,MAAL,GAAc,CAAf,CAAf,CAAA;;AACA,EAAA,IAAGmN,IAAI,CAAC7M,IAAL,GAAY+W,KAAK,GAAGhL,QAAvB,EAAiC;IAC/B,IAAIuL,IAAI,GAAG/H,IAAI,CAACA,IAAI,CAAC7P,MAAL,GAAc,CAAf,CAAf,CAAA;;AACA,IAAA,IAAI2X,QAAO,GAAG,CAACN,KAAK,GAAGhL,QAAR,GAAmBuL,IAAI,CAACtX,IAAzB,KAAkC6M,IAAI,CAAC7M,IAAL,GAAYsX,IAAI,CAACtX,IAAnD,CAAd,CAAA;;AACA6M,IAAAA,IAAI,CAAC7M,IAAL,GAAY+W,KAAK,GAAGhL,QAApB,CAAA;IACA,IAAIzC,CAAC,GAAG+N,QAAR,CAAA;;IACA,IAAGC,IAAI,CAACjX,MAAR,EAAgB;MACdiJ,CAAC,GAAGjJ,MAAM,CAACD,SAAP,CAAiBkX,IAAI,CAACjX,MAAtB,CAA8BgX,CAAAA,QAA9B,CAAJ,CAAA;AACD,KAP8B;AAS/B;;;AACA,IAAA,IAAIlS,CAAC,GAAG6R,OAAO,CAACM,IAAI,CAACpX,KAAN,EAAa2M,IAAI,CAAC3M,KAAlB,EAAyBoJ,CAAzB,CAAf,CAAA;;AACA,IAAA,IAAGnE,CAAC,CAACzF,MAAF,KAAa,CAAhB,EAAmB;MACjB4X,IAAI,CAACpX,KAAL,GAAaiF,CAAb,CAAA;MACA0H,IAAI,CAAC3M,KAAL,GAAaiF,CAAC,CAACyM,KAAF,CAAQ,CAAR,EAAW,CAAX,CAAb,CAAA;AACD,KAHD,MAIK;MACH/E,IAAI,CAAC3M,KAAL,GAAaiF,CAAb,CAAA;AACD,KAAA;;IACD,IAAGmS,IAAI,CAACjX,MAAR,EAAgB;MACd,IAAI4D,OAAM,GAAGoO,WAAW,CAAC,CACvB,CAAC,CAAD,EAAI,CAAJ,CADuB,EAEvB,CAACiF,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAD,EAAiBiX,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAjB,CAFuB,EAGvB,CAACiX,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAD,EAAiBiX,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAjB,CAHuB,EAIvB,CAAC,CAAD,EAAI,CAAJ,CAJuB,CAAD,EAKrBgX,QALqB,CAAxB,CAAA;;AAMAC,MAAAA,IAAI,CAACjX,MAAL,GAAc,CACZ4D,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,IAAeoT,QADH,EAEZpT,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAFY,EAGZA,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,GAAeoT,QAHH,EAIZpT,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAJY,CAAd,CAAA;AAMAqT,MAAAA,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAA,GAAiBR,IAAI,CAACqC,GAAL,CAASoV,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAT,EAAyB,CAAzB,CAAjB,CAAA;AACAiX,MAAAA,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAA,GAAiBR,IAAI,CAACsC,GAAL,CAASmV,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAT,EAAyB,CAAzB,CAAjB,CAAA;AACAiX,MAAAA,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAA,GAAiBR,IAAI,CAACqC,GAAL,CAASoV,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAT,EAAyB,CAAzB,CAAjB,CAAA;AACAiX,MAAAA,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAA,GAAiBR,IAAI,CAACsC,GAAL,CAASmV,IAAI,CAACjX,MAAL,CAAY,CAAZ,CAAT,EAAyB,CAAzB,CAAjB,CAAA;AACD,KAAA;AACF,GApCD;OAsCK,IAAGwM,IAAI,CAAC7M,IAAL,GAAY+W,KAAK,GAAGhL,QAAvB,EAAiC;AACpC,IAAA,IAAIhM,EAAC,GAAG;MACNC,IAAI,EAAE+W,KAAK,GAAGhL,QADR;AAEN7L,MAAAA,KAAK,EAAEwV,KAAK,CAACiB,OAAN,CAAc9J,IAAI,CAAC3M,KAAnB,CAAA,GAA4B2M,IAAI,CAAC3M,KAAL,CAAW0R,KAAX,CAAiB,CAAjB,CAA5B,GAAkD/E,IAAI,CAAC3M,KAAAA;KAFhE,CAAA;IAIAqP,IAAI,CAACjP,IAAL,CAAUP,EAAV,CAAA,CAAA;AACD,GAAA;;AACD,EAAA,OAAOwP,IAAP,CAAA;AACD,CAAA;;AAEM,SAASgI,eAAT,CAAyBhI,IAAzB,EAA+BwH,KAA/B,EAAsChL,QAAtC,EAAgD;AACrD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADqD;;AAUrD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB,IAAA,IAAIe,CAAC,GAAG8O,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAa,GAAA,GAAb,GAAmBA,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAA3B,CAAA;;IACA,IAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQ7P,MAAR,GAAiB,CAApB,EAAuB;MACrBe,CAAC,IAAI,MAAM,CAAC8O,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAZ,CAAA;AACD,KAAA;;AACDlN,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;AACbiX,MAAAA,eAAe,EAAE9W,CAAAA;KADnB,CAAA,CAAA;AAGD,GARD,MASK;AACH8O,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;AACtE,MAAA,IAAI5W,CAAC,GAAG,CACN6W,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAD1B,EAENC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAF1B,CAAR,CAAA;;AAIA,MAAA,IAAGC,IAAI,CAAC5X,MAAL,GAAc,CAAjB,EAAoB;AAClBe,QAAAA,CAAC,CAACH,IAAF,CAAOgX,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAAvC,CAAA,CAAA;AACD,OAAA;;AACD,MAAA,OAAO5W,CAAP,CAAA;AACD,KATiB,CAAlB,CAAA;;AAUA,IAAA,KAAI,IAAI5B,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;;AACA,MAAA,IAAI4B,EAAC,GAAG8B,IAAI,CAACrC,KAAL,CAAW,CAAX,CAAgB,GAAA,GAAhB,GAAsBqC,IAAI,CAACrC,KAAL,CAAW,CAAX,CAA9B,CAAA;;AACA,MAAA,IAAGqC,IAAI,CAACrC,KAAL,CAAWR,MAAX,GAAoB,CAAvB,EAA0B;QACxBe,EAAC,IAAI,MAAM,CAAC8B,IAAI,CAACrC,KAAL,CAAW,CAAX,CAAZ,CAAA;AACD,OAAA;;AACD,MAAA,IAAIH,CAAC,GAAG;QACN2X,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADxB;AAENwL,QAAAA,eAAe,EAAE9W,EAAAA;OAFnB,CAAA;;MAIA,IAAG8B,IAAI,CAAClC,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACDgC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOsC,GAAP,CAAA;AACD,CAAA;AAEM,SAASsV,gBAAT,CAA0BpI,IAA1B,EAAgCwH,KAAhC,EAAuChL,QAAvC,EAAiD;AACtD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADsD;;AAUtD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB2C,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;AACbkE,MAAAA,OAAO,EAAE+K,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAA;KADrB,CAAA,CAAA;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;AACtE,MAAA,OAAOC,IAAI,GAAG,CAACF,IAAI,GAAGE,IAAR,IAAgBD,OAA9B,CAAA;AACD,KAFiB,CAAlB,CAAA;;AAGA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIkB,CAAC,GAAG;QACN2X,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADxB;AAENvH,QAAAA,OAAO,EAAEjC,IAAI,CAACrC,KAAL,GAAa,IAAA;OAFxB,CAAA;;MAIA,IAAGqC,IAAI,CAAClC,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACDgC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOsC,GAAP,CAAA;AACD,CAAA;AAEM,SAASuV,iBAAT,CAA2BrI,IAA3B,EAAiCwH,KAAjC,EAAwChL,QAAxC,EAAkD;AACvD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADuD;;AAUvD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB,IAAA,IAAIe,CAAC,GAAG;AACNoX,MAAAA,UAAU,EAAEtI,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CADN;AAENuI,MAAAA,UAAU,EAAEvI,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAA;KAFd,CAAA;AAIAlN,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeG,CAAf,CAAA,CAAA;AACD,GAND,MAOK;AACH8O,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8BU,OAA9B,EAAuC;AAC/E;AACA,MAAA,IAAGT,IAAI,CAAC5X,MAAL,KAAgB,CAAnB,EAAsB;AACpB,QAAA,IAAGqY,OAAH,EAAY;UACV,IAAI9T,MAAM,GAAG,EAAb,CAAA;;AACA,UAAA,KAAI,IAAIpF,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGkS,IAAI,CAAC5X,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,YAAA,IAAI0D,IAAI,GAAG+U,IAAI,CAACzY,CAAD,CAAf,CAAA;YACAoF,MAAM,CAAC3D,IAAP,CAAYiC,IAAZ,CAAA,CAAA;AACD,WALS;;;UAOV0B,MAAM,GAAGoO,WAAW,CAACpO,MAAM,CAAC8I,OAAP,EAAD,EAAmB,CAAIsK,GAAAA,OAAvB,CAApB,CAAA;UACA,OAAOpT,MAAM,CAAC8I,OAAP,EAAP,CAAA;AACD,SATD,MAUK;AACH,UAAA,OAAOsF,WAAW,CAACiF,IAAD,EAAOD,OAAP,CAAlB,CAAA;AACD,SAAA;AACF,OAAA;;AACD,MAAA,IAAI5W,CAAC,GAAG,CACN6W,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAD1B,EAENC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAF1B,CAAR,CAAA;AAIA,MAAA,OAAO5W,CAAP,CAAA;AACD,KAtBiB,CAAlB,CAAA;;AAuBA,IAAA,KAAI,IAAI5B,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIkB,CAAC,GAAG;AACN2X,QAAAA,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QAAAA;OADhC,CAAA;;MAGA,IAAGxJ,IAAI,CAAClC,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACD,MAAA,IAAGkC,IAAI,CAACrC,KAAL,CAAWR,MAAX,KAAsB,CAAzB,EAA4B;AAC1BK,QAAAA,CAAC,CAACiY,aAAF,GAAkBzV,IAAI,CAACrC,KAAvB,CAAA;AACD,OAFD,MAGK;QACHH,CAAC,CAAC8X,UAAF,GAAetV,IAAI,CAACrC,KAAL,CAAW,CAAX,CAAf,CAAA;QACAH,CAAC,CAAC+X,UAAF,GAAevV,IAAI,CAACrC,KAAL,CAAW,CAAX,CAAf,CAAA;AACD,OAAA;;AACDmC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOsC,GAAP,CAAA;AACD,CAAA;AAEM,SAAS4V,YAAT,CAAsB1I,IAAtB,EAA4BwH,KAA5B,EAAmChL,QAAnC,EAA6CmM,GAA7C,EAAkD;AACvD,EAAA,IAAI7V,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADuD;;AAUvD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;IACpB,IAAIK,CAAC,GAAG,EAAR,CAAA;AACAA,IAAAA,CAAC,CAACmY,GAAD,CAAD,GAAS3I,IAAI,CAAC,CAAD,CAAb,CAAA;AACAlN,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,GAJD,MAKK;AACHwP,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8BU,OAA9B,EAAuC;AAC/E,MAAA,OAAOT,IAAI,GAAG,CAACF,IAAI,GAAGE,IAAR,IAAgBD,OAA9B,CAAA;AACD,KAFiB,CAAlB,CAAA;;AAGA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIkB,GAAC,GAAG;AACN2X,QAAAA,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QAAAA;OADhC,CAAA;;MAGA,IAAGxJ,IAAI,CAAClC,MAAR,EAAgB;AACdN,QAAAA,GAAC,CAACM,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACDN,MAAAA,GAAC,CAACmY,GAAD,CAAD,GAASA,GAAG,KAAK,YAAR,GAAuB,CAAC3V,IAAI,CAACrC,KAA7B,GAAqCqC,IAAI,CAACrC,KAAnD,CAAA;AACAmC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,GAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOsC,GAAP,CAAA;AACD,CAAA;AAEM,SAAS8V,gBAAT,CAA0B5I,IAA1B,EAAgCwH,KAAhC,EAAuChL,QAAvC,EAAiD;AACtD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADsD;;AAUtD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB2C,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;AACb8X,MAAAA,OAAO,EAAE,CAAC7I,IAAI,CAAC,CAAD,CAAA;KADhB,CAAA,CAAA;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;AACtE,MAAA,OAAOC,IAAI,GAAG,CAACF,IAAI,GAAGE,IAAR,IAAgBD,OAA9B,CAAA;AACD,KAFiB,CAAlB,CAAA;;AAGA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIkB,CAAC,GAAG;QACN2X,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADxB;QAENqM,OAAO,EAAE,CAAC7V,IAAI,CAACrC,KAAAA;OAFjB,CAAA;;MAIA,IAAGqC,IAAI,CAAClC,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACDgC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOsC,GAAP,CAAA;AACD,CAAA;AAEM,SAASgW,gBAAT,CAA0B9I,IAA1B,EAAgCwH,KAAhC,EAAuChL,QAAvC,EAAiD;AACtD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADsD;;AAUtD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB2C,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;AACbgY,MAAAA,OAAO,EAAE,CAAC/I,IAAI,CAAC,CAAD,CAAA;KADhB,CAAA,CAAA;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;AACtE,MAAA,OAAOC,IAAI,GAAG,CAACF,IAAI,GAAGE,IAAR,IAAgBD,OAA9B,CAAA;AACD,KAFiB,CAAlB,CAAA;;AAGA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIkB,CAAC,GAAG;QACN2X,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADxB;QAENuM,OAAO,EAAE,CAAC/V,IAAI,CAACrC,KAAAA;OAFjB,CAAA;;MAIA,IAAGqC,IAAI,CAAClC,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACDgC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOsC,GAAP,CAAA;AACD,CAAA;AAGM,SAASkW,gBAAT,CAA0BhJ,IAA1B,EAAgCwH,KAAhC,EAAuChL,QAAvC,EAAiD;AACtD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADsD;;AAUtD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB2C,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;MACbkY,OAAO,EAAEjJ,IAAI,CAAC,CAAD,CAAA;KADf,CAAA,CAAA;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;AACtE,MAAA,OAAOC,IAAI,GAAG,CAACF,IAAI,GAAGE,IAAR,IAAgBD,OAA9B,CAAA;AACD,KAFiB,CAAlB,CAAA;;AAGA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIkB,CAAC,GAAG;QACN2X,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADxB;QAENyM,OAAO,EAAEjW,IAAI,CAACrC,KAAAA;OAFhB,CAAA;;MAIA,IAAGqC,IAAI,CAAClC,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACDgC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOsC,GAAP,CAAA;AACD,CAAA;AAEM,SAASoW,cAAT,CAAwBlJ,IAAxB,EAA8BwH,KAA9B,EAAqChL,QAArC,EAA+C2M,IAA/C,EAAqD;AAC1D,EAAA,IAAIrW,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CAD0D;;AAU1D,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB,IAAA,IAAIyF,CAAC,GAAG;MACNwT,MAAM,EAAEpJ,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAa,IADf;AAENqJ,MAAAA,MAAM,EAAErJ,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAa,GAAA,IAAA;KAFvB,CAAA;;IAIA,IAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQ7P,MAAR,GAAiB,CAAjB,IAAsBgZ,IAAzB,EAA+B;MAC7BvT,CAAC,CAAC0T,MAAF,GAAWtJ,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAA,GAAa,IAAxB,CAAA;AACD,KAAA;;AACDlN,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe6E,CAAf,CAAA,CAAA;AACD,GATD,MAUK;AACHoK,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;MACtE,OAAO,CACLC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAD3B,EAELC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAF3B,EAGLC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAH3B,CAAP,CAAA;AAKD,KANiB,CAAlB,CAAA;;AAOA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIsG,EAAC,GAAG;QACNuS,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADxB;AAEN4M,QAAAA,MAAM,EAAEpW,IAAI,CAACrC,KAAL,CAAW,CAAX,IAAgB,IAFlB;AAGN0Y,QAAAA,MAAM,EAAErW,IAAI,CAACrC,KAAL,CAAW,CAAX,CAAgB,GAAA,IAAA;OAH1B,CAAA;;MAKA,IAAGqC,IAAI,CAAClC,MAAR,EAAgB;AACd8E,QAAAA,EAAC,CAAC9E,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;MACD,IAAGkC,IAAI,CAACrC,KAAL,CAAWR,MAAX,GAAoB,CAApB,IAAyBgZ,IAA5B,EAAkC;QAChCvT,EAAC,CAAC0T,MAAF,GAAWtW,IAAI,CAACrC,KAAL,CAAW,CAAX,CAAA,GAAgB,IAA3B,CAAA;AACD,OAAA;;AACDmC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe6E,EAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAO9C,GAAP,CAAA;AACD,CAAA;AAEM,SAASyW,aAAT,CAAuBvJ,IAAvB,EAA6BwH,KAA7B,EAAoChL,QAApC,EAA8CgN,KAA9C,EAAqD;AAC1D,EAAA,IAAI1W,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CAD0D;;AAU1D,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;IACpB,IAAIyF,CAAC,GAAG,EAAR,CAAA;;AAEA,IAAA,IAAG4T,KAAH,EAAU;MACR5T,CAAC,CAACrE,GAAF,GAAQyO,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAlB,CAAA;AACD,KAFD,MAGK;MACHpK,CAAC,CAACtE,KAAF,GAAU0O,IAAI,CAAC,CAAD,CAAJ,GAAU,IAApB,CAAA;AACD,KAAA;;AACDlN,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe6E,CAAf,CAAA,CAAA;AACD,GAVD,MAWK;AACHoK,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;MACtE,OAAO,CAACC,IAAI,GAAG,CAACF,IAAI,GAAGE,IAAR,IAAgBD,OAAxB,IAAmC,IAA1C,CAAA;AACD,KAFiB,CAAlB,CAAA;;AAGA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIsG,GAAC,GAAG;AACNuS,QAAAA,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QAAAA;OADhC,CAAA;;MAGA,IAAGxJ,IAAI,CAAClC,MAAR,EAAgB;AACd8E,QAAAA,GAAC,CAAC9E,MAAF,GAAWkC,IAAI,CAAClC,MAAhB,CAAA;AACD,OAAA;;AACD,MAAA,IAAG0Y,KAAH,EAAU;AACR5T,QAAAA,GAAC,CAACrE,GAAF,GAAQyB,IAAI,CAACrC,KAAL,GAAa,IAArB,CAAA;AACD,OAFD,MAGK;AACHiF,QAAAA,GAAC,CAACtE,KAAF,GAAU0B,IAAI,CAACrC,KAAL,GAAa,IAAvB,CAAA;AACD,OAAA;;AACDmC,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe6E,GAAf,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAO9C,GAAP,CAAA;AACD,CAAA;AAEM,SAAS2W,eAAT,CAAyBzJ,IAAzB,EAA+BwH,KAA/B,EAAsChL,QAAtC,EAAgD;AACrD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADqD;;AAUrD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;IACpB,IAAoD6P,MAAAA,GAAAA,IAAI,CAAC,CAAD,CAAxD;QAAMwB,QAAN,UAAMA,QAAN;QAAgBC,UAAhB,UAAgBA,UAAhB;QAA4BC,WAA5B,UAA4BA,WAA5B;QAAyCC,MAAzC,UAAyCA,MAAzC,CAAA;AACA,IAAA,IAAInR,CAAC,GAAGwD,IAAI,CAACuN,KAAL,CAAWC,QAAX,EAAqBC,UAArB,EAAiCC,WAAjC,EAA8CC,MAA9C,CAAR,CAAA;AACA7O,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;MACb2D,MAAM,EAAElE,CAAC,CAACkE,MADG;MAEb4N,QAAQ,EAAE9R,CAAC,CAAC8R,QAAAA;KAFd,CAAA,CAAA;IAIAxP,GAAG,CAAC4W,IAAJ,GAAWlZ,CAAX,CAAA;AACD,GARD,MASK;AACHwP,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8BU,OAA9B,EAAuC;AAC/E,MAAA,IAAMmB,SAAN,GAAuD5B,IAAvD,CAAM4B,SAAN;AAAA,UAAiBC,WAAjB,GAAuD7B,IAAvD,CAAiB6B,WAAjB;AAAA,UAA8BC,YAA9B,GAAuD9B,IAAvD,CAA8B8B,YAA9B;AAAA,UAA4ClI,MAA5C,GAAuDoG,IAAvD,CAA4CpG,MAA5C,CAAA;AACA,MAAA,IAAMmI,SAAN,GAA+CjC,IAA/C,CAAMiC,SAAN;AAAA,UAAiBC,WAAjB,GAA+ClC,IAA/C,CAAiBkC,WAAjB;AAAA,UAA8BC,YAA9B,GAA+CnC,IAA/C,CAA8BmC,YAA9B,CAAA;MACA,IAAIxI,QAAQ,GAAG,EAAf;UAAmBC,UAAU,GAAG,EAAhC;UAAoCC,WAAW,GAAG,EAAlD,CAAA;;AACA,MAAA,KAAI,IAAIpS,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAG8T,SAAS,CAAC9T,GAA/B,EAAoCvG,CAAC,GAAGuG,GAAxC,EAA6CvG,CAAC,EAA9C,EAAkD;AAChD,QAAA,IAAIyK,CAAC,GAAG4P,SAAS,CAACra,CAAD,CAAjB;AAAA,YAAsBsT,CAAC,GAAGkH,SAAS,CAACxa,CAAD,CAAnC,CAAA;QACA,IAAI2a,GAAG,GAAGL,WAAW,CAAC,CAACta,CAAC,GAAG,CAAL,IAAUuG,GAAX,CAArB;YAAsCqU,GAAG,GAAGH,WAAW,CAAC,CAACza,CAAC,GAAG,CAAL,IAAUuG,GAAX,CAAvD,CAAA;AACA,QAAA,IAAIsU,IAAI,GAAGN,YAAY,CAACva,CAAD,CAAvB;AAAA,YAA4B8a,IAAI,GAAGJ,YAAY,CAAC1a,CAAD,CAA/C,CAHgD;;QAKhD,IAAG2a,GAAG,CAAC,CAAD,CAAH,KAAW,CAAX,IAAgBA,GAAG,CAAC,CAAD,CAAH,KAAW,CAA3B,IACEC,GAAG,CAAC,CAAD,CAAH,KAAW,CADb,IACkBA,GAAG,CAAC,CAAD,CAAH,KAAW,CAD7B,IAEEC,IAAI,CAAC,CAAD,CAAJ,KAAY,CAFd,IAEmBA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAF/B,IAGEC,IAAI,CAAC,CAAD,CAAJ,KAAY,CAHd,IAGmBA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAHlC,EAGqC;AACnC5I,UAAAA,QAAQ,CAACzQ,IAAT,CAAc,CACZgJ,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC6I,CAAC,CAAC,CAAD,CAAD,GAAO7I,CAAC,CAAC,CAAD,CAAT,IAAgB+N,OADX,EAEZ/N,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC6I,CAAC,CAAC,CAAD,CAAD,GAAO7I,CAAC,CAAC,CAAD,CAAT,IAAgB+N,OAFX,CAAd,CAAA,CAAA;AAIArG,UAAAA,UAAU,CAAC1Q,IAAX,CAAgB,CAAC,CAAD,EAAI,CAAJ,CAAhB,CAAA,CAAA;AACA2Q,UAAAA,WAAW,CAAC3Q,IAAZ,CAAiB,CAAC,CAAD,EAAI,CAAJ,CAAjB,CAAA,CAAA;AACD,SAVD,MAWK;UACH,IAAI1B,GAAG,GAAG,CACR0K,CADQ,EAERoQ,IAFQ,EAGRF,GAHQ,EAIRrH,CAJQ,CAAV,CAAA;;AAMA,UAAA,IAAG4F,OAAH,EAAY;AACVnZ,YAAAA,GAAG,CAACmO,OAAJ,EAAA,CAAA;AACD,WAAA;;AACD,UAAA,IAAI6M,CAAC,GAAGvH,WAAW,CAACzT,GAAD,EAAMyY,OAAN,CAAnB,CAAA;AACAtG,UAAAA,QAAQ,CAACzQ,IAAT,CAAcsZ,CAAC,CAAC,CAAD,CAAf,CAAA,CAAA;;AACA,UAAA,IAAG7B,OAAH,EAAY;AACV/G,YAAAA,UAAU,CAAC1Q,IAAX,CAAgBsZ,CAAC,CAAC,CAAD,CAAjB,CAAA,CAAA;AACA3I,YAAAA,WAAW,CAAC3Q,IAAZ,CAAiBsZ,CAAC,CAAC,CAAD,CAAlB,CAAA,CAAA;AACD,WAHD,MAIK;AACH5I,YAAAA,UAAU,CAAC1Q,IAAX,CAAgBsZ,CAAC,CAAC,CAAD,CAAjB,CAAA,CAAA;AACA3I,YAAAA,WAAW,CAAC3Q,IAAZ,CAAiBsZ,CAAC,CAAC,CAAD,CAAlB,CAAA,CAAA;AACD,WAAA;AACF,SAAA;AACF,OAAA;;MACD,OAAO;AACL7I,QAAAA,QAAQ,EAARA,QADK;AAELC,QAAAA,UAAU,EAAVA,UAFK;AAGLC,QAAAA,WAAW,EAAXA,WAHK;AAILC,QAAAA,MAAM,EAANA,MAAAA;OAJF,CAAA;AAMD,KAhDiB,CAAlB,CAAA;;AAiDA,IAAA,KAAI,IAAIrS,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;MACA,IAAoD0D,WAAAA,GAAAA,IAAI,CAACrC,KAAzD;UAAM6Q,SAAN,eAAMA,QAAN;UAAgBC,WAAhB,eAAgBA,UAAhB;UAA4BC,YAA5B,eAA4BA,WAA5B;UAAyCC,OAAzC,eAAyCA,MAAzC,CAAA;;AACA,MAAA,IAAInR,GAAC,GAAL,KAAA,CAAA,CAAA;;MACA,IAAGlB,CAAC,KAAK,CAAT,EAAY;AACVkB,QAAAA,GAAC,GAAGwD,IAAI,CAACuN,KAAL,CAAWC,SAAX,EAAqBC,WAArB,EAAiCC,YAAjC,EAA8CC,OAA9C,CAAJ,CAAA;QACA7O,GAAG,CAAC4W,IAAJ,GAAWlZ,GAAX,CAAA;AACD,OAHD,MAIK;AACHA,QAAAA,GAAC,GAAGwD,IAAI,CAACuN,KAAL,CAAWC,SAAX,EAAqBC,WAArB,EAAiCC,YAAjC,EAA8CC,OAA9C,EAAsD7O,GAAG,CAAC4W,IAAJ,CAAS5Z,EAA/D,EAAmEgD,GAAG,CAAC4W,IAAJ,CAAS3Z,EAA5E,EAAgF+C,GAAG,CAAC4W,IAAJ,CAAS1Z,EAAzF,EAA6F8C,GAAG,CAAC4W,IAAJ,CAASzZ,EAAtG,CAAJ,CAAA;AACD,OAAA;;AACD6C,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;QACboX,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADjB;QAEb9H,MAAM,EAAElE,GAAC,CAACkE,MAFG;QAGb4N,QAAQ,EAAE9R,GAAC,CAAC8R,QAAAA;OAHd,CAAA,CAAA;AAKD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOxP,GAAP,CAAA;AACD,CAAA;AAEM,SAASwX,aAAT,CAAuBpW,IAAvB,EAA6BsT,KAA7B,EAAoChL,QAApC,EAA8C;AACnD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADmD;;AAUnD,EAAA,IAAGhU,IAAI,CAACc,KAAL,CAAW7E,MAAX,KAAsB,CAAzB,EAA4B;AAC1B,IAAA,IAAIyX,KAAK,GAAG1T,IAAI,CAACc,KAAL,CAAW,CAAX,CAAZ,CAAA;AACA,IAAA,IAAIY,CAAC,GAAG,CACN2U,QAAQ,CAAC3C,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CADF,EAEN2C,QAAQ,CAAC3C,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAFF,EAGN2C,QAAQ,CAAC3C,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAHF,EAINA,KAAK,CAAC,CAAD,CAJC,CAAR,CAAA;;AAMA,IAAA,IAAG1T,IAAI,CAACe,OAAL,CAAa,CAAb,CAAA,GAAkB,GAArB,EAA0B;MACxBW,CAAC,CAAC,CAAD,CAAD,IAAQ1B,IAAI,CAACe,OAAL,CAAa,CAAb,CAAA,GAAkB,IAA1B,CAAA;AACD,KAAA;;AACDnC,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;MACbmD,IAAI,EAAE,CAAC0B,CAAD,CAAA;KADR,CAAA,CAAA;AAGD,GAdD,MAeK;IACH,IAAIC,GAAG,GAAG3B,IAAI,CAACc,KAAL,CAAW,CAAX,EAAc7E,MAAxB,CAAA;AACA,IAAA,IAAI6P,IAAI,GAAGuH,WAAW,CAACrT,IAAI,CAACc,KAAN,EAAawS,KAAb,EAAoBhL,QAApB,EAA8B,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;MAChF,IAAIzY,GAAG,GAAG,EAAV,CAAA;;MACA,KAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuG,GAAnB,EAAwBvG,CAAC,EAAzB,EAA6B;QAC3BD,GAAG,CAACC,CAAD,CAAH,GAASyY,IAAI,CAACzY,CAAD,CAAJ,GAAU,CAACuY,IAAI,CAACvY,CAAD,CAAJ,GAAUyY,IAAI,CAACzY,CAAD,CAAf,IAAsBwY,OAAzC,CAAA;AACD,OAAA;;AACD,MAAA,OAAOzY,GAAP,CAAA;AACD,KANqB,CAAtB,CAAA;;AAOA,IAAA,KAAI,IAAIC,CAAC,GAAG,CAAR,EAAWuG,IAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,IAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIsG,GAAC,GAAG,CACN2U,QAAQ,CAACvX,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CADF,EAENuX,QAAQ,CAACvX,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAFF,EAGNuX,QAAQ,CAACvX,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAHF,EAINA,IAAI,CAAC,CAAD,CAJE,CAAR,CAAA;;AAMA,MAAA,IAAGkB,IAAI,CAACe,OAAL,CAAa3F,CAAb,CAAA,GAAkB,GAArB,EAA0B;QACxBsG,GAAC,CAAC,CAAD,CAAD,IAAQ1B,IAAI,CAACe,OAAL,CAAa3F,CAAb,CAAA,GAAkB,IAA1B,CAAA;AACD,OAAA;;AACDwD,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;QACboX,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADjB;QAEbtI,IAAI,EAAE,CAAC0B,GAAD,CAAA;OAFR,CAAA,CAAA;AAID,KAAA;AACF,GAAA;;AACD,EAAA,OAAO9C,GAAP,CAAA;AACD,CAAA;AAEM,SAAS0X,eAAT,CAAyBvW,MAAzB,EAAiCuT,KAAjC,EAAwChL,QAAxC,EAAkD;AACvD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADuD;;AAUvD,EAAA,IAAGjU,MAAM,CAACe,KAAP,CAAa7E,MAAb,KAAwB,CAA3B,EAA8B;AAC5B,IAAA,IAAIyX,KAAK,GAAG3T,MAAM,CAACe,KAAP,CAAa,CAAb,CAAZ,CAAA;AACA,IAAA,IAAIY,CAAC,GAAG,CACN2U,QAAQ,CAAC3C,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CADF,EAEN2C,QAAQ,CAAC3C,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAFF,EAGN2C,QAAQ,CAAC3C,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAHF,EAINA,KAAK,CAAC,CAAD,CAJC,CAAR,CAAA;;AAMA,IAAA,IAAG3T,MAAM,CAACgB,OAAP,CAAe,CAAf,CAAA,GAAoB,GAAvB,EAA4B;MAC1BW,CAAC,CAAC,CAAD,CAAD,IAAQ3B,MAAM,CAACgB,OAAP,CAAe,CAAf,CAAA,GAAoB,IAA5B,CAAA;AACD,KAAA;;AACDnC,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;MACbkD,MAAM,EAAE,CAAC2B,CAAD,CAAA;KADV,CAAA,CAAA;AAGD,GAdD,MAeK;AACH,IAAA,IAAIoK,IAAI,GAAGuH,WAAW,CAACtT,MAAM,CAACe,KAAR,EAAewS,KAAf,EAAsBhL,QAAtB,EAAgC,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;AAClF,MAAA,OAAOC,IAAI,GAAG,CAACF,IAAI,GAAGE,IAAR,IAAgBD,OAA9B,CAAA;AACD,KAFqB,CAAtB,CAAA;;AAGA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACA,MAAA,IAAIsG,GAAC,GAAG,CACN2U,QAAQ,CAACvX,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CADF,EAENuX,QAAQ,CAACvX,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAFF,EAGNuX,QAAQ,CAACvX,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAHF,EAINA,IAAI,CAAC,CAAD,CAJE,CAAR,CAAA;;AAMA,MAAA,IAAGiB,MAAM,CAACgB,OAAP,CAAe3F,CAAf,CAAA,GAAoB,GAAvB,EAA4B;QAC1BsG,GAAC,CAAC,CAAD,CAAD,IAAQ3B,MAAM,CAACgB,OAAP,CAAe3F,CAAf,CAAA,GAAoB,IAA5B,CAAA;AACD,OAAA;;AACDwD,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;QACboX,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADjB;QAEbvI,MAAM,EAAE,CAAC2B,GAAD,CAAA;OAFV,CAAA,CAAA;AAID,KAAA;AACF,GAAA;;AACD,EAAA,OAAO9C,GAAP,CAAA;AACD,CAAA;AAEM,SAAS2X,oBAAT,CAA8BzK,IAA9B,EAAoCwH,KAApC,EAA2ChL,QAA3C,EAAqD;AAC1D,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CAD0D;;AAU1D,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB2C,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;AACbgQ,MAAAA,WAAW,EAAEf,IAAAA;KADf,CAAA,CAAA;AAGD,GAJD,MAKK;AACH,IAAA,IAAInK,GAAG,GAAGmK,IAAI,CAAC,CAAD,CAAJ,CAAQ7P,MAAlB,CAAA;AACA6P,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;MACtE,IAAIzY,GAAG,GAAG,EAAV,CAAA;;MACA,KAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuG,GAAnB,EAAwBvG,CAAC,EAAzB,EAA6B;QAC3BD,GAAG,CAACC,CAAD,CAAH,GAASyY,IAAI,CAACzY,CAAD,CAAJ,GAAU,CAACuY,IAAI,CAACvY,CAAD,CAAJ,GAAUyY,IAAI,CAACzY,CAAD,CAAf,IAAsBwY,OAAzC,CAAA;AACD,OAAA;;AACD,MAAA,OAAOzY,GAAP,CAAA;AACD,KANiB,CAAlB,CAAA;;AAOA,IAAA,KAAI,IAAIC,CAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,KAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACAwD,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;QACboX,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADjB;QAEbuE,WAAW,EAAE/N,IAAI,CAACrC,KAAAA;OAFpB,CAAA,CAAA;AAID,KAAA;AACF,GAAA;;AACD,EAAA,OAAOmC,GAAP,CAAA;AACD,CAAA;AAEM,SAAS4X,iBAAT,CAA2B1K,IAA3B,EAAiCwH,KAAjC,EAAwChL,QAAxC,EAAkD;AACvD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADuD;;AAUvD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB,IAAA,IAAId,GAAJ,CAAA;;AACA,IAAA,IAAG2Q,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAf,EAAkB;MAChB3Q,GAAG,GAAG,CAAC,OAAD,CAAN,CAAA;KADF,MAGK,IAAG2Q,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAf,EAAkB;MACrB3Q,GAAG,GAAG,CAAC,OAAD,CAAN,CAAA;AACD,KAFI,MAGA;MACHA,GAAG,GAAG,CAAC,OAAD,CAAN,CAAA;AACD,KAAA;;AACDyD,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;AACb4Z,MAAAA,cAAc,EAAEtb,GAAAA;KADlB,CAAA,CAAA;AAGD,GAdD,MAeK;AACH2Q,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B8C,OAA9B,EAAuC;AAC/E,MAAA,OAAOA,OAAO,GAAG7C,IAAH,GAAUF,IAAxB,CAAA;AACD,KAFiB,CAAlB,CAAA;;AAGA,IAAA,KAAI,IAAIvY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;MACA,IAAID,IAAG,GAAG,EAAV,CAAA;;AACA,MAAA,KAAI,IAAIC,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAG7C,IAAI,CAACrC,KAAL,CAAWR,MAAhC,EAAwCb,GAAC,GAAGuG,KAA5C,EAAiDvG,GAAC,EAAlD,EAAsD;AACpD,QAAA,IAAI6N,KAAK,GAAGnK,IAAI,CAACrC,KAAL,CAAWrB,GAAX,CAAZ,CAAA;;QACA,IAAG6N,KAAK,KAAK,CAAb,EAAgB;UACd9N,IAAG,CAAC0B,IAAJ,CAAS,OAAT,CAAA,CAAA;AACD,SAFD,MAGK,IAAGoM,KAAK,KAAK,CAAb,EAAgB;UACnB9N,IAAG,CAAC0B,IAAJ,CAAS,OAAT,CAAA,CAAA;AACD,SAFI,MAGA;UACH1B,IAAG,CAAC0B,IAAJ,CAAS,OAAT,CAAA,CAAA;AACD,SAAA;AACF,OAAA;;AACD+B,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;QACboX,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADjB;AAEbmO,QAAAA,cAAc,EAAEtb,IAAAA;OAFlB,CAAA,CAAA;AAID,KAAA;AACF,GAAA;;AACD,EAAA,OAAOyD,GAAP,CAAA;AACD,CAAA;AAEM,SAAS+X,mBAAT,CAA6B7K,IAA7B,EAAmCwH,KAAnC,EAA0ChL,QAA1C,EAAoD;AACzD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADyD;;AAUzD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB2C,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;AACbgQ,MAAAA,WAAW,EAAEf,IAAAA;KADf,CAAA,CAAA;AAGD,GAJD,MAKK;AACH,IAAA,IAAInK,GAAG,GAAGmK,IAAI,CAAC,CAAD,CAAJ,CAAQ7P,MAAlB,CAAA;AACA6P,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;MACtE,IAAIzY,GAAG,GAAG,EAAV,CAAA;;MACA,KAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuG,GAAnB,EAAwBvG,CAAC,EAAzB,EAA6B;QAC3BD,GAAG,CAACC,CAAD,CAAH,GAASyY,IAAI,CAACzY,CAAD,CAAJ,GAAU,CAACuY,IAAI,CAACvY,CAAD,CAAJ,GAAUyY,IAAI,CAACzY,CAAD,CAAf,IAAsBwY,OAAzC,CAAA;AACD,OAAA;;AACD,MAAA,OAAOzY,GAAP,CAAA;AACD,KANiB,CAAlB,CAAA;;AAOA,IAAA,KAAI,IAAIC,CAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,KAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACAwD,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;QACboX,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADjB;QAEbuE,WAAW,EAAE/N,IAAI,CAACrC,KAAAA;OAFpB,CAAA,CAAA;AAID,KAAA;AACF,GAAA;;AACD,EAAA,OAAOmC,GAAP,CAAA;AACD,CAAA;AAEM,SAASgY,aAAT,CAAuB9K,IAAvB,EAA6BwH,KAA7B,EAAoChL,QAApC,EAA8C;AACnD,EAAA,IAAI1J,GAAG,GAAG;AACRnC,IAAAA,KAAK,EAAE,EADC;AAERsX,IAAAA,OAAO,EAAE;AACPzL,MAAAA,QAAQ,EAARA,QADO;AAEPtI,MAAAA,IAAI,EAAE,UAFC;AAGPgU,MAAAA,UAAU,EAAE,CAAA;AAHL,KAAA;AAFD,GAAV,CADmD;;AAUnD,EAAA,IAAGlI,IAAI,CAAC7P,MAAL,KAAgB,CAAnB,EAAsB;AACpB2C,IAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;MACbuD,IAAI,EAAE0L,IAAI,CAAC,CAAD,CAAA;KADZ,CAAA,CAAA;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAGuH,WAAW,CAACvH,IAAD,EAAOwH,KAAP,EAAchL,QAAd,EAAwB,UAASuL,IAAT,EAAeF,IAAf,EAAqBC,OAArB,EAA8B;AACtE,MAAA,OAAO,CACLC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAD3B,EAELC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACF,IAAI,CAAC,CAAD,CAAJ,GAAUE,IAAI,CAAC,CAAD,CAAf,IAAsBD,OAF3B,CAAP,CAAA;AAID,KALiB,CAAlB,CAAA;;AAMA,IAAA,KAAI,IAAIxY,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAf,CAAA;AACAwD,MAAAA,GAAG,CAACnC,KAAJ,CAAUI,IAAV,CAAe;QACboX,MAAM,EAAE,CAACnV,IAAI,CAACvC,IAAL,GAAY+W,KAAb,IAAsBhL,QADjB;QAEblI,IAAI,EAAEtB,IAAI,CAACrC,KAAAA;OAFb,CAAA,CAAA;AAID,KAAA;AACF,GAAA;;AACD,EAAA,OAAOmC,GAAP,CAAA;AACD;;AC51BD,SAASiY,YAAT,CAAqBrB,IAArB,EAA2B;AACzB,EAAA,IAAIsB,OAAO,GAAGtB,IAAI,CAACsB,OAAnB,CAAA;;EACA,IAAG7E,KAAK,CAACiB,OAAN,CAAc4D,OAAd,CAA0BA,IAAAA,OAAO,CAAC7a,MAArC,EAA6C;IAC3C,OAAOuZ,IAAI,CAACsB,OAAL,CAAa,CAAb,CAAgB/C,CAAAA,OAAhB,CAAwBzL,QAA/B,CAAA;AACD,GAAA;;AACD,EAAA,IAAIQ,QAAQ,GAAG0M,IAAI,CAAC1M,QAApB,CAAA;;AACA,EAAA,IAAGmJ,KAAK,CAACiB,OAAN,CAAcpK,QAAd,CAAH,EAA4B;AAC1B,IAAA,KAAI,IAAI1N,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmH,QAAQ,CAAC7M,MAA9B,EAAsCb,CAAC,GAAGuG,GAA1C,EAA+CvG,CAAC,EAAhD,EAAoD;AAClD,MAAA,IAAI2b,KAAK,GAAGjO,QAAQ,CAAC1N,CAAD,CAApB,CAAA;;AACA,MAAA,IAAIwD,GAAG,GAAGiY,YAAW,CAACE,KAAD,CAArB,CAAA;;MACA,IAAGnY,GAAG,KAAKJ,SAAX,EAAsB;AACpB,QAAA,OAAOI,GAAP,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;AACF,CAAA;;AAED,SAASoY,aAAT,CAAsBxB,IAAtB,EAA4B1J,IAA5B,EAAkCmL,IAAlC,EAAwCC,EAAxC,EAA4C;AAC1C,EAAA,IAAIJ,OAAO,GAAGtB,IAAI,CAACsB,OAAnB,CAAA;;AACA,EAAA,IAAG7E,KAAK,CAACiB,OAAN,CAAc4D,OAAd,CAAH,EAA2B;AACzB,IAAA,KAAI,IAAI1b,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmV,OAAO,CAAC7a,MAA7B,EAAqCb,CAAC,GAAGuG,GAAzC,EAA8CvG,CAAC,EAA/C,EAAmD;AACjD,MAAA,IAAI0D,IAAI,GAAGgY,OAAO,CAAC1b,CAAD,CAAP,CAAWqB,KAAtB,CAAA;;MACA,IAAGqC,IAAI,CAAC7C,MAAL,IAAe6C,IAAI,CAAC7C,MAAL,GAAc,CAAhC,EAAmC;AACjC,QAAA,IAAIkb,GAAG,GAAGrY,IAAI,CAAC,CAAD,CAAd,CADiC;;QAGjC,IAAIsY,GAAG,GAAG,CAACnF,KAAK,CAACiB,OAAN,CAAcgE,EAAd,CAAX,CAAA;;QACA,IAAG,CAACE,GAAJ,EAAS;AACP,UAAA,KAAI,IAAI5V,CAAC,GAAG,CAAR,EAAW6V,IAAI,GAAGH,EAAE,CAACjb,MAAzB,EAAiCuF,CAAC,GAAG6V,IAArC,EAA2C7V,CAAC,EAA5C,EAAgD;YAC9C,IAAG2V,GAAG,CAAClY,cAAJ,CAAmBiY,EAAE,CAAC1V,CAAD,CAArB,CAAH,EAA8B;AAC5B4V,cAAAA,GAAG,GAAG,IAAN,CAAA;AACA,cAAA,MAAA;AACD,aAAA;AACF,WAAA;AACF,SAAA;;AACD,QAAA,IAAGA,GAAH,EAAQ;AACN,UAAA,KAAI,IAAI5V,EAAC,GAAG,CAAR,EAAW6V,IAAI,GAAGvY,IAAI,CAAC7C,MAA3B,EAAmCuF,EAAC,GAAG6V,IAAvC,EAA6C7V,EAAC,EAA9C,EAAkD;YAChD,IAAIyS,MAAM,GAAGnV,IAAI,CAAC0C,EAAD,CAAJ,CAAQyS,MAAR,IAAkB,CAA/B,CAAA;;AACA,YAAA,IAAG,CAACgD,IAAI,CAAChY,cAAL,CAAoBgV,MAApB,CAAJ,EAAiC;AAC/BgD,cAAAA,IAAI,CAAChD,MAAD,CAAJ,GAAe,IAAf,CAAA;cACAnI,IAAI,CAACjP,IAAL,CAAUoX,MAAV,CAAA,CAAA;AACD,aAAA;AACF,WAAA;AACF,SAAA;AACF,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAInL,QAAQ,GAAG0M,IAAI,CAAC1M,QAApB,CAAA;;AACA,EAAA,IAAGmJ,KAAK,CAACiB,OAAN,CAAcpK,QAAd,CAAH,EAA4B;AAC1B,IAAA,KAAI,IAAI1N,EAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGmH,QAAQ,CAAC7M,MAA9B,EAAsCb,EAAC,GAAGuG,KAA1C,EAA+CvG,EAAC,EAAhD,EAAoD;AAClD,MAAA,IAAI2b,KAAK,GAAGjO,QAAQ,CAAC1N,EAAD,CAApB,CAAA;;MACA4b,aAAY,CAACD,KAAD,EAAQjL,IAAR,EAAcmL,IAAd,EAAoBC,EAApB,CAAZ,CAAA;AACD,KAAA;AACF,GAAA;AACF,CAAA;;AAED,gBAAe;EACbL,WADa,EAAA,SAAA,WAAA,CACDrB,IADC,EACK;AAChB,IAAA,IAAI5W,GAAG,GAAGiY,YAAW,CAACrB,IAAD,CAArB,CAAA;;IACA,IAAG5W,GAAG,KAAKJ,SAAX,EAAsB;AACpB,MAAA,OAAOI,GAAP,CAAA;AACD,KAAA;;AACD,IAAA,IAAIwJ,OAAO,GAAGoN,IAAI,CAACpN,OAAnB,CAAA;;AACA,IAAA,KAAI,IAAIhN,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGyG,OAAO,CAACnM,MAA7B,EAAqCb,CAAC,GAAGuG,GAAzC,EAA8CvG,CAAC,EAA/C,EAAmD;AACjD,MAAA,IAAI0D,IAAI,GAAGsJ,OAAO,CAAChN,CAAD,CAAlB,CAAA;;AACA,MAAA,IAAIwD,IAAG,GAAGiY,YAAW,CAAC/X,IAAD,CAArB,CAAA;;MACA,IAAGF,IAAG,KAAKJ,SAAX,EAAsB;AACpB,QAAA,OAAOI,IAAP,CAAA;AACD,OAAA;AACF,KAAA;;AACD,IAAA,OAAO,CAAP,CAAA;GAdW;AAgBboY,EAAAA,YAhBa,EAgBAxB,SAAAA,YAAAA,CAAAA,IAhBA,EAgBM0B,EAhBN,EAgBU;AACrB,IAAA,IAAIpL,IAAI,GAAG,CAAC,CAAD,CAAX;AAAA,QAAgBmL,IAAI,GAAG;MAAC,CAAE,EAAA,IAAA;KAA1B,CAAA;;IACAD,aAAY,CAACxB,IAAD,EAAO1J,IAAP,EAAamL,IAAb,EAAmBC,EAAnB,CAAZ,CAAA;;AACA,IAAA,IAAI9O,OAAO,GAAGoN,IAAI,CAACpN,OAAnB,CAAA;;AACA,IAAA,KAAI,IAAIhN,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGyG,OAAO,CAACnM,MAA7B,EAAqCb,CAAC,GAAGuG,GAAzC,EAA8CvG,CAAC,EAA/C,EAAmD;AACjD,MAAA,IAAI0D,IAAI,GAAGsJ,OAAO,CAAChN,CAAD,CAAlB,CAAA;;MACA4b,aAAY,CAAClY,IAAD,EAAOgN,IAAP,EAAamL,IAAb,EAAmBC,EAAnB,CAAZ,CAAA;AACD,KAAA;;IACD,OAAOpL,IAAI,CAAC/G,IAAL,CAAU,UAASqB,CAAT,EAAYrJ,CAAZ,EAAe;MAC9B,OAAOqJ,CAAC,GAAGrJ,CAAX,CAAA;AACD,KAFM,CAAP,CAAA;AAGD,GAAA;AA3BY,CAAf;;ACnDA,SAASua,SAAT,CAAmBC,UAAnB,EAA+BC,UAA/B,EAA2C1L,IAA3C,EAAiD2I,GAAjD,EAAsD;AACpD,EAAA,KAAI,IAAIrZ,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,IAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAJ,CAAQqB,KAAnB,CAAA;AACA,IAAA,IAAIwM,KAAK,GAAGnK,IAAI,CAAC,CAAD,CAAhB,CAAA;;AACA,IAAA,IAAG,CAACmK,KAAK,CAAChK,cAAN,CAAqBwV,GAArB,CAAJ,EAA+B;AAC7B,MAAA,SAAA;AACD,KAAA;;AACD,IAAA,KAAI,IAAIjT,CAAC,GAAG,CAAR,EAAW6V,IAAI,GAAGvY,IAAI,CAAC7C,MAA3B,EAAmCuF,CAAC,GAAG6V,IAAvC,EAA6C7V,CAAC,EAA9C,EAAkD;AAChD,MAAA,IAAIyS,MAAM,GAAGnV,IAAI,CAAC0C,CAAD,CAAJ,CAAQyS,MAArB,CAAA;;AACA,MAAA,IAAG,CAACuD,UAAU,CAACvY,cAAX,CAA0BgV,MAA1B,CAAJ,EAAuC;QACrCsD,UAAU,CAAC1a,IAAX,CAAgBoX,MAAhB,CAAA,CAAA;AACAuD,QAAAA,UAAU,CAACvD,MAAD,CAAV,GAAqB,IAArB,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;AACF,CAAA;;AAED,SAASwD,QAAT,CAAkBF,UAAlB,EAA8BC,UAA9B,EAA0C1L,IAA1C,EAAgD4L,KAAhD,EAAuDjD,GAAvD,EAA4D;AAC1D,EAAA,IAAIxY,MAAM,GAAGsb,UAAU,CAACtb,MAAxB,CAAA;;AACA,EAAA,KAAI,IAAIb,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,IAAA,IAAI0D,IAAI,GAAGgN,IAAI,CAAC1Q,CAAD,CAAJ,CAAQqB,KAAnB,CAAA;AACA,IAAA,IAAIwM,KAAK,GAAGnK,IAAI,CAAC,CAAD,CAAhB,CAAA;;AACA,IAAA,IAAG,CAACmK,KAAK,CAAChK,cAAN,CAAqBwV,GAArB,CAAJ,EAA+B;AAC7B,MAAA,SAAA;AACD,KAAA;;AACD,IAAA,KAAI,IAAIjT,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGvF,MAAM,GAAG,CAA5B,EAA+BuF,CAAC,EAAhC,EAAoC;MAClC,IAAG1C,IAAI,CAAC0C,CAAD,CAAJ,CAAQyS,MAAR,KAAmBsD,UAAU,CAAC/V,CAAD,CAAhC,EAAqC;AACnC,QAAA,IAAIqS,IAAI,GAAG/U,IAAI,CAAC0C,CAAC,GAAG,CAAL,CAAf;AAAA,YAAwBmS,IAAI,GAAG7U,IAAI,CAAC0C,CAAD,CAAnC,CAAA;AACA,QAAA,IAAIoS,OAAO,GAAG,CAAC2D,UAAU,CAAC/V,CAAD,CAAV,GAAgBqS,IAAI,CAACI,MAAtB,KAAiCN,IAAI,CAACM,MAAL,GAAcJ,IAAI,CAACI,MAApD,CAAd,CAAA;AACA,QAAA,IAAI0D,EAAE,GAAG9D,IAAI,CAACjX,MAAd,CAAA;QACA,IAAIiJ,CAAC,GAAG+N,OAAR,CAAA;;AACA,QAAA,IAAG+D,EAAH,EAAO;UACL9R,CAAC,GAAGjJ,MAAM,CAACD,SAAP,CAAiBgb,EAAjB,CAAA,CAAqB/D,OAArB,CAAJ,CAAA;AACD,SAAA;;AACD,QAAA,IAAIgE,GAAG,GAAG;UACR3D,MAAM,EAAEsD,UAAU,CAAC/V,CAAD,CAAA;SADpB,CAAA;;AAGA,QAAA,IAAGmW,EAAH,EAAO;AACL,UAAA,IAAInX,MAAM,GAAGoO,WAAW,CAAC,CACvB,CAAC,CAAD,EAAI,CAAJ,CADuB,EAEvB,CAAC+I,EAAE,CAAC,CAAD,CAAH,EAAQA,EAAE,CAAC,CAAD,CAAV,CAFuB,EAGvB,CAACA,EAAE,CAAC,CAAD,CAAH,EAAQA,EAAE,CAAC,CAAD,CAAV,CAHuB,EAIvB,CAAC,CAAD,EAAI,CAAJ,CAJuB,CAAD,EAKrB/D,OALqB,CAAxB,CAAA;AAMAC,UAAAA,IAAI,CAACjX,MAAL,GAAc,CACZ4D,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAeA,GAAAA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CADH,EAEZA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,GAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAFH,EAGZA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,GAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAHH,EAIZA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,GAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAJH,CAAd,CAAA;UAMAA,MAAM,GAAGoO,WAAW,CAAC,CACnB,CAAC,CAAD,EAAI,CAAJ,CADmB,EAEnB,CAAC+I,EAAE,CAAC,CAAD,CAAH,EAAQA,EAAE,CAAC,CAAD,CAAV,CAFmB,EAGnB,CAACA,EAAE,CAAC,CAAD,CAAH,EAAQA,EAAE,CAAC,CAAD,CAAV,CAHmB,EAInB,CAAC,CAAD,EAAI,CAAJ,CAJmB,CAAA,CAKnBrO,OALmB,EAAD,EAKP,IAAIsK,OALG,CAAX,CAKiBtK,OALjB,EAAT,CAAA;UAMA,IAAI0E,CAAC,GAAG,CAAIxN,GAAAA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAZ;cAA0ByN,CAAC,GAAG,CAAIzN,GAAAA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAlC,CAAA;AACAoX,UAAAA,GAAG,CAAChb,MAAJ,GAAa,CACX,CAAC4D,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAA,GAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAhB,IAAgCwN,CADrB,EAEX,CAACxN,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,IAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAhB,IAAgCyN,CAFrB,EAGX,CAACzN,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAeA,GAAAA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAhB,IAAgCwN,CAHrB,EAIX,CAACxN,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAeA,GAAAA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAhB,IAAgCyN,CAJrB,CAAb,CAAA;AAMD,SAAA;;AACD,QAAA,IAAI4J,EAAE,GAAGrW,CAAC,KAAK,CAAN,GAAWkW,KAAK,CAACjD,GAAD,CAAL,IAAc,EAAzB,GAAgCZ,IAAI,CAACY,GAAD,CAAJ,IAAa,EAAtD,CAAA;AACA,QAAA,IAAIqD,EAAE,GAAGnE,IAAI,CAACc,GAAD,CAAJ,IAAa,EAAtB,CAAA;;QACA,IAAGA,GAAG,KAAK,iBAAX,EAA8B;AAC5BoD,UAAAA,EAAE,GAAGA,EAAE,CAACE,KAAH,CAAS,GAAT,CAAL,CAAA;AACAF,UAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ7R,UAAU,CAAC6R,EAAE,CAAC,CAAD,CAAH,CAAV,IAAqB,CAA7B,CAAA;AACAA,UAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ7R,UAAU,CAAC6R,EAAE,CAAC,CAAD,CAAH,CAAV,IAAqB,CAA7B,CAAA;AACAA,UAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ7R,UAAU,CAAC6R,EAAE,CAAC,CAAD,CAAH,CAAV,IAAqB,CAA7B,CAAA;AACAC,UAAAA,EAAE,GAAGA,EAAE,CAACC,KAAH,CAAS,GAAT,CAAL,CAAA;AACAD,UAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ9R,UAAU,CAAC8R,EAAE,CAAC,CAAD,CAAH,CAAV,IAAqB,CAA7B,CAAA;AACAA,UAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ9R,UAAU,CAAC8R,EAAE,CAAC,CAAD,CAAH,CAAV,IAAqB,CAA7B,CAAA;AACAA,UAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ9R,UAAU,CAAC8R,EAAE,CAAC,CAAD,CAAH,CAAV,IAAqB,CAA7B,CAAA;AACA,UAAA,IAAIE,IAAI,GAAG,CACTF,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CADD,EAETC,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAFD,EAGTC,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAHD,CAAX,CAAA;AAKAD,UAAAA,GAAG,CAACnD,GAAD,CAAH,GAAYoD,EAAE,CAAC,CAAD,CAAF,GAAQG,IAAI,CAAC,CAAD,CAAJ,GAAUnS,CAAnB,GACP,GADO,IACAgS,EAAE,CAAC,CAAD,CAAF,GAAQG,IAAI,CAAC,CAAD,CAAJ,GAAUnS,CADlB,CAAA,GAEP,GAFO,IAEAgS,EAAE,CAAC,CAAD,CAAF,GAAQG,IAAI,CAAC,CAAD,CAAJ,GAAUnS,CAFlB,CAAX,CAAA;AAGD,SAjBD;AAAA,aAmBK,IAAG4O,GAAG,KAAK,YAAR,IAAwBA,GAAG,KAAK,YAAhC,IAAgDA,GAAG,KAAK,YAA3D,EAAyE;UAC5E,IAAIuD,KAAI,GAAG,CAACF,EAAE,IAAI,CAAP,KAAaD,EAAE,IAAI,CAAnB,CAAX,CAAA;;UACAD,GAAG,CAACnD,GAAD,CAAH,GAAW,CAACoD,EAAE,IAAI,CAAP,IAAYG,KAAI,GAAGnS,CAA9B,CAAA;UACA,IAAI1K,GAAG,GAAG,CAAC,YAAD,EAAe,YAAf,EAA6B,YAA7B,CAAV,CAAA;;UACA,KAAI,IAAIyK,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,CAAnB,EAAsBA,CAAC,EAAvB,EAA2B;AACzB,YAAA,IAAI9I,CAAC,GAAG3B,GAAG,CAACyK,CAAD,CAAX,CAAA;;AACA,YAAA,IAAG9I,CAAC,KAAK2X,GAAN,KAAcZ,IAAI,CAAC5U,cAAL,CAAoBnC,CAApB,CAAA,IAA0B6W,IAAI,CAAC1U,cAAL,CAAoBnC,CAApB,CAAxC,CAAH,EAAoE;AAClE,cAAA,IAAI+a,GAAE,GAAGrW,CAAC,KAAK,CAAN,GAAWkW,KAAK,CAAC5a,CAAD,CAAL,IAAY,CAAvB,GAA6B+W,IAAI,CAAC/W,CAAD,CAAJ,IAAW,CAAjD,CAAA;;cACA,IAAIkb,MAAI,GAAG,CAACrE,IAAI,CAAC7W,CAAD,CAAJ,IAAW,CAAZ,IAAiB+a,GAA5B,CAAA;;cACAD,GAAG,CAAC9a,CAAD,CAAH,GAAS+a,GAAE,GAAGG,MAAI,GAAGnS,CAArB,CAAA;AACD,aAAA;AACF,WAAA;AACF,SAZI,MAaA,IAAG4O,GAAG,KAAK,SAAR,IAAqBA,GAAG,KAAK,SAA7B,IAA0CA,GAAG,KAAK,SAArD,EAAgE;UACnE,IAAIuD,MAAI,GAAG,CAACF,EAAE,IAAI,CAAP,KAAcD,EAAE,IAAI,CAApB,CAAX,CAAA;;UACAD,GAAG,CAACnD,GAAD,CAAH,GAAW,CAACoD,EAAE,IAAI,CAAP,IAAYG,MAAI,GAAGnS,CAA9B,CAAA;AACD,SAAA;;AACD/G,QAAAA,IAAI,CAAC4G,MAAL,CAAYlE,CAAZ,EAAe,CAAf,EAAkBoW,GAAlB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;AACF,CAAA;;AAED,SAASK,sBAAT,CAAgCzC,IAAhC,EAAsC3M,KAAtC,EAA6C;AAC3C,EAAA,IAAIqP,IAAJ,EAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,IAAtB,EAA4BC,KAA5B,EAAmCC,KAAnC,EAA0CC,KAA1C,CAD2C;;AAG3CN,EAAAA,IAAI,GAAG,CAAC1C,IAAI,CAACiD,IAAL,CAAUf,KAAV,CAAgB5D,eAAhB,IAAmC,EAApC,EAAwCiE,KAAxC,CAA8C,GAA9C,CAAP,CAAA;EACAI,IAAI,GAAG3C,IAAI,CAACiD,IAAL,CAAUf,KAAV,CAAgBtD,UAAhB,IAA8B,CAArC,CAAA;EACAgE,IAAI,GAAG5C,IAAI,CAACiD,IAAL,CAAUf,KAAV,CAAgBrD,UAAhB,IAA8B,CAArC,CAAA;EACAgE,IAAI,GAAG7C,IAAI,CAACiD,IAAL,CAAUf,KAAV,CAAgBgB,UAAhB,IAA8B,CAArC,CAN2C;;AAQ3C,EAAA,IAAG7P,KAAH,EAAU;AACR,IAAA,IAAIiO,OAAO,GAAGtB,IAAI,CAACsB,OAAnB,CAAA;;AACA,IAAA,KAAI,IAAI1b,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmV,OAAO,CAAC7a,MAA7B,EAAqCb,CAAC,GAAGuG,GAAzC,EAA8CvG,CAAC,EAA/C,EAAmD;AACjD,MAAA,IAAI0D,IAAI,GAAGgY,OAAO,CAAC1b,CAAD,CAAP,CAAWqB,KAAX,CAAiBoM,KAAjB,CAAX,CADiD;;MAGjD,IAAG,CAAC/J,IAAJ,EAAU;AACR,QAAA,SAAA;AACD,OAAA;;AACD,MAAA,IAAGA,IAAI,CAACG,cAAL,CAAoB,iBAApB,CAAH,EAA2C;QACzCiZ,IAAI,GAAG,CAACpZ,IAAI,CAACgV,eAAL,IAAwB,EAAzB,EAA6BiE,KAA7B,CAAmC,GAAnC,CAAP,CAAA;OADF,MAGK,IAAGjZ,IAAI,CAACG,cAAL,CAAoB,YAApB,KACHH,IAAI,CAACG,cAAL,CAAoB,YAApB,CADG,IAEHH,IAAI,CAACG,cAAL,CAAoB,YAApB,CAFA,EAEmC;AACtC,QAAA,IAAGH,IAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;UACpCkZ,IAAI,GAAGrZ,IAAI,CAACsV,UAAZ,CAAA;AACD,SAAA;;AACD,QAAA,IAAGtV,IAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;UACpCmZ,IAAI,GAAGtZ,IAAI,CAACuV,UAAZ,CAAA;AACD,SAAA;;AACD,QAAA,IAAGvV,IAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;UACpCoZ,IAAI,GAAGvZ,IAAI,CAAC4Z,UAAZ,CAAA;AACD,SAAA;AACF,OAAA;AACF,KAAA;AACF,GAAA;;EACDJ,KAAK,GAAGtS,UAAU,CAACkS,IAAI,CAAC,CAAD,CAAL,CAAV,IAAuB,CAA/B,CAAA;EACAK,KAAK,GAAGvS,UAAU,CAACkS,IAAI,CAAC,CAAD,CAAL,CAAV,IAAuB,CAA/B,CAAA;EACAM,KAAK,GAAGxS,UAAU,CAACkS,IAAI,CAAC,CAAD,CAAL,CAAV,IAAuB,CAA/B,CAAA;AACA,EAAA,IAAIS,WAAW,GAAGvc,IAAI,CAACwc,KAAL,CAAWxc,IAAI,CAACiC,IAAL,CAAUjC,IAAI,CAACyc,GAAL,CAASV,IAAI,GAAGG,KAAhB,EAAuB,CAAvB,CAA4Blc,GAAAA,IAAI,CAACyc,GAAL,CAAST,IAAI,GAAGG,KAAhB,EAAuB,CAAvB,CAA5B,GAAwDnc,IAAI,CAACyc,GAAL,CAASR,IAAI,GAAGG,KAAhB,EAAuB,CAAvB,CAAlE,CAAX,CAAlB,CAAA;AACA,EAAA,IAAIM,KAAK,GAAG1c,IAAI,CAACwc,KAAL,CAAWpD,IAAI,CAAC7K,UAAhB,CAAA,GAA8BgO,WAA1C,CAtC2C;;EAwC3C,OAAO;AACLR,IAAAA,IAAI,EAAJA,IADK;AAELC,IAAAA,IAAI,EAAJA,IAFK;AAGLC,IAAAA,IAAI,EAAJA,IAHK;AAILC,IAAAA,KAAK,EAALA,KAJK;AAKLC,IAAAA,KAAK,EAALA,KALK;AAMLC,IAAAA,KAAK,EAALA,KANK;AAOLG,IAAAA,WAAW,EAAXA,WAPK;AAQLG,IAAAA,KAAK,EAALA,KAAAA;GARF,CAAA;AAUD,CAAA;;AAED,SAASC,qBAAT,CAA+BnL,CAA/B,EAAkCC,CAAlC,EAAqCkJ,KAArC,EAA4ClO,KAA5C,EAAmD0O,UAAnD,EAA+DjP,QAA/D,EAAyE6P,IAAzE,EAA+EC,IAA/E,EAAqFC,IAArF,EAA2FC,KAA3F,EAAkGC,KAAlG,EAAyGC,KAAzG,EAAgH;EAC9G,IAAId,KAAK,GAAGX,KAAK,CAAC0B,IAAN,CAAWf,KAAvB,CAD8G;;AAG9G,EAAA,IAAIsB,GAAG,GAAG,CAACtB,KAAK,CAAC5D,eAAN,IAAyB,EAA1B,EAA8BiE,KAA9B,CAAoC,GAApC,CAAV,CAAA;AACA,EAAA,IAAIkB,EAAE,GAAGvB,KAAK,CAACtD,UAAN,IAAoB,CAA7B;AAAA,MAAgC8E,EAAE,GAAGxB,KAAK,CAACrD,UAAN,IAAoB,CAAzD;AAAA,MAA4D8E,EAAE,GAAGzB,KAAK,CAACgB,UAAN,IAAoB,CAArF,CAAA;AACA,EAAA,IAAI5B,OAAO,GAAGC,KAAK,CAACD,OAApB,CAL8G;;AAO9G,EAAA,IAAGjO,KAAH,EAAU;AACR,IAAA,KAAI,IAAIzN,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmV,OAAO,CAAC7a,MAA7B,EAAqCb,CAAC,GAAGuG,GAAzC,EAA8CvG,CAAC,EAA/C,EAAmD;AACjD,MAAA,IAAI0D,IAAI,GAAGgY,OAAO,CAAC1b,CAAD,CAAP,CAAWqB,KAAX,CAAiBoM,KAAjB,CAAX,CADiD;;MAGjD,IAAG,CAAC/J,IAAJ,EAAU;AACR,QAAA,SAAA;AACD,OAAA;;AACD,MAAA,IAAGA,IAAI,CAACG,cAAL,CAAoB,iBAApB,CAAH,EAA2C;QACzC+Z,GAAG,GAAG,CAACla,IAAI,CAACgV,eAAL,IAAwB,EAAzB,EAA6BiE,KAA7B,CAAmC,GAAnC,CAAN,CAAA;OADF,MAGK,IAAGjZ,IAAI,CAACG,cAAL,CAAoB,YAApB,KACHH,IAAI,CAACG,cAAL,CAAoB,YAApB,CADG,IAEHH,IAAI,CAACG,cAAL,CAAoB,YAApB,CAFA,EAEmC;AACtC,QAAA,IAAGH,IAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;UACpCga,EAAE,GAAGna,IAAI,CAACsV,UAAV,CAAA;AACD,SAAA;;AACD,QAAA,IAAGtV,IAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;UACpCia,EAAE,GAAGpa,IAAI,CAACuV,UAAV,CAAA;AACD,SAAA;;AACD,QAAA,IAAGvV,IAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;UACpCka,EAAE,GAAGra,IAAI,CAAC4Z,UAAV,CAAA;AACD,SAAA;AACF,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAI1K,CAAC,GAAG,CAAC0J,KAAK,CAAC0B,IAAN,IAAc,CAAf,IAAoBpT,UAAU,CAACgT,GAAG,CAAC,CAAD,CAAJ,CAA9B,IAA0C,CAAlD,CAAA;AACA,EAAA,IAAI/K,CAAC,GAAG,CAACyJ,KAAK,CAAC2B,GAAN,IAAa,CAAd,IAAmBrT,UAAU,CAACgT,GAAG,CAAC,CAAD,CAAJ,CAA7B,IAAyC,CAAjD,CAAA;EACA,IAAIM,CAAC,GAAGtT,UAAU,CAACgT,GAAG,CAAC,CAAD,CAAJ,CAAV,IAAsB,CAA9B,CAAA;AACAhL,EAAAA,CAAC,IAAIiL,EAAL,CAAA;AACAhL,EAAAA,CAAC,IAAIiL,EAAL,CAAA;EACAI,CAAC,IAAIH,EAAL,CArC8G;AAuC9G;;AACA,EAAA,IAAI7c,CAAC,GAAGid,SAAO,CAAC3L,CAAD,EAAIC,CAAJ,EAAOsK,IAAP,EAAaC,IAAb,EAAmBC,IAAnB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuCC,KAAvC,EAA8C;AAAExK,IAAAA,CAAC,EAADA,CAAF;AAAKC,IAAAA,CAAC,EAADA,CAAL;AAAQqL,IAAAA,CAAC,EAADA,CAAAA;GAAtD,CAAf,CAxC8G;AA0C9G;;AACA,EAAA,IAAGzQ,KAAH,EAAU;AACR,IAAA,KAAI,IAAIzN,EAAC,GAAG,CAAR,EAAWuG,IAAG,GAAGmV,OAAO,CAAC7a,MAA7B,EAAqCb,EAAC,GAAGuG,IAAzC,EAA8CvG,EAAC,EAA/C,EAAmD;AACjD,MAAA,IAAI0D,KAAI,GAAGgY,OAAO,CAAC1b,EAAD,CAAP,CAAWqB,KAAX,CAAiBoM,KAAjB,CAAX,CADiD;;MAGjD,IAAG,CAAC/J,KAAJ,EAAU;AACR,QAAA,SAAA;AACD,OAAA;;AACD,MAAA,IAAGA,KAAI,CAACG,cAAL,CAAoB,YAApB,CAAA,IACEH,KAAI,CAACG,cAAL,CAAoB,YAApB,CADF,IAEEH,KAAI,CAACG,cAAL,CAAoB,YAApB,CAFL,EAEwC;AACtC,QAAA,IAAGH,KAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;AACpCH,UAAAA,KAAI,CAACsV,UAAL,IAAmB9X,CAAC,CAAC8X,UAArB,CAAA;AACD,SAAA;;AACD,QAAA,IAAGtV,KAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;AACpCH,UAAAA,KAAI,CAACuV,UAAL,IAAmB/X,CAAC,CAAC+X,UAArB,CAAA;AACD,SANqC;;;AAQtC,QAAA,IAAGvV,KAAI,CAACG,cAAL,CAAoB,YAApB,CAAH,EAAsC;AACpCH,UAAAA,KAAI,CAAC4Z,UAAL,GAAkBpc,CAAC,CAACoc,UAApB,CAAA;AACD,SAAA;OAZH,MAcK,IAAG5Z,KAAI,CAACG,cAAL,CAAoB,SAApB,CAAH,EAAmC;AACtCH,QAAAA,KAAI,CAAC6V,OAAL,IAAgBrY,CAAC,CAACqY,OAAlB,CAAA;OADG,MAGA,IAAG7V,KAAI,CAACG,cAAL,CAAoB,SAApB,CAAH,EAAmC;AACtCH,QAAAA,KAAI,CAAC+V,OAAL,IAAgBvY,CAAC,CAACuY,OAAlB,CAAA;AACD,OAAA;AACF,KAAA;AACF,GA5BD,MA6BK;AACH;AACA,IAAA,IAAI2E,IAAI,GAAG;AACTpF,MAAAA,UAAU,EAAEsD,KAAK,CAACtD,UAAN,IAAoB,CADvB;AAETC,MAAAA,UAAU,EAAEqD,KAAK,CAACrD,UAAN,IAAoB,CAFvB;AAGTqE,MAAAA,UAAU,EAAEhB,KAAK,CAACgB,UAAN,IAAoB,CAHvB;AAIT/D,MAAAA,OAAO,EAAE+C,KAAK,CAAC/C,OAAN,IAAiB,CAJjB;AAKTE,MAAAA,OAAO,EAAE6C,KAAK,CAAC7C,OAAN,IAAiB,CAAA;KAL5B,CAAA;AAOA6C,IAAAA,KAAK,CAAC/C,OAAN,GAAgB+C,KAAK,CAAC/C,OAAN,IAAiB,CAAjC,CAAA;AACA+C,IAAAA,KAAK,CAAC/C,OAAN,IAAiBrY,CAAC,CAACqY,OAAnB,CAAA;AACA+C,IAAAA,KAAK,CAAC7C,OAAN,GAAgB6C,KAAK,CAAC7C,OAAN,IAAiB,CAAjC,CAAA;AACA6C,IAAAA,KAAK,CAAC7C,OAAN,IAAiBvY,CAAC,CAACuY,OAAnB,CAAA;AACA6C,IAAAA,KAAK,CAACtD,UAAN,GAAmBsD,KAAK,CAACtD,UAAN,IAAoB,CAAvC,CAAA;AACAsD,IAAAA,KAAK,CAACtD,UAAN,IAAoB9X,CAAC,CAAC8X,UAAtB,CAAA;AACAsD,IAAAA,KAAK,CAACrD,UAAN,GAAmBqD,KAAK,CAACrD,UAAN,IAAoB,CAAvC,CAAA;AACAqD,IAAAA,KAAK,CAACrD,UAAN,IAAoB/X,CAAC,CAAC+X,UAAtB,CAAA;AACAqD,IAAAA,KAAK,CAACgB,UAAN,GAAmBpc,CAAC,CAACoc,UAArB,CAjBG;;IAmBH,IAAIe,MAAM,GAAG,EAAb,CAAA;;AACA1Q,IAAAA,KAAK,EACL,KAAI,IAAI3N,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGmV,OAAO,CAAC7a,MAA7B,EAAqCb,GAAC,GAAGuG,KAAzC,EAA8CvG,GAAC,EAA/C,EAAmD;AACjD,MAAA,IAAI0D,MAAI,GAAGgY,OAAO,CAAC1b,GAAD,CAAP,CAAWqB,KAAtB,CAAA;;AACA,MAAA,KAAI,IAAI+E,CAAC,GAAG,CAAR,EAAW6V,IAAI,GAAGvY,MAAI,CAAC7C,MAA3B,EAAmCuF,CAAC,GAAG6V,IAAvC,EAA6C7V,CAAC,EAA9C,EAAkD;AAChD,QAAA,IAAIyH,KAAK,GAAGnK,MAAI,CAAC0C,CAAD,CAAhB,CAAA;;AACA,QAAA,IAAGyH,KAAK,CAAChK,cAAN,CAAqB,YAArB,CAAH,EAAuC;UACrCwa,MAAM,CAACrF,UAAP,GAAoB,IAApB,CAAA;AACD,SAAA;;AACD,QAAA,IAAGnL,KAAK,CAAChK,cAAN,CAAqB,YAArB,CAAH,EAAuC;UACrCwa,MAAM,CAACpF,UAAP,GAAoB,IAApB,CAAA;AACD,SAAA;;AACD,QAAA,IAAGpL,KAAK,CAAChK,cAAN,CAAqB,YAArB,CAAH,EAAuC;UACrCwa,MAAM,CAACf,UAAP,GAAoB,IAApB,CAAA;AACD,SAAA;;AACD,QAAA,IAAGzP,KAAK,CAAChK,cAAN,CAAqB,SAArB,CAAH,EAAoC;UAClCwa,MAAM,CAAC9E,OAAP,GAAiB,IAAjB,CAAA;AACD,SAAA;;AACD,QAAA,IAAG1L,KAAK,CAAChK,cAAN,CAAqB,SAArB,CAAH,EAAoC;UAClCwa,MAAM,CAAC5E,OAAP,GAAiB,IAAjB,CAAA;AACD,SAAA;;AACD,QAAA,IAAG4E,MAAM,CAACrF,UAAP,IAAqBqF,MAAM,CAACpF,UAA5B,IAA0CoF,MAAM,CAACf,UAAjD,IAA+De,MAAM,CAAC9E,OAAtE,IAAiF8E,MAAM,CAAC5E,OAA3F,EAAoG;AAClG,UAAA,MAAM9L,KAAN,CAAA;AACD,SAAA;AACF,OAAA;AACF,KA5CE;AA8CH;AACA;;;AACA,IAAA,IAAI+C,IAAI,GAAG,CAAC,YAAD,EAAe,YAAf,EAA6B,YAA7B,EAA2C,SAA3C,EAAsD,SAAtD,CAAX,CAAA;;AACA,IAAA,KAAI,IAAI1Q,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGmK,IAAI,CAAC7P,MAA1B,EAAkCb,GAAC,GAAGuG,KAAtC,EAA2CvG,GAAC,EAA5C,EAAgD;AAC9C,MAAA,IAAI0B,CAAC,GAAGgP,IAAI,CAAC1Q,GAAD,CAAZ,CAAA;;AACA,MAAA,IAAG,CAACqe,MAAM,CAAC3c,CAAD,CAAV,EAAe;AACb,QAAA,IAAIgC,MAAI,GAAG;AACTrC,UAAAA,KAAK,EAAE,CAAC;AACNwX,YAAAA,MAAM,EAAE,CAAA;AADF,WAAD,CADE;AAITF,UAAAA,OAAO,EAAE;AACPzL,YAAAA,QAAQ,EAARA,QADO;AAEPtI,YAAAA,IAAI,EAAE,UAFC;AAGPgU,YAAAA,UAAU,EAAE,CAAA;AAHL,WAAA;SAJX,CAAA;;AAUA,QAAA,KAAI,IAAIxS,EAAC,GAAG,CAAR,EAAW6V,KAAI,GAAGE,UAAU,CAACtb,MAAjC,EAAyCuF,EAAC,GAAG6V,KAA7C,EAAmD7V,EAAC,EAApD,EAAwD;AACtD,UAAA,IAAIlF,EAAC,GAAG;YACN2X,MAAM,EAAEsD,UAAU,CAAC/V,EAAD,CAAA;WADpB,CAAA;UAGAlF,EAAC,CAACQ,CAAD,CAAD,GAAO0c,IAAI,CAAC1c,CAAD,CAAJ,IAAW,CAAlB,CAAA;;AACAgC,UAAAA,MAAI,CAACrC,KAAL,CAAWI,IAAX,CAAgBP,EAAhB,CAAA,CAAA;AACD,SAAA;;QACDwa,OAAO,CAACja,IAAR,CAAaiC,MAAb,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;AACF,CAAA;;AAED,SAASya,SAAT,CAAiB3L,CAAjB,EAAoBC,CAApB,EAAuBsK,IAAvB,EAA6BC,IAA7B,EAAmCC,IAAnC,EAAyCC,KAAzC,EAAgDC,KAAhD,EAAuDC,KAAvD,EAA8DhD,IAA9D,EAAoE;AAClE,EAAA,IAAIkE,EAAE,GAAG9L,CAAC,GAAG,GAAb,CAAA;AACA,EAAA,IAAI+L,EAAE,GAAG9L,CAAC,GAAG,GAAb,CAAA;AACA,EAAA,IAAIG,CAAC,GAAG4L,QAAQ,CAACF,EAAD,EAAKvB,IAAL,EAAWE,IAAX,EAAiBC,KAAjB,EAAwBE,KAAxB,EAA+BhD,IAA/B,CAAhB,CAAA;AACA,EAAA,IAAIvH,CAAC,GAAG4L,QAAQ,CAACF,EAAD,EAAKvB,IAAL,EAAWC,IAAX,EAAiBE,KAAjB,EAAwBC,KAAxB,EAA+BhD,IAA/B,CAAhB,CAAA;AACA,EAAA,IAAIpP,CAAC,GAAG+R,IAAI,GAAGG,KAAf;AAAA,MAAsBvb,CAAC,GAAGqb,IAAI,GAAGG,KAAjC;AAAA,MAAwC1U,CAAC,GAAGwU,IAAI,GAAGG,KAAnD;AAAA,MAA0DnX,CAAC,GAAG,CAAC+E,CAAD,GAAKkS,KAAL,GAAavb,CAAC,GAAGwb,KAAjB,GAAyB1U,CAAC,GAAG2U,KAA3F,CALkE;;EAOlE,IAAIE,UAAU,GAAG,CAAClD,IAAI,CAACxH,CAAL,GAAS5H,CAAT,GAAaoP,IAAI,CAACvH,CAAL,GAASlR,CAAtB,GAA0ByY,IAAI,CAAC8D,CAAL,GAASzV,CAAnC,GAAuCxC,CAAxC,IAA6CjF,IAAI,CAACiC,IAAL,CAAUjC,IAAI,CAACyc,GAAL,CAASzS,CAAT,EAAY,CAAZ,CAAiBhK,GAAAA,IAAI,CAACyc,GAAL,CAAS9b,CAAT,EAAY,CAAZ,CAAjB,GAAkCX,IAAI,CAACyc,GAAL,CAAShV,CAAT,EAAY,CAAZ,CAA5C,CAA9D,CAAA;EACA,OAAO;IACL8Q,OAAO,EAAE1G,CAAC,CAAC0G,OADN;AAELE,IAAAA,OAAO,EAAE,CAAC7G,CAAC,CAAC6G,OAFP;IAGLT,UAAU,EAAEpG,CAAC,CAACoG,UAHT;IAILC,UAAU,EAAEpG,CAAC,CAACoG,UAJT;AAKLqE,IAAAA,UAAU,EAAVA,UAAAA;GALF,CAAA;AAOD;;;AAGD,SAASkB,QAAT,CAAkBF,EAAlB,EAAsBvB,IAAtB,EAA4BE,IAA5B,EAAkCC,KAAlC,EAAyCE,KAAzC,EAAgDhD,IAAhD,EAAsD;AACpD;AACA,EAAA,IAAG2C,IAAI,KAAKG,KAAT,IAAkBoB,EAAE,KAAKvB,IAA5B,EAAkC;IAChC,OAAO;AACLtD,MAAAA,OAAO,EAAE,CADJ;AAELT,MAAAA,UAAU,EAAE,CAAA;KAFd,CAAA;AAID,GAAA;;EACD,IAAI0F,GAAG,GAAG,CAAC3B,IAAI,GAAGG,KAAR,KAAkBD,IAAI,GAAGG,KAAzB,CAAV,CAAA;AACA,EAAA,IAAIuB,KAAK,GAAG3d,IAAI,CAAC4d,IAAL,CAAUF,GAAV,CAAZ,CAAA;AACA,EAAA,IAAIG,GAAG,GAAG7d,IAAI,CAAC6d,GAAL,CAASF,KAAT,CAAV,CAAA;AACA,EAAA,IAAIG,GAAG,GAAG9d,IAAI,CAAC8d,GAAL,CAASH,KAAT,CAAV,CAAA;AACA,EAAA,IAAII,EAAE,GAAI3E,IAAI,CAAC8D,CAAL,GAASd,KAAnB,CAAA;AACA,EAAA,IAAI4B,EAAE,GAAGD,EAAE,GAAGF,GAAd,CAAA;AACA,EAAA,IAAII,EAAE,GAAGF,EAAE,GAAGL,GAAd,CAAA;EACA,IAAIQ,EAAE,GAAGD,EAAE,IAAI7E,IAAI,CAACxH,CAAL,GAASsK,KAAb,CAAX,CAAA;AACA,EAAA,IAAIiC,EAAE,GAAGL,GAAG,GAAGI,EAAf,CAAA;AACA,EAAA,IAAIE,EAAE,GAAGD,EAAE,GAAGH,EAAd,CAAA;EACA,IAAInB,EAAE,GAAGuB,EAAE,IAAIhF,IAAI,CAACxH,CAAL,GAAS0L,EAAb,CAAX,CAAA;EACA,OAAO;AACL7E,IAAAA,OAAO,EAAEpG,GAAG,CAACsL,KAAD,CADP;AAEL3F,IAAAA,UAAU,EAAE6E,EAAAA;GAFd,CAAA;AAID;;;AAGD,SAASY,QAAT,CAAkBF,EAAlB,EAAsBvB,IAAtB,EAA4BC,IAA5B,EAAkCE,KAAlC,EAAyCC,KAAzC,EAAgDhD,IAAhD,EAAsD;AACpD;AACA,EAAA,IAAG4C,IAAI,KAAKG,KAAT,IAAkBoB,EAAE,KAAKvB,IAA5B,EAAkC;IAChC,OAAO;AACLzD,MAAAA,OAAO,EAAE,CADJ;AAELN,MAAAA,UAAU,EAAE,CAAA;KAFd,CAAA;AAID,GAAA;;EACD,IAAIyF,GAAG,GAAG,CAAC1B,IAAI,GAAGG,KAAR,KAAkBF,IAAI,GAAGG,KAAzB,CAAV,CAAA;AACA,EAAA,IAAIuB,KAAK,GAAG3d,IAAI,CAAC4d,IAAL,CAAUF,GAAV,CAAZ,CAAA;AACA,EAAA,IAAIG,GAAG,GAAG7d,IAAI,CAAC6d,GAAL,CAASF,KAAT,CAAV,CAAA;AACA,EAAA,IAAIG,GAAG,GAAG9d,IAAI,CAAC8d,GAAL,CAASH,KAAT,CAAV,CAAA;AACA,EAAA,IAAII,EAAE,GAAI3E,IAAI,CAAC8D,CAAL,GAASd,KAAnB,CAAA;AACA,EAAA,IAAI4B,EAAE,GAAGD,EAAE,GAAGF,GAAd,CAAA;AACA,EAAA,IAAII,EAAE,GAAGF,EAAE,GAAGL,GAAd,CAAA;EACA,IAAIQ,EAAE,GAAGD,EAAE,IAAI7E,IAAI,CAACvH,CAAL,GAASsK,KAAb,CAAX,CAAA;AACA,EAAA,IAAIgC,EAAE,GAAGL,GAAG,GAAGI,EAAf,CAAA;AACA,EAAA,IAAIE,EAAE,GAAGD,EAAE,GAAGH,EAAd,CAAA;EACA,IAAIlB,EAAE,GAAGsB,EAAE,IAAIhF,IAAI,CAACvH,CAAL,GAAS0L,EAAb,CAAX,CAAA;EACA,OAAO;AACLhF,IAAAA,OAAO,EAAElG,GAAG,CAACsL,KAAD,CADP;AAEL1F,IAAAA,UAAU,EAAE6E,EAAAA;GAFd,CAAA;AAID,CAAA;;AAEc,eAAS1D,EAAAA,IAAT,EAAe5W,GAAf,EAAoB;AACjCqI,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,QAAjB,CAAA,CAAA;AACA,EAAA,OAAO3J,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBiB,WAAvB,CAAA;EACA,OAAO/Z,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBgD,iBAAvB,CAHiC;;EAKjC,IAAI9M,CAAC,GAAGhP,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB1W,KAAxB;MAA+B6M,CAAC,GAAGjP,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5Q,MAAnD,CAAA;AACA,EAAA,IAAIgC,QAAQ,GAAGlK,GAAG,CAACkK,QAAnB,CANiC;;EAQjC,IAAIR,QAAQ,GAAGqS,SAAS,CAAC9D,WAAV,CAAsBrB,IAAtB,CAAf,CARiC;;AAUjC,EAAA,IAAI+B,UAAU,GAAG,CAAC,CAAD,CAAjB;AAAA,MAAsBC,UAAU,GAAG;IAAE,CAAG,EAAA,IAAA;GAAxC,CAAA;EACAF,SAAS,CAACC,UAAD,EAAaC,UAAb,EAAyBhC,IAAI,CAACsB,OAA9B,EAAuC,iBAAvC,CAAT,CAAA;EACAQ,SAAS,CAACC,UAAD,EAAaC,UAAb,EAAyBhC,IAAI,CAACsB,OAA9B,EAAuC,YAAvC,CAAT,CAAA;EACAQ,SAAS,CAACC,UAAD,EAAaC,UAAb,EAAyBhC,IAAI,CAACsB,OAA9B,EAAuC,YAAvC,CAAT,CAAA;EACAQ,SAAS,CAACC,UAAD,EAAaC,UAAb,EAAyBhC,IAAI,CAACsB,OAA9B,EAAuC,YAAvC,CAAT,CAAA;EACA,IAAI8D,GAAG,GAAGC,IAAI,CAACC,SAAL,CAAetF,IAAf,CAAV,CAfiC;;AAiBjC,EAAA,KAAI,IAAIpa,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmH,QAAQ,CAAC7M,MAA9B,EAAsCb,CAAC,GAAGuG,GAA1C,EAA+CvG,CAAC,EAAhD,EAAoD;AAClD,IAAA,IAAI2b,KAAK,GAAGjO,QAAQ,CAAC1N,CAAD,CAApB,CAAA;;IACA,IAAG2b,KAAK,CAACjN,GAAT,EAAc;MACZ,IAAIiR,KAAK,GAAGF,IAAI,CAACxN,KAAL,CAAWuN,GAAX,CAAZ,CADY;;MAGZ,IAAII,MAAM,GAAG,EAAb;UAAiBC,MAAM,GAAG,EAA1B,CAAA;;AACA,MAAA,KAAI,IAAIzZ,CAAC,GAAG,CAAR,EAAW6V,IAAI,GAAGE,UAAU,CAACtb,MAAjC,EAAyCuF,CAAC,GAAG6V,IAA7C,EAAmD7V,CAAC,EAApD,EAAwD;AACtD,QAAA,IAAI1E,CAAC,GAAGya,UAAU,CAAC/V,CAAD,CAAlB,CAAA;QACAwZ,MAAM,CAACne,IAAP,CAAYmJ,UAAU,CAAClJ,CAAD,CAAtB,EAFsD;;AAGtDme,QAAAA,MAAM,CAACne,CAAD,CAAN,GAAY,IAAZ,CAAA;AACD,OAAA;;MACDwa,SAAS,CAAC0D,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgC,iBAAhC,CAAT,CAAA;MACAQ,SAAS,CAAC0D,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgC,YAAhC,CAAT,CAAA;MACAQ,SAAS,CAAC0D,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgC,YAAhC,CAAT,CAAA;MACAQ,SAAS,CAAC0D,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgC,YAAhC,CAAT,CAAA;MACAQ,SAAS,CAAC0D,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgC,SAAhC,CAAT,CAAA;MACAQ,SAAS,CAAC0D,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgC,SAAhC,CAAT,CAAA;AACAkE,MAAAA,MAAM,CAACjW,IAAP,CAAY,UAASqB,CAAT,EAAYrJ,CAAZ,EAAe;QACzB,OAAOqJ,CAAC,GAAGrJ,CAAX,CAAA;OADF,CAAA,CAAA;AAGAkK,MAAAA,CAAC,CAACC,QAAF,CAAWmD,IAAX,CAAgBjP,CAAhB,CAAA,CAAA;AACA6L,MAAAA,CAAC,CAACC,QAAF,CAAWiG,GAAX,CAAe6N,MAAf,EAnBY;;AAqBZvD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBF,KAAK,CAACjE,OAAvB,EAAgCiE,KAAK,CAACtC,IAAN,CAAWf,KAA3C,EAAkD,iBAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBF,KAAK,CAACjE,OAAvB,EAAgCiE,KAAK,CAACtC,IAAN,CAAWf,KAA3C,EAAkD,YAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBF,KAAK,CAACjE,OAAvB,EAAgCiE,KAAK,CAACtC,IAAN,CAAWf,KAA3C,EAAkD,YAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBF,KAAK,CAACjE,OAAvB,EAAgCiE,KAAK,CAACtC,IAAN,CAAWf,KAA3C,EAAkD,YAAlD,CAAR,CAxBY;;AA0BZD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgCC,KAAK,CAAC0B,IAAN,CAAWf,KAA3C,EAAkD,iBAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgCC,KAAK,CAAC0B,IAAN,CAAWf,KAA3C,EAAkD,YAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgCC,KAAK,CAAC0B,IAAN,CAAWf,KAA3C,EAAkD,YAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgCC,KAAK,CAAC0B,IAAN,CAAWf,KAA3C,EAAkD,YAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgCC,KAAK,CAAC0B,IAAN,CAAWf,KAA3C,EAAkD,SAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgCC,KAAK,CAAC0B,IAAN,CAAWf,KAA3C,EAAkD,SAAlD,CAAR,CAAA;AACAD,MAAAA,QAAQ,CAACuD,MAAD,EAASC,MAAT,EAAiBlE,KAAK,CAACD,OAAvB,EAAgCC,KAAK,CAAC0B,IAAN,CAAWf,KAA3C,EAAkD,SAAlD,CAAR,CAhCY;;AAkCZ,MAAA,IAAIwD,IAAI,GAAG;AACTC,QAAAA,OAAO,EAAE,KADA;AAETV,QAAAA,KAAK,EAAE;AACL/C,UAAAA,KAAK,EAAE;AACLrX,YAAAA,QAAQ,EAAE,UADL;AAEL+Y,YAAAA,IAAI,EAAE,CAFD;AAGLC,YAAAA,GAAG,EAAE,CAHA;AAILrY,YAAAA,KAAK,EAAE,MAJF;AAKL8F,YAAAA,MAAM,EAAE,MAAA;AALH,WAAA;AADF,SAAA;OAFT,CAAA;MAYA,IAAIsU,WAAW,GAAG,EAAlB,CAAA;;AACA,MAAA,KAAI,IAAI5Z,GAAC,GAAG,CAAR,EAAW6V,KAAI,GAAG2D,MAAM,CAAC/e,MAA7B,EAAqCuF,GAAC,GAAG6V,KAAzC,EAA+C7V,GAAC,EAAhD,EAAoD;AAClD,QAAA,IAAA,qBAAA,GAAoEyW,sBAAsB,CAAC8C,KAAD,EAAQvZ,GAAR,CAA1F;YAAM2W,IAAN,yBAAMA,IAAN;YAAYC,IAAZ,yBAAYA,IAAZ;YAAkBC,IAAlB,yBAAkBA,IAAlB;YAAwBC,KAAxB,yBAAwBA,KAAxB;YAA+BC,KAA/B,yBAA+BA,KAA/B;YAAsCC,KAAtC,yBAAsCA,KAAtC;YAA6CG,WAA7C,yBAA6CA,WAA7C;AAAA,YAA0DG,KAA1D,GAAA,qBAAA,CAA0DA,KAA1D,CADkD;;;AAGlD,QAAA,IAAGtX,GAAH,EAAM;UACJ4Z,WAAW,CAACve,IAAZ,CAAiB;AACfoX,YAAAA,MAAM,EAAE+G,MAAM,CAACxZ,GAAD,CADC;AAEfmX,YAAAA,WAAW,EAAXA,WAFe;AAGfG,YAAAA,KAAK,EAALA,KAAAA;WAHF,CAAA,CAAA;AAKD,SAND;aAQK;UACHsC,WAAW,CAACve,IAAZ,CAAiB;AACfoX,YAAAA,MAAM,EAAE,CAAA;WADV,CAAA,CAAA;AAGAiH,UAAAA,IAAI,CAACT,KAAL,CAAW/C,KAAX,CAAiBiB,WAAjB,GAA+BA,WAA/B,CAAA;;UACA,IAAGG,KAAK,KAAK,CAAb,EAAgB;AACdoC,YAAAA,IAAI,CAACT,KAAL,CAAW/C,KAAX,CAAiBoB,KAAjB,GAAyBA,KAAzB,CAAA;AACD,WAAA;AACF,SAAA;;QACDC,qBAAqB,CAACnL,CAAD,EAAIC,CAAJ,EAAOkJ,KAAP,EAAcvV,GAAd,EAAiBwZ,MAAjB,EAAyB1S,QAAzB,EAAmC6P,IAAnC,EAAyCC,IAAzC,EAA+CC,IAA/C,EAAqDC,KAArD,EAA4DC,KAA5D,EAAmEC,KAAnE,CAArB,CAAA;AACD,OAAA;;AACD,MAAA,IAAG4C,WAAW,CAACnf,MAAZ,GAAqB,CAAxB,EAA2B;QACzBif,IAAI,CAACpE,OAAL,GAAe,CACb;AACEra,UAAAA,KAAK,EAAE2e,WADT;AAEErH,UAAAA,OAAO,EAAE;AACPzL,YAAAA,QAAQ,EAARA,QADO;AAEPtI,YAAAA,IAAI,EAAE,UAFC;AAGPgU,YAAAA,UAAU,EAAE,CAAA;AAHL,WAAA;AAFX,SADa,CAAf,CAAA;AAUD,OAhFW;;;AAkFZ,MAAA,IAAI0D,KAAK,GAAGX,KAAK,CAAC0B,IAAN,CAAWf,KAAvB,CAAA;AACA,MAAA,IAAIZ,OAAO,GAAGC,KAAK,CAACD,OAApB,CAAA;;MACA,IAAGY,KAAK,CAACgB,UAAT,EAAqB;QACnBwC,IAAI,CAACT,KAAL,CAAW/C,KAAX,CAAiB2D,MAAjB,GAA0B3D,KAAK,CAACgB,UAAhC,CAAA;AACD,OAAA;;MACD,IAAI2C,MAAM,GAAG,EAAb,CAAA;;AACA,MAAA,KAAI,IAAI7Z,GAAC,GAAG,CAAR,EAAW6V,KAAI,GAAG2D,MAAM,CAAC/e,MAA7B,EAAqCuF,GAAC,GAAG6V,KAAzC,EAA+C7V,GAAC,EAAhD,EAAoD;AAClD,QAAA,IAAGA,GAAH,EAAM;AACJ,UAAA,IAAI4V,GAAG,GAAP,KAAA,CAAA,CAAA;;AACA,UAAA,KAAI,IAAIta,EAAC,GAAG,CAAR,EAAWwe,IAAI,GAAGxE,OAAO,CAAC7a,MAA9B,EAAsCa,EAAC,GAAGwe,IAA1C,EAAgDxe,EAAC,EAAjD,EAAqD;AACnD,YAAA,IAAIgC,IAAI,GAAGgY,OAAO,CAACha,EAAD,CAAlB,CAAA;AACA,YAAA,IAAImM,KAAK,GAAGnK,IAAI,CAACrC,KAAL,CAAW+E,GAAX,CAAZ,CAAA;;YACA,IAAG,CAACyH,KAAJ,EAAW;AACT,cAAA,SAAA;AACD,aAAA;;AACD,YAAA,IAAGA,KAAK,CAAChK,cAAN,CAAqB,YAArB,CAAH,EAAuC;cACrCoc,MAAM,CAACxe,IAAP,CAAY;AACVoX,gBAAAA,MAAM,EAAE+G,MAAM,CAACxZ,GAAD,CADJ;gBAEV6Z,MAAM,EAAEpS,KAAK,CAACyP,UAAAA;eAFhB,CAAA,CAAA;AAIAtB,cAAAA,GAAG,GAAG,IAAN,CAAA;AACA,cAAA,MAAA;AACD,aAAA;AACF,WAAA;;UACD,IAAG,CAACA,GAAJ,EAAS;YACPiE,MAAM,CAACxe,IAAP,CAAY;cACVoX,MAAM,EAAE+G,MAAM,CAACxZ,GAAD,CAAA;aADhB,CAAA,CAAA;AAGD,WAAA;AACF,SAtBD,MAuBK;UACH6Z,MAAM,CAACxe,IAAP,CAAY;AACVoX,YAAAA,MAAM,EAAE,CAAA;WADV,CAAA,CAAA;AAGD,SAAA;AACF,OAAA;;MACD,IAAGiH,IAAI,CAACpE,OAAR,EAAiB;AACfoE,QAAAA,IAAI,CAACpE,OAAL,CAAaja,IAAb,CAAkB;AAChBJ,UAAAA,KAAK,EAAE4e,MADS;AAEhBtH,UAAAA,OAAO,EAAE;AACPzL,YAAAA,QAAQ,EAARA,QADO;AAEP0L,YAAAA,UAAU,EAAE,CAFL;AAGPhU,YAAAA,IAAI,EAAE,UAAA;AAHC,WAAA;SAFX,CAAA,CAAA;AAQD,OAAA;;AACDkb,MAAAA,IAAI,CAACpS,QAAL,GAAgB,CAACiO,KAAD,CAAhB,CAAA;AACAjO,MAAAA,QAAQ,CAACpD,MAAT,CAAgBtK,CAAhB,EAAmB,CAAnB,EAAsB8f,IAAtB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;AACF;;AC9fD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASK,QAAT,CAAkB/F,IAAlB,EAAwBpN,OAAxB,EAAiChL,KAAjC,EAAwCkL,QAAxC,EAAkDD,gBAAlD,EAAoE4L,MAApE,EAA4E;AAC1E,EAAA,IAAM1U,IAAN,GAAsDiW,IAAtD,CAAMjW,IAAN;AAAA,MAAYyB,KAAZ,GAAsDwU,IAAtD,CAAYxU,KAAZ;AAAA,MAAmB8F,MAAnB,GAAsD0O,IAAtD,CAAmB1O,MAAnB;AAAA,MAA2B4B,QAA3B,GAAsD8M,IAAtD,CAA2B9M,QAA3B;AAAA,MAAqCC,OAArC,GAAsD6M,IAAtD,CAAqC7M,OAArC;AAAA,MAA8CmB,GAA9C,GAAsD0L,IAAtD,CAA8C1L,GAA9C,CAAA;AACA,EAAA,IAAIlL,GAAG,GAAG;AACRW,IAAAA,IAAI,EAAJA,IADQ;AAER4b,IAAAA,OAAO,EAAE,KAFD;AAGRV,IAAAA,KAAK,EAAE;AACL/C,MAAAA,KAAK,EAAE;AACLrX,QAAAA,QAAQ,EAAE,UADL;AAELW,QAAAA,KAAK,EAALA,KAFK;QAGL8F,MAAM,EAANA,MAHK;;AAAA,OAAA;KAJD;AAWRgC,IAAAA,QAAQ,EAAE,EAXF;AAYRgO,IAAAA,OAAO,EAAE,EAZD;AAaRpO,IAAAA,QAAQ,EAARA,QAbQ;AAcRC,IAAAA,OAAO,EAAPA,OAAAA;GAdF,CAAA;;AAgBA,EAAA,IAAGmB,GAAH,EAAQ;IACNlL,GAAG,CAACkL,GAAJ,GAAU,IAAV,CAAA;AACD,GAAA;;AACD0R,EAAAA,YAAY,CAAC5c,GAAD,EAAM4W,IAAN,EAAYpY,KAAZ,EAAmBkL,QAAnB,EAA6BD,gBAA7B,EAA+C4L,MAA/C,EAAuD,IAAvD,EAA6D,KAA7D,CAAZ,CArB0E;;EAuB1E,IAAGrV,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBzY,cAAhB,CAA+B,SAA/B,CAAH,EAA8C;AAC5C,IAAA,OAAOL,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB3W,OAAvB,CAAA;AACA,IAAA,IAAI+V,OAAO,GAAGlY,GAAG,CAACkY,OAAlB,CAAA;;AACA/N,IAAAA,KAAK,EACL,KAAI,IAAI3N,CAAC,GAAG0b,OAAO,CAAC7a,MAAR,GAAiB,CAA7B,EAAgCb,CAAC,IAAI,CAArC,EAAwCA,CAAC,EAAzC,EAA6C;AAC3C,MAAA,IAAI0D,IAAI,GAAGgY,OAAO,CAAC1b,CAAD,CAAP,CAAWqB,KAAtB,CAAA;;AACA,MAAA,KAAI,IAAI+E,CAAC,GAAG,CAAR,EAAWG,GAAG,GAAG7C,IAAI,CAAC7C,MAA1B,EAAkCuF,CAAC,GAAGG,GAAtC,EAA2CH,CAAC,EAA5C,EAAgD;QAC9C,IAAG1C,IAAI,CAAC0C,CAAD,CAAJ,CAAQvC,cAAR,CAAuB,SAAvB,CAAH,EAAsC;AACpC6X,UAAAA,OAAO,CAACpR,MAAR,CAAetK,CAAf,EAAkB,CAAlB,CAAA,CAAA;AACA,UAAA,MAAM2N,KAAN,CAAA;AACD,SAAA;AACF,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,OAAOnK,GAAP,CAAA;AACD,CAAA;;AAED,SAAS4c,YAAT,CAAsB5c,GAAtB,EAA2B4W,IAA3B,EAAiCpY,KAAjC,EAAwCkL,QAAxC,EAAkDD,gBAAlD,EAAoE4L,MAApE,EAA4EwH,QAA5E,EAAsFC,MAAtF,EAA8F;AAC5F,EAAA,IAAM1a,KAAN,GAAmCwU,IAAnC,CAAMxU,KAAN;AAAA,MAAa8F,MAAb,GAAmC0O,IAAnC,CAAa1O,MAAb;AAAA,MAAqBrH,SAArB,GAAmC+V,IAAnC,CAAqB/V,SAArB,CAD4F;;AAG5F,EAAA,IAAMkc,WAAN,GAA+Glc,SAA/G,CAAMkc,WAAN;AAAA,MAAmB5a,OAAnB,GAA+GtB,SAA/G,CAAmBsB,OAAnB;AAAA,MAA4BV,QAA5B,GAA+GZ,SAA/G,CAA4BY,QAA5B;AAAA,MAAsCub,UAAtC,GAA+Gnc,SAA/G,CAAsCmc,UAAtC;AAAA,MAAkDC,UAAlD,GAA+Gpc,SAA/G,CAAkDoc,UAAlD;AAAA,MAA8DC,UAA9D,GAA+Grc,SAA/G,CAA8Dqc,UAA9D;AAAA,MAA0EnH,OAA1E,GAA+GlV,SAA/G,CAA0EkV,OAA1E;AAAA,MAAmFE,OAAnF,GAA+GpV,SAA/G,CAAmFoV,OAAnF;AAAA,MAA4FE,OAA5F,GAA+GtV,SAA/G,CAA4FsV,OAA5F;AAAA,MAAqG+D,KAArG,GAA+GrZ,SAA/G,CAAqGqZ,KAArG,CAAA;AACA,EAAA,IAAIiD,MAAM,GAAG3e,KAAK,GAAG6W,MAAR,GAAiB5L,gBAA9B,CAAA;EACA,IAAIoQ,IAAI,GAAGgD,QAAQ,GAAG7c,GAAG,CAAC6b,KAAP,GAAe7b,GAAG,CAAC6Z,IAAtC,CAAA;;AACA,EAAA,IAAG,CAACiD,MAAD,IAAWzJ,KAAK,CAACiB,OAAN,CAAcyI,WAAd,CAAX,IAAyCA,WAAW,CAAC1f,MAAxD,EAAgE;IAC9D,IAAI4S,CAAC,GAAGiF,eAAe,CAAC6H,WAAD,EAAcI,MAAd,EAAsBzT,QAAtB,CAAvB,CAAA;AACA,IAAA,IAAIoL,KAAK,GAAG7E,CAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;IACA,IAAIiF,CAAC,GAAGgS,KAAK,CAACI,eAAN,CAAsBiE,KAAtB,CAA4B,GAA5B,CAAR,CAAA;IACArW,CAAC,CAAC,CAAD,CAAD,GAAOsE,UAAU,CAACtE,CAAC,CAAC,CAAD,CAAF,CAAjB,CAAA;IACAA,CAAC,CAAC,CAAD,CAAD,GAAOsE,UAAU,CAACtE,CAAC,CAAC,CAAD,CAAF,CAAjB,CAAA;;AACA,IAAA,IAAGA,CAAC,CAAC,CAAD,CAAD,KAASV,KAAK,GAAG,GAAjB,IAAwBU,CAAC,CAAC,CAAD,CAAD,KAASoF,MAAM,GAAG,GAA7C,EAAkD;AAChD2R,MAAAA,IAAI,CAACf,KAAL,CAAW5D,eAAX,GAA6BJ,KAAK,CAACI,eAAnC,CAAA;AACD,KAAA;;AACD,IAAA,IAAGjF,CAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,CAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CADG;QAEXrX,MAAM,EAAE8W,KAAK,CAAC9W,MAAAA;AAFH,OAAb,CADqB;;AAMrB,MAAA,KAAI,IAAIxB,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGkN,CAAC,CAACpS,KAAF,CAAQR,MAA7B,EAAqCb,CAAC,GAAGuG,GAAzC,EAA8CvG,CAAC,EAA/C,EAAmD;AACjD,QAAA,IAAI0D,IAAI,GAAG+P,CAAC,CAACpS,KAAF,CAAQrB,CAAR,CAAX,CAAA;QACA,IAAI4d,GAAG,GAAGla,IAAI,CAACgV,eAAL,CAAqBiE,KAArB,CAA2B,GAA3B,CAAV,CAAA;QACAiB,GAAG,CAAC,CAAD,CAAH,GAAShT,UAAU,CAACgT,GAAG,CAAC,CAAD,CAAJ,CAAnB,CAAA;QACAA,GAAG,CAAC,CAAD,CAAH,GAAShT,UAAU,CAACgT,GAAG,CAAC,CAAD,CAAJ,CAAnB,CAAA;AACAla,QAAAA,IAAI,CAACsa,IAAL,GAAY,CAACJ,GAAG,CAAC,CAAD,CAAhB,CAAA;AACAla,QAAAA,IAAI,CAACua,GAAL,GAAW,CAACL,GAAG,CAAC,CAAD,CAAf,CAAA;AACD,OAAA;;AACDpa,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,CAAjB,CAAA,CAAA;AACD,KAxB6D;;;AA0B9D,IAAA,IAAGnN,CAAC,CAAC,CAAD,CAAJ,EAAS;MACP+W,IAAI,CAACf,KAAL,CAAW0B,IAAX,GAAkB,CAAC1X,CAAC,CAAC,CAAD,CAApB,CAAA;AACD,KAAA;;AACD,IAAA,IAAGA,CAAC,CAAC,CAAD,CAAJ,EAAS;MACP+W,IAAI,CAACf,KAAL,CAAW2B,GAAX,GAAiB,CAAC3X,CAAC,CAAC,CAAD,CAAnB,CAAA;AACD,KAAA;AACF,GAAA;;EACD,IAAGuQ,KAAK,CAACiB,OAAN,CAAcnS,OAAd,CAA0BA,IAAAA,OAAO,CAAC9E,MAArC,EAA6C;IAC3C,IAAI4S,EAAC,GAAGqF,gBAAgB,CAACnT,OAAD,EAAUgb,MAAV,EAAkBzT,QAAlB,CAAxB,CAAA;;AACA,IAAA,IAAIoL,MAAK,GAAG7E,EAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;AACA,IAAA,IAAGiX,MAAK,CAAC3S,OAAN,KAAkB,CAArB,EAAwB;AACtB0X,MAAAA,IAAI,CAACf,KAAL,CAAW3W,OAAX,GAAqB2S,MAAK,CAAC3S,OAA3B,CAAA;AACD,KAAA;;AACD,IAAA,IAAG8N,EAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,EAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CADG;QAEXrX,MAAM,EAAE8W,MAAK,CAAC9W,MAAAA;OAFhB,CAAA;AAIAgC,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,EAAjB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;EACD,IAAIoG,IAAJ,CArD4F;;EAuD5F,IAAI+G,aAAa,GAAG,IAApB,CAAA;;EACA,IAAG/J,KAAK,CAACiB,OAAN,CAAc0I,UAAd,CAA6BA,IAAAA,UAAU,CAAC3f,MAAX,GAAoB,CAApD,EAAuD;AACrD+f,IAAAA,aAAa,GAAG,KAAhB,CAAA;AACD,GAAA;;EACD,IAAG/J,KAAK,CAACiB,OAAN,CAAc2I,UAAd,CAA6BA,IAAAA,UAAU,CAAC5f,MAAX,GAAoB,CAApD,EAAuD;AACrD+f,IAAAA,aAAa,GAAG,KAAhB,CAAA;AACD,GAAA;;AACD,EAAA,IAAG/J,KAAK,CAACiB,OAAN,CAAc4I,UAAd,CAA6BA,IAAAA,UAAU,CAAC7f,MAAX,GAAoB,CAAjD,IAAsD2C,GAAG,CAACkL,GAA7D,EAAkE;AAChEkS,IAAAA,aAAa,GAAG,KAAhB,CAAA;AACD,GAAA;;EACD,IAAG/J,KAAK,CAACiB,OAAN,CAAc7S,QAAd,CAA2BA,IAAAA,QAAQ,CAACpE,MAApC,IAA8C+f,aAAjD,EAAgE;AAC9D;IACA,IAAG3b,QAAQ,CAACpE,MAAT,GAAkB,CAAlB,IAAuB2C,GAAG,CAACkL,GAA9B,EAAmC;AACjC,MAAA,IAAImS,IAAJ,CAAA;;AACA,MAAA,KAAI,IAAI7gB,EAAC,GAAG,CAAR,EAAWuG,IAAG,GAAGtB,QAAQ,CAACpE,MAA9B,EAAsCb,EAAC,GAAGuG,IAA1C,EAA+CvG,EAAC,EAAhD,EAAoD;AAClD,QAAA,IAAI0D,KAAI,GAAGuB,QAAQ,CAACjF,EAAD,CAAnB,CAAA;;QACA,IAAG0D,KAAI,CAACrC,KAAL,CAAW,CAAX,CAAiBqC,IAAAA,KAAI,CAAC3B,OAAzB,EAAkC;AAChC8e,UAAAA,IAAI,GAAG,IAAP,CAAA;AACA,UAAA,MAAA;AACD,SAAA;AACF,OAAA;;AACD,MAAA,IAAIC,EAAJ,CAAA;;AACA,MAAA,IAAGD,IAAH,EAAS;AACPC,QAAAA,EAAE,GAAG,EAAL,CAAA;;AACA,QAAA,KAAI,IAAI9gB,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGtB,QAAQ,CAACpE,MAA9B,EAAsCb,GAAC,GAAGuG,KAA1C,EAA+CvG,GAAC,EAAhD,EAAoD;AAClD,UAAA,IAAI0D,MAAI,GAAGuB,QAAQ,CAACjF,GAAD,CAAnB,CAAA;AACA,UAAA,IAAIkB,CAAC,GAAG;YACNC,IAAI,EAAEuC,MAAI,CAACvC,IADL;AAENE,YAAAA,KAAK,EAAEqC,MAAI,CAACrC,KAAL,CAAW,CAAX,CAAA;WAFT,CAAA;;UAIA,IAAGqC,MAAI,CAAC3B,OAAR,EAAiB;AACfb,YAAAA,CAAC,CAACM,MAAF,GAAWkC,MAAI,CAAC3B,OAAhB,CAAA;AACD,WAAA;;UACD+e,EAAE,CAACrf,IAAH,CAAQP,CAAR,CAAA,CAAA;UACA,OAAOwC,MAAI,CAAC3B,OAAZ,CAAA;AACD,SAAA;;QACD,IAAI0R,GAAC,GAAG2F,YAAY,CAAC0H,EAAD,EAAKH,MAAL,EAAazT,QAAb,EAAuB,YAAvB,CAApB,CAAA;;AACA,QAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;QACA,IAAGiX,OAAK,CAACgF,UAAT,EAAqB;AACnBD,UAAAA,IAAI,CAACf,KAAL,CAAWgB,UAAX,GAAwBhF,OAAK,CAACgF,UAA9B,CAAA;AACD,SAAA;;AACD,QAAA,IAAG7J,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,UAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,YAAAA,MAAM,EAAE,CADG;YAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;WAFhB,CAAA;AAIAgC,UAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACD,SAAA;;AACDoG,QAAAA,IAAI,GAAG,IAAP,CAAA;AACD,OAAA;AACF,KAtCD,MAuCK;MACH,IAAG5U,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,CAAkBzB,IAAAA,GAAG,CAACkL,GAAzB,EAA8B;AAC5B2O,QAAAA,IAAI,CAACf,KAAL,CAAWgB,UAAX,GAAwB,CAACrY,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,CAAzB,CAAA;AACA4U,QAAAA,IAAI,GAAG,IAAP,CAAA;AACD,OAAA;AACF,KAAA;;IACD,IAAIpG,GAAC,GAAGsF,iBAAiB,CAAC9T,QAAD,EAAW0b,MAAX,EAAmBzT,QAAnB,CAAzB,CAAA;;AACA,IAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,IAAGiX,OAAK,CAACa,aAAT,EAAwB;MACtBkE,IAAI,CAACf,KAAL,CAAWtD,UAAX,GAAwBV,OAAK,CAACa,aAAN,CAAoB,CAApB,CAAxB,CAAA;MACAkE,IAAI,CAACf,KAAL,CAAWrD,UAAX,GAAwBX,OAAK,CAACa,aAAN,CAAoB,CAApB,CAAxB,CAAA;AACD,KAHD,MAIK;MACH,IAAGb,OAAK,CAACU,UAAT,EAAqB;AACnBqE,QAAAA,IAAI,CAACf,KAAL,CAAWtD,UAAX,GAAwBV,OAAK,CAACU,UAA9B,CAAA;AACD,OAAA;;MACD,IAAGV,OAAK,CAACW,UAAT,EAAqB;AACnBoE,QAAAA,IAAI,CAACf,KAAL,CAAWrD,UAAX,GAAwBX,OAAK,CAACW,UAA9B,CAAA;AACD,OAAA;AACF,KAAA;;AACD,IAAA,IAAGxF,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB,MAAA,IAAG,CAACyX,OAAK,CAACa,aAAV,EAAyB;AACvB1F,QAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,UAAAA,MAAM,EAAE,CADG;UAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;SAFhB,CAAA;AAID,OAAA;;AACDgC,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACD,KAAA;AACF,GAtED,MAuEK;IACH,IAAGoD,KAAK,CAACiB,OAAN,CAAc0I,UAAd,CAA6BA,IAAAA,UAAU,CAAC3f,MAA3C,EAAmD;MACjD,IAAI4S,GAAC,GAAG2F,YAAY,CAACoH,UAAD,EAAaG,MAAb,EAAqBzT,QAArB,EAA+B,YAA/B,CAApB,CAAA;;AACA,MAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;MACA,IAAGiX,OAAK,CAACU,UAAT,EAAqB;AACnBqE,QAAAA,IAAI,CAACf,KAAL,CAAWtD,UAAX,GAAwBV,OAAK,CAACU,UAA9B,CAAA;AACD,OAAA;;AACD,MAAA,IAAGvF,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,QAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,UAAAA,MAAM,EAAE,CADG;UAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;SAFhB,CAAA;AAIAgC,QAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;;IACD,IAAGoD,KAAK,CAACiB,OAAN,CAAc2I,UAAd,CAA6BA,IAAAA,UAAU,CAAC5f,MAA3C,EAAmD;MACjD,IAAI4S,GAAC,GAAG2F,YAAY,CAACqH,UAAD,EAAaE,MAAb,EAAqBzT,QAArB,EAA+B,YAA/B,CAApB,CAAA;;AACA,MAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;MACA,IAAGiX,OAAK,CAACW,UAAT,EAAqB;AACnBoE,QAAAA,IAAI,CAACf,KAAL,CAAWrD,UAAX,GAAwBX,OAAK,CAACW,UAA9B,CAAA;AACD,OAAA;;AACD,MAAA,IAAGxF,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,QAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,UAAAA,MAAM,EAAE,CADG;UAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;SAFhB,CAAA;AAIAgC,QAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;;AACD,IAAA,IAAGoD,KAAK,CAACiB,OAAN,CAAc4I,UAAd,CAAA,IAA6BA,UAAU,CAAC7f,MAAxC,IAAkD2C,GAAG,CAACkL,GAAzD,EAA8D;MAC5D,IAAI+E,GAAC,GAAG2F,YAAY,CAACsH,UAAD,EAAaC,MAAb,EAAqBzT,QAArB,EAA+B,YAA/B,CAApB,CAAA;;AACA,MAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;MACA,IAAGiX,OAAK,CAACgF,UAAT,EAAqB;AACnBD,QAAAA,IAAI,CAACf,KAAL,CAAWgB,UAAX,GAAwBhF,OAAK,CAACgF,UAA9B,CAAA;AACAzD,QAAAA,IAAI,GAAG,IAAP,CAAA;AACD,OAAA;;AACD,MAAA,IAAGpG,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,QAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,UAAAA,MAAM,EAAE,CADG;UAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;SAFhB,CAAA;AAIAgC,QAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACAoG,QAAAA,IAAI,GAAG,IAAP,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAGhD,KAAK,CAACiB,OAAN,CAAcyB,OAAd,CAAA,IAA0BA,OAAO,CAAC1Y,MAAlC,IAA4C2C,GAAG,CAACkL,GAAnD,EAAwD;IACtD,IAAI+E,GAAC,GAAG6F,gBAAgB,CAACC,OAAD,EAAUoH,MAAV,EAAkBzT,QAAlB,CAAxB,CAAA;;AACA,IAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,IAAGiX,OAAK,CAACiB,OAAT,EAAkB;AAChB8D,MAAAA,IAAI,CAACf,KAAL,CAAW/C,OAAX,GAAqBjB,OAAK,CAACiB,OAA3B,CAAA;AACAM,MAAAA,IAAI,GAAG,IAAP,CAAA;AACD,KAAA;;AACD,IAAA,IAAGpG,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CADG;QAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;OAFhB,CAAA;AAIAgC,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACAoG,MAAAA,IAAI,GAAG,IAAP,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,IAAGhD,KAAK,CAACiB,OAAN,CAAc2B,OAAd,CAAA,IAA0BA,OAAO,CAAC5Y,MAAlC,IAA4C2C,GAAG,CAACkL,GAAnD,EAAwD;IACtD,IAAI+E,GAAC,GAAG+F,gBAAgB,CAACC,OAAD,EAAUkH,MAAV,EAAkBzT,QAAlB,CAAxB,CAAA;;AACA,IAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,IAAGiX,OAAK,CAACmB,OAAT,EAAkB;AAChB4D,MAAAA,IAAI,CAACf,KAAL,CAAW7C,OAAX,GAAqBnB,OAAK,CAACmB,OAA3B,CAAA;AACAI,MAAAA,IAAI,GAAG,IAAP,CAAA;AACD,KAAA;;AACD,IAAA,IAAGpG,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CADG;QAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;OAFhB,CAAA;AAIAgC,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACAoG,MAAAA,IAAI,GAAG,IAAP,CAAA;AACD,KAAA;AACF,GAAA;;EACD,IAAGhD,KAAK,CAACiB,OAAN,CAAc6B,OAAd,CAA0BA,IAAAA,OAAO,CAAC9Y,MAArC,EAA6C;IAC3C,IAAI4S,GAAC,GAAGiG,gBAAgB,CAACC,OAAD,EAAUgH,MAAV,EAAkBzT,QAAlB,CAAxB,CAAA;;AACA,IAAA,IAAIoL,OAAK,GAAG7E,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,IAAGiX,OAAK,CAACqB,OAAT,EAAkB;AAChB0D,MAAAA,IAAI,CAACf,KAAL,CAAW3C,OAAX,GAAqBrB,OAAK,CAACqB,OAA3B,CAAA;AACD,KAAA;;AACD,IAAA,IAAGlG,GAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,GAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CADG;QAEXrX,MAAM,EAAE8W,OAAK,CAAC9W,MAAAA;OAFhB,CAAA;AAIAgC,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,GAAjB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,IAAGoG,IAAI,IAAI,CAACrW,GAAG,CAACoL,QAAhB,EAA0B;AACxByO,IAAAA,IAAI,CAACf,KAAL,CAAWiB,WAAX,GAAyB,IAAzB,CADwB;AAGxB;AACD,GAAA;;EACD,IAAG1G,KAAK,CAACiB,OAAN,CAAc4F,KAAd,CAAwBA,IAAAA,KAAK,CAAC7c,MAAjC,EAAyC;AACvC,IAAA,IAAI4S,IAAC,GAAGmG,cAAc,CAAC8D,KAAD,EAAQiD,MAAR,EAAgBzT,QAAhB,EAA0B1J,GAAG,CAACkL,GAA9B,CAAtB,CAAA;;AACA,IAAA,IAAI4J,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;AACA,IAAA,IAAGiX,QAAK,CAACwB,MAAN,KAAiB,CAAjB,IAAsBxB,QAAK,CAACwB,MAAN,KAAiB1W,SAAvC,IAAoDkV,QAAK,CAACwB,MAAN,KAAiB,IAAxE,EAA8E;AAC5EuD,MAAAA,IAAI,CAACf,KAAL,CAAWxC,MAAX,GAAoBxB,QAAK,CAACwB,MAA1B,CAAA;AACD,KAAA;;AACD,IAAA,IAAGxB,QAAK,CAACyB,MAAN,KAAiB,CAAjB,IAAsBzB,QAAK,CAACyB,MAAN,KAAiB3W,SAAvC,IAAoDkV,QAAK,CAACyB,MAAN,KAAiB,IAAxE,EAA8E;AAC5EsD,MAAAA,IAAI,CAACf,KAAL,CAAWvC,MAAX,GAAoBzB,QAAK,CAACyB,MAA1B,CAAA;AACD,KAAA;;AACD,IAAA,IAAGzB,QAAK,CAAC0B,MAAN,KAAiB,CAAjB,IAAsB1B,QAAK,CAAC0B,MAAN,KAAiB5W,SAAvC,IAAoDkV,QAAK,CAAC0B,MAAN,KAAiB,IAAxE,EAA8E;AAC5EqD,MAAAA,IAAI,CAACf,KAAL,CAAWtC,MAAX,GAAoB1B,QAAK,CAAC0B,MAA1B,CAAA;AACD,KAAA;;AACD,IAAA,IAAGvG,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CADG;QAEXrX,MAAM,EAAE8W,QAAK,CAAC9W,MAAAA;OAFhB,CAAA;AAIAgC,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,IAAjB,CAAA,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOjQ,GAAP,CAAA;AACD,CAAA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASsJ,SAAT,CAAmBsN,IAAnB,EAAyBpN,OAAzB,EAAkC+T,MAAlC,EAA0C/e,KAA1C,EAAiDkL,QAAjD,EAA2DD,gBAA3D,EAA6E4L,MAA7E,EAAqFmI,UAArF,EAAiG;AAC/F;AACA,EAAA,IAAG,CAAC5G,IAAI,CAACxW,OAAT,EAAkB;AAChB,IAAA,OAAO,IAAP,CAAA;AACD,GAAA;;AACD,EAAA,IAAMO,IAAN,GAAmGiW,IAAnG,CAAMjW,IAAN;AAAA,MAAY0L,OAAZ,GAAmGuK,IAAnG,CAAYvK,OAAZ;AAAA,MAAqBzB,SAArB,GAAmGgM,IAAnG,CAAqBhM,SAArB;AAAA,MAAgCC,OAAhC,GAAmG+L,IAAnG,CAAgC/L,OAAhC;AAAA,MAAyCC,QAAzC,GAAmG8L,IAAnG,CAAyC9L,QAAzC;AAAA,MAAmDC,YAAnD,GAAmG6L,IAAnG,CAAmD7L,YAAnD;AAAA,MAAiEG,GAAjE,GAAmG0L,IAAnG,CAAiE1L,GAAjE;AAAA,MAAsEE,QAAtE,GAAmGwL,IAAnG,CAAsExL,QAAtE;AAAA,MAAgFX,MAAhF,GAAmGmM,IAAnG,CAAgFnM,MAAhF;AAAA,MAAwFF,MAAxF,GAAmGqM,IAAnG,CAAwFrM,MAAxF,CAAA;;EACA,IAAG,CAACa,QAAD,KAAciB,OAAO,KAAKzM,SAAZ,IAAyByM,OAAO,KAAK,IAAnD,CAAH,EAA6D;AAC3D,IAAA,OAAO,IAAP,CAAA;AACD,GAAA;;EACDxB,OAAO,IAAIwK,MAAM,GAAG5L,gBAApB,CAAA;AACAqB,EAAAA,QAAQ,IAAIuK,MAAM,GAAG5L,gBAArB,CAV+F;;EAY/F,IAAGoB,OAAO,IAAIrM,KAAK,GAAGkL,QAAnB,IAA+BoB,QAAQ,IAAItM,KAA9C,EAAqD;AACnD,IAAA,OAAO,IAAP,CAAA;AACD,GAAA;;AACD,EAAA,IAAIwB,GAAG,GAAG;AACRW,IAAAA,IAAI,EAAJA,IAAAA;GADF,CAAA;;AAGA,EAAA,IAAGyK,QAAH,EAAa;IACXpL,GAAG,CAACuc,OAAJ,GAAc,KAAd,CAAA;IACAvc,GAAG,CAACoL,QAAJ,GAAeA,QAAf,CAAA;AACApL,IAAAA,GAAG,CAAC+L,UAAJ,GAAiB6K,IAAI,CAAC7K,UAAtB,CAAA;AACA/L,IAAAA,GAAG,CAACgM,kBAAJ,GAAyB4K,IAAI,CAAC5K,kBAA9B,CAAA;AACAhM,IAAAA,GAAG,CAACiM,mBAAJ,GAA0B2K,IAAI,CAAC3K,mBAA/B,CAAA;AACAjM,IAAAA,GAAG,CAACkM,cAAJ,GAAqB0K,IAAI,CAAC1K,cAA1B,CAAA;AACAlM,IAAAA,GAAG,CAACmM,eAAJ,GAAsByK,IAAI,CAACzK,eAA3B,CAAA;IACAnM,GAAG,CAAC6b,KAAJ,GAAY;AACV/C,MAAAA,KAAK,EAAE;AACL2E,QAAAA,OAAO,EAAE,MAAA;AADJ,OAAA;KADT,CAAA;AAKD,GAbD,MAcK;AACH,IAAA,IAAG,CAACF,MAAM,CAAClR,OAAD,CAAV,EAAqB;AACnBoC,MAAAA,KAAK,CAACjF,OAAD,EAAU6C,OAAV,EAAmBkR,MAAnB,EAA2B/e,KAA3B,EAAkCkL,QAAlC,EAA4CD,gBAA5C,EAA8D4L,MAAM,GAAGzK,SAAvE,CAAL,CAAA;AACD,KAAA;;IACD5K,GAAG,CAAC0d,SAAJ,GAAgBrR,OAAhB,CAAA;AACD,GAAA;;AACD,EAAA,IAAGnB,GAAH,EAAQ;IACNlL,GAAG,CAACkL,GAAJ,GAAU,IAAV,CAAA;AACD,GAAA;;EACDlL,GAAG,CAAC6Z,IAAJ,GAAW;AACTf,IAAAA,KAAK,EAAE,EAAA;AADE,GAAX,CAzC+F;;AA6C/F,EAAA,IAAGrO,MAAH,EAAW;AACT,IAAA,IAAGF,MAAH,EAAW;AACTvK,MAAAA,GAAG,CAAC6Z,IAAJ,CAAS8D,IAAT,GAAgB,IAAhB,CAAA;AACD,KAFD,MAGK;AACH3d,MAAAA,GAAG,CAAC6Z,IAAJ,CAAShO,IAAT,GAAgB,IAAhB,CAAA;AACD,KAAA;AACF,GApD8F;;;EAsD/F,IAAG,CAACT,QAAJ,EAAc;AACZ,IAAA,QAAOL,YAAP;MACE,KAAK6S,YAAY,CAACC,QAAlB;AACE7d,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,UAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACG,MAAlB;AACE/d,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,QAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACI,OAAlB;AACEhe,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,SAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACK,MAAlB;AACEje,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,QAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACM,WAAlB;AACEle,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,aAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACO,UAAlB;AACEne,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,YAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACQ,UAAlB;AACEpe,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,YAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACS,UAAlB;AACEre,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,YAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACU,UAAlB;AACEte,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,YAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACW,SAAlB;AACEve,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,WAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACY,GAAlB;AACExe,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,KAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACa,UAAlB;AACEze,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,YAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACc,KAAlB;AACE1e,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,OAA9B,CAAA;AACA,QAAA,MAAA;;MACF,KAAKF,YAAY,CAACe,UAAlB;AACE3e,QAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAegF,YAAf,GAA8B,YAA9B,CAAA;AACA,QAAA,MAAA;AA1CJ,KAAA;AA4CD,GAAA;;AACD9d,EAAAA,GAAG,CAACkY,OAAJ,GAAc,EAAd,CApG+F;;EAsG/F,IAAGrN,OAAO,GAAGrM,KAAV,IAAmBsM,QAAQ,GAAGtM,KAAK,GAAGkL,QAAzC,EAAmD;AACjD,IAAA,IAAI5G,CAAC,GAAG;AACNjF,MAAAA,KAAK,EAAE,EADD;AAENsX,MAAAA,OAAO,EAAE;AACPzL,QAAAA,QAAQ,EAARA,QADO;AAEPtI,QAAAA,IAAI,EAAE,UAFC;AAGPgU,QAAAA,UAAU,EAAE,CAAA;AAHL,OAAA;AAFH,KAAR,CADiD;;IAUjD,IAAGvK,OAAO,GAAGrM,KAAb,EAAoB;AAClBwB,MAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe8F,UAAf,GAA4B,QAA5B,CAAA;AACA5e,MAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe+F,aAAf,GAA+B,MAA/B,CAAA;AACA/b,MAAAA,CAAC,CAACjF,KAAF,CAAQI,IAAR,CAAa;AACXoX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA,CAAA;AAGAvS,MAAAA,CAAC,CAACjF,KAAF,CAAQI,IAAR,CAAa;AACXoX,QAAAA,MAAM,EAAE,CAACxK,OAAO,GAAGrM,KAAX,IAAoBkL,QADjB;AAEXkV,QAAAA,UAAU,EAAE,SAFD;AAGXC,QAAAA,aAAa,EAAE,MAAA;OAHjB,CAAA,CAAA;AAKD,KAXD,MAYK;AACH/b,MAAAA,CAAC,CAACjF,KAAF,CAAQI,IAAR,CAAa;AACXoX,QAAAA,MAAM,EAAE,CADG;AAEXuJ,QAAAA,UAAU,EAAE,SAFD;AAGXC,QAAAA,aAAa,EAAE,MAAA;OAHjB,CAAA,CAAA;AAKD,KA5BgD;;;AA8BjD,IAAA,IAAG/T,QAAQ,GAAGtM,KAAK,GAAGkL,QAAtB,EAAgC;AAC9B;AACA5G,MAAAA,CAAC,CAACjF,KAAF,CAAQI,IAAR,CAAa;AACXoX,QAAAA,MAAM,EAAE,CAACvK,QAAQ,GAAGtM,KAAZ,IAAqBkL,QADlB;AAEXkV,QAAAA,UAAU,EAAE,QAFD;AAGXC,QAAAA,aAAa,EAAE,MAAA;AAHJ,OAAb,EAF8B;;MAQ9B,IAAGhU,OAAO,IAAIrM,KAAd,EAAqB;AACnBsE,QAAAA,CAAC,CAACjF,KAAF,CAAQI,IAAR,CAAa;AACXoX,UAAAA,MAAM,EAAE,CADG;AAEXuJ,UAAAA,UAAU,EAAE,QAFD;AAGXC,UAAAA,aAAa,EAAE,MAAA;SAHjB,CAAA,CAAA;AAKD,OAAA;AACF,KAfD,MAgBK;AACH/b,MAAAA,CAAC,CAACjF,KAAF,CAAQI,IAAR,CAAa;AACXoX,QAAAA,MAAM,EAAE,CADG;AAEXuJ,QAAAA,UAAU,EAAE,SAFD;AAGXC,QAAAA,aAAa,EAAE,MAAA;OAHjB,CAAA,CAAA;AAKD,KAAA;;AACD7e,IAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiB6E,CAAjB,CAAA,CAAA;AACD,GAAA;;AACD8Z,EAAAA,YAAY,CAAC5c,GAAD,EAAM4W,IAAN,EAAYpY,KAAZ,EAAmBkL,QAAnB,EAA6BD,gBAA7B,EAA+C4L,MAA/C,EAAuD,KAAvD,EAA8D,KAA9D,CAAZ,CA7J+F;;AA+J/F,EAAA,IAAIyJ,GAAG,GAAGvB,MAAM,CAACvd,GAAG,CAAC0d,SAAL,CAAhB,CAAA;;AACA,EAAA,IAAGoB,GAAG,IAAIA,GAAG,CAACvC,OAAJ,KAAgB,MAA1B,EAAkC;AAChCvc,IAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe0B,IAAf,GAAsBxa,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe0B,IAAf,IAAuB,CAA7C,CAAA;AACAxa,IAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe0B,IAAf,IAAuBsE,GAAG,CAACjD,KAAJ,CAAU/C,KAAV,CAAgB0B,IAAhB,IAAwB,CAA/C,CAAA;AACAxa,IAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe2B,GAAf,GAAqBza,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe2B,GAAf,IAAsB,CAA3C,CAAA;AACAza,IAAAA,GAAG,CAAC6Z,IAAJ,CAASf,KAAT,CAAe2B,GAAf,IAAsBqE,GAAG,CAACjD,KAAJ,CAAU/C,KAAV,CAAgB2B,GAAhB,IAAuB,CAA7C,CAAA;AACD,GArK8F;;;AAuK/F,EAAA,IAAG7D,IAAI,CAACvW,cAAL,CAAoB,SAApB,CAAH,EAAmC;AACjC,IAAA,IAAI0J,OAAO,GAAG6M,IAAI,CAAC7M,OAAnB,CAAA;;AACA,IAAA,IAAGyT,UAAU,CAACnd,cAAX,CAA0B0J,OAA1B,CAAH,EAAuC;AACrC,MAAA,IAAIgV,GAAG,GAAG1W,CAAC,CAACC,QAAF,CAAW2T,IAAX,CAAgBC,SAAhB,CAA0BsB,UAAU,CAACzT,OAAD,CAApC,CAAV,CAAA;MACAgV,GAAG,GAAG1W,CAAC,CAACC,QAAF,CAAW2T,IAAX,CAAgBxN,KAAhB,CAAsBsQ,GAAtB,CAAN,CAAA;MACA,IAAIC,MAAM,GAAGD,GAAb,CAAA;MACA,OAAOC,MAAM,CAAClV,QAAd,CAAA;MACA,OAAOkV,MAAM,CAACjV,OAAd,CAAA;;AACA,MAAA,OAAMiV,MAAM,CAAC9U,QAAP,CAAgB7M,MAAtB,EAA8B;AAC5B2hB,QAAAA,MAAM,GAAGA,MAAM,CAAC9U,QAAP,CAAgB,CAAhB,CAAT,CAAA;QACA,OAAO8U,MAAM,CAAClV,QAAd,CAAA;QACA,OAAOkV,MAAM,CAACjV,OAAd,CAAA;AACD,OAAA;;AACDiV,MAAAA,MAAM,CAAC9U,QAAP,CAAgBjM,IAAhB,CAAqB+B,GAArB,CAAA,CAAA;AACAA,MAAAA,GAAG,GAAG+e,GAAN,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAO/e,GAAP,CAAA;AACD,CAAA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASyO,KAAT,CAAejF,OAAf,EAAwB6C,OAAxB,EAAiCkR,MAAjC,EAAyC/e,KAAzC,EAAgDkL,QAAhD,EAA0DD,gBAA1D,EAA4E4L,MAA5E,EAAoF;AAClF,EAAA,IAAIuB,IAAI,GAAGpN,OAAO,CAAC6C,OAAD,CAAlB,CAAA;AACA,EAAA,IAAM/K,IAAN,GAA+DsV,IAA/D,CAAMtV,IAAN;AAAA,MAAYX,IAAZ,GAA+DiW,IAA/D,CAAYjW,IAAZ;AAAA,MAAkB8L,GAAlB,GAA+DmK,IAA/D,CAAkBnK,GAAlB;AAAA,MAAuBrK,KAAvB,GAA+DwU,IAA/D,CAAuBxU,KAAvB;AAAA,MAA8B8F,MAA9B,GAA+D0O,IAA/D,CAA8B1O,MAA9B;AAAA,MAAsCgC,QAAtC,GAA+D0M,IAA/D,CAAsC1M,QAAtC;AAAA,MAAgDwB,IAAhD,GAA+DkL,IAA/D,CAAgDlL,IAAhD;AAAA,MAAsDI,IAAtD,GAA+D8K,IAA/D,CAAsD9K,IAAtD,CAAA;AACA,EAAA,IAAI9L,GAAG,GAAG;IACRoM,EAAE,EAAE,CAAC,CADG;AACA;AACRzL,IAAAA,IAAI,EAAJA,IAFQ;AAGR4b,IAAAA,OAAO,EAAEjb,IAHD;AAIRua,IAAAA,KAAK,EAAE;AACL/C,MAAAA,KAAK,EAAE;QACLrX,QAAQ,EAAE,UADL;AAGL;AACA;;AAJK,OAAA;AADF,KAAA;GAJT,CAAA;;AAaA,EAAA,IAAGW,KAAH,EAAU;AACRpC,IAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB1W,KAAhB,GAAwBA,KAAxB,CAAA;AACD,GAAA;;AACD,EAAA,IAAG8F,MAAH,EAAW;AACTlI,IAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5Q,MAAhB,GAAyBA,MAAzB,CAAA;AACD,GAAA;;EACD,IAAG5G,IAAI,KAAK,KAAT,IAAkB,CAACoK,IAAnB,IAA2B,CAACI,IAA/B,EAAqC;AACnC9L,IAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBmG,QAAhB,GAA2B,QAA3B,CAAA;AACD,GAxBiF;;;AA0BlF,EAAA,IAAGvT,IAAH,EAAS;AACPwT,IAAAA,SAAS,CAAClf,GAAD,EAAM4W,IAAN,EAAYpY,KAAZ,EAAmBkL,QAAnB,EAA6BD,gBAA7B,EAA+C4L,MAA/C,CAAT,CAAA;GADF,MAGK,IAAGvJ,IAAH,EAAS;AACZ,IAAA,IAAIlL,OAAO,GAAGgW,IAAI,CAAChW,OAAnB,CAAA;;IACA,IAAGA,OAAO,CAACgN,SAAX,EAAsB;AACpB5N,MAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5W,KAAhB,GAAwB,CACtBuV,QAAQ,CAAC7W,OAAO,CAACgN,SAAR,CAAkB,CAAlB,CAAuB,GAAA,GAAxB,CADc,EAEtB6J,QAAQ,CAAC7W,OAAO,CAACgN,SAAR,CAAkB,CAAlB,CAAuB,GAAA,GAAxB,CAFc,EAGtB6J,QAAQ,CAAC7W,OAAO,CAACgN,SAAR,CAAkB,CAAlB,CAAuB,GAAA,GAAxB,CAHc,CAAxB,CAAA;AAKD,KAND,MAOK;AACH5N,MAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5W,KAAhB,GAAwB,aAAxB,CAAA;AACD,KAAA;;AACD,IAAA,IAAGtB,OAAO,CAACO,MAAR,IAAkBP,OAAO,CAACqN,WAA7B,EAA0C;AACxCjO,MAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBqG,eAAhB,GAAkC,CAChC1H,QAAQ,CAAC7W,OAAO,CAACO,MAAR,CAAe,CAAf,CAAoB,GAAA,GAArB,CADwB,EAEhCsW,QAAQ,CAAC7W,OAAO,CAACO,MAAR,CAAe,CAAf,CAAoB,GAAA,GAArB,CAFwB,EAGhCsW,QAAQ,CAAC7W,OAAO,CAACO,MAAR,CAAe,CAAf,CAAoB,GAAA,GAArB,CAHwB,CAAlC,CAAA;MAKAnB,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBsG,eAAhB,GAAkCxe,OAAO,CAACqN,WAA1C,CAAA;;MACA,IAAGrN,OAAO,CAACiN,UAAX,EAAuB;AACrB7N,QAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBuG,cAAhB,GAAiC,MAAjC,CAAA;AACD,OAAA;AACF,KAAA;;IACDrf,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBxL,UAAhB,GAA6B1M,OAAO,CAAC0M,UAArC,CAAA;IACAtN,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBtL,QAAhB,GAA2B5M,OAAO,CAAC4M,QAAnC,CAxBY;AA0BZ;;AACAxN,IAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBwG,UAAhB,GAA6B,GAA7B,CAAA;IACAtf,GAAG,CAACkK,QAAJ,GAAe,CAACtJ,OAAO,CAACkL,IAAT,CAAf,CA5BY;;AA8BZ,IAAA,IAAI4B,YAAY,GAAG9M,OAAO,CAAC8M,YAA3B,CAAA;IACA,IAAI8M,IAAI,GAAG,CAAX;QAAc+E,KAAK,GAAG,CAAtB,CAAA;;AACA,IAAA,KAAI,IAAI/iB,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAG2K,YAAY,CAACrQ,MAAlC,EAA0Cb,CAAC,GAAGuG,GAA9C,EAAmDvG,CAAC,IAAI,CAAxD,EAA2D;MACzDge,IAAI,GAAGhd,IAAI,CAACsC,GAAL,CAAS0a,IAAT,EAAe9M,YAAY,CAAClR,CAAD,CAA3B,CAAP,CAAA;AACA+iB,MAAAA,KAAK,GAAG/hB,IAAI,CAACqC,GAAL,CAAS0f,KAAT,EAAgB7R,YAAY,CAAClR,CAAC,GAAG,CAAL,CAA5B,CAAR,CAAA;AACD,KAAA;;IACD,IAAGoE,OAAO,CAACa,QAAX,EAAqB;AACnBzB,MAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB0B,IAAhB,GAAuB5Z,OAAO,CAACa,QAAR,CAAiB,CAAjB,CAAvB,CAAA;AACAzB,MAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB2B,GAAhB,GAAsB7Z,OAAO,CAACa,QAAR,CAAiB,CAAjB,CAAtB,CAAA;AACD,KAHD,MAIK;AACH,MAAA,IAAG+Y,IAAH,EAAS;AACPxa,QAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB0B,IAAhB,GAAuBA,IAAvB,CAAA;QACAxa,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB1W,KAAhB,GAAwBmd,KAAK,GAAG/E,IAAhC,CAAA;AACAxa,QAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB0G,SAAhB,GAA4B,QAA5B,CAAA;AACD,OAAA;;AACDxf,MAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB2B,GAAhB,GAAsB,CAAC7Z,OAAO,CAAC4M,QAAT,GAAoBE,YAAY,CAAC,CAAD,CAAtD,CAAA;AACD,KAAA;AACF,GAhDI;AAAA,OAkDA,IAAGpM,IAAI,KAAK,KAAZ,EAAmB;AACtBtB,IAAAA,GAAG,CAAC6b,KAAJ,CAAUpP,GAAV,GAAgBA,GAAhB,CAAA;GADG,MAGA,IAAG4G,KAAK,CAACiB,OAAN,CAAcpK,QAAd,CAAH,EAA4B;IAC/BlK,GAAG,CAACkK,QAAJ,GAAe,EAAf,CAAA;AACAuV,IAAAA,aAAa,CAACzf,GAAD,EAAMkK,QAAN,EAAgBV,OAAhB,EAAyB+T,MAAzB,EAAiC/e,KAAjC,EAAwCkL,QAAxC,EAAkDD,gBAAlD,EAAoE4L,MAApE,CAAb,CAAA;AACD,GAAA;;EACDrV,GAAG,CAACoM,EAAJ,GAASC,OAAT,CAAA;AACAkR,EAAAA,MAAM,CAAClR,OAAD,CAAN,GAAkBrM,GAAlB,CAAA;EACA,OAAOA,GAAG,CAACoM,EAAX,CAAA;AACD,CAAA;;AAED,SAASqT,aAAT,CAAuBzf,GAAvB,EAA4BkK,QAA5B,EAAsCV,OAAtC,EAA+C+T,MAA/C,EAAuD/e,KAAvD,EAA8DkL,QAA9D,EAAwED,gBAAxE,EAA0F4L,MAA1F,EAAkG;AAChG,EAAA,IAAGhC,KAAK,CAACiB,OAAN,CAAcpK,QAAd,CAAH,EAA4B;AAC1B;IACA,IAAIsT,UAAU,GAAG,EAAjB,CAAA;;AACA,IAAA,KAAI,IAAIhhB,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmH,QAAQ,CAAC7M,MAA9B,EAAsCb,CAAC,GAAGuG,GAA1C,EAA+CvG,CAAC,EAAhD,EAAoD;AAClD,MAAA,IAAI0D,IAAI,GAAGgK,QAAQ,CAAC1N,CAAD,CAAnB,CAAA;;AACA,MAAA,IAAG0D,IAAI,CAACG,cAAL,CAAoB,UAApB,CAAH,EAAoC;AAClCmd,QAAAA,UAAU,CAACtd,IAAI,CAAC4J,QAAN,CAAV,GAA4B6S,QAAQ,CAACzc,IAAD,EAAOsJ,OAAP,EAAgBhL,KAAhB,EAAuBkL,QAAvB,EAAiCD,gBAAjC,EAAmD4L,MAAnD,CAApC,CAAA;AACD,OAAA;AACF,KARyB;;;AAU1B,IAAA,KAAI,IAAI7Y,GAAR,IAAaghB,UAAb,EAAyB;AACvB,MAAA,IAAGA,UAAU,CAACnd,cAAX,CAA0B7D,GAA1B,CAAH,EAAiC;AAC/B,QAAA,IAAI0D,MAAI,GAAGsd,UAAU,CAAChhB,GAAD,CAArB,CAAA;AACA,QAAA,IAAIuN,OAAO,GAAG7J,MAAI,CAAC6J,OAAnB,CAAA;;AACA,QAAA,OAAMA,OAAO,KAAKnK,SAAZ,IAAyBmK,OAAO,KAAK,IAArC,IAA6CyT,UAAU,CAACzT,OAAD,CAA7D,EAAwE;AACtE,UAAA,IAAIC,MAAM,GAAG3B,CAAC,CAACC,QAAF,CAAW2T,IAAX,CAAgBC,SAAhB,CAA0BsB,UAAU,CAACzT,OAAD,CAApC,CAAb,CAAA;AACAC,UAAAA,MAAM,GAAG3B,CAAC,CAACC,QAAF,CAAW2T,IAAX,CAAgBxN,KAAhB,CAAsBzE,MAAtB,CAAT,CAFsE;;UAItE,IAAIgV,MAAM,GAAGhV,MAAb,CAAA;;AACA,UAAA,OAAMgV,MAAM,CAAC9U,QAAP,CAAgB7M,MAAtB,EAA8B;AAC5B2hB,YAAAA,MAAM,GAAGA,MAAM,CAAC9U,QAAP,CAAgB,CAAhB,CAAT,CAAA;AACD,WAAA;;AACD8U,UAAAA,MAAM,CAAC9U,QAAP,CAAgBjM,IAAhB,CAAqBiC,MAArB,CAAA,CAAA;AACAA,UAAAA,MAAI,GAAG8J,MAAP,CAAA;UACAD,OAAO,GAAGC,MAAM,CAACD,OAAjB,CAAA;AACD,SAAA;;AACD,QAAA,IAAG7J,MAAI,KAAKsd,UAAU,CAAChhB,GAAD,CAAtB,EAA2B;AACzBghB,UAAAA,UAAU,CAAChhB,GAAD,CAAV,GAAgB0D,MAAhB,CAAA;AACD,SAAA;AACF,OAAA;AACF,KA9ByB;;;AAgC1B,IAAA,KAAI,IAAI1D,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGmH,QAAQ,CAAC7M,MAA9B,EAAsCb,GAAC,GAAGuG,KAA1C,EAA+CvG,GAAC,EAAhD,EAAoD;AAClD,MAAA,IAAI0D,MAAI,GAAGgK,QAAQ,CAAC1N,GAAD,CAAnB,CADkD;;MAGlD,IAAG0D,MAAI,CAAC8K,KAAR,EAAe;AACb,QAAA,SAAA;AACD,OAAA;;AACD,MAAA,IAAI4P,IAAI,GAAGtR,SAAS,CAACpJ,MAAD,EAAOsJ,OAAP,EAAgB+T,MAAhB,EAAwB/e,KAAxB,EAA+BkL,QAA/B,EAAyCD,gBAAzC,EAA2D4L,MAA3D,EAAmEmI,UAAnE,CAApB,CAAA;;AACA,MAAA,IAAG5C,IAAH,EAAS;AACP5a,QAAAA,GAAG,CAACkK,QAAJ,CAAajM,IAAb,CAAkB2c,IAAlB,EADO;;AAGP,QAAA,IAAGA,IAAI,CAACf,IAAL,IAAae,IAAI,CAACf,IAAL,CAAUf,KAAvB,IAAgC8B,IAAI,CAACf,IAAL,CAAUf,KAAV,CAAgBiB,WAAnD,EAAgE;AAC9D;AACA/Z,UAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBiB,WAAhB,GAA8Bvc,IAAI,CAACiC,IAAL,CAAUjC,IAAI,CAACyc,GAAL,CAASja,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB1W,KAAzB,EAAgC,CAAhC,IAAqC5E,IAAI,CAACyc,GAAL,CAASja,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5Q,MAAzB,EAAiC,CAAjC,CAA/C,CAA9B,CAAA;AACA,UAAA,OAAO0S,IAAI,CAACf,IAAL,CAAUf,KAAV,CAAgBiB,WAAvB,CAAA;AACD,SAAA;;QACD,IAAGa,IAAI,CAAC1Q,QAAL,IAAiB0Q,IAAI,CAAC1Q,QAAL,CAAc7M,MAAd,KAAyB,CAA7C,EAAgD;AAC9C,UAAA,IAAI4S,CAAC,GAAG2K,IAAI,CAAC1Q,QAAL,CAAc,CAAd,CAAR,CAAA;;AACA,UAAA,IAAG+F,CAAC,CAAC4J,IAAF,IAAU5J,CAAC,CAAC4J,IAAF,CAAOf,KAAjB,IAA0B7I,CAAC,CAAC4J,IAAF,CAAOf,KAAP,CAAaiB,WAA1C,EAAuD;AACrD;AACA/Z,YAAAA,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBiB,WAAhB,GAA8Bvc,IAAI,CAACiC,IAAL,CAAUjC,IAAI,CAACyc,GAAL,CAASja,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB1W,KAAzB,EAAgC,CAAhC,IAAqC5E,IAAI,CAACyc,GAAL,CAASja,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5Q,MAAzB,EAAiC,CAAjC,CAA/C,CAA9B,CAAA;AACA,YAAA,OAAO+H,CAAC,CAAC4J,IAAF,CAAOf,KAAP,CAAaiB,WAApB,CAAA;AACD,WAAA;AACF,SAAA;AACD;AACR;AACA;AACA;AACA;AACA;AACA;;;QACQ,IAAG7Z,MAAI,CAAC2L,IAAR,EAAc;AACZ;AACA,UAAA,IAAG3L,MAAI,CAAC2L,IAAL,CAAUzL,OAAb,EAAsB;AACpB,YAAA,IAAI4G,CAAC,GAAG0Y,SAAS,CAACxf,MAAD,EAAO0a,IAAP,EAAapc,KAAb,EAAoBkL,QAApB,EAA8BD,gBAA9B,EAAgD4L,MAAhD,CAAjB,CAAA;YACA,IAAI2J,OAAM,GAAGhf,GAAb,CAAA;;YACA,OAAM4a,IAAI,CAAC1Q,QAAL,IAAiB0Q,IAAI,CAAC1Q,QAAL,CAAc7M,MAAd,KAAyB,CAAhD,EAAmD;AACjD2hB,cAAAA,OAAM,GAAGpE,IAAT,CAAA;AACAA,cAAAA,IAAI,GAAGA,IAAI,CAAC1Q,QAAL,CAAc,CAAd,CAAP,CAAA;AACD,aAAA;;AACD,YAAA,IAAI+K,IAAI,GAAG+J,OAAM,CAAC9U,QAAP,CAAgB8U,OAAM,CAAC9U,QAAP,CAAgB7M,MAAhB,GAAyB,CAAzC,CAAX,CAPoB;;AASpB,YAAA,IAAIyb,KAAK,GAAG7D,IAAI,CAAC4E,IAAL,CAAUf,KAAtB,CAAA;AACA,YAAA,IAAI6G,MAAM,GAAG3Y,CAAC,CAAC6U,KAAF,CAAQ/C,KAArB,CAAA;;AACA,YAAA,IAAGA,KAAH,EAAU;AACR,cAAA,KAAI,IAAItc,GAAR,IAAasc,KAAb,EAAoB;AAClB,gBAAA,IAAGA,KAAK,CAACzY,cAAN,CAAqB7D,GAArB,CAA2B,IAAA;AAC5B,kBAAA,QAAA,EAAU,IADkB;AAE5B,kBAAA,QAAA,EAAU,IAFkB;AAG5B,kBAAA,QAAA,EAAU,IAHkB;kBAI5B,SAAW,EAAA,IAAA;AAJiB,iBAAA,CAK5B6D,cAL4B,CAKb7D,GALa,CAA9B,EAKqB;AACnBmjB,kBAAAA,MAAM,CAACnjB,GAAD,CAAN,GAAYsc,KAAK,CAACtc,GAAD,CAAjB,CAAA;AACD,iBAAA;AACF,eAAA;AACF,aAAA;;AACD,YAAA,IAAIgL,CAAC,GAAGyN,IAAI,CAACiD,OAAb,CAvBoB;;AAyBpB,YAAA,IAAG1Q,CAAC,IAAIA,CAAC,CAACnK,MAAV,EAAkB;AAChB2J,cAAAA,CAAC,CAACkR,OAAF,GAAYlR,CAAC,CAACkR,OAAF,IAAa,EAAzB,CAAA;;AACA,cAAA,KAAI,IAAI1b,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGyE,CAAC,CAACnK,MAAvB,EAA+Bb,GAAC,GAAGuG,KAAnC,EAAwCvG,GAAC,EAAzC,EAA6C;AAC3C,gBAAA,IAAI0D,MAAI,GAAGsH,CAAC,CAAChL,GAAD,CAAZ;AAAA,oBAAiBqB,KAAK,GAAGqC,MAAI,CAACrC,KAA9B;AAAA,oBAAqC+hB,MAAM,GAAG/hB,KAAK,CAAC,CAAD,CAAnD,CAD2C;;AAG3C,gBAAA,IAAG+hB,MAAM,CAACvf,cAAP,CAAsB,iBAAtB,CAAH,EAA6C;AAC3C,kBAAA,IAAI+Z,GAAG,GAAG;AACRvc,oBAAAA,KAAK,EAAE,CAAC;AACNwX,sBAAAA,MAAM,EAAE,CAAA;AADF,qBAAD,CADC;oBAIRF,OAAO,EAAEjV,MAAI,CAACiV,OAAAA;mBAJhB,CAAA;;kBAMA,IAAGtX,KAAK,CAAC,CAAD,CAAL,CAASwC,cAAT,CAAwB,QAAxB,CAAH,EAAsC;AACpC+Z,oBAAAA,GAAG,CAACvc,KAAJ,CAAU,CAAV,CAAaG,CAAAA,MAAb,GAAsBH,KAAK,CAAC,CAAD,CAAL,CAASG,MAA/B,CAAA;AACD,mBAAA;;kBACD,IAAIzB,GAAG,GAAGojB,MAAM,CAACzK,eAAP,CAAuBiE,KAAvB,CAA6B,GAA7B,CAAV,CAAA;kBACA5c,GAAG,CAAC,CAAD,CAAH,GAAS6K,UAAU,CAAC7K,GAAG,CAAC,CAAD,CAAJ,CAAnB,CAAA;kBACAA,GAAG,CAAC,CAAD,CAAH,GAAS6K,UAAU,CAAC7K,GAAG,CAAC,CAAD,CAAJ,CAAnB,CAAA;;AACA,kBAAA,KAAI,IAAIqG,CAAC,GAAG,CAAR,EAAW6V,IAAI,GAAG5a,KAAK,CAACR,MAA5B,EAAoCuF,CAAC,GAAG6V,IAAxC,EAA8C7V,CAAC,EAA/C,EAAmD;AACjD,oBAAA,IAAIyH,KAAK,GAAGxM,KAAK,CAAC+E,CAAD,CAAjB,CAAA;oBACA,IAAIid,KAAK,GAAGxV,KAAK,CAACmQ,IAAN,IAAc1B,KAAK,CAAC0B,IAAN,IAAc,CAA5B,CAAZ,CAAA;oBACA,IAAIsF,KAAK,GAAGzV,KAAK,CAACoQ,GAAN,IAAa3B,KAAK,CAAC2B,GAAN,IAAa,CAA1B,CAAZ,CAAA;AACA,oBAAA,IAAIsF,IAAI,GAAG,CAACxjB,GAAG,CAAC,CAAD,CAAH,GAASsjB,KAAV,EAAiBtjB,GAAG,CAAC,CAAD,CAAH,GAASujB,KAA1B,CAAX,CAAA;AACA,oBAAA,IAAIpiB,CAAC,GAAG;sBACN2X,MAAM,EAAEhL,KAAK,CAACgL,MADR;AAENmF,sBAAAA,IAAI,EAAEmF,MAAM,CAACnF,IAAP,GAAcqF,KAFd;AAGNpF,sBAAAA,GAAG,EAAEkF,MAAM,CAAClF,GAAP,GAAaqF,KAHZ;AAIN5K,sBAAAA,eAAe,EAAE6K,IAAI,CAACC,IAAL,CAAU,GAAV,CAAA;qBAJnB,CAAA;;AAMA,oBAAA,IAAG3V,KAAK,CAAChK,cAAN,CAAqB,QAArB,CAAH,EAAmC;AACjC3C,sBAAAA,CAAC,CAACM,MAAF,GAAWqM,KAAK,CAACrM,MAAjB,CAAA;AACD,qBAAA;;AACDoc,oBAAAA,GAAG,CAACvc,KAAJ,CAAUI,IAAV,CAAeP,CAAf,CAAA,CAAA;AACD,mBAAA;;AACDsJ,kBAAAA,CAAC,CAACkR,OAAF,CAAUja,IAAV,CAAemc,GAAf,CAAA,CAAA;AACD,iBA9BD,MA+BK,IAAGwF,MAAM,CAACvf,cAAP,CAAsB,eAAtB,CAAA,IACHuf,MAAM,CAACvf,cAAP,CAAsB,YAAtB,CADG,IAEHuf,MAAM,CAACvf,cAAP,CAAsB,YAAtB,CAFG,IAGHuf,MAAM,CAACvf,cAAP,CAAsB,YAAtB,CAHA,EAGqC;AACxC2G,kBAAAA,CAAC,CAACkR,OAAF,CAAUja,IAAV,CAAege,IAAI,CAACxN,KAAL,CAAWwN,IAAI,CAACC,SAAL,CAAehc,MAAf,CAAX,CAAf,CAAA,CAAA;AACD,iBAAA;AACF,eAAA;AACF,aAAA;;AACD8e,YAAAA,OAAM,CAAC9U,QAAP,CAAgBjM,IAAhB,CAAqB+I,CAArB,CAAA,CAAA;AACD,WAtED;eAwEK;YACH,IAAIiZ,OAAO,GAAX,KAAA,CAAA,CADG;;YAGH,IAAGrF,IAAI,CAACiB,KAAR,EAAe;AACb,cAAA,IAAGjB,IAAI,CAACiB,KAAL,CAAWhQ,IAAX,IAAmB+O,IAAI,CAACiB,KAAL,CAAW8B,IAAjC,EAAuC,CAAvC,MACK;AACHsC,gBAAAA,OAAO,GAAG,IAAV,CAAA;AACD,eAAA;AACF,aAAA;;AACD,YAAA,IAAGA,OAAH,EAAY;cACV,IAAI9H,KAAK,GAAGyC,IAAZ,CAAA;;cACA,OAAMzC,KAAK,CAACjO,QAAN,IAAkBiO,KAAK,CAACjO,QAAN,CAAe,CAAf,CAAxB,EAA2C;AACzCiO,gBAAAA,KAAK,GAAGA,KAAK,CAACjO,QAAN,CAAe,CAAf,CAAR,CAAA;AACD,eAAA;;AACD,cAAA,IAAGiO,KAAK,CAAC0B,IAAN,KAAe1B,KAAK,CAAC0B,IAAN,CAAWhO,IAAX,IAAmBsM,KAAK,CAAC0B,IAAN,CAAW8D,IAA7C,CAAH,EAAuD;AACrD,gBAAA,IAAGxF,KAAK,CAAC0B,IAAN,CAAWhO,IAAd,EAAoB;AAClB,kBAAA,OAAOsM,KAAK,CAAC0B,IAAN,CAAWhO,IAAlB,CAAA;AACA+O,kBAAAA,IAAI,CAACiB,KAAL,CAAWhQ,IAAX,GAAkB,IAAlB,CAAA;AACD,iBAHD,MAIK;AACH,kBAAA,OAAOsM,KAAK,CAAC0D,KAAN,CAAYhQ,IAAnB,CAAA;AACA+O,kBAAAA,IAAI,CAACiB,KAAL,CAAW8B,IAAX,GAAkB,IAAlB,CAAA;AACD,iBAAA;AACF,eAAA;AACF,aAAA;AACF,WAAA;AACF,SAAA;AACF,OAAA;AACF,KAAA;AACF,GAAA;AACF,CAAA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASuB,SAAT,CAAmBlf,GAAnB,EAAwB4W,IAAxB,EAA8BpY,KAA9B,EAAqCkL,QAArC,EAA+CD,gBAA/C,EAAiE4L,MAAjE,EAAyE;EACvE,IAAmEuB,WAAAA,GAAAA,IAAnE,CAAMjP,KAAN;MAAe/G,OAAf,eAAeA,OAAf;MAAwBQ,IAAxB,eAAwBA,IAAxB;MAA8BC,KAA9B,eAA8BA,KAA9B;MAAqCF,MAArC,eAAqCA,MAArC;MAA6CN,SAA7C,eAA6CA,SAA7C;AAAA,MAA0D+G,IAA1D,GAAmEgP,IAAnE,CAA0DhP,IAA1D,CAAA;EACA,IAAIuV,MAAM,GAAG3e,KAAK,GAAG6W,MAAR,GAAiB5L,gBAA9B,CAFuE;;EAIvE,IAAIS,QAAQ,GAAG,EAAf,CAAA;AACA,EAAA,IAAInH,GAAG,GAAGnC,OAAO,CAACvD,MAAlB,CAAA;;EACA,IAAG,CAAC0F,GAAJ,EAAS;AACP,IAAA,OAAA;AACD,GARsE;;;AAUvE,EAAA,IAAIoV,KAAK,GAAG;AACVoE,IAAAA,OAAO,EAAE,KADC;AAEVV,IAAAA,KAAK,EAAE;AACL/C,MAAAA,KAAK,EAAE;AACLrX,QAAAA,QAAQ,EAAE,UAAA;AADL,OAAA;KAHC;AAOVyI,IAAAA,QAAQ,EAARA,QAPU;AAQVgO,IAAAA,OAAO,EAAE,EAAA;GARX,CAAA;;AAUA,EAAA,KAAI,IAAI1b,CAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGnC,OAAO,CAACvD,MAA7B,EAAqCb,CAAC,GAAGuG,KAAzC,EAA8CvG,CAAC,EAA/C,EAAmD;AACjD,IAAA,IAAI0D,IAAI,GAAGU,OAAO,CAACpE,CAAD,CAAlB,CAAA;AACA,IAAA,IAAM8E,IAAN,GAA6DpB,IAA7D,CAAMoB,IAAN,CAAA;AAAA,QAA6DpB,IAA7D,CAAYqB,SAAZ,CAAA;AAAA,YAAuBC,IAAvB,GAA6DtB,IAA7D,CAAuBsB,IAAvB,CAAA;AAAA,QAA6BC,QAA7B,GAA6DvB,IAA7D,CAA6BuB,QAA7B,CAAA;AAAA,QAAuCC,SAAvC,GAA6DxB,IAA7D,CAAuCwB,SAAvC,CAAA;AAAA,QAAkDE,MAAlD,GAA6D1B,IAA7D,CAAkD0B,OAAlD;IACA,IAAIse,CAAC,GAAL,KAAA,CAAA,CAHiD;;AAKjD,IAAA,IAAIC,KAAK,GAAG;AACV5D,MAAAA,OAAO,EAAE,WADC;AAEVV,MAAAA,KAAK,EAAE;AACL/C,QAAAA,KAAK,EAAE;AACLrX,UAAAA,QAAQ,EAAE,UAAA;AADL,SAAA;OAHC;AAOVyW,MAAAA,OAAO,EAAE,EAAA;KAPX,CAAA;AASAhO,IAAAA,QAAQ,CAACjM,IAAT,CAAckiB,KAAd,EAdiD;;AAgBjD,IAAA,IAAG7e,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,SAA/B,EAA0C;MACxC,IAAI2O,CAAC,GAAG+H,aAAa,CAACxW,IAAD,EAAO2b,MAAP,EAAezT,QAAf,CAArB,CAAA;AACA,MAAA,IAAIoL,KAAK,GAAG7E,CAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;AACAsiB,MAAAA,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB1W,KAAlB,GAA0B0S,KAAK,CAACtT,IAAN,CAAW,CAAX,CAA1B,CAAA;AACA2e,MAAAA,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5Q,MAAlB,GAA2B4M,KAAK,CAACtT,IAAN,CAAW,CAAX,CAA3B,CAAA;;AACA,MAAA,IAAGyO,CAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,QAAAA,CAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,UAAAA,MAAM,EAAE,CAAA;AADG,SAAb,CADqB;;AAKrB,QAAA,KAAI,IAAI7Y,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGkN,CAAC,CAACpS,KAAF,CAAQR,MAA7B,EAAqCb,GAAC,GAAGuG,KAAzC,EAA8CvG,GAAC,EAA/C,EAAmD;AACjD,UAAA,IAAI0D,MAAI,GAAG+P,CAAC,CAACpS,KAAF,CAAQrB,GAAR,CAAX,CAAA;AACA,UAAA,IAAIgF,KAAI,GAAGtB,MAAI,CAACsB,IAAhB,CAAA;UACAtB,MAAI,CAACsB,IAAL,GAAY5B,SAAZ,CAAA;AACAM,UAAAA,MAAI,CAACoW,MAAL,GAAc9U,KAAI,CAAC,CAAD,CAAJ,GAAUsT,KAAK,CAACtT,IAAN,CAAW,CAAX,CAAxB,CAAA;AACAtB,UAAAA,MAAI,CAACqW,MAAL,GAAc/U,KAAI,CAAC,CAAD,CAAJ,GAAUsT,KAAK,CAACtT,IAAN,CAAW,CAAX,CAAxB,CAAA;AACD,SAAA;;AACD2e,QAAAA,KAAK,CAACjI,OAAN,CAAcja,IAAd,CAAmBgS,CAAnB,CAAA,CAAA;AACD,OAAA;;MACD,IAAG3O,IAAI,KAAK,MAAZ,EAAoB;QAClB,IAAI5D,CAAC,GAAGwD,IAAI,CAACuO,aAAL,CAAmBqF,KAAK,CAACtT,IAAN,CAAW,CAAX,CAAnB,EAAkCsT,KAAK,CAACtT,IAAN,CAAW,CAAX,CAAlC,EAAiDE,SAAS,CAAC,CAAD,CAA1D,CAAR,CAAA;AACAye,QAAAA,KAAK,CAACtE,KAAN,CAAYja,MAAZ,GAAqBlE,CAAC,CAACkE,MAAvB,CAAA;AACAue,QAAAA,KAAK,CAACtE,KAAN,CAAYrM,QAAZ,GAAuB9R,CAAC,CAAC8R,QAAzB,CAAA;AACD,OAJD,MAKK,IAAGlO,IAAI,KAAK,SAAZ,EAAuB;AAC1B,QAAA,IAAI5D,EAAC,GAAGwD,IAAI,CAACwO,gBAAL,EAAR,CAAA;;AACAyQ,QAAAA,KAAK,CAACtE,KAAN,CAAYja,MAAZ,GAAqBlE,EAAC,CAACkE,MAAvB,CAAA;AACAue,QAAAA,KAAK,CAACtE,KAAN,CAAYrM,QAAZ,GAAuB9R,EAAC,CAAC8R,QAAzB,CAAA;AACD,OAAA;AACF,KA7BD,MA8BK,IAAGlO,IAAI,KAAK,MAAZ,EAAoB,CAApB,MAGA,IAAGA,IAAI,KAAK,MAAZ,EAAoB;MACvB,IAAI2O,IAAC,GAAG0G,eAAe,CAAC/U,MAAD,EAASub,MAAT,EAAiBzT,QAAjB,CAAvB,CAAA;;AACA,MAAA,IAAIjH,CAAC,GAAGwN,IAAC,CAAC2G,IAAV,CAFuB;;AAIvBuJ,MAAAA,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB1W,KAAlB,GAA0BwU,IAAI,CAACjP,KAAL,CAAWvF,KAAX,GAAmBK,CAAC,CAACL,KAA/C,CAAA;AACA+d,MAAAA,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5Q,MAAlB,GAA2B0O,IAAI,CAACjP,KAAL,CAAWO,MAAX,GAAoBzF,CAAC,CAACyF,MAAjD,CALuB;;MAOvBiY,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB0B,IAAlB,GAAyB/X,CAAC,CAACvF,EAA3B,CAAA;MACAijB,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB2B,GAAlB,GAAwBhY,CAAC,CAACtF,EAA1B,CAAA;MACA8S,IAAC,CAAC2G,IAAF,GAAShX,SAAT,CAAA;AACA,MAAA,IAAIkV,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;AACAsiB,MAAAA,KAAK,CAACtE,KAAN,CAAYja,MAAZ,GAAqBkT,QAAK,CAAClT,MAA3B,CAAA;AACAue,MAAAA,KAAK,CAACtE,KAAN,CAAYrM,QAAZ,GAAuBsF,QAAK,CAACtF,QAA7B,CAAA;;AACA,MAAA,IAAGS,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,QAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,UAAAA,MAAM,EAAE,CAAA;SADV,CAAA;AAGA8K,QAAAA,KAAK,CAACjI,OAAN,CAAcja,IAAd,CAAmBgS,IAAnB,CAAA,CAAA;AACD,OAAA;AACF,KApEgD;;;AAsEjD,IAAA,IAAGxO,QAAQ,IAAIA,QAAQ,CAACpE,MAAxB,EAAgC;MAC9B,IAAI4S,IAAC,GAAGsF,iBAAiB,CAAC9T,QAAD,EAAW0b,MAAX,EAAmBzT,QAAnB,CAAzB,CAAA;;AACA,MAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;MACAsiB,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBtD,UAAlB,GAA+BV,QAAK,CAACU,UAArC,CAAA;MACA2K,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBrD,UAAlB,GAA+BX,QAAK,CAACW,UAArC,CAAA;MACA0K,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBgB,UAAlB,GAA+BhF,QAAK,CAACgF,UAArC,CAAA;;AACA,MAAA,IAAG7J,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,QAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,UAAAA,MAAM,EAAE,CAAA;SADV,CAAA;;AAGA,QAAA,KAAI,IAAI7Y,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGyT,IAAC,CAACpS,KAAF,CAAQR,MAA3B,EAAmCb,GAAC,EAApC,EAAwC;AACtC,UAAA,IAAI0D,MAAI,GAAG+P,IAAC,CAACpS,KAAF,CAAQrB,GAAR,CAAX,CAAA;AACA0D,UAAAA,MAAI,CAACsV,UAAL,IAAmBV,QAAK,CAACU,UAAzB,CAAA;AACAtV,UAAAA,MAAI,CAACuV,UAAL,IAAmBX,QAAK,CAACW,UAAzB,CAAA;AACAvV,UAAAA,MAAI,CAAC4Z,UAAL,IAAmBhF,QAAK,CAACgF,UAAzB,CAAA;AACD,SAAA;;AACDqG,QAAAA,KAAK,CAACjI,OAAN,CAAcja,IAAd,CAAmBgS,IAAnB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;;AACD,IAAA,IAAG7O,IAAI,IAAIA,IAAI,CAAC4B,IAAL,KAAc,CAAtB,IAA2B3B,KAAK,IAAIA,KAAK,CAAC2B,IAAN,KAAe,CAAtD,EAAyD;AACvDmd,MAAAA,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBsH,QAAlB,GAA6B,SAA7B,CAAA;AACD,KA3FgD;;;AA6FjD,IAAA,IAAMrD,WAAN,GAAsBlc,SAAtB,CAAMkc,WAAN,CAAA;;IACA,IAAG1J,KAAK,CAACiB,OAAN,CAAcyI,WAAd,CAA8BA,IAAAA,WAAW,CAAC1f,MAA7C,EAAqD;MACnD,IAAI4S,IAAC,GAAGiF,eAAe,CAAC6H,WAAD,EAAcI,MAAd,EAAsBzT,QAAtB,CAAvB,CAAA;;AACA,MAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;MACA,IAAIiF,CAAC,GAAGgS,QAAK,CAACI,eAAN,CAAsBiE,KAAtB,CAA4B,GAA5B,CAAR,CAAA;;MACArW,CAAC,CAAC,CAAD,CAAD,GAAOsE,UAAU,CAACtE,CAAC,CAAC,CAAD,CAAF,CAAjB,CAAA;MACAA,CAAC,CAAC,CAAD,CAAD,GAAOsE,UAAU,CAACtE,CAAC,CAAC,CAAD,CAAF,CAAjB,CAAA;AACA;AACN;AACA;AACA;;MACM,IAAGxB,IAAI,KAAK,MAAZ,EAAoB;QAClB,IAAIkZ,IAAI,GAAG2F,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB0B,IAA7B,CAAA;QACA,IAAIC,GAAG,GAAG0F,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB2B,GAA5B,CAAA;QACA0F,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB0B,IAAlB,IAA0B1X,CAAC,CAAC,CAAD,CAA3B,CAAA;QACAqd,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB2B,GAAlB,IAAyB3X,CAAC,CAAC,CAAD,CAA1B,CAAA;QACA,IAAIkM,CAAC,GAAGmR,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB1W,KAA1B,CAAA;QACA,IAAI6M,CAAC,GAAGkR,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5Q,MAA1B,CAAA;AACApF,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQkM,CAAC,GAAG,GAAZ,CAAA;AACAlM,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQmM,CAAC,GAAG,GAAZ,CAAA;;AACA,QAAA,IAAGnM,CAAC,CAAC,CAAD,CAAD,KAASkM,CAAC,GAAG,GAAb,IAAoBlM,CAAC,CAAC,CAAD,CAAD,KAASmM,CAAC,GAAG,GAApC,EAAyC;UACvCkR,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5D,eAAlB,GAAoCJ,QAAK,CAACI,eAA1C,CAAA;AACD,SAAA;;AACD,QAAA,IAAGjF,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAA,IAAGyX,QAAK,CAACO,MAAN,KAAiB,CAApB,EAAuB;AACrBpF,YAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,cAAAA,MAAM,EAAE,CAAA;aADV,CAAA;AAGD,WALoB;;;AAOrB,UAAA,KAAI,IAAI7Y,GAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGkN,IAAC,CAACpS,KAAF,CAAQR,MAA7B,EAAqCb,GAAC,GAAGuG,KAAzC,EAA8CvG,GAAC,EAA/C,EAAmD;AACjD,YAAA,IAAI0D,MAAI,GAAG+P,IAAC,CAACpS,KAAF,CAAQrB,GAAR,CAAX,CAAA;;YACA,IAAI4d,GAAG,GAAGla,MAAI,CAACgV,eAAL,CAAqBiE,KAArB,CAA2B,GAA3B,CAAV,CAAA;;YACAiB,GAAG,CAAC,CAAD,CAAH,GAAShT,UAAU,CAACgT,GAAG,CAAC,CAAD,CAAJ,CAAnB,CAAA;YACAA,GAAG,CAAC,CAAD,CAAH,GAAShT,UAAU,CAACgT,GAAG,CAAC,CAAD,CAAJ,CAAnB,CAAA;YACAla,MAAI,CAACsa,IAAL,GAAYA,IAAI,GAAGJ,GAAG,CAAC,CAAD,CAAtB,CAAA;YACAla,MAAI,CAACua,GAAL,GAAWA,GAAG,GAAGL,GAAG,CAAC,CAAD,CAApB,CAAA;AACD,WAAA;;AACD+F,UAAAA,KAAK,CAACjI,OAAN,CAAcja,IAAd,CAAmBgS,IAAnB,CAAA,CAAA;AACD,SAAA;AACF,OA7BD,MA8BK;AACH;AACAnN,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQqd,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB1W,KAAlB,GAA0B,GAAlC,CAAA;AACAU,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQqd,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5Q,MAAlB,GAA2B,GAAnC,CAAA;;AACA,QAAA,IAAGpF,CAAC,CAAC,CAAD,CAAD,KAASqd,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB1W,KAAlB,GAA0B,GAAnC,IAA0CU,CAAC,CAAC,CAAD,CAAD,KAASqd,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5Q,MAAlB,GAA2B,GAAjF,EAAsF;UACpFiY,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5D,eAAlB,GAAoCJ,QAAK,CAACI,eAA1C,CAAA;AACD,SAAA;;AACD,QAAA,IAAGjF,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAA,IAAGyX,QAAK,CAACO,MAAN,KAAiB,CAApB,EAAuB;AACrBpF,YAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,cAAAA,MAAM,EAAE,CAAA;aADV,CAAA;AAGD,WAAA;;AACD8K,UAAAA,KAAK,CAACjI,OAAN,CAAcja,IAAd,CAAmBgS,IAAnB,CAAA,CAAA;AACD,SAAA;;AACD,QAAA,IAAGnN,CAAC,CAAC,CAAD,CAAJ,EAAS;UACPqd,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB0B,IAAlB,GAAyB,CAAC1X,CAAC,CAAC,CAAD,CAA3B,CAAA;AACD,SAAA;;AACD,QAAA,IAAGA,CAAC,CAAC,CAAD,CAAJ,EAAS;UACPqd,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB2B,GAAlB,GAAwB,CAAC3X,CAAC,CAAC,CAAD,CAA1B,CAAA;AACD,SAAA;AACF,OAAA;AACF,KAAA;;AACD8Z,IAAAA,YAAY,CAACzE,KAAD,EAAQvB,IAAI,CAACjP,KAAb,EAAoBnJ,KAApB,EAA2BkL,QAA3B,EAAqC2L,MAArC,EAA6C,IAA7C,EAAmD,IAAnD,CAAZ,CA7JiD;;AA+JjD,IAAA,IAAGhU,KAAH,EAAU;MACR,IAAI6T,gBAAe,GAAGiL,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5D,eAAxC,CAAA;MACA,IAAIlG,EAAC,GAAGmR,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB1W,KAA1B;UAAiC6M,EAAC,GAAGkR,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB5Q,MAAvD,CAAA;AACA,MAAA,IAAI4S,EAAE,GAAN,KAAA,CAAA;AAAA,UAAQC,EAAE,GAAV,KAAA,CAAA,CAAA;;AACA,MAAA,IAAG7F,gBAAH,EAAoB;AAClBA,QAAAA,gBAAe,GAAGA,gBAAe,CAACiE,KAAhB,CAAsB,GAAtB,CAAlB,CAAA;AACA2B,QAAAA,EAAE,GAAG1T,UAAU,CAAC8N,gBAAe,CAAC,CAAD,CAAhB,CAAf,CAAA;AACA6F,QAAAA,EAAE,GAAG3T,UAAU,CAAC8N,gBAAe,CAAC,CAAD,CAAhB,CAAf,CAAA;AACD,OAJD,MAKK;QACH4F,EAAE,GAAG9L,EAAC,GAAG,GAAT,CAAA;QACA+L,EAAE,GAAG9L,EAAC,GAAG,GAAT,CAAA;AACD,OAAA;;AACD,MAAA,IAAM3N,KAAN,GAA6CD,KAA7C,CAAMC,IAAN;AAAA,UAAY9C,MAAZ,GAA6C6C,KAA7C,CAAY7C,KAAZ;AAAA,UAAmBC,GAAnB,GAA6C4C,KAA7C,CAAmB5C,GAAnB;UAA6C4C,aAAAA,GAAAA,KAA7C,CAAwB4B,MAAxB;UAAkC+D,CAAlC,iBAAkCA,CAAlC;UAAqCC,CAArC,iBAAqCA,CAArC,CAAA;MACA,IAAIoZ,KAAK,GAAG,EAAZ,CAAA;;MACA,KAAI,IAAI7jB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGyK,CAAnB,EAAsBzK,IAAC,EAAvB,EAA2B;AACzB,QAAA,IAAGA,IAAH,EAAM;AACJ6jB,UAAAA,KAAK,IAAI,IAAT,CAAA;AACD,SAAA;;AACDA,QAAAA,KAAK,IAAI,OAAU7iB,GAAAA,IAAI,CAACwc,KAAL,CAAWhT,CAAC,CAACxK,IAAC,GAAG,CAAJ,GAAQ,CAAT,CAAD,GAAe,GAA1B,CAAnB,CAAA;AACA6jB,QAAAA,KAAK,IAAI,GAAM7iB,GAAAA,IAAI,CAACwc,KAAL,CAAWhT,CAAC,CAACxK,IAAC,GAAG,CAAJ,GAAQ,CAAT,CAAD,GAAe,GAA1B,CAAf,CAAA;AACA6jB,QAAAA,KAAK,IAAI,GAAM7iB,GAAAA,IAAI,CAACwc,KAAL,CAAWhT,CAAC,CAACxK,IAAC,GAAG,CAAJ,GAAQ,CAAT,CAAD,GAAe,GAA1B,CAAf,CANyB;;AAQzB,QAAA,IAAGwK,CAAC,CAAC3J,MAAF,IAAY4J,CAAC,GAAG,CAAJ,GAAQ,CAACzK,IAAC,GAAG,CAAL,IAAU,CAAjC,EAAoC;AAClC6jB,UAAAA,KAAK,IAAI,GAAMrZ,GAAAA,CAAC,CAACC,CAAC,GAAG,CAAJ,GAAQ,CAACzK,IAAC,GAAG,CAAL,IAAU,CAAlB,GAAsB,CAAvB,CAAhB,CAAA;AACD,SAFD,MAGK;AACH6jB,UAAAA,KAAK,IAAI,IAAT,CAAA;AACD,SAAA;;AACDA,QAAAA,KAAK,IAAI,IAAT,CAAA;QACAA,KAAK,IAAIrZ,CAAC,CAACxK,IAAC,GAAG,CAAL,CAAD,GAAW,GAAX,GAAiB,GAA1B,CAAA;AACD,OAAA;;MACD,IAAG,CAAC6jB,KAAJ,EAAW;AACTA,QAAAA,KAAK,GAAG,YAAR,CAAA;AACD,OAAA;;MACD,IAAG/e,KAAI,KAAK,CAAZ,EAAe;QACb,IAAIgf,EAAE,GAAGH,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBtD,UAAlB,IAAgC,CAAzC;YAA4C+K,EAAE,GAAGJ,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBrD,UAAlB,IAAgC,CAAjF,CAAA;AACA,QAAA,IAAIzY,EAAE,GAAGwB,MAAK,CAAC,CAAD,CAAL,GAAWsc,EAApB;AAAA,YAAwB7d,EAAE,GAAGuB,MAAK,CAAC,CAAD,CAAL,GAAWuc,EAAxC,CAAA;AACA,QAAA,IAAI7d,EAAE,GAAGuB,GAAG,CAAC,CAAD,CAAH,GAASqc,EAAlB;AAAA,YAAsB3d,EAAE,GAAGsB,GAAG,CAAC,CAAD,CAAH,GAASsc,EAApC,CAAA;AACAmF,QAAAA,CAAC,GAAqB,iBAAA,CAAA,MAAA,CAAA,CAACljB,EAAE,GAAGsjB,EAAN,IAAYtR,EAAjC,EAAA,GAAA,CAAA,CAAA,MAAA,CAAsC,CAAC/R,EAAE,GAAGsjB,EAAN,IAAYtR,EAAlD,EAAA,GAAA,CAAA,CAAA,MAAA,CAAuD,CAAC/R,EAAE,GAAGojB,EAAN,IAAYtR,EAAnE,EAAwE,GAAA,CAAA,CAAA,MAAA,CAAA,CAAC7R,EAAE,GAAGojB,EAAN,IAAWtR,EAAnF,EAAA,IAAA,CAAA,CAAA,MAAA,CAAyFoR,KAAzF,EAAD,GAAA,CAAA,CAAA;AACD,OALD,MAMK,IAAG/e,KAAI,KAAK,CAAZ,EAAe;QAClB,IAAIgf,EAAE,GAAGH,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBtD,UAAlB,IAAgC,CAAzC;YAA4C+K,EAAE,GAAGJ,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkBrD,UAAlB,IAAgC,CAAjF,CAAA;;AACA,QAAA,IAAIzY,GAAE,GAAGwB,MAAK,CAAC,CAAD,CAAL,GAAWsc,EAApB;AAAA,YAAwB7d,GAAE,GAAGuB,MAAK,CAAC,CAAD,CAAL,GAAWuc,EAAxC,CAAA;;AACA,QAAA,IAAI7d,GAAE,GAAGuB,GAAG,CAAC,CAAD,CAAH,GAASqc,EAAlB;AAAA,YAAsB3d,GAAE,GAAGsB,GAAG,CAAC,CAAD,CAAH,GAASsc,EAApC,CAAA;;AACAmF,QAAAA,CAAC,GAAqB,iBAAA,CAAA,MAAA,CAAA,CAACljB,GAAE,GAAGsjB,EAAN,IAAYtR,EAAjC,EAAA,GAAA,CAAA,CAAA,MAAA,CAAsC,CAAC/R,GAAE,GAAGsjB,EAAN,IAAYtR,EAAlD,EAAA,GAAA,CAAA,CAAA,MAAA,CAAuD,CAAC/R,GAAE,GAAGojB,EAAN,IAAYtR,EAAnE,EAAwE,GAAA,CAAA,CAAA,MAAA,CAAA,CAAC7R,GAAE,GAAGojB,EAAN,IAAWtR,EAAnF,EAAA,IAAA,CAAA,CAAA,MAAA,CAAyFoR,KAAzF,EAAD,GAAA,CAAA,CAAA;AACD,OAAA;;MACDF,KAAK,CAACtE,KAAN,CAAY/C,KAAZ,CAAkB1X,IAAlB,GAAyB,CAAC8e,CAAD,CAAzB,CAAA;AACD,KA/MgD;;;AAiNjD,IAAA,IAAGtY,IAAI,IAAIA,IAAI,CAACvH,cAAL,CAAoB,OAApB,CAAR,IAAwCuH,IAAI,CAACvH,cAAL,CAAoB,KAApB,CAA3C,EAAuE;AACrE,MAAA,IAAI7B,OAAK,GAAGoJ,IAAI,CAACpJ,KAAjB;AAAA,UAAwBC,IAAG,GAAGmJ,IAAI,CAACnJ,GAAnC,CAAA;;AACA,MAAA,IAAGD,OAAK,CAACnB,MAAN,GAAe,CAAlB,EAAqB;QACnB,IAAI4S,IAAC,GAAGwG,aAAa,CAACjY,OAAD,EAAQ2e,MAAR,EAAgBzT,QAAhB,EAA0B,KAA1B,CAArB,CAAA;;AACA,QAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;AACA,QAAA,IAAGiX,QAAK,CAACtW,KAAN,KAAgB,CAAnB,EAAsB;AACpB2hB,UAAAA,KAAK,CAACtE,KAAN,CAAYrd,KAAZ,GAAoBsW,QAAK,CAACtW,KAA1B,CAAA;AACD,SAAA;;AACD,QAAA,IAAGyR,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAA,IAAGyX,QAAK,CAACO,MAAN,KAAiB,CAApB,EAAuB;AACrBpF,YAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,cAAAA,MAAM,EAAE,CAAA;aADV,CAAA;AAGD,WAAA;;AACD8K,UAAAA,KAAK,CAACjI,OAAN,CAAcja,IAAd,CAAmBgS,IAAnB,CAAA,CAAA;AACD,SAAA;AACF,OAdD,MAeK;QACHkQ,KAAK,CAACtE,KAAN,CAAYrd,KAAZ,GAAoBA,OAAK,CAAC,CAAD,CAAL,GAAW,IAA/B,CAAA;AACD,OAAA;;AACD,MAAA,IAAGC,IAAG,CAACpB,MAAJ,GAAa,CAAhB,EAAmB;QACjB,IAAI4S,IAAC,GAAGwG,aAAa,CAAChY,IAAD,EAAM0e,MAAN,EAAczT,QAAd,EAAwB,IAAxB,CAArB,CAAA;;AACA,QAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;AACA,QAAA,IAAGiX,QAAK,CAACrW,GAAN,KAAc,CAAjB,EAAoB;AAClB0hB,UAAAA,KAAK,CAACtE,KAAN,CAAYpd,GAAZ,GAAkBqW,QAAK,CAACrW,GAAxB,CAAA;AACD,SAAA;;AACD,QAAA,IAAGwR,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAA,IAAGyX,QAAK,CAACO,MAAN,KAAiB,CAApB,EAAuB;AACrBpF,YAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,cAAAA,MAAM,EAAE,CAAA;aADV,CAAA;AAGD,WAAA;;AACD8K,UAAAA,KAAK,CAACjI,OAAN,CAAcja,IAAd,CAAmBgS,IAAnB,CAAA,CAAA;AACD,SAAA;AACF,OAdD,MAeK;QACHkQ,KAAK,CAACtE,KAAN,CAAYpd,GAAZ,GAAkBA,IAAG,CAAC,CAAD,CAAH,GAAS,IAA3B,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAG2C,IAAI,IAAIiS,KAAK,CAACiB,OAAN,CAAclT,IAAI,CAACc,KAAnB,CAAR,IAAqCd,IAAI,CAACc,KAAL,CAAW7E,MAAnD,EAA2D;IACzD,IAAI4S,IAAC,GAAGuH,aAAa,CAACpW,IAAD,EAAO+b,MAAP,EAAezT,QAAf,CAArB,CAAA;;AACA,IAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,KAAI,IAAIrB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;AAC3B0N,MAAAA,QAAQ,CAAC1N,IAAD,CAAR,CAAYqf,KAAZ,CAAkB/C,KAAlB,CAAwB1X,IAAxB,GAA+B0T,QAAK,CAAC1T,IAArC,CAAA;AACD,KAAA;;AACD,IAAA,IAAG6O,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA;;MAGA,KAAI,IAAI7Y,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;QAC3B0N,QAAQ,CAAC1N,IAAD,CAAR,CAAY0b,OAAZ,CAAoBja,IAApB,CAAyBgS,IAAzB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAG9O,MAAM,IAAIkS,KAAK,CAACiB,OAAN,CAAcnT,MAAM,CAACe,KAArB,CAAV,IAAyCf,MAAM,CAACe,KAAP,CAAa7E,MAAzD,EAAiE;IAC/D,IAAI4S,IAAC,GAAGyH,eAAe,CAACvW,MAAD,EAASgc,MAAT,EAAiBzT,QAAjB,CAAvB,CAAA;;AACA,IAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,KAAI,IAAIrB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;AAC3B0N,MAAAA,QAAQ,CAAC1N,IAAD,CAAR,CAAYqf,KAAZ,CAAkB/C,KAAlB,CAAwB3X,MAAxB,GAAiC2T,QAAK,CAAC3T,MAAvC,CAAA;AACD,KAAA;;AACD,IAAA,IAAG8O,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA;;MAGA,KAAI,IAAI7Y,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;QAC3B0N,QAAQ,CAAC1N,IAAD,CAAR,CAAY0b,OAAZ,CAAoBja,IAApB,CAAyBgS,IAAzB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAG9O,MAAM,IAAIkS,KAAK,CAACiB,OAAN,CAAcnT,MAAM,CAACiB,KAArB,CAAV,IAAyCjB,MAAM,CAACiB,KAAP,CAAa/E,MAAzD,EAAiE;IAC/D,IAAI4S,IAAC,GAAG0H,oBAAoB,CAACxW,MAAM,CAACiB,KAAR,EAAe+a,MAAf,EAAuBzT,QAAvB,CAA5B,CAAA;;AACA,IAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,KAAI,IAAIrB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;AAC3B0N,MAAAA,QAAQ,CAAC1N,IAAD,CAAR,CAAYqf,KAAZ,CAAkB/C,KAAlB,CAAwB7K,WAAxB,GAAsC6G,QAAK,CAAC7G,WAA5C,CAAA;AACD,KAAA;;AACD,IAAA,IAAGgC,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA;;MAGA,KAAI,IAAI7Y,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;QAC3B0N,QAAQ,CAAC1N,IAAD,CAAR,CAAY0b,OAAZ,CAAoBja,IAApB,CAAyBgS,IAAzB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAG9O,MAAM,IAAIkS,KAAK,CAACiB,OAAN,CAAcnT,MAAM,CAACmB,QAArB,CAAV,IAA4CnB,MAAM,CAACmB,QAAP,CAAgBjF,MAA/D,EAAuE;IACrE,IAAI4S,IAAC,GAAG2H,iBAAiB,CAACzW,MAAM,CAACmB,QAAR,EAAkB6a,MAAlB,EAA0BzT,QAA1B,CAAzB,CAAA;;AACA,IAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,KAAI,IAAIrB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;AAC3B0N,MAAAA,QAAQ,CAAC1N,IAAD,CAAR,CAAYqf,KAAZ,CAAkB/C,KAAlB,CAAwB0H,cAAxB,GAAyC1L,QAAK,CAAC0L,cAA/C,CAAA;AACD,KAAA;;AACD,IAAA,IAAGvQ,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA;;MAGA,KAAI,IAAI7Y,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;QAC3B0N,QAAQ,CAAC1N,IAAD,CAAR,CAAY0b,OAAZ,CAAoBja,IAApB,CAAyBgS,IAAzB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAG9O,MAAM,IAAIkS,KAAK,CAACiB,OAAN,CAAcnT,MAAM,CAACsf,gBAArB,CAAV,IAAoDtf,MAAM,CAACsf,gBAAP,CAAwBpjB,MAA/E,EAAuF;IACrF,IAAI4S,IAAC,GAAG8H,mBAAmB,CAAC5W,MAAM,CAACsf,gBAAR,EAA0BtD,MAA1B,EAAkCzT,QAAlC,CAA3B,CAAA;;AACA,IAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;IACA,KAAI,IAAIrB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;AAC3B0N,MAAAA,QAAQ,CAAC1N,IAAD,CAAR,CAAYqf,KAAZ,CAAkB/C,KAAlB,CAAwB2H,gBAAxB,GAA2C3L,QAAK,CAAC2L,gBAAjD,CAAA;AACD,KAAA;;AACD,IAAA,IAAGxQ,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA;;MAGA,KAAI,IAAI7Y,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;QAC3B0N,QAAQ,CAAC1N,IAAD,CAAR,CAAY0b,OAAZ,CAAoBja,IAApB,CAAyBgS,IAAzB,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AACF,GAAA;;AACD,EAAA,IAAG9O,MAAM,IAAIA,MAAM,CAACqB,MAApB,EAA4B;IAC1B,KAAI,IAAIhG,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;AAC3B0N,MAAAA,QAAQ,CAAC1N,IAAD,CAAR,CAAYqf,KAAZ,CAAkB/C,KAAlB,CAAwB4H,eAAxB,GAA0C,CAACvf,MAAM,CAACqB,MAAR,CAA1C,CAAA;AACD,KAAA;AACF,GAAA;;EACD,IAAG,CAACrB,MAAJ,EAAY;IACV,KAAI,IAAI3E,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAGuG,GAAnB,EAAwBvG,IAAC,EAAzB,EAA6B;AAC3B0N,MAAAA,QAAQ,CAAC1N,IAAD,CAAR,CAAYqf,KAAZ,CAAkB/C,KAAlB,CAAwB7K,WAAxB,GAAsC,CAAC,CAAD,CAAtC,CAAA;AACD,KAAA;AACF,GAAA;;AACDjO,EAAAA,GAAG,CAACkK,QAAJ,GAAe,CAACiO,KAAD,CAAf,CAAA;AACD,CAAA;;AAED,SAASuH,SAAT,CAAmB9I,IAAnB,EAAyBoI,MAAzB,EAAiCxgB,KAAjC,EAAwCkL,QAAxC,EAAkDD,gBAAlD,EAAoE4L,MAApE,EAA4E;AAC1E;AACA;AACA;EACA,OAAM2J,MAAM,CAAC9U,QAAP,IAAmB8U,MAAM,CAAC9U,QAAP,CAAgB7M,MAAhB,KAA2B,CAApD,EAAuD;AACrD2hB,IAAAA,MAAM,GAAGA,MAAM,CAAC9U,QAAP,CAAgB,CAAhB,CAAT,CAAA;AACD,GAAA;;AACD,EAAA,IAAIyW,WAAW,GAAG3B,MAAM,CAACnF,IAAzB,CAAA;EACA,IAAIW,IAAI,GAAGmG,WAAW,CAAC7H,KAAZ,CAAkB0B,IAAlB,IAA0B,CAArC,CAAA;EACA,IAAIC,GAAG,GAAGkG,WAAW,CAAC7H,KAAZ,CAAkB2B,GAAlB,IAAyB,CAAnC,CAAA;AACA,EAAA,IAAIza,GAAG,GAAG;AACRuc,IAAAA,OAAO,EAAE,WADD;AAERV,IAAAA,KAAK,EAAE;AACL/C,MAAAA,KAAK,EAAE;AACLrX,QAAAA,QAAQ,EAAE,UADL;AAELL,QAAAA,IAAI,EAAE,MAAA;AAFD,OAAA;KAHD;AAQR8W,IAAAA,OAAO,EAAE,EAAA;GARX,CAAA;AAUA,EAAA,IAAM9V,KAAN,GAA6EwU,IAA7E,CAAMxU,KAAN;AAAA,MAAa8F,MAAb,GAA6E0O,IAA7E,CAAa1O,MAAb;MAA6E0O,UAAAA,GAAAA,IAA7E,CAAqB/K,IAArB;AAAA,MAAA,eAAA,GAAA,UAAA,CAA6BqB,IAA7B;MAAqCtL,MAArC,mBAAqCA,MAArC;MAA6CO,OAA7C,mBAA6CA,OAA7C;MAAwDgL,IAAxD,cAAwDA,IAAxD;AAAA,MAA8DC,QAA9D,GAAA,UAAA,CAA8DA,QAA9D,CApB0E;;AAsB1E,EAAA,IAAGD,IAAI,KAAKH,QAAQ,CAAC4T,GAArB,EAA0B;AACxB,IAAA,IAAGxT,QAAH,EAAa;AACXpN,MAAAA,GAAG,CAAC6b,KAAJ,CAAU8B,IAAV,GAAiB,IAAjB,CAAA;AACD,KAFD,MAGK;AACH3d,MAAAA,GAAG,CAAC6b,KAAJ,CAAUhQ,IAAV,GAAiB,IAAjB,CAAA;AACD,KAAA;AACF,GAPD,MAQK;AACH,IAAA,IAAGuB,QAAH,EAAa;AACXpN,MAAAA,GAAG,CAAC6b,KAAJ,CAAUhQ,IAAV,GAAiB,IAAjB,CAAA;AACD,KAFD,MAGK;AACH7L,MAAAA,GAAG,CAAC6b,KAAJ,CAAU8B,IAAV,GAAiB,IAAjB,CAAA;AACD,KAAA;AACF,GArCyE;;;AAuC1E,EAAA,IAAI7E,KAAK,GAAG6H,WAAW,CAAC7H,KAAxB,CAAA;;AACA,EAAA,KAAI,IAAItc,CAAR,IAAasc,KAAb,EAAoB;IAClB,IAAGA,KAAK,CAACzY,cAAN,CAAqB7D,CAArB,CAA2B,IAAA,CAAC,MAAD,EAAS,KAAT,EAAgB,YAAhB,EAA8B,YAA9B,EAA4C,YAA5C,CAA0D6C,CAAAA,OAA1D,CAAkE7C,CAAlE,CAAA,GAAuE,CAAC,CAAtG,EAAyG;MACvGwD,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgBtc,CAAhB,CAAqBsc,GAAAA,KAAK,CAACtc,CAAD,CAA1B,CAAA;AACD,KAAA;AACF,GA5CyE;;;AA8C1E,EAAA,OAAOwD,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB8F,UAAvB,CAAA;EACA,OAAO5e,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB+F,aAAvB,CA/C0E;;EAiD1E,IAAInhB,CAAC,GAAG,EAAR,CAAA;AACA,EAAA,IAAIyf,MAAM,GAAG3e,KAAK,GAAG6W,MAAR,GAAiB5L,gBAA9B,CAAA;;EACA,IAAG4J,KAAK,CAACiB,OAAN,CAAc1S,MAAd,CAAyBA,IAAAA,MAAM,CAACvE,MAAnC,EAA2C;IACzC,IAAI4S,CAAC,GAAG0G,eAAe,CAAC/U,MAAD,EAASub,MAAT,EAAiBzT,QAAjB,CAAvB,CAAA;IACAhM,CAAC,GAAGuS,CAAC,CAAC2G,IAAN,CAAA;IACA5W,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB1W,KAAhB,GAAwB1E,CAAC,CAAC0E,KAA1B,CAAA;IACApC,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5Q,MAAhB,GAAyBxK,CAAC,CAACwK,MAA3B,CAAA;IACA+H,CAAC,CAAC2G,IAAF,GAAShX,SAAT,CAAA;AACA,IAAA,IAAIkV,KAAK,GAAG7E,CAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;AACAmC,IAAAA,GAAG,CAAC6b,KAAJ,CAAUja,MAAV,GAAmBkT,KAAK,CAAClT,MAAzB,CAAA;AACA5B,IAAAA,GAAG,CAAC6b,KAAJ,CAAUrM,QAAV,GAAqBsF,KAAK,CAACtF,QAA3B,CAAA;;AACA,IAAA,IAAGS,CAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,CAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA;AAGArV,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,CAAjB,CAAA,CAAA;AACD,KAAA;AACF,GAfD,MAgBK;AACH,IAAA,OAAOjQ,GAAP,CAAA;AACD,GAAA;;EACD,IAAGqT,KAAK,CAACiB,OAAN,CAAcnS,OAAd,CAA0BA,IAAAA,OAAO,CAAC9E,MAArC,EAA6C;IAC3C,IAAI4S,IAAC,GAAGqF,gBAAgB,CAACnT,OAAD,EAAUgb,MAAV,EAAkBzT,QAAlB,CAAxB,CAAA;;AACA,IAAA,IAAIoL,QAAK,GAAG7E,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAZ,CAAA;;AACA,IAAA,IAAGiX,QAAK,CAAC3S,OAAN,KAAkB,CAArB,EAAwB;MACtBnC,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB3W,OAAhB,GAA0B2S,QAAK,CAAC3S,OAAhC,CAAA;AACD,KAAA;;AACD,IAAA,IAAG8N,IAAC,CAACpS,KAAF,CAAQR,MAAR,GAAiB,CAApB,EAAuB;AACrB4S,MAAAA,IAAC,CAACpS,KAAF,CAAQ,CAAR,CAAa,GAAA;AACXwX,QAAAA,MAAM,EAAE,CAAA;OADV,CAAA;AAGArV,MAAAA,GAAG,CAACkY,OAAJ,CAAYja,IAAZ,CAAiBgS,IAAjB,CAAA,CAAA;AACD,KAAA;AACF,GAlFyE;;;AAoF1E,EAAA,IAAIiF,eAAe,GAAGyL,WAAW,CAAC7H,KAAZ,CAAkB5D,eAAxC,CAAA;AACA,EAAA,IAAI4F,EAAE,GAAG1Y,KAAK,GAAG,GAAjB;AAAA,MAAsB2Y,EAAE,GAAG7S,MAAM,GAAG,GAApC,CAAA;;AACA,EAAA,IAAGgN,eAAH,EAAoB;AAClB,IAAA,IAAIpS,CAAC,GAAGoS,eAAe,CAACiE,KAAhB,CAAsB,GAAtB,CAAR,CAAA;AACA2B,IAAAA,EAAE,GAAG1T,UAAU,CAACtE,CAAC,CAAC,CAAD,CAAF,CAAf,CAAA;AACAiY,IAAAA,EAAE,GAAG3T,UAAU,CAACtE,CAAC,CAAC,CAAD,CAAF,CAAf,CAAA;AACD,GA1FyE;;;EA4F1E9C,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB5D,eAAhB,GAAmC4F,EAAE,GAAGpd,CAAC,CAACR,EAAR,GAAc,GAAd,IAAqB6d,EAAE,GAAGrd,CAAC,CAACP,EAA5B,CAAlC,CAAA;EACA6C,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB0B,IAAhB,GAAuBA,IAAI,GAAG9c,CAAC,CAACR,EAAhC,CAAA;EACA8C,GAAG,CAAC6b,KAAJ,CAAU/C,KAAV,CAAgB2B,GAAhB,GAAsBA,GAAG,GAAG/c,CAAC,CAACP,EAA9B,CAAA;AACA,EAAA,OAAO6C,GAAP,CAAA;AACD,CAAA;;AAED,SAAS6gB,WAAT,CAAqBjK,IAArB,EAA2BkK,GAA3B,EAAgC;AAC9B,EAAA,IAAGlK,IAAI,CAACvW,cAAL,CAAoB,WAApB,CAAH,EAAqC;IACnC,IAAGygB,GAAG,CAACzgB,cAAJ,CAAmBuW,IAAI,CAAC8G,SAAxB,CAAH,EAAuC;MACrC9G,IAAI,CAAC8G,SAAL,GAAiBoD,GAAG,CAAClK,IAAI,CAAC8G,SAAN,CAApB,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,IAAIxT,QAAQ,GAAG0M,IAAI,CAAC1M,QAApB,CAAA;;AACA,EAAA,IAAGmJ,KAAK,CAACiB,OAAN,CAAcpK,QAAd,CAAH,EAA4B;AAC1B,IAAA,KAAI,IAAI1N,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGmH,QAAQ,CAAC7M,MAA9B,EAAsCb,CAAC,GAAGuG,GAA1C,EAA+CvG,CAAC,EAAhD,EAAoD;AAClDqkB,MAAAA,WAAW,CAAC3W,QAAQ,CAAC1N,CAAD,CAAT,EAAcskB,GAAd,CAAX,CAAA;AACD,KAAA;AACF,GAAA;AACF,CAAA;;AAED,IAAIzX,IAAI,GAAG,CAAX,CAAA;AAEe,gBAAA,EAASuN,IAAT,EAAe;AAC5BvO,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,SAAjB,CAAA,CAAA;AACA,EAAA,IAAM0E,aAAN,GAA2DuI,IAA3D,CAAMvI,aAAN;AAAA,MAAqBC,gBAArB,GAA2DsI,IAA3D,CAAqBtI,gBAArB;AAAA,MAAuCE,MAAvC,GAA2DoI,IAA3D,CAAuCpI,MAAvC;AAAA,MAA+ChF,OAA/C,GAA2DoN,IAA3D,CAA+CpN,OAA/C,CAAA;AACA,EAAA,IAAM7I,IAAN,GAA0D6N,MAA1D,CAAM7N,IAAN;AAAA,MAAYyB,KAAZ,GAA0DoM,MAA1D,CAAYpM,KAAZ;AAAA,MAAmB8F,MAAnB,GAA0DsG,MAA1D,CAAmBtG,MAAnB;AAAA,MAA2BgC,QAA3B,GAA0DsE,MAA1D,CAA2BtE,QAA3B;AAAA,MAAqCT,gBAArC,GAA0D+E,MAA1D,CAAqC/E,gBAArC,CAAA;EACA,IAAI8T,MAAM,GAAG,EAAb,CAAA;AACA,EAAA,IAAIvd,GAAG,GAAG;IACRqJ,IAAI,EAAEA,IAAI,EADF;AAER1I,IAAAA,IAAI,EAAJA,IAFQ;AAGR4b,IAAAA,OAAO,EAAE,KAHD;AAIRV,IAAAA,KAAK,EAAE;AACL/C,MAAAA,KAAK,EAAE;AACLrX,QAAAA,QAAQ,EAAE,UADL;AAELW,QAAAA,KAAK,EAALA,KAFK;QAGL8F,MAAM,EAANA,MAHK;;AAAA,OAAA;KALD;AAYRgC,IAAAA,QAAQ,EAAE,EAZF;AAaRV,IAAAA,OAAO,EAAE+T,MAbD;AAcRwD,IAAAA,IAAI,EAAE,KAAA;GAdR,CAAA;AAgBAtB,EAAAA,aAAa,CAACzf,GAAD,EAAMkK,QAAN,EAAgBV,OAAhB,EAAyB+T,MAAzB,EAAiClP,aAAjC,EAAgDC,gBAAhD,EAAkE7E,gBAAlE,EAAoF,CAApF,CAAb,CArB4B;;EAuB5B,IAAIqX,GAAG,GAAG,EAAV;MAAcra,KAAK,GAAG,CAAtB;AAAA,MAAyBua,EAAE,GAAGzD,MAAM,CAAClgB,MAArC,CAAA;;AACA,EAAA,KAAI,IAAIb,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAGwa,MAAM,CAAClgB,MAA5B,EAAoCb,CAAC,GAAGuG,GAAxC,EAA6CvG,CAAC,EAA9C,EAAkD;AAChD,IAAA,IAAI0D,IAAI,GAAGqd,MAAM,CAAC/gB,CAAD,CAAjB,CAAA;;AACA,IAAA,IAAG0D,IAAH,EAAS;MACP,IAAI+gB,GAAG,GAAGxa,KAAV,CAAA;AACAqa,MAAAA,GAAG,CAAC5gB,IAAI,CAACkM,EAAN,CAAH,GAAe3F,KAAK,EAApB,CAAA;MACAvG,IAAI,CAACkM,EAAL,GAAU6U,GAAV,CAAA;AACD,KAJD,MAKK;AACH1D,MAAAA,MAAM,CAACzW,MAAP,CAActK,CAAd,EAAiB,CAAjB,CAAA,CAAA;MACAA,CAAC,EAAA,CAAA;MACDuG,GAAG,EAAA,CAAA;AACJ,KAAA;AACF,GAAA;;AACD,EAAA,IAAGie,EAAE,GAAGzD,MAAM,CAAClgB,MAAf,EAAuB;AACrBwjB,IAAAA,WAAW,CAAC7gB,GAAD,EAAM8gB,GAAN,CAAX,CAAA;;AACA,IAAA,KAAI,IAAItkB,IAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGwa,MAAM,CAAClgB,MAA5B,EAAoCb,IAAC,GAAGuG,KAAxC,EAA6CvG,IAAC,EAA9C,EAAkD;AAChDqkB,MAAAA,WAAW,CAACtD,MAAM,CAAC/gB,IAAD,CAAP,EAAYskB,GAAZ,CAAX,CAAA;AACD,KAAA;AACF,GA1C2B;;;AA4C5B,EAAA,IAAII,EAAE,GAAGlhB,GAAG,CAACkK,QAAb,CAAA;;AACA,EAAA,KAAI,IAAI1N,IAAC,GAAG,CAAR,EAAWuG,KAAG,GAAGme,EAAE,CAAC7jB,MAAxB,EAAgCb,IAAC,GAAGuG,KAApC,EAAyCvG,IAAC,EAA1C,EAA8C;AAC5C,IAAA,IAAI2b,KAAK,GAAG+I,EAAE,CAAC1kB,IAAD,CAAd,CAAA;;IACA,IAAG2b,KAAK,CAAC/M,QAAT,EAAmB;AACjB,MAAA,IAAI+V,UAAU,GAAG;QACfxgB,IAAI,EAAEwX,KAAK,CAACxX,IADG;QAEfoL,UAAU,EAAEoM,KAAK,CAACpM,UAFH;QAGfC,kBAAkB,EAAEmM,KAAK,CAACnM,kBAHX;QAIfC,mBAAmB,EAAEkM,KAAK,CAAClM,mBAJZ;QAKfC,cAAc,EAAEiM,KAAK,CAACjM,cALP;QAMfC,eAAe,EAAEgM,KAAK,CAAChM,eANR;QAOf0N,IAAI,EAAE1B,KAAK,CAAC0B,IAPG;QAQf3B,OAAO,EAAEC,KAAK,CAACD,OAAAA;OARjB,CAAA;AAUAgJ,MAAAA,EAAE,CAACpa,MAAH,CAAUtK,IAAV,EAAa,CAAb,CAAA,CAAA;AACA4kB,MAAAA,MAAM,CAACD,UAAD,EAAanhB,GAAb,CAAN,CAAA;AACA,MAAA,MAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAOA,GAAP,CAAA;AACD;;AC1zCc,aAAA,EAASsI,QAAT,EAAmB;AAChC,EAAA,IAAG,CAACA,QAAQ,CAAC2T,IAAb,EAAmB;AACjB,IAAA,IAAG,OAAOA,KAAP,KAAgB,WAAnB,EAAgC;AAC9B,MAAA,OAAO3T,QAAQ,CAAC2T,IAAT,GAAgBA,KAAvB,CAAA;AACD,KAAA;;AACD,IAAA,IAAIA,KAAI,GAAG3T,QAAQ,CAAC2T,IAAT,GAAgB,EAA3B,CAAA;;IACC,CAAW,YAAA;MACV,IAAIlW,QAAQ,GAAG,EAAA,CAAGA,QAAlB,CAAA;;MAEA,SAASsb,MAAT,CAAgB/f,IAAhB,EAAsB;QACpB,OAAO,UAAS0X,GAAT,EAAc;UACnB,OAAOjT,QAAQ,CAACub,IAAT,CAActI,GAAd,CAAuB,KAAA,UAAA,GAAa1X,IAAb,GAAoB,GAAlD,CAAA;SADF,CAAA;AAGD,OAAA;;AAED,MAAA,IAAIigB,QAAQ,GAAGF,MAAM,CAAC,QAAD,CAArB,CAAA;AACA,MAAA,IAAIG,QAAQ,GAAGH,MAAM,CAAC,QAAD,CAArB,CAAA;AACA,MAAA,IAAII,UAAU,GAAGJ,MAAM,CAAC,UAAD,CAAvB,CAAA;AACA,MAAA,IAAIK,QAAQ,GAAGL,MAAM,CAAC,QAAD,CAArB,CAAA;AACA,MAAA,IAAIM,SAAS,GAAGN,MAAM,CAAC,SAAD,CAAtB,CAAA;;MAEA,SAASnB,CAAT,CAAWpQ,CAAX,EAAc;AACZ,QAAA,OAAOA,CAAC,GAAG,EAAJ,GAAS,GAAMA,GAAAA,CAAf,GAAmBA,CAA1B,CAAA;AACD,OAAA;;MAED,IAAG,CAAC2R,UAAU,CAACG,IAAI,CAACC,SAAL,CAAeC,MAAhB,CAAd,EAAuC;AAErCF,QAAAA,IAAI,CAACC,SAAL,CAAeC,MAAf,GAAwB,YAAW;UAEjC,OAAOC,QAAQ,CAAC,IAAA,CAAKC,OAAL,EAAD,CAAR,GACH,IAAKC,CAAAA,cAAL,EAAwB,GAAA,GAAxB,GACF/B,CAAC,CAAC,IAAA,CAAKgC,WAAL,EAAA,GAAqB,CAAtB,CADC,GAC0B,GAD1B,GAEFhC,CAAC,CAAC,IAAA,CAAKiC,UAAL,EAAD,CAFC,GAEqB,GAFrB,GAGFjC,CAAC,CAAC,IAAA,CAAKkC,WAAL,EAAD,CAHC,GAGsB,GAHtB,GAIFlC,CAAC,CAAC,IAAKmC,CAAAA,aAAL,EAAD,CAJC,GAIwB,GAJxB,GAKFnC,CAAC,CAAC,IAAA,CAAKoC,aAAL,EAAD,CALC,GAKwB,GANrB,GAOH,IAPJ,CAAA;SAFF,CAAA;;AAYAC,QAAAA,MAAM,CAACV,SAAP,CAAiBC,MAAjB,GACEtd,MAAM,CAACqd,SAAP,CAAiBC,MAAjB,GACEU,OAAO,CAACX,SAAR,CAAkBC,MAAlB,GAA2B,YAAW;UACpC,OAAO,IAAA,CAAKE,OAAL,EAAP,CAAA;SAHN,CAAA;AAKD,OAAA;;MAED,IAAIlH,EAAJ,EACE2H,SADF,EAEEC,GAFF,EAGEC,MAHF,EAIEC,IAJF,EAKEC,GALF,CAAA;;MAOA,SAASC,KAAT,CAAeC,MAAf,EAAuB;QACrBN,SAAS,CAAC/d,SAAV,GAAsB,CAAtB,CAAA;AACA,QAAA,OAAO+d,SAAS,CAAC5V,IAAV,CAAekW,MAAf,CAAyB,GAAA,GAAA,GAAMA,MAAM,CAAClf,OAAP,CAAe4e,SAAf,EAA0B,UAASjb,CAAT,EAAY;AAC1E,UAAA,IAAIvC,CAAC,GAAG2d,IAAI,CAACpb,CAAD,CAAZ,CAAA;UACA,OAAOga,QAAQ,CAACvc,CAAD,CAAR,GACHA,CADG,GAEH,KAAA,GAAQ,CAAC,MAAA,GAASuC,CAAC,CAACwb,UAAF,CAAa,CAAb,CAAgBjd,CAAAA,QAAhB,CAAyB,EAAzB,CAAV,EAAwCwJ,KAAxC,CAA8C,CAAC,CAA/C,CAFZ,CAAA;AAGD,SALqC,CAAN,GAK3B,GALE,GAKI,GAAMwT,GAAAA,MAAN,GAAe,GAL1B,CAAA;AAMD,OAAA;;AAGD,MAAA,SAAS/G,GAAT,CAAanG,GAAb,EAAkBoN,MAAlB,EAA0B;AACxB,QAAA,IAAIzmB,CAAJ;AAAA,YAEE0B,CAFF;AAAA,YAGE4E,CAHF;AAAA,YAIEzF,MAJF;YAKE6lB,IAAI,GAAGR,GALT;AAAA,YAMES,OANF;AAAA,YAOEtlB,KAAK,GAAGolB,MAAM,CAACpN,GAAD,CAPhB,CAAA;;AAQA,QAAA,IAAGhY,KAAK,IAAI0jB,QAAQ,CAAC1jB,KAAD,CAAjB,IACD4jB,UAAU,CAAC5jB,KAAK,CAACikB,MAAP,CADZ,EAC4B;AAC1BjkB,UAAAA,KAAK,GAAGA,KAAK,CAACikB,MAAN,CAAajM,GAAb,CAAR,CAAA;AACD,SAAA;;AACD,QAAA,IAAG4L,UAAU,CAACoB,GAAD,CAAb,EAAoB;UAClBhlB,KAAK,GAAGglB,GAAG,CAACvB,IAAJ,CAAS2B,MAAT,EAAiBpN,GAAjB,EAAsBhY,KAAtB,CAAR,CAAA;AACD,SAAA;;AACD,QAAA,IAAG2jB,QAAQ,CAAC3jB,KAAD,CAAX,EAAoB;UAClB,OAAOilB,KAAK,CAACjlB,KAAD,CAAZ,CAAA;AACD,SAFD,MAGK,IAAG6jB,QAAQ,CAAC7jB,KAAD,CAAX,EAAoB;UACvB,OAAOkkB,QAAQ,CAAClkB,KAAD,CAAR,GAAkB0kB,MAAM,CAAC1kB,KAAD,CAAxB,GAAkC,MAAzC,CAAA;SADG,MAGA,IAAG8jB,SAAS,CAAC9jB,KAAD,CAAT,IAAoBA,KAAK,KAAK,IAAjC,EAAuC;UAC1C,OAAO0kB,MAAM,CAAC1kB,KAAD,CAAb,CAAA;AACD,SAFI,MAGA;UACH,IAAG,CAACA,KAAJ,EAAW;AACT,YAAA,OAAO,MAAP,CAAA;AACD,WAAA;;AACD6kB,UAAAA,GAAG,IAAIC,MAAP,CAAA;AACAQ,UAAAA,OAAO,GAAG,EAAV,CAAA;;AACA,UAAA,IAAG9P,KAAK,CAACiB,OAAN,CAAczW,KAAd,CAAH,EAAyB;YACvBR,MAAM,GAAGQ,KAAK,CAACR,MAAf,CAAA;;YACA,KAAIb,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGa,MAAf,EAAuBb,CAAC,IAAI,CAA5B,EAA+B;cAC7B2mB,OAAO,CAAC3mB,CAAD,CAAP,GAAawf,GAAG,CAACxf,CAAD,EAAIqB,KAAJ,CAAH,IAAiB,MAA9B,CAAA;AACD,aAAA;;AACDiF,YAAAA,CAAC,GAAGqgB,OAAO,CAAC9lB,MAAR,KAAmB,CAAnB,GACA,IADA,GAEAqlB,GAAG,GACD,KAAQA,GAAAA,GAAR,GAAcS,OAAO,CAACnD,IAAR,CAAa,KAAQ0C,GAAAA,GAArB,CAAd,GAA0C,IAA1C,GAAiDQ,IAAjD,GAAwD,GADvD,GAED,GAAMC,GAAAA,OAAO,CAACnD,IAAR,CAAa,GAAb,CAAN,GAA0B,GAJhC,CAAA;AAKA0C,YAAAA,GAAG,GAAGQ,IAAN,CAAA;AACA,YAAA,OAAOpgB,CAAP,CAAA;AACD,WAAA;;AACD,UAAA,IAAG+f,GAAG,IAAItB,QAAQ,CAACsB,GAAD,CAAlB,EAAyB;YACvBxlB,MAAM,GAAGwlB,GAAG,CAACxlB,MAAb,CAAA;;YACA,KAAIb,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGa,MAAf,EAAuBb,CAAC,IAAI,CAA5B,EAA+B;AAC7B,cAAA,IAAGglB,QAAQ,CAACqB,GAAG,CAACrmB,CAAD,CAAJ,CAAX,EAAqB;AACnB0B,gBAAAA,CAAC,GAAG2kB,GAAG,CAACrmB,CAAD,CAAP,CAAA;AACAsG,gBAAAA,CAAC,GAAGkZ,GAAG,CAAC9d,CAAD,EAAIL,KAAJ,CAAP,CAAA;;AACA,gBAAA,IAAGiF,CAAH,EAAM;AACJqgB,kBAAAA,OAAO,CAACllB,IAAR,CAAa6kB,KAAK,CAAC5kB,CAAD,CAAL,IAAYwkB,GAAG,GAAG,IAAH,GAAU,GAAzB,IAAgC5f,CAA7C,CAAA,CAAA;AACD,iBAAA;AACF,eAAA;AACF,aAAA;AACF,WAXD,MAYK;YACH,KAAI5E,CAAJ,IAASL,KAAT,EAAgB;AACd,cAAA,IAAGA,KAAK,CAACwC,cAAN,CAAqBnC,CAArB,CAAH,EAA4B;AAC1B4E,gBAAAA,CAAC,GAAGkZ,GAAG,CAAC9d,CAAD,EAAIL,KAAJ,CAAP,CAAA;;AACA,gBAAA,IAAGiF,CAAH,EAAM;AACJqgB,kBAAAA,OAAO,CAACllB,IAAR,CAAa6kB,KAAK,CAAC5kB,CAAD,CAAL,IAAYwkB,GAAG,GAAG,IAAH,GAAU,GAAzB,IAAgC5f,CAA7C,CAAA,CAAA;AACD,iBAAA;AACF,eAAA;AACF,aAAA;AACF,WAAA;;AACDA,UAAAA,CAAC,GAAGqgB,OAAO,CAAC9lB,MAAR,KAAmB,CAAnB,GACA,IADA,GAEAqlB,GAAG,GACD,KAAQA,GAAAA,GAAR,GAAcS,OAAO,CAACnD,IAAR,CAAa,KAAQ0C,GAAAA,GAArB,CAAd,GAA0C,IAA1C,GAAiDQ,IAAjD,GAAwD,GADvD,GAED,GAAMC,GAAAA,OAAO,CAACnD,IAAR,CAAa,GAAb,CAAN,GAA0B,GAJhC,CAAA;AAKA0C,UAAAA,GAAG,GAAGQ,IAAN,CAAA;AACA,UAAA,OAAOpgB,CAAP,CAAA;AACD,SAAA;AACF,OAAA;;AAED,MAAA,IAAG,CAAC2e,UAAU,CAACxF,KAAI,CAACC,SAAN,CAAd,EAAgC;AAC9BuG,QAAAA,SAAS,GAAG,0HAAZ,CAAA;AACAG,QAAAA,IAAI,GAAG;AACL,UAAA,IAAA,EAAM,KADD;AAEL,UAAA,IAAA,EAAM,KAFD;AAGL,UAAA,IAAA,EAAM,KAHD;AAIL,UAAA,IAAA,EAAM,KAJD;AAKL,UAAA,IAAA,EAAM,KALD;AAML,UAAA,GAAA,EAAK,KANA;UAOL,IAAM,EAAA,MAAA;SAPR,CAAA;;QASA3G,KAAI,CAACC,SAAL,GAAiB,UAASre,KAAT,EAAgBulB,QAAhB,EAA0BC,KAA1B,EAAiC;AAChD,UAAA,IAAI7mB,CAAJ,CAAA;AACAkmB,UAAAA,GAAG,GAAG,EAAN,CAAA;AACAC,UAAAA,MAAM,GAAG,EAAT,CAAA;;AACA,UAAA,IAAGjB,QAAQ,CAAC2B,KAAD,CAAX,EAAoB;YAClB,KAAI7mB,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG6mB,KAAf,EAAsB7mB,CAAC,IAAI,CAA3B,EAA8B;AAC5BmmB,cAAAA,MAAM,IAAI,GAAV,CAAA;AACD,aAAA;AACF,WAJD,MAKK,IAAGnB,QAAQ,CAAC6B,KAAD,CAAX,EAAoB;AACvBV,YAAAA,MAAM,GAAGU,KAAT,CAAA;AACD,WAAA;;AACDR,UAAAA,GAAG,GAAGO,QAAN,CAAA;;UACA,IAAGA,QAAQ,IAAI,CAAC3B,UAAU,CAAC2B,QAAD,CAAvB,KACA,CAAC7B,QAAQ,CAAC6B,QAAD,CAAT,IACC,CAAC1B,QAAQ,CAAC0B,QAAQ,CAAC/lB,MAAV,CAFV,CAAH,EAEiC;AAC/B,YAAA,MAAM,IAAI8V,KAAJ,CAAU,gBAAV,CAAN,CAAA;AACD,WAAA;;UACD,OAAO6I,GAAG,CAAC,EAAD,EAAK;YAAE,EAAIne,EAAAA,KAAAA;AAAN,WAAL,CAAV,CAAA;SAlBF,CAAA;AAoBD,OAAA;;AACD,MAAA,IAAG,CAAC4jB,UAAU,CAACxF,KAAI,CAACxN,KAAN,CAAd,EAA4B;AAC1BqM,QAAAA,EAAE,GAAG,0GAAL,CAAA;;AACAmB,QAAAA,KAAI,CAACxN,KAAL,GAAa,UAAS3C,IAAT,EAAewX,OAAf,EAAwB;AACnC,UAAA,IAAI1gB,CAAJ,CAAA;;AAEA,UAAA,SAAS2gB,IAAT,CAAcN,MAAd,EAAsBpN,GAAtB,EAA2B;AACzB,YAAA,IAAI3X,CAAJ;AAAA,gBAAO4E,CAAP;AAAA,gBAAUjF,KAAK,GAAGolB,MAAM,CAACpN,GAAD,CAAxB,CAAA;;AACA,YAAA,IAAGhY,KAAK,IAAI0jB,QAAQ,CAAC1jB,KAAD,CAApB,EAA6B;cAC3B,KAAIK,CAAJ,IAASL,KAAT,EAAgB;AACd,gBAAA,IAAGA,KAAK,CAACwC,cAAN,CAAqBnC,CAArB,CAAH,EAA4B;AAC1B4E,kBAAAA,CAAC,GAAGygB,IAAI,CAAC1lB,KAAD,EAAQK,CAAR,CAAR,CAAA;;kBACA,IAAG4E,CAAC,KAAKlD,SAAT,EAAoB;AAClB/B,oBAAAA,KAAK,CAACK,CAAD,CAAL,GAAW4E,CAAX,CAAA;AACD,mBAFD,MAGK;oBACH,OAAOjF,KAAK,CAACK,CAAD,CAAZ,CAAA;AACD,mBAAA;AACF,iBAAA;AACF,eAAA;AACF,aAAA;;YACD,OAAOolB,OAAO,CAAChC,IAAR,CAAa2B,MAAb,EAAqBpN,GAArB,EAA0BhY,KAA1B,CAAP,CAAA;AACD,WAAA;;AAEDiO,UAAAA,IAAI,GAAGyW,MAAM,CAACzW,IAAD,CAAb,CAAA;UACAgP,EAAE,CAACpW,SAAH,GAAe,CAAf,CAAA;;AACA,UAAA,IAAGoW,EAAE,CAACjO,IAAH,CAAQf,IAAR,CAAH,EAAkB;YAChBA,IAAI,GAAGA,IAAI,CAACjI,OAAL,CAAaiX,EAAb,EAAiB,UAAStT,CAAT,EAAY;AAClC,cAAA,OAAO,QACL,CAAC,MAAA,GAASA,CAAC,CAACwb,UAAF,CAAa,CAAb,CAAA,CAAgBjd,QAAhB,CAAyB,EAAzB,CAAV,EAAwCwJ,KAAxC,CAA8C,CAAC,CAA/C,CADF,CAAA;AAED,aAHM,CAAP,CAAA;AAID,WAAA;;UACD,IAAG,eAAA,CACA1C,IADA,CACKf,IAAI,CAACjI,OAAL,CAAa,qCAAb,EAAoD,GAApD,CACHA,CAAAA,OADG,CACK,kEADL,EACyE,GADzE,CAAA,CAEHA,OAFG,CAEK,sBAFL,EAE6B,EAF7B,CADL,CAAH,EAG2C;YAEzC,IAAI2f,KAAK,GAAGC,IAAZ,CAAA;AACA7gB,YAAAA,CAAC,GAAG4gB,KAAK,CAAC,MAAM1X,IAAN,GAAa,GAAd,CAAT,CAAA;AACA,YAAA,OAAO2V,UAAU,CAAC6B,OAAD,CAAV,GACHC,IAAI,CAAC;cAAE,EAAI3gB,EAAAA,CAAAA;AAAN,aAAD,EAAY,EAAZ,CADD,GAEHA,CAFJ,CAAA;AAGD,WAAA;;AACD,UAAA,MAAM,IAAI8gB,WAAJ,CAAgB,YAAhB,CAAN,CAAA;SAxCF,CAAA;AA0CD,OAAA;AACF,KAnNA,GAAD,CAAA;;AAoNA,IAAA,OAAOzH,KAAP,CAAA;AACD,GAAA;;EACD,OAAO3T,QAAQ,CAAC2T,IAAhB,CAAA;AACD;;ACxND,IAAQhhB,OAAR,GAA2B0oB,KAA3B,CAAQ1oB,OAAR;AAAA,IAAiBK,KAAjB,GAA2BqoB,KAA3B,CAAiBroB,KAAjB,CAAA;;AAEA+X,KAAK,CAACiB,OAAN,GAAgBjB,KAAK,CAACiB,OAAN,IAAiB,UAAS/X,GAAT,EAAc;EAC7C,OAAOA,GAAG,YAAY8W,KAAtB,CAAA;AACD,CAFD,CAAA;;AAIAA,KAAK,CAACwO,SAAN,CAAgBxiB,OAAhB,GAA0BgU,KAAK,CAACwO,SAAN,CAAgBxiB,OAAhB,IAA2B,UAAS3B,CAAT,EAAY;AAC/D,EAAA,KAAI,IAAIlB,CAAC,GAAG,CAAR,EAAWuG,GAAG,GAAG,IAAA,CAAK1F,MAA1B,EAAkCb,CAAC,GAAGuG,GAAtC,EAA2CvG,CAAC,EAA5C,EAAgD;AAC9C,IAAA,IAAG,IAAKA,CAAAA,CAAL,CAAYkB,KAAAA,CAAf,EAAkB;AAChB,MAAA,OAAOlB,CAAP,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAO,CAAC,CAAR,CAAA;AACD,CAPD,CAAA;;AASA,IAAI,CAAC6W,KAAK,CAACwO,SAAN,CAAgB+B,OAArB,EAA8B;EAC5BvQ,KAAK,CAACwO,SAAN,CAAgB+B,OAAhB,GAA0B,UAASC,QAAT,EAAmBC,OAAnB,EAA4B;IACpD,IAAIC,CAAJ,EAAO7lB,CAAP,CAAA;;IACA,IAAI,IAAA,IAAQ,IAAZ,EAAkB;AAChB,MAAA,MAAM,IAAI8lB,SAAJ,CAAc,8BAAd,CAAN,CAAA;AACD,KAAA;;AACD,IAAA,IAAIC,CAAC,GAAGC,MAAM,CAAC,IAAD,CAAd,CAAA;AACA,IAAA,IAAInhB,GAAG,GAAGkhB,CAAC,CAAC5mB,MAAF,KAAa,CAAvB,CAAA;;AACA,IAAA,IAAI,OAAOwmB,QAAP,KAAoB,UAAxB,EAAoC;AAClC,MAAA,MAAM,IAAIG,SAAJ,CAAcH,QAAQ,GAAG,oBAAzB,CAAN,CAAA;AACD,KAAA;;AACD,IAAA,IAAIxP,SAAS,CAAChX,MAAV,GAAmB,CAAvB,EAA0B;AACxB0mB,MAAAA,CAAC,GAAGD,OAAJ,CAAA;AACD,KAAA;;AACD5lB,IAAAA,CAAC,GAAG,CAAJ,CAAA;;IACA,OAAOA,CAAC,GAAG6E,GAAX,EAAgB;AACd,MAAA,IAAIohB,MAAJ,CAAA;;MACA,IAAIjmB,CAAC,IAAI+lB,CAAT,EAAY;AACVE,QAAAA,MAAM,GAAGF,CAAC,CAAC/lB,CAAD,CAAV,CAAA;QACA2lB,QAAQ,CAACvC,IAAT,CAAcyC,CAAd,EAAiBI,MAAjB,EAAyBjmB,CAAzB,EAA4B+lB,CAA5B,CAAA,CAAA;AACD,OAAA;;MACD/lB,CAAC,EAAA,CAAA;AACF,KAAA;GArBH,CAAA;AAuBD,CAAA;;AAED,IAAIoK,QAAQ,GAAGD,CAAC,CAACC,QAAF,GAAaD,CAAC,CAACC,QAAF,IAAc,EAA1C,CAAA;AACA8b,IAAI,CAAC9b,QAAD,CAAJ,CAAA;;AAEAA,QAAQ,CAAC+b,QAAT,GAAqB,YAAW;AAC9B,EAAA,IAAIC,IAAJ,CAAA;;EACA,IAAI;AACFA,IAAAA,IAAI,GAAG,IAAIC,cAAJ,CAAmB,4BAAnB,CAAP,CAAA;GADF,CAEE,OAAMzmB,CAAN,EAAS;IACT0mB,KAAK,CAAC,0BAAD,CAAL,CAAA;AACD,GAAA;;AACD,EAAA,OAAO,UAASljB,IAAT,EAAesV,IAAf,EAAqB;AAC1B,IAAA,IAAG0N,IAAH,EAAS;AACP,MAAA,IAAG1N,IAAI,IAAIA,IAAI,YAAYsN,MAA3B,EAAmC;QACjCtN,IAAI,GAAGtO,QAAQ,CAAC2T,IAAT,CAAcC,SAAd,CAAwBtF,IAAxB,CAAP,CAAA;AACD,OAFD,MAGK,IAAGA,IAAI,KAAKhX,SAAZ,EAAuB;AAC1BgX,QAAAA,IAAI,GAAG,WAAP,CAAA;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP,CAAA;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP,CAAA;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,KAAZ,EAAmB;AACtBA,QAAAA,IAAI,GAAG,OAAP,CAAA;AACD,OAAA;;AACD,MAAA,IAAI6N,QAAQ,GAAG,IAAIC,SAAJ,EAAf,CAAA;MACAD,QAAQ,CAACnjB,IAAT,GAAgBA,IAAhB,CAAA;MACAmjB,QAAQ,CAAC7N,IAAT,GAAgBA,IAAhB,CAAA;AACA6N,MAAAA,QAAQ,CAACJ,QAAT,EAAA,CAAA;AACD,KAAA;GArBH,CAAA;AAuBD,CA9BmB,EAApB,CAAA;;AAgCA/b,QAAQ,CAACiG,GAAT,GAAe,UAASgJ,CAAT,EAAY;AACzB,EAAA,IAAIxU,GAAG,GAAGsR,SAAS,CAAChX,MAApB,CAAA;;AACA,EAAA,IAAGgX,SAAS,CAAChX,MAAV,GAAmB,CAAtB,EAAyB;IACvB,KAAI,IAAIb,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuG,GAAnB,EAAwBvG,CAAC,EAAzB,EAA6B;AAC3B,MAAA,IAAI0D,IAAI,GAAGmU,SAAS,CAAC7X,CAAD,CAApB,CAAA;;MACA,IAAG0D,IAAI,KAAKN,SAAZ,EAAuB;AACrBM,QAAAA,IAAI,GAAG,WAAP,CAAA;AACD,OAFD,MAGK,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP,CAAA;AACD,OAAA;;AACDqX,MAAAA,CAAC,IAAI,IAAA,GAAOrX,IAAI,CAAC6F,QAAL,EAAZ,CAAA;AACD,KAAA;;IACDsC,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYE,GAAhC,EAAqC+b,CAArC,CAAA,CAAA;AACD,GAZD,MAaK;IACHlP,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYE,GAAhC,EAAqC+b,CAArC,CAAA,CAAA;AACD,GAAA;AACF,CAlBD,CAAA;;AAoBAjP,QAAQ,CAACmD,IAAT,GAAgB,UAAS8L,CAAT,EAAY;AAC1B,EAAA,IAAIxU,GAAG,GAAGsR,SAAS,CAAChX,MAApB,CAAA;;AACA,EAAA,IAAGgX,SAAS,CAAChX,MAAV,GAAmB,CAAtB,EAAyB;IACvB,KAAI,IAAIb,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuG,GAAnB,EAAwBvG,CAAC,EAAzB,EAA6B;AAC3B,MAAA,IAAI0D,IAAI,GAAGmU,SAAS,CAAC7X,CAAD,CAApB,CAAA;;MACA,IAAG0D,IAAI,KAAKN,SAAZ,EAAuB;AACrBM,QAAAA,IAAI,GAAG,WAAP,CAAA;AACD,OAFD,MAGK,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP,CAAA;AACD,OAAA;;AACDqX,MAAAA,CAAC,IAAI,IAAA,GAAOrX,IAAI,CAAC6F,QAAL,EAAZ,CAAA;AACD,KAAA;;IACDsC,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYG,IAAhC,EAAsC8b,CAAtC,CAAA,CAAA;AACD,GAZD,MAaK;IACHlP,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYG,IAAhC,EAAsC8b,CAAtC,CAAA,CAAA;AACD,GAAA;AACF,CAlBD,CAAA;;AAoBAjP,QAAQ,CAACqB,KAAT,GAAiB,UAAS4N,CAAT,EAAY;AAC3B,EAAA,IAAIxU,GAAG,GAAGsR,SAAS,CAAChX,MAApB,CAAA;;AACA,EAAA,IAAGgX,SAAS,CAAChX,MAAV,GAAmB,CAAtB,EAAyB;IACvB,KAAI,IAAIb,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuG,GAAnB,EAAwBvG,CAAC,EAAzB,EAA6B;AAC3B,MAAA,IAAI0D,IAAI,GAAGmU,SAAS,CAAC7X,CAAD,CAApB,CAAA;;MACA,IAAG0D,IAAI,KAAKN,SAAZ,EAAuB;AACrBM,QAAAA,IAAI,GAAG,WAAP,CAAA;AACD,OAFD,MAGK,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP,CAAA;AACD,OAAA;;AACDqX,MAAAA,CAAC,IAAI,IAAA,GAAOrX,IAAI,CAAC6F,QAAL,EAAZ,CAAA;AACD,KAAA;;IACDsC,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYI,KAAhC,EAAuC6b,CAAvC,CAAA,CAAA;AACD,GAZD,MAaK;IACHlP,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYI,KAAhC,EAAuC6b,CAAvC,CAAA,CAAA;AACD,GAAA;AACF,CAlBD,CAAA;;AAoBA,SAASoN,WAAT,CAAqBzkB,IAArB,EAA2B;EACzB,IAAGA,IAAI,YAAY4M,QAAnB,EAA6B;IAC3B,OAAO7R,OAAO,CAACG,SAAf,CAAA;AACD,GAAA;;EACD,IAAG8E,IAAI,YAAY0kB,UAAnB,EAA+B;IAC7B,OAAO3pB,OAAO,CAACC,WAAf,CAAA;AACD,GAAA;;EACD,IAAGgF,IAAI,YAAYsM,WAAnB,EAAgC;IAC9B,OAAOvR,OAAO,CAACE,YAAf,CAAA;AACD,GAAA;;EACD,OAAOF,OAAO,CAACI,OAAf,CAAA;AACD,CAAA;;AAEDiN,QAAQ,CAACuc,eAAT,GAA2B,YAAW;AACpC,EAAA,IAAIC,UAAU,GAAG1hB,GAAG,CAACC,OAArB,CAAA;AACA,EAAA,IAAI6J,IAAI,GAAG,EAAX,CAFoC;;AAIpC,EAAA,KAAI,IAAI1Q,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIsoB,UAAU,CAACC,QAA/B,EAAyCvoB,CAAC,EAA1C,EAA8C;AAC5C,IAAA,IAAIwoB,QAAQ,GAAGF,UAAU,CAAC5kB,IAAX,CAAgB1D,CAAhB,CAAf,CAAA;AACA,IAAA,IAAI8E,IAAI,GAAGqjB,WAAW,CAACK,QAAD,CAAtB,CAAA;;AACA,IAAA,IAAG1jB,IAAI,KAAKrG,OAAO,CAACG,SAApB,EAA+B;MAC7B8R,IAAI,CAACjP,IAAL,CAAU;QACRmO,EAAE,EAAE4Y,QAAQ,CAAC5Y,EADL;QAERzL,IAAI,EAAEqkB,QAAQ,CAACrkB,IAFP;QAGRyB,KAAK,EAAE4iB,QAAQ,CAAC5iB,KAHR;QAIR8F,MAAM,EAAE8c,QAAQ,CAAC9c,MAJT;AAKR5G,QAAAA,IAAI,EAAJA,IAAAA;OALF,CAAA,CAAA;AAOD,KAAA;AACF,GAAA;;EACD+G,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoB/oB,KAAK,CAACC,IAA1B,EAAgC2R,IAAhC,CAAA,CAAA;AACD,CAlBD,CAAA;;AAoBA,SAAS+X,mBAAT,CAA6B7Y,EAA7B,EAAiC;AAC/B,EAAA,KAAI,IAAI5P,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAI4G,GAAG,CAACC,OAAJ,CAAY0hB,QAAhC,EAA0CvoB,CAAC,EAA3C,EAA+C;IAC7C,IAAMwoB,QAAQ,GAAG5hB,GAAG,CAACC,OAAJ,CAAYnD,IAAZ,CAAiB1D,CAAjB,CAAjB,CAAA;;AACA,IAAA,IAAGwoB,QAAQ,CAAC5Y,EAAT,KAAgBA,EAAnB,EAAuB;AACrB,MAAA,OAAO4Y,QAAP,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,OAAO,IAAP,CAAA;AACD,CAAA;;AAED1c,QAAQ,CAACqS,OAAT,GAAmB,UAASvO,EAAT,EAAa;AAC9B/D,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,OAAjB,CAAA,CAAA;AACA,EAAA,IAAIJ,WAAW,GAAG0b,mBAAmB,CAAC7Y,EAAD,CAArC,CAAA;;EACA,IAAG,CAAC7C,WAAJ,EAAiB;AACflB,IAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,uBAAjB,CAAA,CAAA;IACAtB,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYM,MAAhC,CAAA,CAAA;AACA,IAAA,OAAA;AACD,GAP6B;;;AAS9B,EAAA,IAAIoE,GAAG,GAAGyO,OAAK,CAAClF,WAAD,CAAf,CAAA;AACAlB,EAAAA,CAAC,CAACC,QAAF,CAAW+b,QAAX,CAAoBV,KAAK,CAACroB,KAAN,CAAYK,MAAhC,EAAwCgf,OAAO,CAAC3a,GAAD,CAA/C,EAV8B;;EAY9BqI,CAAC,CAACC,QAAF,CAAW4c,OAAX,EAAA,CAAA;AACA7c,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,QAAjB,CAAA,CAAA;AACD,CAdD,CAAA;;AAgBA,IAAIuD,IAAI,GAAG,EAAX,CAAA;;AACA5E,QAAQ,CAACC,OAAT,GAAmB,UAAS7K,CAAT,EAAY;EAC7BwP,IAAI,CAACjP,IAAL,CAAUP,CAAV,CAAA,CAAA;AACD,CAFD,CAAA;;AAGA4K,QAAQ,CAAC4c,OAAT,GAAmB,YAAW;EAC5B,OAAMhY,IAAI,CAAC7P,MAAX,EAAmB;IACjB6P,IAAI,CAACpM,GAAL,EAAA,CAAW+H,MAAX,EAAA,CAAA;AACD,GAAA;AACF,CAJD,CAAA;;AAMAP,QAAQ,CAAR,QAAA,CAAA,GAAkB,UAASsO,IAAT,EAAe;AAC/BvO,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,QAAjB,CAAA,CAAA;AACAtB,EAAAA,CAAC,CAACC,QAAF,CAAWiG,GAAX,CAAeqI,IAAf,CAAA,CAAA;AACA,EAAA,IAAItT,IAAI,GAAGE,IAAI,CAAC2hB,UAAL,EAAX,CAAA;;EACA,IAAG,CAAC7hB,IAAJ,EAAU;AACR,IAAA,OAAA;AACD,GAAA;;AACD,EAAA,IAAI3C,IAAI,GAAG2C,IAAI,CAACoJ,MAAhB,CAAA;;AACA,EAAA,IAAG,CAAC,SAAUG,CAAAA,IAAV,CAAelM,IAAf,CAAJ,EAA0B;AACxBA,IAAAA,IAAI,IAAI,OAAR,CAAA;AACD,GAAA;;AACD,EAAA,IAAIuf,CAAC,GAAG,IAAI1c,IAAJ,CAAS7C,IAAT,CAAR,CAAA;EACAuf,CAAC,CAACxc,IAAF,CAAO,GAAP,CAAA,CAAA;EACAwc,CAAC,CAACkF,QAAF,GAAa,OAAb,CAAA;EACAlF,CAAC,CAACmF,KAAF,CAAQzO,IAAR,CAAA,CAAA;AACAsJ,EAAAA,CAAC,CAACoF,KAAF,EAAA,CAAA;AACA,EAAA,OAAO,IAAP,CAAA;AACD,CAjBD;;"}