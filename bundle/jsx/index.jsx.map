{"version":3,"file":"index.jsx","sources":["../../es/enums.js","../../es/parse/transform.js","../../es/parse/vector.js","../../es/render.js","../../es/parse/index.js","../../es/convert/path.js","../../es/convert/animate.js","../../es/convert/index.js","../../es/json.js","../../es/index.js"],"sourcesContent":["export default {\n  ES_TYPE: {\n    FOLDER_ITEM: 'FolderItem',\n    FOOTAGE_ITEM: 'FootageItem',\n    COMP_ITEM: 'CompItem',\n    UNKNOWN: 'unknown',\n  },\n  EVENT: {\n    INIT: 'ae2karas:init',\n    LOG: 'ae2karas:log',\n    WARN: 'ae2karas:warn',\n    ERROR: 'ae2karas:error',\n    FINISH: 'ae2karas:finish',\n    CANCEL: 'ae2karas:cancel',\n    ADD_TEMP: 'ae2karas:addTemp',\n    DEL_TEMP: 'ae2karas:delTemp',\n  },\n};\n","const LAYER_TRANSFORM = {\n  'ADBE Anchor Point': 'anchorPoint',\n  'ADBE Position': 'position',\n  'ADBE Position_0': 'position_0',\n  'ADBE Position_1': 'position_1',\n  'ADBE Position_2': 'position_2',\n  'ADBE Scale': 'scale',\n  'ADBE Orientation': 'orientation',\n  'ADBE Rotate X': 'rotateX',\n  'ADBE Rotate Y': 'rotateY',\n  'ADBE Rotate Z': 'rotateZ',\n  'ADBE Opacity': 'opacity',\n};\n\nconst VECTOR_TRANSFORM = {\n  'ADBE Vector Anchor': 'anchorPoint',\n  'ADBE Vector Position': 'position',\n  'ADBE Vector Scale': 'scale',\n  'ADBE Vector Skew': 'skew',\n  'ADBE Vector Skew Axis': 'skewAxis',\n  'ADBE Vector Rotation': 'rotateZ',\n  'ADBE Vector Group Opacity': 'opacity',\n  'ADBE Vector Trim Start': 'start',\n  'ADBE Vector Trim End': 'end',\n};\n\nconst MASK_TRANSFORM = {\n  'ADBE Mask Shape': 'points',\n  'ADBE Mask Opacity': 'opacity',\n};\n\nfunction getPropertyValues(prop, matchName, noEasing) {\n  let { numKeys } = prop;\n  // 根据关键帧数量，2+帧是普通变化，1帧等同于0帧value\n  if(numKeys && numKeys > 1) {\n    let arr = [];\n    for(let i = 1; i <= numKeys; i++) {\n      // 特殊的曲线位移动画用translatePath表示\n      if(i !== numKeys && (matchName === 'ADBE Position' || matchName === 'ADBE Vector Position')) {\n        let v1 = prop.keyValue(i), v2 = prop.keyValue(i + 1);\n        let c1 = prop.keyOutSpatialTangent(i), c2 = prop.keyInSpatialTangent(i + 1);\n        // y = kx + b，看是否有曲线，没有忽略\n        let x1 = v1[0], y1 = v1[1], x2 = v2[0], y2 = v2[1];\n        if((x1 !== x2 || y1 !== y2) && (c1[0] !== 0 || c1[1] !== 0 || c2[0] !== 0 || c2[1] !== 0)) {\n          let p1 = [v1[0] + c1[0], v1[1] + c1[1]], p2 = [v2[0] + c2[0], v2[1] + c2[1]];\n          // 垂直特殊情况\n          if(x1 === 0 && x2 === 0) {\n            if(Math.abs(c1[0]) >= 1 || Math.abs(c2[0]) >= 1) {\n              let o = {\n                time: prop.keyTime(i) * 1000,\n                value: [x1, y1, p1[0], p1[1], p2[0], p2[1], x2, y2],\n              };\n              if(i !== numKeys && !noEasing) {\n                let e = getEasing(prop, i, i + 1);\n                if(e) {\n                  o.easing = e;\n                }\n              }\n              arr.push(o);\n              continue;\n            }\n          }\n          // 二元一次方程\n          else {\n            let k, b;\n            if(x1 === 0) {\n              b = y1;\n              k = (y2 - b) / x2;\n            }\n            else if(x2 === 0) {\n              b = y2;\n              k = (y1 - b) / x1;\n            }\n            else {\n              let r = x1 / x2;\n              b = (y1 - y2 * r) / (1 - r);\n              k = (y1 - b) / x1;\n            }\n            // 精度小于一定认为无效\n            let is1 = Math.abs(k * p1[0] + b - p1[1]) >= 1;\n            let is2 = Math.abs(k * p2[0] + b - p2[1]) >= 1;\n            if(is1 || is2) {\n              let o = {\n                time: prop.keyTime(i) * 1000,\n                value: [x1, y1, p1[0], p1[1], p2[0], p2[1], x2, y2],\n              };\n              if(i !== numKeys && !noEasing) {\n                let e = getEasing(prop, i, i + 1);\n                if(e) {\n                  o.easing = e;\n                }\n              }\n              arr.push(o);\n              continue;\n            }\n          }\n        }\n      }\n      let o = {\n        time: prop.keyTime(i) * 1000,\n        value: prop.keyValue(i),\n      };\n      if(i !== numKeys && !noEasing) {\n        let e = getEasing(prop, i, i + 1);\n        if(e) {\n          o.easing = e;\n        }\n      }\n      arr.push(o);\n    }\n    return arr;\n  }\n  else if(numKeys && numKeys > 0) {\n    return [prop.keyValue(1)];\n  }\n  else {\n    return [prop.value];\n  }\n}\n\n/**\n * https://www.zhihu.com/question/24404065\n * 柄点1的X值 = 关键帧1的影响值/100\n * 柄点1的Y值 = 关键帧1的输出速度/两关键帧平均速度*柄点1的X值\n * 柄点2的X值 = 1 - 关键帧2的影响值/100\n * 柄点2的Y值 = 1 - 关键帧2的输入速度/两关键帧平均速度*柄点2的X值\n * @param prop\n * @param start\n * @param end\n */\nfunction getEasing(prop, start, end) {\n  let t1 = prop.keyTime(start), t2 = prop.keyTime(end);\n  let v1 = prop.keyValue(start), v2 = prop.keyValue(end);\n  let e1 = prop.keyOutTemporalEase(start)[0], e2 = prop.keyInTemporalEase(end)[0];\n  // let c1 = prop.keyOutSpatialTangent(start), c2 = prop.keyInSpatialTangent(end);\n  // $.ae2karas.log(c1);\n  // $.ae2karas.log(c2);\n  let x1 = e1.influence * 0.01, x2 = 1 - e2.influence * 0.01;\n  let y1, y2;\n  let matchName = prop.matchName;\n  if([\n    'ADBE Anchor Point', 'ADBE Position',\n    'ADBE Vector Anchor', 'ADBE Vector Position',\n    'ADBE Scale', 'ADBE Vector Scale',\n    'ADBE Vector Skew'].indexOf(matchName) > -1) {\n    let avSpeedX = Math.abs(v2[0] - v1[0]) / (t2 - t1);\n    let avSpeedY = Math.abs(v2[1] - v1[1]) / (t2 - t1);\n    let avSpeed = Math.sqrt(avSpeedX * avSpeedX + avSpeedY * avSpeedY);\n    if(avSpeed !== 0) {\n      y1 = x1 * e1.speed / avSpeed;\n      y2 = 1 - (1 - x2) * e2.speed / avSpeed;\n    }\n  }\n  else if(v2 !== v1){\n    let avSpeed = Math.abs(v2 - v1) / (t2 - t1);\n    y1 = x1 * e1.speed / avSpeed;\n    y2 = 1 - (1 - x2) * e2.speed / avSpeed;\n  }\n  if(x1 === y1 && x2 === y2 || y1 === undefined || y2 === undefined) {\n    return;\n  }\n  return [x1, y1, x2, y2];\n}\n\nexport function transformLayer(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(LAYER_TRANSFORM.hasOwnProperty(matchName)) {\n        res[LAYER_TRANSFORM[matchName]] = getPropertyValues(item, matchName, false);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformVector(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(VECTOR_TRANSFORM.hasOwnProperty(matchName)) {\n        res[VECTOR_TRANSFORM[matchName]] = getPropertyValues(item, matchName, false);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformMask(prop) {\n  let res = {};\n  for(let i = 1; prop && i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(MASK_TRANSFORM.hasOwnProperty(matchName)) {\n        res[MASK_TRANSFORM[matchName]] = getPropertyValues(item, matchName, true);\n      }\n    }\n  }\n  return res;\n}\n\nexport function transformGeom(prop) {\n  return getPropertyValues(prop, '', true);\n}\n","import { transformVector, transformGeom } from './transform';\n\nfunction group(prop, navigationShapeTree) {\n  let res = {};\n  // 这里是矩形1层，主要关注Groups属性即可，blendMode暂时无视，transform被上钻2层提前\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vectors Group':\n          res.content = content(item, navigationShapeTree);\n          break;\n        case 'ADBE Vector Transform Group':\n          // 奇怪的地方，显示应该下钻2层到如rect同级，可实际提前了\n          res.transform = transformVector(item);\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  res.content.transform = res.transform;\n  return res.content;\n}\n\nfunction content(prop, navigationShapeTree) {\n  // 矩形1下面会多出一层内容层看不见，就是本层，其下面则是可视的子属性层\n  let res = {\n    name: prop.name,\n    content: [],\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vector Shape - Rect':\n          res.content.push(rect(item));\n          break;\n        case 'ADBE Vector Shape - Ellipse':\n          res.content.push(ellipse(item));\n          break;\n        case 'ADBE Vector Shape - Star':\n          res.content.push(star(item));\n          break;\n        case 'ADBE Vector Shape - Group':\n          res.content.push(path(item));\n          break;\n        case 'ADBE Vector Graphic - Stroke':\n          res.stroke = stroke(item);\n          break;\n        case 'ADBE Vector Graphic - Fill':\n          res.fill = fill(item);\n          break;\n        case 'ADBE Vector Graphic - G-Fill':\n          res.gFill = gFill(item, navigationShapeTree);\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  return res;\n}\n\nfunction rect(prop) {\n  // 矩形路径层\n  let res = {\n    type: 'rect',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Rect Size':\n          res.size = transformGeom(item);\n          break;\n        case 'ADBE Vector Rect Position':\n          res.position = transformGeom(item);\n          break;\n        case 'ADBE Vector Rect Roundness':\n          res.roundness = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction ellipse(prop) {\n  let res = {\n    type: 'ellipse',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Ellipse Size':\n          res.size = transformGeom(item);\n          break;\n        case 'ADBE Vector Ellipse Position':\n          res.position = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction star(prop) {\n  let res = {\n    type: 'star',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Star Type':\n          res.starType = item.value;\n          break;\n        case 'ADBE Vector Star Points':\n          res.points = item.value;\n          break;\n        case 'ADBE Vector Star Position':\n          res.position = item.value;\n          break;\n        case 'ADBE Vector Star Inner Radius':\n          res.innerRadius = item.value;\n          break;\n        case 'ADBE Vector Star Outer Radius':\n          res.outerRadius = item.value;\n          break;\n        case 'ADBE Vector Star Inner Roundess':\n          res.innerRoundness = item.value;\n          break;\n        case 'ADBE Vector Star Outer Roundess':\n          res.outerRoundness = item.value;\n          break;\n        case 'ADBE Vector Star Rotation':\n          res.rotation = item.value;\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction stroke(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Stroke Color':\n          res.color = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Opacity':\n          res.opacity = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Width':\n          res.width = transformGeom(item);\n          break;\n        case 'ADBE Vector Line Cap':\n          res.lineCap = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Line Join':\n          res.lineJoin = transformGeom(item);\n          break;\n        case 'ADBE Vector Stroke Miter Limit':\n          res.miterLimit = transformGeom(item);\n          break;\n        // case 'ADBE Vector Stroke Dashes':\n        //   res.dashes = dash(item);\n        //   break;\n      }\n    }\n  }\n  // 特殊的获取虚线样式\n  let dashes = prop.property('Dashes');\n  if(dashes) {\n    let d = [];\n    let g = [];\n    for(let i = 1; i <= dashes.numProperties; i++) {\n      let item = dashes.property(i);\n      if(item && item.enabled) {\n        let matchName = item.matchName;\n        if(item.canSetExpression) {\n          if(matchName.indexOf('ADBE Vector Stroke Dash') > -1) {\n            let j = /\\d+/.exec(matchName);\n            d[j[0] - 1] = item.value;\n          }\n          else if(matchName.indexOf('ADBE Vector Stroke Gap') > -1) {\n            let j = /\\d+/.exec(matchName);\n            g[j[0] - 1] = item.value;\n          }\n        }\n      }\n    }\n    if(d.length) {\n      let v = [];\n      for(let i = 0, len = d.length; i < len; i++) {\n        v.push(d[i]);\n        if(g[i] === undefined) {\n          v.push(d[i]);\n        }\n        else {\n          v.push(g[i]);\n        }\n      }\n      res.dashes = v;\n    }\n  }\n  return res;\n}\n\nfunction path(prop) {\n  let res = {\n    type: 'path',\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Shape Direction':\n          res.direction = item.value;\n          break;\n        case 'ADBE Vector Shape':\n          res.points = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction fill(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Vector Fill Rule':\n          res.rule = item.value;\n          break;\n        case 'ADBE Vector Fill Color':\n          res.color = transformGeom(item);\n          break;\n        case 'ADBE Vector Fill Opacity':\n          res.opacity = transformGeom(item);\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nfunction gFill(prop, navigationShapeTree) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vector Composite Order':\n          break;\n        case 'ADBE Vector Fill Rule':\n          res.rule = item.value;\n          break;\n        case 'ADBE Vector Grad Type':\n          res.type = item.value;\n          break;\n        case 'ADBE Vector Grad Start Pt':\n          res.start = item.value;\n          break;\n        case 'ADBE Vector Grad End Pt':\n          res.end = item.value;\n          break;\n        case 'ADBE Vector Grad Colors':\n          res.colors = gradient(item, navigationShapeTree);\n          break;\n        case 'ADBE Vector Fill Opacity':\n          res.opacity = item.value;\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  return res;\n}\n\nfunction gradient(prop, navigationShapeTree) {\n  let numKeys = prop.numKeys || 1;\n  let ff = app.project.file;\n  if(ff) {\n    let demoFile = new File(ff.absoluteURI);\n    demoFile.open('r', 'TEXT', '????');\n    let fileString = demoFile.read(demoFile.length);\n    fileString = fileString\n      .replace('渐变填充', 'Gradient Fill')\n      .replace('渐变描边', 'Gradient Stroke');\n    let hasNoGradColorData = false;\n    if(fileString.indexOf('ADBE Vector Grad Colors') === -1) {\n      hasNoGradColorData = true;\n    }\n\n    let gradientIndex = 0, navigationIndex = 0;\n    let i = 0, len = navigationShapeTree.length;\n    while(i < len) {\n      let encoded = unescape(encodeURIComponent(navigationShapeTree[i] + 'LIST'));\n      let stringIndex = fileString.indexOf(encoded, navigationIndex + 1);\n      if(stringIndex === -1) {\n        encoded = unescape(encodeURIComponent(navigationShapeTree[i] + ' LIST'));\n        stringIndex = fileString.indexOf(encoded, navigationIndex + 1);\n      }\n      if(stringIndex === -1) {\n        encoded = unescape(encodeURIComponent(navigationShapeTree[i]));\n        stringIndex = fileString.indexOf(encoded, navigationIndex + 1);\n      }\n      navigationIndex = stringIndex;\n      i += 1;\n    }\n    gradientIndex = fileString.indexOf('ADBE Vector Grad Colors', navigationIndex);\n    let gradFillIndex = fileString.indexOf('ADBE Vector Graphic - G-Fill', navigationIndex);\n    let gradStrokeIndex = fileString.indexOf('ADBE Vector Graphic - G-Stroke', navigationIndex);\n    let limitIndex;\n    if(gradStrokeIndex !== -1 && gradFillIndex !== -1) {\n      limitIndex = Math.min(gradFillIndex, gradStrokeIndex);\n    }\n    else {\n      limitIndex = Math.max(gradFillIndex, gradStrokeIndex);\n    }\n    if(limitIndex === -1) {\n      limitIndex = Number.MAX_VALUE;\n    }\n    let lastIndex;\n    let currentKey = 0, keyframes = [], hasOpacity = false, maxOpacities = 0, maxColors = 0;\n    while(currentKey < numKeys) {\n      let gradientData = {};\n      gradientIndex = fileString.indexOf('<prop.map', gradientIndex);\n      if(hasNoGradColorData || gradientIndex > limitIndex || (gradientIndex === -1 && limitIndex === Number.MAX_VALUE)) {\n        gradientData.c = [[0, 1, 1, 1], [1, 0, 0, 0]];\n        maxColors = Math.max(maxColors, 2);\n      }\n      else {\n        let endMatch = '</prop.map>';\n        lastIndex = fileString.indexOf(endMatch, gradientIndex);\n        let xmlString = fileString.substr(gradientIndex, lastIndex + endMatch.length - gradientIndex);\n        xmlString = xmlString.replace(/\\n/g, '');\n        let XML_Ob = new XML(xmlString);\n        let stops = XML_Ob['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'];\n        let colors = XML_Ob['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'][1]['prop.list'][0]['prop.pair'][0]['prop.list'][0]['prop.pair'];\n        i = 0;\n        len = stops.length();\n        let opacitiesArr = [], op, floats, nextFloats, midPoint, midPosition;\n        while(i < len) {\n          floats = stops[i]['prop.list'][0]['prop.pair'][0]['array'][0].float;\n          op = [];\n          op.push(roundNumber(Number(floats[0].toString()), 3));\n          op.push(roundNumber(Number(floats[2].toString()), 3));\n          if(op[1] !== 1) {\n            hasOpacity = true;\n          }\n          opacitiesArr.push(op);\n          midPosition = roundNumber(Number(floats[1].toString()), 3);\n          if(i < len - 1 /*&& midPosition !== 0.5*/) {\n            op = [];\n            nextFloats = stops[i + 1]['prop.list'][0]['prop.pair'][0]['array'][0].float;\n            midPoint = Number(floats[0].toString()) + (Number(nextFloats[0].toString()) - Number(floats[0].toString())) * midPosition;\n            let midPointValue = Number(floats[2].toString()) + (Number(nextFloats[2].toString()) - Number(floats[2].toString())) * 0.5;\n            op.push(roundNumber(midPoint, 3));\n            op.push(roundNumber(midPointValue, 3));\n            opacitiesArr.push(op);\n          }\n          i += 1;\n        }\n        i = 0;\n        len = colors.length();\n        let colorsArr = [];\n        let sortedColors = [];\n        while(i < len) {\n          sortedColors.push(colors[i]['prop.list'][0]['prop.pair'][0]['array'][0].float);\n          i += 1;\n        }\n\n        sortedColors.sort(sortFunction);\n\n        i = 0;\n\n        while(i < len) {\n          floats = sortedColors[i];\n          op = [];\n          op.push(roundNumber(Number(floats[0].toString()), 3));\n          op.push(roundNumber(Number(floats[2].toString()), 3));\n          op.push(roundNumber(Number(floats[3].toString()), 3));\n          op.push(roundNumber(Number(floats[4].toString()), 3));\n          colorsArr.push(op);\n          midPosition = roundNumber(Number(floats[1].toString()), 3);\n          if(i < len - 1 /*&& midPosition !== 0.5*/) {\n            op = [];\n            nextFloats = sortedColors[i + 1];\n            midPoint = Number(floats[0].toString()) + (Number(nextFloats[0].toString()) - Number(floats[0].toString())) * midPosition;\n            let midPointValueR = Number(floats[2].toString()) + (Number(nextFloats[2].toString()) - Number(floats[2].toString())) * 0.5;\n            let midPointValueG = Number(floats[3].toString()) + (Number(nextFloats[3].toString()) - Number(floats[3].toString())) * 0.5;\n            let midPointValueB = Number(floats[4].toString()) + (Number(nextFloats[4].toString()) - Number(floats[4].toString())) * 0.5;\n            op.push(roundNumber(midPoint, 3));\n            op.push(roundNumber(midPointValueR, 3));\n            op.push(roundNumber(midPointValueG, 3));\n            op.push(roundNumber(midPointValueB, 3));\n            colorsArr.push(op);\n          }\n          i += 1;\n        }\n        gradientData.c = colorsArr;\n        gradientData.o = opacitiesArr;\n        maxOpacities = Math.max(maxOpacities, opacitiesArr.length);\n        maxColors = Math.max(maxColors, colorsArr.length);\n      }\n\n      gradientIndex = lastIndex;\n\n      keyframes.push(gradientData);\n      currentKey += 1;\n    }\n    i = 0;\n    let arr, arrayLength, count, lastValue, offsetValue, mergedKeys = [], mergedArr, j;\n    while(i < numKeys) {\n      mergedArr = [];\n      if(keyframes[i].c.length < maxColors) {\n        arr = keyframes[i].c;\n        arrayLength = arr.length;\n        lastValue = arr[arrayLength - 1];\n        offsetValue = lastValue[0];\n        count = 0;\n        while(arrayLength + count < maxColors) {\n          offsetValue -= 0.001;\n          arr.splice(arrayLength - 1, 0, [offsetValue, lastValue[1], lastValue[2], lastValue[3]]);\n          count += 1;\n        }\n      }\n      for(j = 0; j < maxColors; j += 1) {\n        for(let k = 0; k < 4; k += 1) {\n          mergedArr.push(keyframes[i].c[j][k]);\n        }\n      }\n      if(!hasOpacity) {\n        delete keyframes[i].o;\n      }\n      else {\n        if(keyframes[i].o.length < maxOpacities) {\n          arr = keyframes[i].o;\n          arrayLength = arr.length;\n          lastValue = arr[arrayLength - 1];\n          offsetValue = lastValue[0];\n          count = 0;\n          while(arrayLength + count < maxOpacities) {\n            offsetValue -= 0.001;\n            arr.splice(arrayLength - 1, 0, [offsetValue, lastValue[1], lastValue[2], lastValue[3]]);\n            count += 1;\n          }\n        }\n        for(j = 0; j < maxOpacities; j += 1) {\n          for(let l = 0; l < 2; l += 1) {\n            mergedArr.push(keyframes[i].o[j][l]);\n          }\n        }\n      }\n      if(numKeys <= 1) {\n        mergedKeys = mergedArr;\n      }\n      else {\n        mergedKeys.push(mergedArr);\n      }\n      i += 1;\n    }\n    return {\n      m: mergedKeys,\n      p: maxColors\n    };\n  }\n}\n\nfunction roundNumber(num, decimals) {\n  num = num || 0;\n  if(typeof num === 'number') {\n    return parseFloat(num.toFixed(decimals));\n  }\n  else {\n    return roundArray(num, decimals);\n  }\n}\n\nfunction roundArray(arr, decimals) {\n  var i, len = arr.length;\n  var retArray = [];\n  for(i = 0; i < len; i += 1) {\n    if(typeof arr[i] === 'number') {\n      retArray.push(roundNumber(arr[i], decimals));\n    }\n    else {\n      retArray.push(roundArray(arr[i], decimals));\n    }\n  }\n  return retArray;\n}\n\nfunction sortFunction(a, b) {\n  var a_0 = Number(a[0].toString())\n  var b_0 = Number(b[0].toString())\n  if(a_0 === b_0) {\n    return 0;\n  }\n  else {\n    return (a_0 < b_0) ? -1 : 1;\n  }\n}\n\nexport default function(prop, navigationShapeTree) {\n  let res = {};\n  // 这里是内容层，一般只有1个属性，如矩形1\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      navigationShapeTree.push(item.name);\n      switch(matchName) {\n        case 'ADBE Vector Group':\n          res.shape = group(item, navigationShapeTree);\n          break;\n        case 'ADBE Vector Filter - Trim':\n          res.trim = transformVector(item);\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  return res;\n};\n","export default {\n  psd2png(source, psd, path, name) {\n    let helperSequenceComp = app.project.items.addComp('tempConverterComp', source.width, source.height, 1, 1, 1);\n    helperSequenceComp.layers.add(source);\n    $.ae2karas.addTemp(helperSequenceComp);\n\n    let item = app.project.renderQueue.items.add(helperSequenceComp);\n    $.ae2karas.addTemp(item);\n\n    let outputModule = item.outputModule(1);\n    outputModule.applyTemplate(\"_HIDDEN X-Factor 8 Premul\");\n    let fileName = path + name;\n    let file = new File(fileName);\n    if(file.exists) {\n      file.remove();\n    }\n    outputModule.file = new File(fileName);\n\n    item.onStatusChanged = function() {\n      // 完成后要重命名，因为ae会追加00000到文件名末尾\n      if(item.status === RQItemStatus.DONE) {\n        let bug = new File(fileName + '00000');\n        if(bug.exists) {\n          bug.rename(name);\n        }\n      }\n    };\n    app.project.renderQueue.render();\n  },\n};\n","import { transformLayer, transformMask } from './transform';\nimport vector from './vector';\nimport render from '../render';\n\nlet uuid = 0;\n\nfunction recursion(composition, library, navigationShapeTree) {\n  let { name, layers, width, height, displayStartTime, duration } = composition;\n  $.ae2karas.error('composition: ' + name);\n  // 是否是独奏模式\n  let hasSolo;\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    if(item.solo) {\n      hasSolo = true;\n      break;\n    }\n  }\n  // 再统计哪些层被作为父级链接，asParent以索引为key是否父级链接为值，asChild以索引为key父级索引为值\n  let asParent = {}, asChild = {};\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    if(hasSolo) {\n      if(!item.solo) {\n        continue;\n      }\n    }\n    else {\n      if(!item.enabled) {\n        continue;\n      }\n    }\n    if(item.parent && item.parent.index) {\n      asParent[item.parent.index] = true;\n      asChild[item.index] = item.parent.index;\n    }\n  }\n  // 遍历分析图层，独奏时只看独奏图层，否则看可见图层\n  let children = [];\n  outer:\n  for(let i = 1; i <= layers.length; i++) {\n    let item = layers[i];\n    let index = item.index;\n    // 根据是否独奏或可见决定是否分析或跳过，被作为父级链接的即便不可见也要统计\n    if(!asParent.hasOwnProperty(index)) {\n      if(hasSolo) {\n        if(!item.solo && !item.isTrackMatte) {\n          continue;\n        }\n      }\n      else {\n        if(!item.enabled && !item.isTrackMatte) {\n          continue;\n        }\n      }\n    }\n    // mask看应用图层对象是否可见\n    if(item.isTrackMatte) {\n      for(let j = i + 1; j <= layers.length; j++) {\n        let item2 = layers[j];\n        if(!item2.isTrackMatte) {\n          if(hasSolo) {\n            if(!item2.solo) {\n              continue outer;\n            }\n            else {\n              break;\n            }\n          }\n          else {\n            if(!item2.enabled) {\n              continue outer;\n            }\n            else {\n              break;\n            }\n          }\n        }\n      }\n    }\n    let o = parseLayer(item, library, navigationShapeTree, hasSolo);\n    if(o) {\n      // 父级打标uuid的同时，之前记录的hash也记录下来\n      if(asParent.hasOwnProperty(index)) {\n        asParent[index] = o.asParent = uuid++;\n      }\n      // mask/clip类型在被遮罩层上\n      if(i > 1 && o.isClip) {\n        let last = children[children.length - 1];\n        if(last && last.isMask) {\n          last.isClip = true;\n        }\n      }\n      children.push(o);\n    }\n  }\n  // children还要遍历一遍，根据父级链接增加指向父级的字段\n  for(let i = 0; i < children.length; i++) {\n    let item = children[i];\n    let index = item.index;\n    if(asChild.hasOwnProperty(index)) {\n      item.asChild = asParent[asChild[index]];\n    }\n  }\n  children.reverse();\n  return {\n    type: 'div',\n    name,\n    width,\n    height,\n    displayStartTime: displayStartTime * 1000, // 开始时间码\n    duration: duration * 1000, // 合成的总时长\n    children,\n  };\n}\n\nfunction parseLayer(layer, library, navigationShapeTree, hasSolo) {\n  let res = {\n    name: layer.name,\n    index: layer.index,\n    width: layer.width,\n    height: layer.height,\n    startTime: layer.startTime * 1000, // 开始时间，即时间轴上本图层初始位置\n    inPoint: layer.inPoint * 1000, // 真正开始显示时间，>= startTime，可能有前置空白不显示的一段\n    outPoint: layer.outPoint * 1000, // 真正结束显示时间，<= duration绝对值，可能有后置空白不显示的一段\n    blendingMode: layer.blendingMode,\n    // isMask: layer.isTrackMatte,\n    // isClip: layer.trackMatteType === TrackMatteType.ALPHA_INVERTED || layer.trackMatteType === TrackMatteType.LUMA_INVERTED,\n  };\n  let matchName = layer.matchName;\n  if(matchName === 'ADBE Camera Layer') {\n    res.isCamera = true;\n  }\n  else if(layer.isTrackMatte) {\n    res.isMask = true;\n    res.isClip = layer.trackMatteType === TrackMatteType.ALPHA_INVERTED\n      || layer.trackMatteType === TrackMatteType.LUMA_INVERTED;\n  }\n  navigationShapeTree.push(res.name);\n  // 标明图层是否可见，也许不可见但作为父级链接也要分析\n  if(hasSolo) {\n    res.enabled = layer.solo || layer.isTrackMatte;\n  }\n  else {\n    res.enabled = layer.enabled || layer.isTrackMatte;\n  }\n  $.ae2karas.warn('layer: ' + res.name);\n  let geom, txt;\n  for(let i = 1; i <= layer.numProperties; i++) {\n    let prop = layer.property(i);\n    if(prop && prop.enabled) {\n      let matchName = prop.matchName;\n      navigationShapeTree.push(prop.name);\n      switch(matchName) {\n        case 'ADBE Transform Group':\n          res.transform = transformLayer(prop);\n          break;\n        case 'ADBE Root Vectors Group':\n          // 形状图层中的内容子属性\n          if(res.enabled) {\n            geom = vector(prop, navigationShapeTree);\n          }\n          break;\n        case 'ADBE Mask Parade':\n          if(res.enabled) {\n            res.mask = mask(prop);\n          }\n          break;\n        case 'ADBE Text Properties':\n          if(res.enabled) {\n            txt = text(prop);\n          }\n          break;\n        case 'ADBE Camera Options Group':\n          if(res.isCamera) {\n            for(let i = 1; prop && i <= prop.numProperties; i++) {\n              let item = prop.property(i);\n              if(item && item.enabled) {\n                let matchName = item.matchName;\n                if(matchName === 'ADBE Camera Zoom') {\n                  res.cameraZoom = item.value;\n                }\n                else if(matchName === 'ADBE Camera Depth of Field') {\n                  res.cameraDepthOfField = item.value;\n                }\n                else if(matchName === 'ADBE Camera Focus Distance') {\n                  res.cameraFocusDistance = item.value;\n                }\n                else if(matchName === 'ADBE Camera Aperture') {\n                  res.cameraAperture = item.value;\n                }\n                else if(matchName === 'ADBE Camera Blur Level') {\n                  res.cameraBlurLevel = item.value;\n                }\n              }\n            }\n          }\n          break;\n      }\n      navigationShapeTree.pop();\n    }\n  }\n  // 可能是作为父级链接，如果不可见则不需要内容\n  if(res.enabled) {\n    let source = layer.source;\n    if(geom && geom.shape && geom.shape.content && geom.shape.content.length) {\n      geom.geom = true; // 特殊标识\n      geom.type = 'div';\n      geom.id = library.length;\n      library.push(geom);\n      res.assetId = geom.id;\n    }\n    else if(txt) {\n      txt.text = true; // 特殊标识\n      txt.type = 'span';\n      txt.id = library.length;\n      library.push(txt);\n      res.assetId = txt.id;\n    }\n    else if(source) {\n      let asset;\n      // 图片图形等独立资源，将其解析为被link的放入library即可\n      if(source instanceof FootageItem) {\n        let src = source.file && source.file.fsName;\n        // 空图层偶现有source但无source.file，视作空图层\n        if(src) {\n          let name = source.name;\n          if(/\\.psd$/.test(name)) {\n            let path = src.replace(/[^\\/]*\\.psd$/, '');\n            let newName = name.replace(/[\\/.]/g, '_') + '_layer_' + layer.index + '.png';\n            render.psd2png(source, src, path, newName);\n            src = path + newName;\n          }\n          if(!/\\.jpg$/.test(src)\n            && !/\\.jpeg$/.test(src)\n            && !/\\.png/.test(src)\n            && !/\\.webp/.test(src)\n            && !/\\.gif/.test(src)) {\n            return;\n          }\n          let hasExist;\n          for(let i = 0; i < library.length; i++) {\n            let item = library[i];\n            if(item.src === src && item.type === 'img') {\n              asset = item;\n              hasExist = true;\n              break;\n            }\n          }\n          if(!hasExist) {\n            if(src) {\n              asset = {\n                type: 'img',\n                name,\n                width: source.width,\n                height: source.height,\n                src,\n              };\n            }\n            // 颜色类型没有src\n            else {\n              asset = {\n                type: 'div',\n                width: source.width,\n                height: source.height,\n              }\n            }\n          }\n        }\n      }\n      // 合成，递归分析\n      else if(source instanceof CompItem) {\n        asset = recursion(source, library, navigationShapeTree);\n        asset.type = 'div';\n      }\n      if(asset) {\n        asset.id = library.length;\n        library.push(asset);\n        res.assetId = asset.id;\n      }\n    }\n  }\n  navigationShapeTree.pop();\n  return res;\n}\n\nfunction mask(prop) {\n  let res = {};\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      if(matchName === 'ADBE Mask Atom') {\n        if(item.maskMode !== MaskMode.NONE) {\n          res.enabled = true;\n        }\n        res.list = transformMask(item);\n        res.mode = item.maskMode;\n        res.inverted = item.inverted;\n      }\n    }\n  }\n  return res;\n}\n\nfunction text(prop) {\n  let res = {\n    name: prop.name,\n  };\n  for(let i = 1; i <= prop.numProperties; i++) {\n    let item = prop.property(i);\n    if(item && item.enabled) {\n      let matchName = item.matchName;\n      switch(matchName) {\n        case 'ADBE Text Document':\n          let value = item.value;\n          res.content = {\n            font: value.font,\n            fontFamily: value.fontFamily,\n            fontStyle: value.fontStyle,\n            fontSize: value.fontSize,\n            leading: value.leading,\n            baselineLocs: value.baselineLocs,\n            text: value.text,\n          };\n          if(value.applyFill) {\n            res.content.fillColor = value.fillColor;\n            res.content.strokeOver = value.strokeOverFill;\n          }\n          if(value.applyStroke) {\n            res.content.stroke = value.strokeColor;\n            res.content.strokeWidth = value.strokeWidth;\n          }\n          // 固定已知尺寸时有\n          if(value.boxText) {\n            res.content.size = value.boxTextSize;\n            res.content.position = value.boxTextPos;\n          }\n          break;\n      }\n    }\n  }\n  return res;\n}\n\nexport default function(composition) {\n  $.ae2karas.error('parse');\n  // 递归遍历合成，转换ae的图层为普通js对象\n  let { workAreaStart, workAreaDuration } = composition;\n  workAreaStart *= 1000;\n  workAreaDuration *= 1000;\n  $.ae2karas.log('workArea: ' + workAreaStart + ',' + workAreaDuration);\n  let library = [], navigationShapeTree = [];\n  let result = recursion(composition, library, navigationShapeTree);\n  $.ae2karas.log(result);\n  $.ae2karas.log(library);\n  return {\n    workAreaStart,\n    workAreaDuration,\n    result,\n    library,\n  };\n}\n","export default {\n  parse(vertices, inTangents, outTangents, closed, x1, y1, x2, y2) {\n    if(x1 === undefined) {\n      x1 = x2 = vertices[0][0];\n      y1 = y2 = vertices[0][1];\n      // 控制点是相对于顶点的坐标\n      let it = inTangents[0], ot = outTangents[0];\n      if(it[0]) {\n        x1 = Math.max(x1, x1 + it[0]);\n        x2 = Math.min(x2, x1 + it[0]);\n      }\n      if(it[1]) {\n        y1 = Math.max(y1, y1 + it[1]);\n        y2 = Math.min(y2, y1 + it[1]);\n      }\n      if(ot[0]) {\n        x1 = Math.max(x1, x1 + ot[0]);\n        x2 = Math.min(x2, x1 + ot[0]);\n      }\n      if(ot[1]) {\n        y1 = Math.max(y1, y1 + ot[1]);\n        y2 = Math.min(y2, y1 + ot[1]);\n      }\n      // 循环获取极值\n      for(let i = 1, len = vertices.length; i < len; i++) {\n        let item = vertices[i];\n        x1 = Math.max(x1, item[0]);\n        y1 = Math.max(y1, item[1]);\n        x2 = Math.min(x2, item[0]);\n        y2 = Math.min(y2, item[1]);\n        // 控制点是相对于顶点的坐标\n        let it = inTangents[i], ot = outTangents[i];\n        if(it[0]) {\n          x1 = Math.max(x1, item[0] + it[0]);\n          x2 = Math.min(x2, item[0] + it[0]);\n        }\n        if(it[1]) {\n          y1 = Math.max(y1, item[1] + it[1]);\n          y2 = Math.min(y2, item[1] + it[1]);\n        }\n        if(ot[0]) {\n          x1 = Math.max(x1, item[0] + ot[0]);\n          x2 = Math.min(x2, item[0] + ot[0]);\n        }\n        if(ot[1]) {\n          y1 = Math.max(y1, item[1] + ot[1]);\n          y2 = Math.min(y2, item[1] + ot[1]);\n        }\n      }\n    }\n    let w = x1 - x2, h = y1 - y2;\n    let pts = [], cts = [];\n    for(let i = 0, len = vertices.length; i < len; i++) {\n      let item = vertices[i];\n      pts.push([\n        (item[0] - x2) / w,\n        (item[1] - y2) / h,\n      ]);\n      let it = inTangents[i], ot = outTangents[i];\n      // 上一个顶点到本顶点，即便控制点为空也要填补为顶点数据，为2帧之间动画过渡考虑\n      let j = i - 1;\n      if(j === -1) {\n        j = len - 1;\n      }\n      cts[j] = cts[j] || [];\n      cts[j].push((vertices[i][0] + it[0] - x2) / w);\n      cts[j].push((vertices[i][1] + it[1] - y2) / h);\n      // 本顶点到下一个顶点，最后一个比较特殊是到第一个，需要调整顺序\n      cts[i] = cts[i] || [];\n      let x = (vertices[i][0] + ot[0] - x2) / w, y = (vertices[i][1] + ot[1] - y2) / h;\n      if(i === len - 1) {\n        cts[i].unshift(y);\n        cts[i].unshift(x);\n      }\n      else {\n        cts[i].push(x);\n        cts[i].push(y);\n      }\n    }\n    if(closed) {\n      pts.push(pts[0].slice(0));\n    }\n    return {\n      x1,\n      y1,\n      x2,\n      y2,\n      width: w,\n      height: h,\n      points: pts,\n      controls: cts,\n    };\n  },\n  rect2polyline(width, height, roundness) {\n    roundness = roundness || 0;\n    let r = Math.min(width, height) * 0.5;\n    roundness = Math.min(roundness, r);\n    let pts = [], cts = [];\n    if(roundness && roundness > 0) {\n      let h = roundness * 0.5522847498307936;\n      pts.push([(width - roundness) / width, 0]);\n      cts.push([(width - roundness + h) / width, 0, 1, (roundness - h) / height]);\n      pts.push([1, roundness / height]);\n      cts.push([]);\n      pts.push([1, (height - roundness) / height]);\n      cts.push([1, (height - roundness + h) / height, (width - roundness + h) / width, 1]);\n      pts.push([(width - roundness) / width, 1]);\n      cts.push([]);\n      pts.push([roundness / width, 1]);\n      cts.push([(roundness - h) / width, 1, 0, (height - roundness + h) / height]);\n      pts.push([0, (height - roundness) / height]);\n      cts.push([]);\n      pts.push([0, roundness / height]);\n      cts.push([0, (roundness - h) / height, (roundness - h) / width, 0]);\n      pts.push([roundness / width, 0]);\n      cts.push([]);\n      pts.push([(width - roundness) / width, 0]);\n    }\n    else {\n      pts.push([1, 0]);\n      pts.push([1, 1]);\n      pts.push([0, 1]);\n      pts.push([0, 0]);\n      pts.push([1, 0]);\n    }\n    return {\n      points: pts,\n      controls: cts,\n    }\n  },\n  ellipse2polyline() {\n    let pts = [], cts = [];\n    let rx =  0.5 * 0.5522847498307936, ry = 0.5 * 0.5522847498307936;\n    pts.push([0.5, 0]);\n    cts.push([0.5 + rx, 0, 1, 0.5 - ry]);\n    pts.push([1, 0.5]);\n    cts.push([1, 0.5 + ry, 0.5 + rx, 1]);\n    pts.push([0.5, 1]);\n    cts.push([0.5 - rx, 1, 0, 0.5 + ry]);\n    pts.push([0, 0.5]);\n    cts.push([0, 0.5 - ry, rx, 0]);\n    pts.push([0.5, 0]);\n    return {\n      points: pts,\n      controls: cts,\n    }\n  },\n};\n","import path from './path';\n\n/**\n * 2个及以上的关键帧，获取区间，有可能有超过范围的无效关键帧，需滤除\n * 也有可能不及工作区间，需补充首尾，和原有首尾一样复制一个出来对齐区间\n * 也有可能虽然在范围外，但范围上无关键帧，需截取至范围内，由每个特效传入截取回调\n * @param list\n * @param begin\n * @param duration\n * @param reducer 当关键帧范围在工作区间外时，每个特效传入的截取函数\n * @returns {(number|number)[]}\n */\nfunction getAreaList(list, begin, duration, reducer) {\n  let len = list.length;\n  let startIndex = 0, endIndex = len - 1;\n  // 在区间外围的如果只有1帧则需包括，多余的去除，正好则符合，包含则需填补\n  for(let i = 0; i < len; i++) {\n    let item = list[i];\n    if(item.time < begin) {\n      startIndex = i;\n    }\n    else if(item.time > begin) {\n      break;\n    }\n    else {\n      startIndex = i;\n      break;\n    }\n  }\n  // 结尾同上\n  for(let i = len - 1; i >= 0; i--) {\n    let item = list[i];\n    if(item.time < begin + duration) {\n      break;\n    }\n    else if(item.time > begin + duration) {\n      endIndex = i;\n    }\n    else {\n      endIndex = i;\n      break;\n    }\n  }\n  if(startIndex > 0 || endIndex < len - 1) {\n    list = list.slice(startIndex, endIndex + 1);\n  }\n  // 补齐首帧，当关键帧在工作区间内的时候\n  let first = list[0];\n  if(first.time > begin) {\n    let o = {\n      time: begin,\n      value: Array.isArray(first.value) ? first.value.slice(0) : first.value,\n    };\n    // translatePath特殊处理，前补第一帧转为translate\n    if(Array.isArray(first.value) && first.value.length === 8) {\n      o.value = first.value.slice(0, 2);\n    }\n    list.unshift(o);\n  }\n  // 截取首帧部分\n  else if(first.time < begin) {\n    let next = list[1];\n    let percent = (begin - first.time) / (next.time - first.time);\n    first.time = begin;\n    first.value = reducer(first.value, next.value, percent, true);\n    if(first.easing) {\n      let points = sliceBezier([\n        [0, 0],\n        [first.easing[0], first.easing[1]],\n        [first.easing[2], first.easing[3]],\n        [1, 1],\n      ].reverse(), percent).reverse();\n      first.easing = [points[1][0], points[1][1], points[2][0], points[2][1]];\n    }\n  }\n  // 截取尾帧部分，同上\n  let last = list[list.length - 1];\n  if(last.time > begin + duration) {\n    let prev = list[list.length - 2];\n    let percent = (begin + duration - prev.time) / (last.time - prev.time);\n    last.time = begin + duration;\n    last.value = reducer(prev.value, last.value, percent);\n    if(prev.easing) {\n      let points = sliceBezier([\n        [0, 0],\n        [prev.easing[0], prev.easing[1]],\n        [prev.easing[2], prev.easing[3]],\n        [1, 1],\n      ], percent);\n      prev.easing = [points[1][0], points[1][1], points[2][0], points[2][1]];\n    }\n  }\n  // 补齐尾帧，同上\n  else if(last.time < begin + duration) {\n    let o = {\n      time: begin + duration,\n      value: Array.isArray(last.value) ? last.value.slice(0) : last.value,\n    };\n    list.push(o);\n  }\n  return list;\n}\n\n/**\n * 百分比截取贝塞尔中的一段，t为[0, 1]\n * @param points\n * @param t\n */\nfunction sliceBezier(points, t) {\n  let p1, p2, p3, p4;\n  if(points.length === 8) {\n    p1 = points.slice(0, 2);\n    p2 = points.slice(2, 4);\n    p3 = points.slice(4, 8);\n    p4 = points.slice(6, 8);\n  }\n  else {\n    p1 = points[0];\n    p2 = points[1];\n    p3 = points[2];\n    p4 = points[3];\n  }\n  let x1 = p1[0], y1 = p1[1];\n  let x2 = p2[0], y2 = p2[1];\n  let x3 = p3[0], y3 = p3[1];\n  let x12 = (x2 - x1) * t + x1;\n  let y12 = (y2 - y1) * t + y1;\n  let x23 = (x3 - x2) * t + x2;\n  let y23 = (y3 - y2) * t + y2;\n  let x123 = (x23 - x12) * t + x12;\n  let y123 = (y23 - y12) * t + y12;\n  if(points.length === 4 || points.length === 8) {\n    let x4 = p4[0], y4 = p4[1];\n    let x34 = (x4 - x3) * t + x3;\n    let y34 = (y4 - y3) * t + y3;\n    let x234 = (x34 - x23) * t + x23;\n    let y234 = (y34 - y23) * t + y23;\n    let x1234 = (x234 - x123) * t + x123;\n    let y1234 = (y234 - y123) * t + y123;\n    if(points.length === 8) {\n      return [x1, y1, x12, y12, x123, y123, x1234, y1234];\n    }\n    return [[x1, y1], [x12, y12], [x123, y123], [x1234, y1234]];\n  }\n  else if(points.length === 3) {\n    return [[x1, y1], [x12, y12], [x123, y123]];\n  }\n}\n\nexport function transformOrigin(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let r = list[0][0] + ' ' + list[0][1];\n    if(list[0].length > 2) {\n      r += ' ' + list[0][2];\n    }\n    res.value.push({\n      transformOrigin: r,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let r = [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n      if(prev.length > 2) {\n        r.push(prev[2] + (next[2] - prev[2]) * percent);\n      }\n      return r;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let r = item.value[0] + ' ' + item.value[1];\n      if(item.value.length > 2) {\n        r += ' ' + item.value[2];\n      }\n      let o = {\n        offset: (item.time - begin) / duration,\n        transformOrigin: r,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformOpacity(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      opacity: list[0] * 0.01,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        opacity: item.value * 0.01,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformPosition(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let r = {\n      translateX: list[0][0],\n      translateY: list[0][1],\n    };\n    if(list[0].length > 2) {\n      r.translateZ = -list[0][2];\n    }\n    res.value.push(r);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isStart) {\n      // 特殊的translatePath曲线动画\n      if(prev.length === 8) {\n        if(isStart) {\n          let points = [];\n          for(let i = 0, len = prev.length; i < len; i++) {\n            let item = prev[i];\n            points.push(item);\n          }\n          points = sliceBezier(points.reverse(), percent);\n          return points.reverse();\n        }\n        else {\n          return sliceBezier(prev, percent);\n        }\n      }\n      let r = [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n      if(prev.length > 2) {\n        r.push(prev[2] + (next[2] - prev[2]) * percent);\n      }\n      return r;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      if(item.value.length === 8) {\n        o.translatePath = item.value;\n      }\n      else {\n        o.translateX = item.value[0];\n        o.translateY = item.value[1];\n        if(item.value.length > 2) {\n          o.translateZ = -item.value[2];\n        }\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function translateXY(list, begin, duration, key) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let o = {};\n    o[key] = list[0];\n    res.value.push(o);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isStart) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      o[key] = item.value;\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformRotateX(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateX: -list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        rotateX: -item.value,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformRotateY(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateY: -list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        rotateY: -item.value,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\n\nexport function transformRotateZ(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      rotateZ: list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let o = {\n        offset: (item.time - begin) / duration,\n        rotateZ: item.value,\n      };\n      if(item.easing) {\n        o.easing = item.easing;\n      }\n      res.value.push(o);\n    }\n  }\n  return res;\n}\n\nexport function transformScale(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let v = {\n      scaleX: list[0][0] * 0.01,\n      scaleY: list[0][1] * 0.01,\n    };\n    if(list[0].length > 2) {\n      v.scaleZ = list[0][2] * 0.01;\n    }\n    res.value.push(v);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n        prev[2] + (next[2] - prev[2]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = {\n        offset: (item.time - begin) / duration,\n        scaleX: item.value[0] * 0.01,\n        scaleY: item.value[1] * 0.01,\n      };\n      if(item.easing) {\n        v.easing = item.easing;\n      }\n      if(item.value.length > 2) {\n        v.scaleZ = item.value[2] * 0.01;\n      }\n      res.value.push(v);\n    }\n  }\n  return res;\n}\n\nexport function transformPath(list, begin, duration, isEnd) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let v = {\n    };\n    if(isEnd) {\n      v.end = list[0] * 0.01;\n    }\n    else {\n      v.start = list[0] * 0.01;\n    }\n    res.value.push(v);\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return (prev + (next - prev) * percent) * 0.01;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = {\n        offset: (item.time - begin) / duration,\n      };\n      if(item.easing) {\n        v.easing = item.easing;\n      }\n      if(isEnd) {\n        v.end = item.value * 0.01;\n      }\n      else {\n        v.start = item.value * 0.01;\n      }\n      res.value.push(v);\n    }\n  }\n  return res;\n}\n\nexport function transformPoints(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let { vertices, inTangents, outTangents, closed } = list[0];\n    let o = path.parse(vertices, inTangents, outTangents, closed);\n    res.value.push({\n      points: o.points,\n      controls: o.controls,\n    });\n    res.data = o;\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isStart) {\n      let { vertices1, inTangents1, outTangents1, closed } = prev;\n      let { vertices2, inTangents2, outTangents2 } = next;\n      let vertices = [], inTangents = [], outTangents = [];\n      for(let i = 0, len = vertices1.len; i < len; i++) {\n        let p = vertices1[i], n = vertices2[i];\n        let pIn = inTangents1[(i + 1) % len], nIn = inTangents2[(i + 1) % len];\n        let pOut = outTangents1[i], nOut = outTangents2[i];\n        // 直线切割或贝塞尔切割\n        if(pIn[0] === 0 && pIn[1] === 0\n          && nIn[0] === 0 && nIn[1] === 0\n          && pOut[0] === 0 && pOut[1] === 0\n          && nOut[0] === 0 && nOut[1] === 0) {\n          vertices.push([\n            p[0] + (n[0] - p[0]) * percent,\n            p[1] + (n[1] - p[1]) * percent\n          ]);\n          inTangents.push([0, 0]);\n          outTangents.push([0, 0]);\n        }\n        else {\n          let arr = [\n            p,\n            pOut,\n            pIn,\n            n,\n          ];\n          if(isStart) {\n            arr.reverse();\n          }\n          let s = sliceBezier(arr, percent);\n          vertices.push(s[3]);\n          if(isStart) {\n            inTangents.push(s[1]);\n            outTangents.push(s[2]);\n          }\n          else {\n            inTangents.push(s[2]);\n            outTangents.push(s[1]);\n          }\n        }\n      }\n      return {\n        vertices,\n        inTangents,\n        outTangents,\n        closed,\n      };\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let { vertices, inTangents, outTangents, closed } = item.value;\n      let o;\n      if(i === 0) {\n        o = path.parse(vertices, inTangents, outTangents, closed);\n        res.data = o;\n      }\n      else {\n        o = path.parse(vertices, inTangents, outTangents, closed, res.data.x1, res.data.y1, res.data.x2, res.data.y2);\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        points: o.points,\n        controls: o.controls,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformFill(fill, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(fill.color.length === 1) {\n    let first = fill.color[0];\n    let v = [\n      parseInt(first[0] * 255),\n      parseInt(first[1] * 255),\n      parseInt(first[2] * 255),\n      first[3],\n    ];\n    if(fill.opacity[0] < 100) {\n      v[3] *= fill.opacity[0] * 0.01;\n    }\n    res.value.push({\n      fill: [v],\n    });\n  }\n  else {\n    let len = fill.color[0].length;\n    let list = getAreaList(fill.color, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = [\n        parseInt(item[0] * 255),\n        parseInt(item[1] * 255),\n        parseInt(item[2] * 255),\n        item[3],\n      ];\n      if(fill.opacity[i] < 100) {\n        v[3] *= fill.opacity[i] * 0.01;\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        fill: [v],\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformStroke(stroke, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(stroke.color.length === 1) {\n    let first = stroke.color[0];\n    let v = [\n      parseInt(first[0] * 255),\n      parseInt(first[1] * 255),\n      parseInt(first[2] * 255),\n      first[3],\n    ];\n    if(stroke.opacity[0] < 100) {\n      v[3] *= stroke.opacity[0] * 0.01;\n    }\n    res.value.push({\n      stroke: [v],\n    });\n  }\n  else {\n    let list = getAreaList(stroke.color, begin, duration, function(prev, next, percent) {\n      return prev + (next - prev) * percent;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let v = [\n        parseInt(item[0] * 255),\n        parseInt(item[1] * 255),\n        parseInt(item[2] * 255),\n        item[3],\n      ];\n      if(stroke.opacity[i] < 100) {\n        v[3] *= stroke.opacity[i] * 0.01;\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        stroke: [v],\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformStrokeWidth(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      strokeWidth: list,\n    });\n  }\n  else {\n    let len = list[0].length;\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeWidth: item.value,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformLineJoin(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    let arr;\n    if(list[0] === 1) {\n      arr = ['miter'];\n    }\n    else if(list[0] === 2) {\n      arr = ['round'];\n    }\n    else {\n      arr = ['bevel'];\n    }\n    res.value.push({\n      strokeLinejoin: arr,\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent, isFirst) {\n      return isFirst ? prev : next;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      let arr = [];\n      for(let i = 0, len = item.value.length; i < len; i++) {\n        let item2 = item.value[i];\n        if(item2 === 1) {\n          arr.push('miter');\n        }\n        else if(item2 === 2) {\n          arr.push('round');\n        }\n        else {\n          arr.push('bevel');\n        }\n      }\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeLinejoin: arr,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformMiterLimit(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      strokeWidth: list,\n    });\n  }\n  else {\n    let len = list[0].length;\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      let arr = [];\n      for(let i = 0; i < len; i++) {\n        arr[i] = prev[i] + (next[i] - prev[i]) * percent;\n      }\n      return arr;\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        strokeWidth: item.value,\n      });\n    }\n  }\n  return res;\n}\n\nexport function transformSize(list, begin, duration) {\n  let res = {\n    value: [],\n    options: {\n      duration,\n      fill: 'forwards',\n      iterations: 1,\n    },\n  };\n  // 只有1帧没有动画，无需计算补间\n  if(list.length === 1) {\n    res.value.push({\n      size: list[0],\n    });\n  }\n  else {\n    list = getAreaList(list, begin, duration, function(prev, next, percent) {\n      return [\n        prev[0] + (next[0] - prev[0]) * percent,\n        prev[1] + (next[1] - prev[1]) * percent,\n      ];\n    });\n    for(let i = 0, len = list.length; i < len; i++) {\n      let item = list[i];\n      res.value.push({\n        offset: (item.time - begin) / duration,\n        size: item.value,\n      });\n    }\n  }\n  return res;\n}\n","import {\n  transformOrigin,\n  transformOpacity,\n  transformPosition,\n  transformRotateX,\n  transformRotateY,\n  transformRotateZ,\n  transformScale,\n  transformPath,\n  transformPoints,\n  transformFill,\n  transformStroke,\n  transformStrokeWidth,\n  transformLineJoin,\n  transformMiterLimit,\n  transformSize,\n  translateXY,\n} from './animate';\nimport path from './path';\n\n/**\n * 预解析父级链接，不递归深入children，返回一个普通的div\n * @param data\n * @param library\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n */\nfunction preParse(data, library, start, duration, displayStartTime, offset) {\n  let { name, width, height, asParent, asChild } = data;\n  let res = {\n    name,\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n        width,\n        height,\n        // overflow: 'hidden',\n      },\n    },\n    children: [],\n    animate: [],\n    asParent,\n    asChild,\n  };\n  parseAnimate(res, data, start, duration, displayStartTime, offset, true, false);\n  // 附链接不跟随透明度，所以删掉opacity的静态属性\n  if(res.props.style.hasOwnProperty('opacity')) {\n    delete res.props.style.opacity;\n  }\n  return res;\n}\n\nfunction parseAnimate(res, data, start, duration, displayStartTime, offset, isDirect, isGeom) {\n  let { width, height, transform } = data;\n  // 分别分析每个变换，过程很相似，当为单帧时需合并到init.style，多帧第一帧需合并且置空\n  let { anchorPoint, opacity, position, position_0, position_1, position_2, rotateX, rotateY, rotateZ, scale } = transform;\n  let begin2 = start - offset - displayStartTime;\n  let init = isDirect ? res.props : res.init;\n  if(!isGeom && Array.isArray(anchorPoint) && anchorPoint.length) {\n    let t = transformOrigin(anchorPoint, begin2, duration);\n    let first = t.value[0];\n    let v = first.transformOrigin.split(' ');\n    v[0] = parseFloat(v[0]);\n    v[1] = parseFloat(v[1]);\n    if(v[0] !== width * 0.5 || v[1] !== height * 0.5) {\n      init.style.transformOrigin = first.transformOrigin;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      // tfo的每个动画需考虑对坐标的影响\n      for(let i = 1, len = t.value.length; i < len; i++) {\n        let item = t.value[i];\n        let tfo = item.transformOrigin.split(' ');\n        tfo[0] = parseFloat(tfo[0]);\n        tfo[1] = parseFloat(tfo[1]);\n        item.left = -tfo[0];\n        item.top = -tfo[1];\n      }\n      res.animate.push(t);\n    }\n    // ae中位置相对于anchor，而不是默认左上角原点，因此有个位置计算\n    if(v[0]) {\n      init.style.left = -v[0];\n    }\n    if(v[1]) {\n      init.style.top = -v[1];\n    }\n  }\n  if(Array.isArray(opacity) && opacity.length) {\n    let t = transformOpacity(opacity, begin2, duration);\n    let first = t.value[0];\n    if(first.opacity !== 1) {\n      init.style.opacity = first.opacity;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n    }\n  }\n  let is3d;\n  // position要考虑x/y拆开\n  let translateAbbr = true;\n  if(Array.isArray(position_0) && position_0.length > 1) {\n    translateAbbr = false;\n  }\n  if(Array.isArray(position_1) && position_1.length > 1) {\n    translateAbbr = false;\n  }\n  if(Array.isArray(position_2) && position_2.length > 1) {\n    translateAbbr = false;\n  }\n  if(Array.isArray(position) && position.length && translateAbbr) {\n    let t = transformPosition(position, begin2, duration);\n    let first = t.value[0];\n    if(first.translatePath) {\n      init.style.translateX = first.translatePath[0];\n      init.style.translateY = first.translatePath[1];\n    }\n    else {\n      if(first.translateX) {\n        init.style.translateX = first.translateX;\n      }\n      if(first.translateY) {\n        init.style.translateY = first.translateY;\n      }\n      if(first.translateZ) {\n        init.style.translateZ = first.translateZ;\n        is3d = true;\n      }\n    }\n    if(t.value.length > 1) {\n      if(!first.translatePath) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n        if(t.value[1].length > 2) {\n          is3d = true;\n        }\n      }\n      res.animate.push(t);\n    }\n  }\n  else {\n    if(Array.isArray(position_0) && position_0.length) {\n      let t = translateXY(position_0, begin2, duration, 'translateX');\n      let first = t.value[0];\n      if(first.translateX) {\n        init.style.translateX = first.translateX;\n      }\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n        res.animate.push(t);\n      }\n    }\n    if(Array.isArray(position_1) && position_1.length) {\n      let t = translateXY(position_1, begin2, duration, 'translateY');\n      let first = t.value[0];\n      if(first.translateY) {\n        init.style.translateY = first.translateY;\n      }\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n        res.animate.push(t);\n      }\n    }\n    if(Array.isArray(position_2) && position_2.length) {\n      let t = translateXY(position_2, begin2, duration, 'translateZ');\n      let first = t.value[0];\n      if(first.translateZ) {\n        init.style.translateZ = first.translateZ;\n        is3d = true;\n      }\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n          easing: first.easing,\n        };\n        res.animate.push(t);\n        is3d = true;\n      }\n    }\n  }\n  if(Array.isArray(rotateX) && rotateX.length) {\n    let t = transformRotateX(rotateX, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateX) {\n      init.style.rotateX = first.rotateX;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(Array.isArray(rotateY) && rotateY.length) {\n    let t = transformRotateY(rotateY, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateY) {\n      init.style.rotateY = first.rotateY;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(Array.isArray(rotateZ) && rotateZ.length) {\n    let t = transformRotateZ(rotateZ, begin2, duration);\n    let first = t.value[0];\n    if(first.rotateZ) {\n      init.style.rotateZ = first.rotateZ;\n      is3d = true;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n      is3d = true;\n    }\n  }\n  if(is3d) {\n    // path没有width和height，在处理geom时会添加上\n    init.style.perspective = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n  }\n  if(Array.isArray(scale) && scale.length) {\n    let t = transformScale(scale, begin2, duration);\n    let first = t.value[0];\n    if(first.scaleX !== 1 && first.scaleX !== undefined && first.scaleX !== null) {\n      init.style.scaleX = first.scaleX;\n    }\n    if(first.scaleY !== 1 && first.scaleY !== undefined && first.scaleY !== null) {\n      init.style.scaleY = first.scaleY;\n    }\n    if(first.scaleZ !== 1 && first.scaleZ !== undefined && first.scaleZ !== null) {\n      init.style.scaleZ = first.scaleZ;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n        easing: first.easing,\n      };\n      res.animate.push(t);\n    }\n  }\n  return res;\n}\n\n/**\n * 动画和初始init部分转换\n * @param data\n * @param library\n * @param newLib\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n * @param parentLink\n */\nfunction recursion(data, library, newLib, start, duration, displayStartTime, offset, parentLink) {\n  // 作为父级链接不可见时无需导出\n  if(!data.enabled) {\n    return null;\n  }\n  let { name, assetId, startTime, inPoint, outPoint, blendingMode, isCamera, isMask, isClip } = data;\n  if(!isCamera && (assetId === undefined || assetId === null)) {\n    return null;\n  }\n  let begin = start + offset + displayStartTime;\n  inPoint += offset + displayStartTime;\n  outPoint += offset + displayStartTime;\n  // 图层在工作区外可忽略\n  if(inPoint >= begin + duration || outPoint <= begin) {\n    return null;\n  }\n  let res = {\n    name,\n  };\n  if(isCamera) {\n    res.tagName = 'div';\n    res.isCamera = isCamera;\n    res.cameraZoom = data.cameraZoom;\n    res.cameraDepthOfField = data.cameraDepthOfField;\n    res.cameraFocusDistance = data.cameraFocusDistance;\n    res.cameraAperture = data.cameraAperture;\n    res.cameraBlurLevel = data.cameraBlurLevel;\n    res.props = {\n      style: {\n        display: 'none',\n      },\n    };\n  }\n  else {\n    res.libraryId = parse(library, assetId, newLib, start, duration, displayStartTime, offset + startTime);\n  }\n  res.init = {\n    style: {},\n  };\n  // isMask代表是否是遮罩，isClip需在isMask的基础上判断，因为被遮罩层存储isClip值再赋给遮罩层\n  if(isMask) {\n    if(isClip) {\n      res.init.clip = true;\n    }\n    else {\n      res.init.mask = true;\n    }\n  }\n  // 混合模式\n  if(!isCamera) {\n    switch(blendingMode) {\n      case BlendingMode.MULTIPLY:\n        res.init.style.mixBlendMode = 'multiply';\n        break;\n      case BlendingMode.SCREEN:\n        res.init.style.mixBlendMode = 'screen';\n        break;\n      case BlendingMode.OVERLAY:\n        res.init.style.mixBlendMode = 'overlay';\n        break;\n      case BlendingMode.DARKEN:\n        res.init.style.mixBlendMode = 'darken';\n        break;\n      case BlendingMode.COLOR_DODGE:\n        res.init.style.mixBlendMode = 'color-dodge';\n        break;\n      case BlendingMode.COLOR_BURN:\n        res.init.style.mixBlendMode = 'color-burn';\n        break;\n      case BlendingMode.HARD_LIGHT:\n        res.init.style.mixBlendMode = 'hard-light';\n        break;\n      case BlendingMode.SOFT_LIGHT:\n        res.init.style.mixBlendMode = 'soft-light';\n        break;\n      case BlendingMode.DIFFERENCE:\n        res.init.style.mixBlendMode = 'difference';\n        break;\n      case BlendingMode.EXCLUSION:\n        res.init.style.mixBlendMode = 'exclusion';\n        break;\n      case BlendingMode.HUE:\n        res.init.style.mixBlendMode = 'hue';\n        break;\n      case BlendingMode.SATURATION:\n        res.init.style.mixBlendMode = 'saturation';\n        break;\n      case BlendingMode.COLOR:\n        res.init.style.mixBlendMode = 'color';\n        break;\n      case BlendingMode.LUMINOSITY:\n        res.init.style.mixBlendMode = 'luminosity';\n        break;\n    }\n  }\n  res.animate = [];\n  // 特殊的visibility动画，如果图层可见在工作区间内，需要有动画，否则可以无视\n  if(inPoint > begin || outPoint < begin + duration) {\n    let v = {\n      value: [],\n      options: {\n        duration,\n        fill: 'forwards',\n        iterations: 1,\n      },\n    };\n    // 开头不可见，默认init的style\n    if(inPoint > begin) {\n      res.init.style.visibility = 'hidden';\n      res.init.style.pointerEvents = 'none';\n      v.value.push({\n        offset: 0,\n      });\n      v.value.push({\n        offset: inPoint / duration,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    else {\n      v.value.push({\n        offset: 0,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    // 结尾计算\n    if(outPoint < begin + duration) {\n      // 可能是第一帧但offset不为0，不用担心karas会补充空首帧\n      v.value.push({\n        offset: outPoint / duration,\n        visibility: 'hidden',\n        pointerEvents: 'none',\n      });\n      // 默认不是隐藏需补结束帧为隐藏，否则karas会填补空关键帧\n      if(inPoint <= begin) {\n        v.value.push({\n          offset: 1,\n          visibility: 'hidden',\n          pointerEvents: 'none',\n        });\n      }\n    }\n    else {\n      v.value.push({\n        offset: 1,\n        visibility: 'inherit',\n        pointerEvents: 'auto',\n      });\n    }\n    res.animate.push(v);\n  }\n  parseAnimate(res, data, start, duration, displayStartTime, offset, false, false);\n  // text的位置修正，init的left/top会覆盖props的，多嵌套一层也可以但麻烦\n  let lib = newLib[res.libraryId];\n  if(lib && lib.tagName === 'span') {\n    res.init.style.left = res.init.style.left || 0;\n    res.init.style.left += lib.props.style.left || 0;\n    res.init.style.top = res.init.style.top || 0;\n    res.init.style.top += lib.props.style.top || 0;\n  }\n  // 父级链接塞进父级作为唯一children，有可能父级是递归嵌套的，需到达最里层\n  if(data.hasOwnProperty('asChild')) {\n    let asChild = data.asChild;\n    if(parentLink.hasOwnProperty(asChild)) {\n      let div = $.ae2karas.JSON.stringify(parentLink[asChild]);\n      div = $.ae2karas.JSON.parse(div);\n      let target = div;\n      delete target.asParent;\n      delete target.asChild;\n      while(target.children.length) {\n        target = target.children[0];\n        delete target.asParent;\n        delete target.asChild;\n      }\n      target.children.push(res);\n      res = div;\n    }\n  }\n  return res;\n}\n\n/**\n * 静态部分转换，library中无动画的部分\n * @param library\n * @param assetId\n * @param newLib\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n */\nfunction parse(library, assetId, newLib, start, duration, displayStartTime, offset) {\n  let data = library[assetId];\n  let { type, name, src, width, height, children, geom, text } = data;\n  let res = {\n    id: -1, // 占位符\n    name,\n    tagName: type,\n    props: {\n      style: {\n        position: 'absolute',\n        // width,\n        // height,\n        // overflow: 'hidden',\n      },\n    },\n  };\n  if(width) {\n    res.props.style.width = width;\n  }\n  if(height) {\n    res.props.style.height = height;\n  }\n  if(type === 'div' && !geom && !text) {\n    res.props.style.overflow = 'hidden';\n  }\n  // 矢量图层特殊解析，添加\n  if(geom) {\n    parseGeom(res, data, start, duration, displayStartTime, offset);\n  }\n  else if(text) {\n    let content = data.content;\n    if(content.fillColor) {\n      res.props.style.color = [\n        parseInt(content.fillColor[0] * 255),\n        parseInt(content.fillColor[1] * 255),\n        parseInt(content.fillColor[2] * 255),\n      ];\n    }\n    else {\n      res.props.style.color = 'transparent';\n    }\n    if(content.stroke && content.strokeWidth) {\n      res.props.style.textStrokeColor = [\n        parseInt(content.stroke[0] * 255),\n        parseInt(content.stroke[1] * 255),\n        parseInt(content.stroke[2] * 255),\n      ];\n      res.props.style.textStrokeWidth = content.strokeWidth;\n      if(content.strokeOver) {\n        res.props.style.textStrokeOver = 'fill';\n      }\n    }\n    res.props.style.fontFamily = content.fontFamily;\n    res.props.style.fontSize = content.fontSize;\n    // res.props.style.fontStyle = content.fontStyle;\n    // res.props.style.lineHeight = (content.fontSize + content.leading) / content.fontSize;\n    res.props.style.lineHeight = 1.2;\n    res.children = [content.text];\n    // 对齐方式\n    let baselineLocs = content.baselineLocs;\n    let left = 0, right = 0;\n    for(let i = 0, len = baselineLocs.length; i < len; i += 4) {\n      left = Math.min(left, baselineLocs[i]);\n      right = Math.max(right, baselineLocs[i + 2]);\n    }\n    if(content.position) {\n      res.props.style.left = content.position[0];\n      res.props.style.top = content.position[1];\n    }\n    else {\n      if(left) {\n        res.props.style.left = left;\n        res.props.style.width = right - left;\n        res.props.style.textAlign = 'center';\n      }\n      res.props.style.top = -content.fontSize - baselineLocs[1];\n    }\n  }\n  // 图片无children\n  else if(type === 'img') {\n    res.props.src = src;\n  }\n  else if(Array.isArray(children)) {\n    res.children = [];\n    parseChildren(res, children, library, newLib, start, duration, displayStartTime, offset);\n  }\n  res.id = newLib.length;\n  newLib.push(res);\n  return res.id;\n}\n\nfunction parseChildren(res, children, library, newLib, start, duration, displayStartTime, offset) {\n  if(Array.isArray(children)) {\n    // 先一遍解析父级链接，因为父级可能不展示或者只需要父级一层不递归解析父级的children\n    let parentLink = {};\n    for(let i = 0, len = children.length; i < len; i++) {\n      let item = children[i];\n      if(item.hasOwnProperty('asParent')) {\n        parentLink[item.asParent] = preParse(item, library, start, duration, displayStartTime, offset);\n      }\n    }\n    // 因为父级链接可能产生递归嵌套，需要再循环处理一遍parentLink\n    for(let i in parentLink) {\n      if(parentLink.hasOwnProperty(i)) {\n        let item = parentLink[i];\n        let asChild = item.asChild;\n        while(asChild !== undefined && parentLink[asChild]) {\n          let parent = $.ae2karas.JSON.stringify(parentLink[asChild]);\n          parent = $.ae2karas.JSON.parse(parent);\n          parent.children.push(item);\n          item = parent;\n          asChild = parent.asChild;\n        }\n        if(item !== parentLink[i]) {\n          parentLink[i] = item;\n        }\n      }\n    }\n    // 再普通解析，遇到父级链接特殊处理\n    for(let i = 0, len = children.length; i < len; i++) {\n      let item = children[i];\n      let temp = recursion(item, library, newLib, start, duration, displayStartTime, offset, parentLink);\n      if(temp) {\n        res.children.push(temp);\n        // ppt应该放在父层，如果有父级链接，则放在其上\n        if(temp.init && temp.init.style && temp.init.style.perspective) {\n          res.props.style.perspective = temp.init.style.perspective || undefined;\n          delete temp.init.style.perspective;\n        }\n        if(temp.children && temp.children.length === 1) {\n          let t = temp.children[0];\n          if(t.init && t.init.style && t.init.style.perspective) {\n            temp.props.style.perspective = t.init.style.perspective || undefined;\n            delete t.init.style.perspective;\n          }\n        }\n        // 有mask分析mask，且要注意如果有父级链接不能直接存入当前children，要下钻\n        if(item.mask && item.mask.enabled) {\n          let m = parseMask(item, temp, start, duration, displayStartTime, offset);\n          let target = res;\n          while(temp.children && temp.children.length === 1) {\n            target = temp;\n            temp = temp.children[0];\n          }\n          target.children.push(m);\n          // 特殊的地方，被遮罩的可能有init样式，mask需同等赋值\n          let style = target.children[0].init.style;\n          if(style) {\n            for(let i in style) {\n              if(style.hasOwnProperty(i) && {\n                'scaleX': true,\n                'scaleY': true,\n                'scaleZ': true,\n              }.hasOwnProperty(i)) {\n                m.props.style[i] = style[i];\n              }\n            }\n          }\n          let a = target.children[0].animate;\n          if(a && a.length) {\n            m.animate = a;\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * 形状图层特殊的直接为其生成一个内联children\n * @param res\n * @param data\n * @param start\n * @param duration\n * @param displayStartTime\n * @param offset\n */\nfunction parseGeom(res, data, start, duration, displayStartTime, offset) {\n  let { shape: { content, fill, gFill, stroke, transform }, trim } = data;\n  let begin2 = start - offset - displayStartTime;\n  // 矢量可能有多个，但样式共用一个\n  let children = [];\n  let len = content.length;\n  if(!len) {\n    return;\n  }\n  // 由于动画的特殊性，无法直接用矢量标签，需嵌套一个中间层div\n  let child = {\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n      },\n    },\n    children,\n    animate: [],\n  };\n  for(let i = 0, len = content.length; i < len; i++) {\n    let item = content[i];\n    let { type, direction, size, position, roundness, points } = item;\n    let f;\n    // 由于动画的特殊性，无法直接用矢量标签，需嵌套一个中间层div\n    let $geom = {\n      tagName: '$polyline',\n      props: {\n        style: {\n          position: 'absolute',\n        },\n      },\n      animate: [],\n    };\n    children.push($geom);\n    // 分类处理矢量\n    if(type === 'rect' || type === 'ellipse') {\n      let t = transformSize(size, begin2, duration);\n      let first = t.value[0];\n      $geom.props.style.width = first.size[0];\n      $geom.props.style.height = first.size[1];\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n        };\n        // 用缩放代替尺寸变化\n        for(let i = 1, len = t.value.length; i < len; i++) {\n          let item = t.value[i];\n          let size = item.size;\n          item.size = undefined;\n          item.scaleX = size[0] / first.size[0];\n          item.scaleY = size[1] / first.size[1];\n        }\n        $geom.animate.push(t);\n      }\n      if(type === 'rect') {\n        let o = path.rect2polyline(first.size[0], first.size[1], roundness[0]);\n        $geom.props.points = o.points;\n        $geom.props.controls = o.controls;\n      }\n      else if(type === 'ellipse') {\n        let o = path.ellipse2polyline();\n        $geom.props.points = o.points;\n        $geom.props.controls = o.controls;\n      }\n    }\n    else if(type === 'star') {\n      // TODO\n    }\n    else if(type === 'path') {\n      let t = transformPoints(points, begin2, duration);\n      let d = t.data;\n      // path特殊没尺寸，3d等计算ppt需赋值\n      $geom.props.style.width = data.shape.width = d.width;\n      $geom.props.style.height = data.shape.height = d.height;\n      // path的特殊位置计算，因为ae中尺寸为0\n      $geom.props.style.left = d.x2;\n      $geom.props.style.top = d.y2;\n      t.data = undefined;\n      let first = t.value[0];\n      $geom.props.points = first.points;\n      $geom.props.controls = first.controls;\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n        };\n        $geom.animate.push(t);\n      }\n    }\n    // path没有position\n    if(position && position.length) {\n      let t = transformPosition(position, begin2, duration);\n      let first = t.value[0];\n      $geom.props.style.translateX = first.translateX;\n      $geom.props.style.translateY = first.translateY;\n      $geom.props.style.translateZ = first.translateZ;\n      if(t.value.length > 1) {\n        t.value[0] = {\n          offset: 0,\n        };\n        for(let i = 1; i < t.value.length; i++) {\n          let item = t.value[i];\n          item.translateX -= first.translateX;\n          item.translateY -= first.translateY;\n          item.translateZ -= first.translateZ;\n        }\n        $geom.animate.push(t);\n      }\n    }\n    if(fill && fill.rule === 2 || gFill && gFill.rule === 2) {\n      $geom.props.style.fillRule = 'evenodd';\n    }\n    // geom内嵌的transform单独分析，都作用在中间层div上，anchorPoint比较特殊\n    let { anchorPoint } = transform;\n    if(Array.isArray(anchorPoint) && anchorPoint.length) {\n      let t = transformOrigin(anchorPoint, begin2, duration);\n      let first = t.value[0];\n      let v = first.transformOrigin.split(' ');\n      v[0] = parseFloat(v[0]);\n      v[1] = parseFloat(v[1]);\n      /**\n       * path很特殊，原始没有宽高，ae是锚点0,0相对于自身左上角原点，定位则是锚点来进行定位\n       * 需记录最初的位置，发生锚点动画时，其会干扰left/top，同步形成位置动画\n       */\n      if(type === 'path') {\n        let left = $geom.props.style.left;\n        let top = $geom.props.style.top;\n        $geom.props.style.left -= v[0];\n        $geom.props.style.top -= v[1];\n        let w = $geom.props.style.width;\n        let h = $geom.props.style.height;\n        v[0] += w * 0.5;\n        v[1] += h * 0.5;\n        if(v[0] !== w * 0.5 || v[1] !== h * 0.5) {\n          $geom.props.style.transformOrigin = first.transformOrigin;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          // tfo的每个动画需考虑对坐标的影响\n          for(let i = 1, len = t.value.length; i < len; i++) {\n            let item = t.value[i];\n            let tfo = item.transformOrigin.split(' ');\n            tfo[0] = parseFloat(tfo[0]);\n            tfo[1] = parseFloat(tfo[1]);\n            item.left = left - tfo[0];\n            item.top = top - tfo[1];\n          }\n          $geom.animate.push(t);\n        }\n      }\n      else {\n        // tfo中心判断，加上尺寸*0.5\n        v[0] += $geom.props.style.width * 0.5;\n        v[1] += $geom.props.style.height * 0.5;\n        if(v[0] !== $geom.props.style.width * 0.5 || v[1] !== $geom.props.style.height * 0.5) {\n          $geom.props.style.transformOrigin = first.transformOrigin;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          $geom.animate.push(t);\n        }\n        if(v[0]) {\n          $geom.props.style.left = -v[0];\n        }\n        if(v[1]) {\n          $geom.props.style.top = -v[1];\n        }\n      }\n    }\n    parseAnimate(child, data.shape, start, duration, offset, true, true);\n    // gradient需要根据transformOrigin来计算\n    if(gFill) {\n      let transformOrigin = $geom.props.style.transformOrigin;\n      let w = $geom.props.style.width, h = $geom.props.style.height;\n      let cx, cy;\n      if(transformOrigin) {\n        transformOrigin = transformOrigin.split(' ');\n        cx = parseFloat(transformOrigin[0]);\n        cy = parseFloat(transformOrigin[1]);\n      }\n      else {\n        cx = w * 0.5;\n        cy = h * 0.5;\n      }\n      let { type, start, end, colors: { m, p } } = gFill;\n      let steps = '';\n      for(let i = 0; i < p; i++) {\n        if(i) {\n          steps += ', ';\n        }\n        steps += 'rgba(' + Math.floor(m[i * 4 + 1] * 255);\n        steps += ',' + Math.floor(m[i * 4 + 2] * 255);\n        steps += ',' + Math.floor(m[i * 4 + 3] * 255);\n        // 可能有透明度\n        if(m.length >= p * 4 + (i + 1) * 2) {\n          steps += ',' + m[p * 4 + (i + 1) * 2 - 1];\n        }\n        else {\n          steps += ',1';\n        }\n        steps += ') ';\n        steps += m[i * 4] * 100 + '%';\n      }\n      if(!steps) {\n        steps = '#F00, #00F';\n      }\n      if(type === 1) {\n        let x0 = $geom.props.style.translateX || 0, y0 = $geom.props.style.translateY || 0;\n        let x1 = start[0] + cx, y1 = start[1] + cy;\n        let x2 = end[0] + cx, y2 = end[1] + cy;\n        f = `linearGradient(${(x1 - x0) / w} ${(y1 - y0) / h} ${(x2 - x0) / w} ${(y2 - y0)/ h}, ${steps})`;\n      }\n      else if(type === 2) {\n        let x0 = $geom.props.style.translateX || 0, y0 = $geom.props.style.translateY || 0;\n        let x1 = start[0] + cx, y1 = start[1] + cy;\n        let x2 = end[0] + cx, y2 = end[1] + cy;\n        f = `radialGradient(${(x1 - x0) / w} ${(y1 - y0) / h} ${(x2 - x0) / w} ${(y2 - y0)/ h}, ${steps})`;\n      }\n      $geom.props.style.fill = [f];\n    }\n    // trimPath裁剪动画或属性\n    if(trim && trim.hasOwnProperty('start') && trim.hasOwnProperty('end')) {\n      let start = trim.start, end = trim.end;\n      if(start.length > 1) {\n        let t = transformPath(start, begin2, duration, false);\n        let first = t.value[0];\n        if(first.start !== 0) {\n          $geom.props.start = first.start;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          $geom.animate.push(t);\n        }\n      }\n      else {\n        $geom.props.start = start[0] * 0.01;\n      }\n      if(end.length > 1) {\n        let t = transformPath(end, begin2, duration, true);\n        let first = t.value[0];\n        if(first.end !== 0) {\n          $geom.props.end = first.end;\n        }\n        if(t.value.length > 1) {\n          if(first.offset === 0) {\n            t.value[0] = {\n              offset: 0,\n            };\n          }\n          $geom.animate.push(t);\n        }\n      }\n      else {\n        $geom.props.end = end[0] * 0.01;\n      }\n    }\n  }\n  if(fill && Array.isArray(fill.color) && fill.color.length) {\n    let t = transformFill(fill, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.fill = first.fill;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.color) && stroke.color.length) {\n    let t = transformStroke(stroke, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.stroke = first.stroke;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.width) && stroke.width.length) {\n    let t = transformStrokeWidth(stroke.width, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeWidth = first.strokeWidth;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.lineJoin) && stroke.lineJoin.length) {\n    let t = transformLineJoin(stroke.lineJoin, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeLineJoin = first.strokeLineJoin;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && Array.isArray(stroke.strokeMiterlimit) && stroke.strokeMiterlimit.length) {\n    let t = transformMiterLimit(stroke.strokeMiterlimit, begin2, duration);\n    let first = t.value[0];\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeMiterlimit = first.strokeMiterlimit;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      for(let i = 0; i < len; i++) {\n        children[i].animate.push(t);\n      }\n    }\n  }\n  if(stroke && stroke.dashes) {\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeDasharray = [stroke.dashes];\n    }\n  }\n  if(!stroke) {\n    for(let i = 0; i < len; i++) {\n      children[i].props.style.strokeWidth = [0];\n    }\n  }\n  res.children = [child];\n}\n\nfunction parseMask(data, target, start, duration, displayStartTime, offset) {\n  // $.ae2karas.log(data);\n  // $.ae2karas.log(target);\n  // 会出现父级链接特殊情况，此时遮罩应该是其唯一children\n  if(target.children && target.children.length === 1) {\n    target = target.children[0];\n  }\n  let targetProps = target.init;\n  let left = targetProps.style.left || 0;\n  let top = targetProps.style.top || 0;\n  let res = {\n    tagName: '$polyline',\n    props: {\n      style: {\n        position: 'absolute',\n        fill: '#FFF',\n      },\n    },\n    animate: [],\n  };\n  let { width, height, mask: { list: { points, opacity }, mode, inverted } } = data;\n  // 相加之外都是相减\n  if(mode === MaskMode.ADD) {\n    if(inverted) {\n      res.props.clip = true;\n    }\n    else {\n      res.props.mask = true;\n    }\n  }\n  else {\n    if(inverted) {\n      res.props.mask = true;\n    }\n    else {\n      res.props.clip = true;\n    }\n  }\n  // 样式和target一致，只有位置信息需要\n  let style = targetProps.style;\n  for(let i in style) {\n    if(style.hasOwnProperty(i) && ['left', 'top', 'translateX', 'translateY', 'translateZ'].indexOf(i) > -1) {\n      res.props.style[i] = style[i];\n    }\n  }\n  // 要显示mask，可能会被target同化\n  delete res.props.style.visibility;\n  delete res.props.style.pointerEvents;\n  // mask的2个动画，points和opacity\n  let o = {};\n  let begin2 = start - offset - displayStartTime;\n  if(Array.isArray(points) && points.length) {\n    let t = transformPoints(points, begin2, duration);\n    o = t.data;\n    res.props.style.width = o.width;\n    res.props.style.height = o.height;\n    t.data = undefined;\n    let first = t.value[0];\n    res.props.points = first.points;\n    res.props.controls = first.controls;\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      res.animate.push(t);\n    }\n  }\n  else {\n    return res;\n  }\n  if(Array.isArray(opacity) && opacity.length) {\n    let t = transformOpacity(opacity, begin2, duration);\n    let first = t.value[0];\n    if(first.opacity !== 1) {\n      res.props.style.opacity = first.opacity;\n    }\n    if(t.value.length > 1) {\n      t.value[0] = {\n        offset: 0,\n      };\n      res.animate.push(t);\n    }\n  }\n  // 获取对象锚点，mask的锚点需保持相同\n  let transformOrigin = targetProps.style.transformOrigin;\n  let cx = width * 0.5, cy = height * 0.5;\n  if(transformOrigin) {\n    let v = transformOrigin.split(' ');\n    cx = parseFloat(v[0]);\n    cy = parseFloat(v[1]);\n  }\n  // 位置和锚点保持和mask相同，由于points可能不是0，0开始，需计算偏移\n  res.props.style.transformOrigin = (cx - o.x2) + ' ' + (cy - o.y2);\n  res.props.style.left = left + o.x2;\n  res.props.style.top = top + o.y2;\n  return res;\n}\n\nlet uuid = 0;\n\nexport default function(data) {\n  $.ae2karas.error('convert');\n  let { workAreaStart, workAreaDuration, result, library } = data;\n  let { name, width, height, children, displayStartTime } = result;\n  let newLib = [];\n  let res = {\n    uuid: uuid++,\n    name,\n    tagName: 'div',\n    props: {\n      style: {\n        position: 'absolute',\n        width,\n        height,\n        // overflow: 'hidden',\n      },\n    },\n    children: [],\n    library: newLib,\n    abbr: false,\n  };\n  parseChildren(res, children, library, newLib, workAreaStart, workAreaDuration, displayStartTime, 0);\n  // 检查直接孩子中的camera，删除并存放属性在根节点上\n  let cd = res.children;\n  for(let i = 0, len = cd.length; i < len; i++) {\n    let child = cd[i];\n    if(child.isCamera) {\n      // res.camera = {\n      //   name: child.name,\n      //   cameraZoom: child.cameraZoom,\n      //   cameraDepthOfField: child.cameraDepthOfField,\n      //   cameraFocusDistance: child.cameraFocusDistance,\n      //   cameraAperture: child.cameraAperture,\n      //   cameraBlurLevel: child.cameraBlurLevel,\n      //   init: child.init,\n      //   animate: child.animate,\n      // };\n      cd.splice(i, 1);\n      break;\n    }\n  }\n  return res;\n}\n","export default function(ae2karas) {\n  if(!ae2karas.JSON) {\n    if(typeof JSON !== 'undefined') {\n      return ae2karas.JSON = JSON;\n    }\n    let JSON = ae2karas.JSON = {};\n    (function() {\n      let toString = {}.toString;\n\n      function isType(type) {\n        return function(obj) {\n          return toString.call(obj) === '[object ' + type + ']';\n        }\n      }\n\n      let isObject = isType('Object');\n      let isString = isType('String');\n      let isFunction = isType('Function');\n      let isNumber = isType('Number');\n      let isBoolean = isType('Boolean');\n\n      function f(n) {\n        return n < 10 ? '0' + n : n;\n      }\n\n      if(!isFunction(Date.prototype.toJSON)) {\n\n        Date.prototype.toJSON = function() {\n\n          return isFinite(this.valueOf())\n            ? this.getUTCFullYear() + '-' +\n            f(this.getUTCMonth() + 1) + '-' +\n            f(this.getUTCDate()) + 'T' +\n            f(this.getUTCHours()) + ':' +\n            f(this.getUTCMinutes()) + ':' +\n            f(this.getUTCSeconds()) + 'Z'\n            : null;\n        };\n\n        String.prototype.toJSON =\n          Number.prototype.toJSON =\n            Boolean.prototype.toJSON = function() {\n              return this.valueOf();\n            };\n      }\n\n      var cx,\n        escapable,\n        gap,\n        indent,\n        meta,\n        rep;\n\n      function quote(string) {\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function(a) {\n          var c = meta[a];\n          return isString(c)\n            ? c\n            : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n      }\n\n\n      function str(key, holder) {\n        var i,\n\n          k,\n          v,\n          length,\n          mind = gap,\n          partial,\n          value = holder[key];\n        if(value && isObject(value) &&\n          isFunction(value.toJSON)) {\n          value = value.toJSON(key);\n        }\n        if(isFunction(rep)) {\n          value = rep.call(holder, key, value);\n        }\n        if(isString(value)) {\n          return quote(value);\n        }\n        else if(isNumber(value)) {\n          return isFinite(value) ? String(value) : 'null';\n        }\n        else if(isBoolean(value) || value === null) {\n          return String(value);\n        }\n        else {\n          if(!value) {\n            return 'null';\n          }\n          gap += indent;\n          partial = [];\n          if(Array.isArray(value)) {\n            length = value.length;\n            for(i = 0; i < length; i += 1) {\n              partial[i] = str(i, value) || 'null';\n            }\n            v = partial.length === 0\n              ? '[]'\n              : gap\n                ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']'\n                : '[' + partial.join(',') + ']';\n            gap = mind;\n            return v;\n          }\n          if(rep && isObject(rep)) {\n            length = rep.length;\n            for(i = 0; i < length; i += 1) {\n              if(isString(rep[i])) {\n                k = rep[i];\n                v = str(k, value);\n                if(v) {\n                  partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                }\n              }\n            }\n          }\n          else {\n            for(k in value) {\n              if(value.hasOwnProperty(k)) {\n                v = str(k, value);\n                if(v) {\n                  partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                }\n              }\n            }\n          }\n          v = partial.length === 0\n            ? '{}'\n            : gap\n              ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}'\n              : '{' + partial.join(',') + '}';\n          gap = mind;\n          return v;\n        }\n      }\n\n      if(!isFunction(JSON.stringify)) {\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n        meta = {\n          '\\b': '\\\\b',\n          '\\t': '\\\\t',\n          '\\n': '\\\\n',\n          '\\f': '\\\\f',\n          '\\r': '\\\\r',\n          '\"': '\\\\\"',\n          '\\\\': '\\\\\\\\'\n        };\n        JSON.stringify = function(value, replacer, space) {\n          var i;\n          gap = '';\n          indent = '';\n          if(isNumber(space)) {\n            for(i = 0; i < space; i += 1) {\n              indent += ' ';\n            }\n          }\n          else if(isString(space)) {\n            indent = space;\n          }\n          rep = replacer;\n          if(replacer && !isFunction(replacer) &&\n            (!isObject(replacer) ||\n              !isNumber(replacer.length))) {\n            throw new Error('JSON.stringify');\n          }\n          return str('', { '': value });\n        };\n      }\n      if(!isFunction(JSON.parse)) {\n        cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n        JSON.parse = function(text, reviver) {\n          var j;\n\n          function walk(holder, key) {\n            var k, v, value = holder[key];\n            if(value && isObject(value)) {\n              for(k in value) {\n                if(value.hasOwnProperty(k)) {\n                  v = walk(value, k);\n                  if(v !== undefined) {\n                    value[k] = v;\n                  }\n                  else {\n                    delete value[k];\n                  }\n                }\n              }\n            }\n            return reviver.call(holder, key, value);\n          }\n\n          text = String(text);\n          cx.lastIndex = 0;\n          if(cx.test(text)) {\n            text = text.replace(cx, function(a) {\n              return '\\\\u' +\n                ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            });\n          }\n          if(/^[\\],:{}\\s]*$/\n            .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n              .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n              .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n            let eval2 = eval;\n            j = eval2('(' + text + ')');\n            return isFunction(reviver)\n              ? walk({ '': j }, '')\n              : j;\n          }\n          throw new SyntaxError('JSON.parse');\n        };\n      }\n    }());\n    return JSON;\n  }\n  return ae2karas.JSON;\n}\n","import enums from './enums';\nimport parse from './parse/index';\nimport convert from './convert/index';\nimport json from './json';\n\nconst { ES_TYPE, EVENT } = enums;\n\nArray.isArray = Array.isArray || function(arr) {\n  return arr instanceof Array;\n};\n\nArray.prototype.indexOf = Array.prototype.indexOf || function(o) {\n  for(let i = 0, len = this.length; i < len; i++) {\n    if(this[i] === o) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nlet ae2karas = $.ae2karas = $.ae2karas || {};\njson(ae2karas);\n\nae2karas.dispatch = (function() {\n  let xLib;\n  try {\n    xLib = new ExternalObject('lib:PlugPlugExternalObject');\n  } catch(e) {\n    alert('Missing ExternalObject: ');\n  }\n  return function(type, data) {\n    if(xLib) {\n      if(data && data instanceof Object) {\n        data = ae2karas.JSON.stringify(data);\n      }\n      else if(data === undefined) {\n        data = 'undefined';\n      }\n      else if(data === null) {\n        data = 'null';\n      }\n      else if(data === true) {\n        data = 'true';\n      }\n      else if(data === false) {\n        data = 'false';\n      }\n      var eventObj = new CSXSEvent();\n      eventObj.type = type;\n      eventObj.data = data;\n      eventObj.dispatch();\n    }\n  };\n})();\n\nae2karas.log = function(s) {\n  $.ae2karas.dispatch(enums.EVENT.LOG, s);\n};\n\nae2karas.warn = function(s) {\n  $.ae2karas.dispatch(enums.EVENT.WARN, s);\n};\n\nae2karas.error = function(s) {\n  $.ae2karas.dispatch(enums.EVENT.ERROR, s);\n};\n\nfunction getItemType(item) {\n  if(item instanceof CompItem) {\n    return ES_TYPE.COMP_ITEM;\n  }\n  if(item instanceof FolderItem) {\n    return ES_TYPE.FOLDER_ITEM;\n  }\n  if(item instanceof FootageItem) {\n    return ES_TYPE.FOOTAGE_ITEM;\n  }\n  return ES_TYPE.UNKNOWN;\n}\n\nae2karas.getCompositions = function() {\n  let folderItem = app.project;\n  let list = [];\n  // 所有的合成都在app.project下，包含文件夹递归树的\n  for(let i = 1; i <= folderItem.numItems; i++) {\n    let compItem = folderItem.item(i);\n    let type = getItemType(compItem);\n    if(type === ES_TYPE.COMP_ITEM) {\n      list.push({\n        id: compItem.id,\n        name: compItem.name,\n        width: compItem.width,\n        height: compItem.height,\n        type,\n      });\n    }\n  }\n  $.ae2karas.dispatch(EVENT.INIT, list);\n};\n\nfunction findCompositionById(id) {\n  for(let i = 1; i <= app.project.numItems; i++) {\n    const compItem = app.project.item(i);\n    if(compItem.id === id) {\n      return compItem;\n    }\n  }\n  return null;\n}\n\nae2karas.convert = function(id) {\n  $.ae2karas.error('start');\n  let composition = findCompositionById(id);\n  if(!composition) {\n    $.ae2karas.error('error: no composition');\n    $.ae2karas.dispatch(enums.EVENT.CANCEL);\n    return;\n  }\n  // 递归遍历分析合成对象，转换ae的图层为普通js对象，留给后续转换karas用\n  let res = parse(composition);\n  $.ae2karas.dispatch(enums.EVENT.FINISH, convert(res));\n  // 结束后才能删除临时生成的导出psd的合成和渲染队列\n  $.ae2karas.delTemp();\n  $.ae2karas.error('finish');\n};\n\nlet list = [];\nae2karas.addTemp = function(o) {\n  list.push(o);\n};\nae2karas.delTemp = function() {\n  while(list.length) {\n    list.pop().remove();\n  }\n};\n\nae2karas.export = function(data) {\n  $.ae2karas.error('export');\n  $.ae2karas.log(data);\n  let file = File.saveDialog();\n  if(!file) {\n    return;\n  }\n  let name = file.fsName;\n  if(!/\\.json$/.test(name)) {\n    name += '.json';\n  }\n  let f = new File(name);\n  f.open('w');\n  f.encoding = 'utf-8';\n  f.write(data);\n  f.close();\n  return true;\n};\n"],"names":["ES_TYPE","FOLDER_ITEM","FOOTAGE_ITEM","COMP_ITEM","UNKNOWN","EVENT","INIT","LOG","WARN","ERROR","FINISH","CANCEL","ADD_TEMP","DEL_TEMP","LAYER_TRANSFORM","VECTOR_TRANSFORM","MASK_TRANSFORM","getPropertyValues","prop","matchName","noEasing","numKeys","arr","i","v1","keyValue","v2","c1","keyOutSpatialTangent","c2","keyInSpatialTangent","x1","y1","x2","y2","p1","p2","Math","abs","o","time","keyTime","value","e","getEasing","easing","push","k","b","r","is1","is2","start","end","t1","t2","e1","keyOutTemporalEase","e2","keyInTemporalEase","influence","indexOf","avSpeedX","avSpeedY","avSpeed","sqrt","speed","undefined","transformLayer","res","numProperties","item","property","enabled","hasOwnProperty","transformVector","transformMask","transformGeom","group","navigationShapeTree","name","content","transform","pop","rect","ellipse","star","path","stroke","fill","gFill","type","direction","size","position","roundness","starType","points","innerRadius","outerRadius","innerRoundness","outerRoundness","rotation","color","opacity","width","lineCap","lineJoin","miterLimit","dashes","d","g","canSetExpression","j","exec","length","v","len","rule","colors","gradient","ff","app","project","file","demoFile","File","absoluteURI","open","fileString","read","replace","hasNoGradColorData","gradientIndex","navigationIndex","encoded","unescape","encodeURIComponent","stringIndex","gradFillIndex","gradStrokeIndex","limitIndex","min","max","Number","MAX_VALUE","lastIndex","currentKey","keyframes","hasOpacity","maxOpacities","maxColors","gradientData","c","endMatch","xmlString","substr","XML_Ob","XML","stops","opacitiesArr","op","floats","nextFloats","midPoint","midPosition","roundNumber","toString","midPointValue","colorsArr","sortedColors","sort","sortFunction","midPointValueR","midPointValueG","midPointValueB","arrayLength","count","lastValue","offsetValue","mergedKeys","mergedArr","splice","l","m","p","num","decimals","parseFloat","toFixed","roundArray","retArray","a","a_0","b_0","shape","trim","psd2png","source","psd","helperSequenceComp","items","addComp","height","layers","add","$","ae2karas","addTemp","renderQueue","outputModule","applyTemplate","fileName","exists","remove","onStatusChanged","status","RQItemStatus","DONE","bug","rename","render","uuid","recursion","composition","library","displayStartTime","duration","error","hasSolo","solo","asParent","asChild","parent","index","children","outer","isTrackMatte","item2","parseLayer","isClip","last","isMask","reverse","layer","startTime","inPoint","outPoint","blendingMode","isCamera","trackMatteType","TrackMatteType","ALPHA_INVERTED","LUMA_INVERTED","warn","geom","txt","vector","mask","text","cameraZoom","cameraDepthOfField","cameraFocusDistance","cameraAperture","cameraBlurLevel","id","assetId","asset","FootageItem","src","fsName","test","newName","hasExist","CompItem","maskMode","MaskMode","NONE","list","mode","inverted","font","fontFamily","fontStyle","fontSize","leading","baselineLocs","applyFill","fillColor","strokeOver","strokeOverFill","applyStroke","strokeColor","strokeWidth","boxText","boxTextSize","boxTextPos","workAreaStart","workAreaDuration","log","result","parse","vertices","inTangents","outTangents","closed","it","ot","w","h","pts","cts","x","y","unshift","slice","controls","rect2polyline","ellipse2polyline","rx","ry","getAreaList","begin","reducer","startIndex","endIndex","first","Array","isArray","next","percent","sliceBezier","prev","t","p3","p4","x3","y3","x12","y12","x23","y23","x123","y123","x4","y4","x34","y34","x234","y234","x1234","y1234","transformOrigin","options","iterations","offset","transformOpacity","transformPosition","translateX","translateY","translateZ","isStart","translatePath","translateXY","key","transformRotateX","rotateX","transformRotateY","rotateY","transformRotateZ","rotateZ","transformScale","scaleX","scaleY","scaleZ","transformPath","isEnd","transformPoints","data","vertices1","inTangents1","outTangents1","vertices2","inTangents2","outTangents2","n","pIn","nIn","pOut","nOut","s","transformFill","parseInt","transformStroke","transformStrokeWidth","transformLineJoin","strokeLinejoin","isFirst","transformMiterLimit","transformSize","preParse","tagName","props","style","animate","parseAnimate","isDirect","isGeom","anchorPoint","position_0","position_1","position_2","scale","begin2","init","split","tfo","left","top","is3d","translateAbbr","perspective","pow","newLib","parentLink","display","libraryId","clip","BlendingMode","MULTIPLY","mixBlendMode","SCREEN","OVERLAY","DARKEN","COLOR_DODGE","COLOR_BURN","HARD_LIGHT","SOFT_LIGHT","DIFFERENCE","EXCLUSION","HUE","SATURATION","COLOR","LUMINOSITY","visibility","pointerEvents","lib","div","JSON","stringify","target","overflow","parseGeom","textStrokeColor","textStrokeWidth","textStrokeOver","lineHeight","right","textAlign","parseChildren","temp","parseMask","child","f","$geom","fillRule","cx","cy","steps","floor","x0","y0","strokeLineJoin","strokeMiterlimit","strokeDasharray","targetProps","ADD","abbr","cd","isType","obj","call","isObject","isString","isFunction","isNumber","isBoolean","Date","prototype","toJSON","isFinite","valueOf","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","String","Boolean","escapable","gap","indent","meta","rep","quote","string","charCodeAt","str","holder","mind","partial","join","replacer","space","Error","reviver","walk","eval2","eval","SyntaxError","enums","json","dispatch","xLib","ExternalObject","alert","Object","eventObj","CSXSEvent","getItemType","FolderItem","getCompositions","folderItem","numItems","compItem","findCompositionById","convert","delTemp","saveDialog","encoding","write","close"],"mappings":";;AAAA,YAAe;AACbA,EAAAA,OAAO,EAAE;AACPC,IAAAA,WAAW,EAAE,YADN;AAEPC,IAAAA,YAAY,EAAE,aAFP;AAGPC,IAAAA,SAAS,EAAE,UAHJ;AAIPC,IAAAA,OAAO,EAAE;AAJF,GADI;AAObC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAE,eADD;AAELC,IAAAA,GAAG,EAAE,cAFA;AAGLC,IAAAA,IAAI,EAAE,eAHD;AAILC,IAAAA,KAAK,EAAE,gBAJF;AAKLC,IAAAA,MAAM,EAAE,iBALH;AAMLC,IAAAA,MAAM,EAAE,iBANH;AAOLC,IAAAA,QAAQ,EAAE,kBAPL;AAQLC,IAAAA,QAAQ,EAAE;AARL;AAPM,CAAf;;ACAA,IAAMC,eAAe,GAAG;AACtB,uBAAqB,aADC;AAEtB,mBAAiB,UAFK;AAGtB,qBAAmB,YAHG;AAItB,qBAAmB,YAJG;AAKtB,qBAAmB,YALG;AAMtB,gBAAc,OANQ;AAOtB,sBAAoB,aAPE;AAQtB,mBAAiB,SARK;AAStB,mBAAiB,SATK;AAUtB,mBAAiB,SAVK;AAWtB,kBAAgB;AAXM,CAAxB;AAcA,IAAMC,gBAAgB,GAAG;AACvB,wBAAsB,aADC;AAEvB,0BAAwB,UAFD;AAGvB,uBAAqB,OAHE;AAIvB,sBAAoB,MAJG;AAKvB,2BAAyB,UALF;AAMvB,0BAAwB,SAND;AAOvB,+BAA6B,SAPN;AAQvB,4BAA0B,OARH;AASvB,0BAAwB;AATD,CAAzB;AAYA,IAAMC,cAAc,GAAG;AACrB,qBAAmB,QADE;AAErB,uBAAqB;AAFA,CAAvB;;AAKA,SAASC,iBAAT,CAA2BC,IAA3B,EAAiCC,SAAjC,EAA4CC,QAA5C,EAAsD;AACpD,MAAMC,OAAN,GAAkBH,IAAlB,CAAMG,OAAN,CADoD;;AAGpD,MAAGA,OAAO,IAAIA,OAAO,GAAG,CAAxB,EAA2B;AACzB,QAAIC,GAAG,GAAG,EAAV;;AACA,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIF,OAApB,EAA6BE,CAAC,EAA9B,EAAkC;AAChC;AACA,UAAGA,CAAC,KAAKF,OAAN,KAAkBF,SAAS,KAAK,eAAd,IAAiCA,SAAS,KAAK,sBAAjE,CAAH,EAA6F;AAC3F,YAAIK,EAAE,GAAGN,IAAI,CAACO,QAAL,CAAcF,CAAd,CAAT;AAAA,YAA2BG,EAAE,GAAGR,IAAI,CAACO,QAAL,CAAcF,CAAC,GAAG,CAAlB,CAAhC;AACA,YAAII,EAAE,GAAGT,IAAI,CAACU,oBAAL,CAA0BL,CAA1B,CAAT;AAAA,YAAuCM,EAAE,GAAGX,IAAI,CAACY,mBAAL,CAAyBP,CAAC,GAAG,CAA7B,CAA5C,CAF2F;;AAI3F,YAAIQ,EAAE,GAAGP,EAAE,CAAC,CAAD,CAAX;AAAA,YAAgBQ,EAAE,GAAGR,EAAE,CAAC,CAAD,CAAvB;AAAA,YAA4BS,EAAE,GAAGP,EAAE,CAAC,CAAD,CAAnC;AAAA,YAAwCQ,EAAE,GAAGR,EAAE,CAAC,CAAD,CAA/C;;AACA,YAAG,CAACK,EAAE,KAAKE,EAAP,IAAaD,EAAE,KAAKE,EAArB,MAA6BP,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAeA,EAAE,CAAC,CAAD,CAAF,KAAU,CAAzB,IAA8BE,EAAE,CAAC,CAAD,CAAF,KAAU,CAAxC,IAA6CA,EAAE,CAAC,CAAD,CAAF,KAAU,CAApF,CAAH,EAA2F;AACzF,cAAIM,EAAE,GAAG,CAACX,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAAX,EAAgBH,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAA1B,CAAT;AAAA,cAAyCS,EAAE,GAAG,CAACV,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAAX,EAAgBH,EAAE,CAAC,CAAD,CAAF,GAAQG,EAAE,CAAC,CAAD,CAA1B,CAA9C,CADyF;;AAGzF,cAAGE,EAAE,KAAK,CAAP,IAAYE,EAAE,KAAK,CAAtB,EAAyB;AACvB,gBAAGI,IAAI,CAACC,GAAL,CAASX,EAAE,CAAC,CAAD,CAAX,KAAmB,CAAnB,IAAwBU,IAAI,CAACC,GAAL,CAAST,EAAE,CAAC,CAAD,CAAX,KAAmB,CAA9C,EAAiD;AAC/C,kBAAIU,EAAC,GAAG;AACNC,gBAAAA,IAAI,EAAEtB,IAAI,CAACuB,OAAL,CAAalB,CAAb,IAAkB,IADlB;AAENmB,gBAAAA,KAAK,EAAE,CAACX,EAAD,EAAKC,EAAL,EAASG,EAAE,CAAC,CAAD,CAAX,EAAgBA,EAAE,CAAC,CAAD,CAAlB,EAAuBC,EAAE,CAAC,CAAD,CAAzB,EAA8BA,EAAE,CAAC,CAAD,CAAhC,EAAqCH,EAArC,EAAyCC,EAAzC;AAFD,eAAR;;AAIA,kBAAGX,CAAC,KAAKF,OAAN,IAAiB,CAACD,QAArB,EAA+B;AAC7B,oBAAIuB,CAAC,GAAGC,SAAS,CAAC1B,IAAD,EAAOK,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAjB;;AACA,oBAAGoB,CAAH,EAAM;AACJJ,kBAAAA,EAAC,CAACM,MAAF,GAAWF,CAAX;AACD;AACF;;AACDrB,cAAAA,GAAG,CAACwB,IAAJ,CAASP,EAAT;AACA;AACD;AACF,WAfD;AAAA,eAiBK;AACH,gBAAIQ,CAAC,SAAL;AAAA,gBAAOC,CAAC,SAAR;;AACA,gBAAGjB,EAAE,KAAK,CAAV,EAAa;AACXiB,cAAAA,CAAC,GAAGhB,EAAJ;AACAe,cAAAA,CAAC,GAAG,CAACb,EAAE,GAAGc,CAAN,IAAWf,EAAf;AACD,aAHD,MAIK,IAAGA,EAAE,KAAK,CAAV,EAAa;AAChBe,cAAAA,CAAC,GAAGd,EAAJ;AACAa,cAAAA,CAAC,GAAG,CAACf,EAAE,GAAGgB,CAAN,IAAWjB,EAAf;AACD,aAHI,MAIA;AACH,kBAAIkB,CAAC,GAAGlB,EAAE,GAAGE,EAAb;AACAe,cAAAA,CAAC,GAAG,CAAChB,EAAE,GAAGE,EAAE,GAAGe,CAAX,KAAiB,IAAIA,CAArB,CAAJ;AACAF,cAAAA,CAAC,GAAG,CAACf,EAAE,GAAGgB,CAAN,IAAWjB,EAAf;AACD,aAdE;;;AAgBH,gBAAImB,GAAG,GAAGb,IAAI,CAACC,GAAL,CAASS,CAAC,GAAGZ,EAAE,CAAC,CAAD,CAAN,GAAYa,CAAZ,GAAgBb,EAAE,CAAC,CAAD,CAA3B,KAAmC,CAA7C;AACA,gBAAIgB,GAAG,GAAGd,IAAI,CAACC,GAAL,CAASS,CAAC,GAAGX,EAAE,CAAC,CAAD,CAAN,GAAYY,CAAZ,GAAgBZ,EAAE,CAAC,CAAD,CAA3B,KAAmC,CAA7C;;AACA,gBAAGc,GAAG,IAAIC,GAAV,EAAe;AACb,kBAAIZ,GAAC,GAAG;AACNC,gBAAAA,IAAI,EAAEtB,IAAI,CAACuB,OAAL,CAAalB,CAAb,IAAkB,IADlB;AAENmB,gBAAAA,KAAK,EAAE,CAACX,EAAD,EAAKC,EAAL,EAASG,EAAE,CAAC,CAAD,CAAX,EAAgBA,EAAE,CAAC,CAAD,CAAlB,EAAuBC,EAAE,CAAC,CAAD,CAAzB,EAA8BA,EAAE,CAAC,CAAD,CAAhC,EAAqCH,EAArC,EAAyCC,EAAzC;AAFD,eAAR;;AAIA,kBAAGX,CAAC,KAAKF,OAAN,IAAiB,CAACD,QAArB,EAA+B;AAC7B,oBAAIuB,EAAC,GAAGC,SAAS,CAAC1B,IAAD,EAAOK,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAjB;;AACA,oBAAGoB,EAAH,EAAM;AACJJ,kBAAAA,GAAC,CAACM,MAAF,GAAWF,EAAX;AACD;AACF;;AACDrB,cAAAA,GAAG,CAACwB,IAAJ,CAASP,GAAT;AACA;AACD;AACF;AACF;AACF;;AACD,UAAIA,CAAC,GAAG;AACNC,QAAAA,IAAI,EAAEtB,IAAI,CAACuB,OAAL,CAAalB,CAAb,IAAkB,IADlB;AAENmB,QAAAA,KAAK,EAAExB,IAAI,CAACO,QAAL,CAAcF,CAAd;AAFD,OAAR;;AAIA,UAAGA,CAAC,KAAKF,OAAN,IAAiB,CAACD,QAArB,EAA+B;AAC7B,YAAIuB,GAAC,GAAGC,SAAS,CAAC1B,IAAD,EAAOK,CAAP,EAAUA,CAAC,GAAG,CAAd,CAAjB;;AACA,YAAGoB,GAAH,EAAM;AACJJ,UAAAA,CAAC,CAACM,MAAF,GAAWF,GAAX;AACD;AACF;;AACDrB,MAAAA,GAAG,CAACwB,IAAJ,CAASP,CAAT;AACD;;AACD,WAAOjB,GAAP;AACD,GA7ED,MA8EK,IAAGD,OAAO,IAAIA,OAAO,GAAG,CAAxB,EAA2B;AAC9B,WAAO,CAACH,IAAI,CAACO,QAAL,CAAc,CAAd,CAAD,CAAP;AACD,GAFI,MAGA;AACH,WAAO,CAACP,IAAI,CAACwB,KAAN,CAAP;AACD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASE,SAAT,CAAmB1B,IAAnB,EAAyBkC,KAAzB,EAAgCC,GAAhC,EAAqC;AACnC,MAAIC,EAAE,GAAGpC,IAAI,CAACuB,OAAL,CAAaW,KAAb,CAAT;AAAA,MAA8BG,EAAE,GAAGrC,IAAI,CAACuB,OAAL,CAAaY,GAAb,CAAnC;AACA,MAAI7B,EAAE,GAAGN,IAAI,CAACO,QAAL,CAAc2B,KAAd,CAAT;AAAA,MAA+B1B,EAAE,GAAGR,IAAI,CAACO,QAAL,CAAc4B,GAAd,CAApC;AACA,MAAIG,EAAE,GAAGtC,IAAI,CAACuC,kBAAL,CAAwBL,KAAxB,EAA+B,CAA/B,CAAT;AAAA,MAA4CM,EAAE,GAAGxC,IAAI,CAACyC,iBAAL,CAAuBN,GAAvB,EAA4B,CAA5B,CAAjD,CAHmC;AAKnC;AACA;;AACA,MAAItB,EAAE,GAAGyB,EAAE,CAACI,SAAH,GAAe,IAAxB;AAAA,MAA8B3B,EAAE,GAAG,IAAIyB,EAAE,CAACE,SAAH,GAAe,IAAtD;AACA,MAAI5B,EAAJ,EAAQE,EAAR;AACA,MAAIf,SAAS,GAAGD,IAAI,CAACC,SAArB;;AACA,MAAG,CACD,mBADC,EACoB,eADpB,EAED,oBAFC,EAEqB,sBAFrB,EAGD,YAHC,EAGa,mBAHb,EAID,kBAJC,EAImB0C,OAJnB,CAI2B1C,SAJ3B,IAIwC,CAAC,CAJ5C,EAI+C;AAC7C,QAAI2C,QAAQ,GAAGzB,IAAI,CAACC,GAAL,CAASZ,EAAE,CAAC,CAAD,CAAF,GAAQF,EAAE,CAAC,CAAD,CAAnB,KAA2B+B,EAAE,GAAGD,EAAhC,CAAf;AACA,QAAIS,QAAQ,GAAG1B,IAAI,CAACC,GAAL,CAASZ,EAAE,CAAC,CAAD,CAAF,GAAQF,EAAE,CAAC,CAAD,CAAnB,KAA2B+B,EAAE,GAAGD,EAAhC,CAAf;AACA,QAAIU,OAAO,GAAG3B,IAAI,CAAC4B,IAAL,CAAUH,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAA3C,CAAd;;AACA,QAAGC,OAAO,KAAK,CAAf,EAAkB;AAChBhC,MAAAA,EAAE,GAAGD,EAAE,GAAGyB,EAAE,CAACU,KAAR,GAAgBF,OAArB;AACA9B,MAAAA,EAAE,GAAG,IAAI,CAAC,IAAID,EAAL,IAAWyB,EAAE,CAACQ,KAAd,GAAsBF,OAA/B;AACD;AACF,GAZD,MAaK,IAAGtC,EAAE,KAAKF,EAAV,EAAa;AAChB,QAAIwC,QAAO,GAAG3B,IAAI,CAACC,GAAL,CAASZ,EAAE,GAAGF,EAAd,KAAqB+B,EAAE,GAAGD,EAA1B,CAAd;;AACAtB,IAAAA,EAAE,GAAGD,EAAE,GAAGyB,EAAE,CAACU,KAAR,GAAgBF,QAArB;AACA9B,IAAAA,EAAE,GAAG,IAAI,CAAC,IAAID,EAAL,IAAWyB,EAAE,CAACQ,KAAd,GAAsBF,QAA/B;AACD;;AACD,MAAGjC,EAAE,KAAKC,EAAP,IAAaC,EAAE,KAAKC,EAApB,IAA0BF,EAAE,KAAKmC,SAAjC,IAA8CjC,EAAE,KAAKiC,SAAxD,EAAmE;AACjE;AACD;;AACD,SAAO,CAACpC,EAAD,EAAKC,EAAL,EAASC,EAAT,EAAaC,EAAb,CAAP;AACD;;AAEM,SAASkC,cAAT,CAAwBlD,IAAxB,EAA8B;AACnC,MAAImD,GAAG,GAAG,EAAV;;AACA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,CAAC,IAAIL,IAAI,CAACoD,aAAjC,EAAgD/C,CAAC,EAAjD,EAAqD;AACnD,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,UAAGL,eAAe,CAAC4D,cAAhB,CAA+BvD,SAA/B,CAAH,EAA8C;AAC5CkD,QAAAA,GAAG,CAACvD,eAAe,CAACK,SAAD,CAAhB,CAAH,GAAkCF,iBAAiB,CAACsD,IAAD,EAAOpD,SAAP,EAAkB,KAAlB,CAAnD;AACD;AACF;AACF;;AACD,SAAOkD,GAAP;AACD;AAEM,SAASM,eAAT,CAAyBzD,IAAzB,EAA+B;AACpC,MAAImD,GAAG,GAAG,EAAV;;AACA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,CAAC,IAAIL,IAAI,CAACoD,aAAjC,EAAgD/C,CAAC,EAAjD,EAAqD;AACnD,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,UAAGJ,gBAAgB,CAAC2D,cAAjB,CAAgCvD,SAAhC,CAAH,EAA+C;AAC7CkD,QAAAA,GAAG,CAACtD,gBAAgB,CAACI,SAAD,CAAjB,CAAH,GAAmCF,iBAAiB,CAACsD,IAAD,EAAOpD,SAAP,EAAkB,KAAlB,CAApD;AACD;AACF;AACF;;AACD,SAAOkD,GAAP;AACD;AAEM,SAASO,aAAT,CAAuB1D,IAAvB,EAA6B;AAClC,MAAImD,GAAG,GAAG,EAAV;;AACA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,CAAC,IAAIL,IAAI,CAACoD,aAAjC,EAAgD/C,CAAC,EAAjD,EAAqD;AACnD,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,UAAGH,cAAc,CAAC0D,cAAf,CAA8BvD,SAA9B,CAAH,EAA6C;AAC3CkD,QAAAA,GAAG,CAACrD,cAAc,CAACG,SAAD,CAAf,CAAH,GAAiCF,iBAAiB,CAACsD,IAAD,EAAOpD,SAAP,EAAkB,IAAlB,CAAlD;AACD;AACF;AACF;;AACD,SAAOkD,GAAP;AACD;AAEM,SAASQ,aAAT,CAAuB3D,IAAvB,EAA6B;AAClC,SAAOD,iBAAiB,CAACC,IAAD,EAAO,EAAP,EAAW,IAAX,CAAxB;AACD;;AC9MD,SAAS4D,KAAT,CAAe5D,IAAf,EAAqB6D,mBAArB,EAA0C;AACxC,MAAIV,GAAG,GAAG,EAAV,CADwC;;AAGxC,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;AACA4D,MAAAA,mBAAmB,CAACjC,IAApB,CAAyByB,IAAI,CAACS,IAA9B;;AACA,cAAO7D,SAAP;AACE,aAAK,oBAAL;AACEkD,UAAAA,GAAG,CAACY,OAAJ,GAAcA,OAAO,CAACV,IAAD,EAAOQ,mBAAP,CAArB;AACA;;AACF,aAAK,6BAAL;AACE;AACAV,UAAAA,GAAG,CAACa,SAAJ,GAAgBP,eAAe,CAACJ,IAAD,CAA/B;AACA;AAPJ;;AASAQ,MAAAA,mBAAmB,CAACI,GAApB;AACD;AACF;;AACDd,EAAAA,GAAG,CAACY,OAAJ,CAAYC,SAAZ,GAAwBb,GAAG,CAACa,SAA5B;AACA,SAAOb,GAAG,CAACY,OAAX;AACD;;AAED,SAASA,OAAT,CAAiB/D,IAAjB,EAAuB6D,mBAAvB,EAA4C;AAC1C;AACA,MAAIV,GAAG,GAAG;AACRW,IAAAA,IAAI,EAAE9D,IAAI,CAAC8D,IADH;AAERC,IAAAA,OAAO,EAAE;AAFD,GAAV;;AAIA,OAAI,IAAI1D,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;AACA4D,MAAAA,mBAAmB,CAACjC,IAApB,CAAyByB,IAAI,CAACS,IAA9B;;AACA,cAAO7D,SAAP;AACE,aAAK,0BAAL;AACEkD,UAAAA,GAAG,CAACY,OAAJ,CAAYnC,IAAZ,CAAiBsC,IAAI,CAACb,IAAD,CAArB;AACA;;AACF,aAAK,6BAAL;AACEF,UAAAA,GAAG,CAACY,OAAJ,CAAYnC,IAAZ,CAAiBuC,OAAO,CAACd,IAAD,CAAxB;AACA;;AACF,aAAK,0BAAL;AACEF,UAAAA,GAAG,CAACY,OAAJ,CAAYnC,IAAZ,CAAiBwC,IAAI,CAACf,IAAD,CAArB;AACA;;AACF,aAAK,2BAAL;AACEF,UAAAA,GAAG,CAACY,OAAJ,CAAYnC,IAAZ,CAAiByC,MAAI,CAAChB,IAAD,CAArB;AACA;;AACF,aAAK,8BAAL;AACEF,UAAAA,GAAG,CAACmB,MAAJ,GAAaA,MAAM,CAACjB,IAAD,CAAnB;AACA;;AACF,aAAK,4BAAL;AACEF,UAAAA,GAAG,CAACoB,IAAJ,GAAWA,IAAI,CAAClB,IAAD,CAAf;AACA;;AACF,aAAK,8BAAL;AACEF,UAAAA,GAAG,CAACqB,KAAJ,GAAYA,KAAK,CAACnB,IAAD,EAAOQ,mBAAP,CAAjB;AACA;AArBJ;;AAuBAA,MAAAA,mBAAmB,CAACI,GAApB;AACD;AACF;;AACD,SAAOd,GAAP;AACD;;AAED,SAASe,IAAT,CAAclE,IAAd,EAAoB;AAClB;AACA,MAAImD,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE;AADE,GAAV;;AAGA,OAAI,IAAIpE,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,cAAOA,SAAP;AACE,aAAK,6BAAL;AACEkD,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAAC7B,KAArB;AACA;;AACF,aAAK,uBAAL;AACE2B,UAAAA,GAAG,CAACwB,IAAJ,GAAWhB,aAAa,CAACN,IAAD,CAAxB;AACA;;AACF,aAAK,2BAAL;AACEF,UAAAA,GAAG,CAACyB,QAAJ,GAAejB,aAAa,CAACN,IAAD,CAA5B;AACA;;AACF,aAAK,4BAAL;AACEF,UAAAA,GAAG,CAAC0B,SAAJ,GAAgBlB,aAAa,CAACN,IAAD,CAA7B;AACA;AAZJ;AAcD;AACF;;AACD,SAAOF,GAAP;AACD;;AAED,SAASgB,OAAT,CAAiBnE,IAAjB,EAAuB;AACrB,MAAImD,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE;AADE,GAAV;;AAGA,OAAI,IAAIpE,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,cAAOA,SAAP;AACE,aAAK,6BAAL;AACEkD,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAAC7B,KAArB;AACA;;AACF,aAAK,0BAAL;AACE2B,UAAAA,GAAG,CAACwB,IAAJ,GAAWhB,aAAa,CAACN,IAAD,CAAxB;AACA;;AACF,aAAK,8BAAL;AACEF,UAAAA,GAAG,CAACyB,QAAJ,GAAejB,aAAa,CAACN,IAAD,CAA5B;AACA;AATJ;AAWD;AACF;;AACD,SAAOF,GAAP;AACD;;AAED,SAASiB,IAAT,CAAcpE,IAAd,EAAoB;AAClB,MAAImD,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE;AADE,GAAV;;AAGA,OAAI,IAAIpE,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,cAAOA,SAAP;AACE,aAAK,6BAAL;AACEkD,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAAC7B,KAArB;AACA;;AACF,aAAK,uBAAL;AACE2B,UAAAA,GAAG,CAAC2B,QAAJ,GAAezB,IAAI,CAAC7B,KAApB;AACA;;AACF,aAAK,yBAAL;AACE2B,UAAAA,GAAG,CAAC4B,MAAJ,GAAa1B,IAAI,CAAC7B,KAAlB;AACA;;AACF,aAAK,2BAAL;AACE2B,UAAAA,GAAG,CAACyB,QAAJ,GAAevB,IAAI,CAAC7B,KAApB;AACA;;AACF,aAAK,+BAAL;AACE2B,UAAAA,GAAG,CAAC6B,WAAJ,GAAkB3B,IAAI,CAAC7B,KAAvB;AACA;;AACF,aAAK,+BAAL;AACE2B,UAAAA,GAAG,CAAC8B,WAAJ,GAAkB5B,IAAI,CAAC7B,KAAvB;AACA;;AACF,aAAK,iCAAL;AACE2B,UAAAA,GAAG,CAAC+B,cAAJ,GAAqB7B,IAAI,CAAC7B,KAA1B;AACA;;AACF,aAAK,iCAAL;AACE2B,UAAAA,GAAG,CAACgC,cAAJ,GAAqB9B,IAAI,CAAC7B,KAA1B;AACA;;AACF,aAAK,2BAAL;AACE2B,UAAAA,GAAG,CAACiC,QAAJ,GAAe/B,IAAI,CAAC7B,KAApB;AACA;AA3BJ;AA6BD;AACF;;AACD,SAAO2B,GAAP;AACD;;AAED,SAASmB,MAAT,CAAgBtE,IAAhB,EAAsB;AACpB,MAAImD,GAAG,GAAG,EAAV;;AACA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,cAAOA,SAAP;AACE,aAAK,0BAAL;AACEkD,UAAAA,GAAG,CAACkC,KAAJ,GAAY1B,aAAa,CAACN,IAAD,CAAzB;AACA;;AACF,aAAK,4BAAL;AACEF,UAAAA,GAAG,CAACmC,OAAJ,GAAc3B,aAAa,CAACN,IAAD,CAA3B;AACA;;AACF,aAAK,0BAAL;AACEF,UAAAA,GAAG,CAACoC,KAAJ,GAAY5B,aAAa,CAACN,IAAD,CAAzB;AACA;;AACF,aAAK,sBAAL;AACEF,UAAAA,GAAG,CAACqC,OAAJ,GAAc7B,aAAa,CAACN,IAAD,CAA3B;AACA;;AACF,aAAK,8BAAL;AACEF,UAAAA,GAAG,CAACsC,QAAJ,GAAe9B,aAAa,CAACN,IAAD,CAA5B;AACA;;AACF,aAAK,gCAAL;AACEF,UAAAA,GAAG,CAACuC,UAAJ,GAAiB/B,aAAa,CAACN,IAAD,CAA9B;AACA;AACF;AACA;AACA;AArBF;AAuBD;AACF,GA9BmB;;;AAgCpB,MAAIsC,MAAM,GAAG3F,IAAI,CAACsD,QAAL,CAAc,QAAd,CAAb;;AACA,MAAGqC,MAAH,EAAW;AACT,QAAIC,CAAC,GAAG,EAAR;AACA,QAAIC,CAAC,GAAG,EAAR;;AACA,SAAI,IAAIxF,EAAC,GAAG,CAAZ,EAAeA,EAAC,IAAIsF,MAAM,CAACvC,aAA3B,EAA0C/C,EAAC,EAA3C,EAA+C;AAC7C,UAAIgD,KAAI,GAAGsC,MAAM,CAACrC,QAAP,CAAgBjD,EAAhB,CAAX;;AACA,UAAGgD,KAAI,IAAIA,KAAI,CAACE,OAAhB,EAAyB;AACvB,YAAItD,UAAS,GAAGoD,KAAI,CAACpD,SAArB;;AACA,YAAGoD,KAAI,CAACyC,gBAAR,EAA0B;AACxB,cAAG7F,UAAS,CAAC0C,OAAV,CAAkB,yBAAlB,IAA+C,CAAC,CAAnD,EAAsD;AACpD,gBAAIoD,CAAC,GAAG,MAAMC,IAAN,CAAW/F,UAAX,CAAR;AACA2F,YAAAA,CAAC,CAACG,CAAC,CAAC,CAAD,CAAD,GAAO,CAAR,CAAD,GAAc1C,KAAI,CAAC7B,KAAnB;AACD,WAHD,MAIK,IAAGvB,UAAS,CAAC0C,OAAV,CAAkB,wBAAlB,IAA8C,CAAC,CAAlD,EAAqD;AACxD,gBAAIoD,EAAC,GAAG,MAAMC,IAAN,CAAW/F,UAAX,CAAR;;AACA4F,YAAAA,CAAC,CAACE,EAAC,CAAC,CAAD,CAAD,GAAO,CAAR,CAAD,GAAc1C,KAAI,CAAC7B,KAAnB;AACD;AACF;AACF;AACF;;AACD,QAAGoE,CAAC,CAACK,MAAL,EAAa;AACX,UAAIC,CAAC,GAAG,EAAR;;AACA,WAAI,IAAI7F,GAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGP,CAAC,CAACK,MAAvB,EAA+B5F,GAAC,GAAG8F,GAAnC,EAAwC9F,GAAC,EAAzC,EAA6C;AAC3C6F,QAAAA,CAAC,CAACtE,IAAF,CAAOgE,CAAC,CAACvF,GAAD,CAAR;;AACA,YAAGwF,CAAC,CAACxF,GAAD,CAAD,KAAS4C,SAAZ,EAAuB;AACrBiD,UAAAA,CAAC,CAACtE,IAAF,CAAOgE,CAAC,CAACvF,GAAD,CAAR;AACD,SAFD,MAGK;AACH6F,UAAAA,CAAC,CAACtE,IAAF,CAAOiE,CAAC,CAACxF,GAAD,CAAR;AACD;AACF;;AACD8C,MAAAA,GAAG,CAACwC,MAAJ,GAAaO,CAAb;AACD;AACF;;AACD,SAAO/C,GAAP;AACD;;AAED,SAASkB,MAAT,CAAcrE,IAAd,EAAoB;AAClB,MAAImD,GAAG,GAAG;AACRsB,IAAAA,IAAI,EAAE;AADE,GAAV;;AAGA,OAAI,IAAIpE,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,cAAOA,SAAP;AACE,aAAK,6BAAL;AACEkD,UAAAA,GAAG,CAACuB,SAAJ,GAAgBrB,IAAI,CAAC7B,KAArB;AACA;;AACF,aAAK,mBAAL;AACE2B,UAAAA,GAAG,CAAC4B,MAAJ,GAAapB,aAAa,CAACN,IAAD,CAA1B;AACA;AANJ;AAQD;AACF;;AACD,SAAOF,GAAP;AACD;;AAED,SAASoB,IAAT,CAAcvE,IAAd,EAAoB;AAClB,MAAImD,GAAG,GAAG,EAAV;;AACA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,cAAOA,SAAP;AACE,aAAK,uBAAL;AACEkD,UAAAA,GAAG,CAACiD,IAAJ,GAAW/C,IAAI,CAAC7B,KAAhB;AACA;;AACF,aAAK,wBAAL;AACE2B,UAAAA,GAAG,CAACkC,KAAJ,GAAY1B,aAAa,CAACN,IAAD,CAAzB;AACA;;AACF,aAAK,0BAAL;AACEF,UAAAA,GAAG,CAACmC,OAAJ,GAAc3B,aAAa,CAACN,IAAD,CAA3B;AACA;AATJ;AAWD;AACF;;AACD,SAAOF,GAAP;AACD;;AAED,SAASqB,KAAT,CAAexE,IAAf,EAAqB6D,mBAArB,EAA0C;AACxC,MAAIV,GAAG,GAAG,EAAV;;AACA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;AACA4D,MAAAA,mBAAmB,CAACjC,IAApB,CAAyByB,IAAI,CAACS,IAA9B;;AACA,cAAO7D,SAAP;AACE,aAAK,6BAAL;AACE;;AACF,aAAK,uBAAL;AACEkD,UAAAA,GAAG,CAACiD,IAAJ,GAAW/C,IAAI,CAAC7B,KAAhB;AACA;;AACF,aAAK,uBAAL;AACE2B,UAAAA,GAAG,CAACsB,IAAJ,GAAWpB,IAAI,CAAC7B,KAAhB;AACA;;AACF,aAAK,2BAAL;AACE2B,UAAAA,GAAG,CAACjB,KAAJ,GAAYmB,IAAI,CAAC7B,KAAjB;AACA;;AACF,aAAK,yBAAL;AACE2B,UAAAA,GAAG,CAAChB,GAAJ,GAAUkB,IAAI,CAAC7B,KAAf;AACA;;AACF,aAAK,yBAAL;AACE2B,UAAAA,GAAG,CAACkD,MAAJ,GAAaC,QAAQ,CAACjD,IAAD,EAAOQ,mBAAP,CAArB;AACA;;AACF,aAAK,0BAAL;AACEV,UAAAA,GAAG,CAACmC,OAAJ,GAAcjC,IAAI,CAAC7B,KAAnB;AACA;AApBJ;;AAsBAqC,MAAAA,mBAAmB,CAACI,GAApB;AACD;AACF;;AACD,SAAOd,GAAP;AACD;;AAED,SAASmD,QAAT,CAAkBtG,IAAlB,EAAwB6D,mBAAxB,EAA6C;AAC3C,MAAI1D,OAAO,GAAGH,IAAI,CAACG,OAAL,IAAgB,CAA9B;AACA,MAAIoG,EAAE,GAAGC,GAAG,CAACC,OAAJ,CAAYC,IAArB;;AACA,MAAGH,EAAH,EAAO;AACL,QAAII,QAAQ,GAAG,IAAIC,IAAJ,CAASL,EAAE,CAACM,WAAZ,CAAf;AACAF,IAAAA,QAAQ,CAACG,IAAT,CAAc,GAAd,EAAmB,MAAnB,EAA2B,MAA3B;AACA,QAAIC,UAAU,GAAGJ,QAAQ,CAACK,IAAT,CAAcL,QAAQ,CAACV,MAAvB,CAAjB;AACAc,IAAAA,UAAU,GAAGA,UAAU,CACpBE,OADU,CACF,MADE,EACM,eADN,EAEVA,OAFU,CAEF,MAFE,EAEM,iBAFN,CAAb;AAGA,QAAIC,kBAAkB,GAAG,KAAzB;;AACA,QAAGH,UAAU,CAACpE,OAAX,CAAmB,yBAAnB,MAAkD,CAAC,CAAtD,EAAyD;AACvDuE,MAAAA,kBAAkB,GAAG,IAArB;AACD;;AAED,QAAIC,aAAa,GAAG,CAApB;AAAA,QAAuBC,eAAe,GAAG,CAAzC;AACA,QAAI/G,CAAC,GAAG,CAAR;AAAA,QAAW8F,GAAG,GAAGtC,mBAAmB,CAACoC,MAArC;;AACA,WAAM5F,CAAC,GAAG8F,GAAV,EAAe;AACb,UAAIkB,OAAO,GAAGC,QAAQ,CAACC,kBAAkB,CAAC1D,mBAAmB,CAACxD,CAAD,CAAnB,GAAyB,MAA1B,CAAnB,CAAtB;AACA,UAAImH,WAAW,GAAGT,UAAU,CAACpE,OAAX,CAAmB0E,OAAnB,EAA4BD,eAAe,GAAG,CAA9C,CAAlB;;AACA,UAAGI,WAAW,KAAK,CAAC,CAApB,EAAuB;AACrBH,QAAAA,OAAO,GAAGC,QAAQ,CAACC,kBAAkB,CAAC1D,mBAAmB,CAACxD,CAAD,CAAnB,GAAyB,OAA1B,CAAnB,CAAlB;AACAmH,QAAAA,WAAW,GAAGT,UAAU,CAACpE,OAAX,CAAmB0E,OAAnB,EAA4BD,eAAe,GAAG,CAA9C,CAAd;AACD;;AACD,UAAGI,WAAW,KAAK,CAAC,CAApB,EAAuB;AACrBH,QAAAA,OAAO,GAAGC,QAAQ,CAACC,kBAAkB,CAAC1D,mBAAmB,CAACxD,CAAD,CAApB,CAAnB,CAAlB;AACAmH,QAAAA,WAAW,GAAGT,UAAU,CAACpE,OAAX,CAAmB0E,OAAnB,EAA4BD,eAAe,GAAG,CAA9C,CAAd;AACD;;AACDA,MAAAA,eAAe,GAAGI,WAAlB;AACAnH,MAAAA,CAAC,IAAI,CAAL;AACD;;AACD8G,IAAAA,aAAa,GAAGJ,UAAU,CAACpE,OAAX,CAAmB,yBAAnB,EAA8CyE,eAA9C,CAAhB;AACA,QAAIK,aAAa,GAAGV,UAAU,CAACpE,OAAX,CAAmB,8BAAnB,EAAmDyE,eAAnD,CAApB;AACA,QAAIM,eAAe,GAAGX,UAAU,CAACpE,OAAX,CAAmB,gCAAnB,EAAqDyE,eAArD,CAAtB;AACA,QAAIO,UAAJ;;AACA,QAAGD,eAAe,KAAK,CAAC,CAArB,IAA0BD,aAAa,KAAK,CAAC,CAAhD,EAAmD;AACjDE,MAAAA,UAAU,GAAGxG,IAAI,CAACyG,GAAL,CAASH,aAAT,EAAwBC,eAAxB,CAAb;AACD,KAFD,MAGK;AACHC,MAAAA,UAAU,GAAGxG,IAAI,CAAC0G,GAAL,CAASJ,aAAT,EAAwBC,eAAxB,CAAb;AACD;;AACD,QAAGC,UAAU,KAAK,CAAC,CAAnB,EAAsB;AACpBA,MAAAA,UAAU,GAAGG,MAAM,CAACC,SAApB;AACD;;AACD,QAAIC,SAAJ;AACA,QAAIC,UAAU,GAAG,CAAjB;AAAA,QAAoBC,SAAS,GAAG,EAAhC;AAAA,QAAoCC,UAAU,GAAG,KAAjD;AAAA,QAAwDC,YAAY,GAAG,CAAvE;AAAA,QAA0EC,SAAS,GAAG,CAAtF;;AACA,WAAMJ,UAAU,GAAG9H,OAAnB,EAA4B;AAC1B,UAAImI,YAAY,GAAG,EAAnB;AACAnB,MAAAA,aAAa,GAAGJ,UAAU,CAACpE,OAAX,CAAmB,WAAnB,EAAgCwE,aAAhC,CAAhB;;AACA,UAAGD,kBAAkB,IAAIC,aAAa,GAAGQ,UAAtC,IAAqDR,aAAa,KAAK,CAAC,CAAnB,IAAwBQ,UAAU,KAAKG,MAAM,CAACC,SAAtG,EAAkH;AAChHO,QAAAA,YAAY,CAACC,CAAb,GAAiB,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,EAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAf,CAAjB;AACAF,QAAAA,SAAS,GAAGlH,IAAI,CAAC0G,GAAL,CAASQ,SAAT,EAAoB,CAApB,CAAZ;AACD,OAHD,MAIK;AACH,YAAIG,QAAQ,GAAG,aAAf;AACAR,QAAAA,SAAS,GAAGjB,UAAU,CAACpE,OAAX,CAAmB6F,QAAnB,EAA6BrB,aAA7B,CAAZ;AACA,YAAIsB,SAAS,GAAG1B,UAAU,CAAC2B,MAAX,CAAkBvB,aAAlB,EAAiCa,SAAS,GAAGQ,QAAQ,CAACvC,MAArB,GAA8BkB,aAA/D,CAAhB;AACAsB,QAAAA,SAAS,GAAGA,SAAS,CAACxB,OAAV,CAAkB,KAAlB,EAAyB,EAAzB,CAAZ;AACA,YAAI0B,MAAM,GAAG,IAAIC,GAAJ,CAAQH,SAAR,CAAb;AACA,YAAII,KAAK,GAAGF,MAAM,CAAC,WAAD,CAAN,CAAoB,CAApB,EAAuB,WAAvB,EAAoC,CAApC,EAAuC,WAAvC,EAAoD,CAApD,EAAuD,WAAvD,EAAoE,CAApE,EAAuE,WAAvE,EAAoF,CAApF,EAAuF,WAAvF,EAAoG,CAApG,EAAuG,WAAvG,EAAoH,CAApH,EAAuH,WAAvH,CAAZ;AACA,YAAItC,MAAM,GAAGsC,MAAM,CAAC,WAAD,CAAN,CAAoB,CAApB,EAAuB,WAAvB,EAAoC,CAApC,EAAuC,WAAvC,EAAoD,CAApD,EAAuD,WAAvD,EAAoE,CAApE,EAAuE,WAAvE,EAAoF,CAApF,EAAuF,WAAvF,EAAoG,CAApG,EAAuG,WAAvG,EAAoH,CAApH,EAAuH,WAAvH,CAAb;AACAtI,QAAAA,CAAC,GAAG,CAAJ;AACA8F,QAAAA,GAAG,GAAG0C,KAAK,CAAC5C,MAAN,EAAN;AACA,YAAI6C,YAAY,GAAG,EAAnB;AAAA,YAAuBC,EAAE,SAAzB;AAAA,YAA2BC,MAAM,SAAjC;AAAA,YAAmCC,UAAU,SAA7C;AAAA,YAA+CC,QAAQ,SAAvD;AAAA,YAAyDC,WAAW,SAApE;;AACA,eAAM9I,CAAC,GAAG8F,GAAV,EAAe;AACb6C,UAAAA,MAAM,GAAGH,KAAK,CAACxI,CAAD,CAAL,CAAS,WAAT,EAAsB,CAAtB,EAAyB,WAAzB,EAAsC,CAAtC,EAAyC,OAAzC,EAAkD,CAAlD,UAAT;AACA0I,UAAAA,EAAE,GAAG,EAAL;AACAA,UAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB;AACAN,UAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB;;AACA,cAAGN,EAAE,CAAC,CAAD,CAAF,KAAU,CAAb,EAAgB;AACdZ,YAAAA,UAAU,GAAG,IAAb;AACD;;AACDW,UAAAA,YAAY,CAAClH,IAAb,CAAkBmH,EAAlB;AACAI,UAAAA,WAAW,GAAGC,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAzB;;AACA,cAAGhJ,CAAC,GAAG8F,GAAG,GAAG;AAAE;AAAf,YAA2C;AACzC4C,YAAAA,EAAE,GAAG,EAAL;AACAE,YAAAA,UAAU,GAAGJ,KAAK,CAACxI,CAAC,GAAG,CAAL,CAAL,CAAa,WAAb,EAA0B,CAA1B,EAA6B,WAA7B,EAA0C,CAA1C,EAA6C,OAA7C,EAAsD,CAAtD,UAAb;AACA6I,YAAAA,QAAQ,GAAGpB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoEF,WAA9G;AACA,gBAAIG,aAAa,GAAGxB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAvH;AACAN,YAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACF,QAAD,EAAW,CAAX,CAAnB;AACAH,YAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACE,aAAD,EAAgB,CAAhB,CAAnB;AACAR,YAAAA,YAAY,CAAClH,IAAb,CAAkBmH,EAAlB;AACD;;AACD1I,UAAAA,CAAC,IAAI,CAAL;AACD;;AACDA,QAAAA,CAAC,GAAG,CAAJ;AACA8F,QAAAA,GAAG,GAAGE,MAAM,CAACJ,MAAP,EAAN;AACA,YAAIsD,SAAS,GAAG,EAAhB;AACA,YAAIC,YAAY,GAAG,EAAnB;;AACA,eAAMnJ,CAAC,GAAG8F,GAAV,EAAe;AACbqD,UAAAA,YAAY,CAAC5H,IAAb,CAAkByE,MAAM,CAAChG,CAAD,CAAN,CAAU,WAAV,EAAuB,CAAvB,EAA0B,WAA1B,EAAuC,CAAvC,EAA0C,OAA1C,EAAmD,CAAnD,UAAlB;AACAA,UAAAA,CAAC,IAAI,CAAL;AACD;;AAEDmJ,QAAAA,YAAY,CAACC,IAAb,CAAkBC,YAAlB;AAEArJ,QAAAA,CAAC,GAAG,CAAJ;;AAEA,eAAMA,CAAC,GAAG8F,GAAV,EAAe;AACb6C,UAAAA,MAAM,GAAGQ,YAAY,CAACnJ,CAAD,CAArB;AACA0I,UAAAA,EAAE,GAAG,EAAL;AACAA,UAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB;AACAN,UAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB;AACAN,UAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB;AACAN,UAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAnB;AACAE,UAAAA,SAAS,CAAC3H,IAAV,CAAemH,EAAf;AACAI,UAAAA,WAAW,GAAGC,WAAW,CAACtB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAP,EAA+B,CAA/B,CAAzB;;AACA,cAAGhJ,CAAC,GAAG8F,GAAG,GAAG;AAAE;AAAf,YAA2C;AACzC4C,YAAAA,EAAE,GAAG,EAAL;AACAE,YAAAA,UAAU,GAAGO,YAAY,CAACnJ,CAAC,GAAG,CAAL,CAAzB;AACA6I,YAAAA,QAAQ,GAAGpB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoEF,WAA9G;AACA,gBAAIQ,cAAc,GAAG7B,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAxH;AACA,gBAAIO,cAAc,GAAG9B,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAxH;AACA,gBAAIQ,cAAc,GAAG/B,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAAN,GAA+B,CAACvB,MAAM,CAACmB,UAAU,CAAC,CAAD,CAAV,CAAcI,QAAd,EAAD,CAAN,GAAmCvB,MAAM,CAACkB,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,EAAD,CAA1C,IAAoE,GAAxH;AACAN,YAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACF,QAAD,EAAW,CAAX,CAAnB;AACAH,YAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACO,cAAD,EAAiB,CAAjB,CAAnB;AACAZ,YAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACQ,cAAD,EAAiB,CAAjB,CAAnB;AACAb,YAAAA,EAAE,CAACnH,IAAH,CAAQwH,WAAW,CAACS,cAAD,EAAiB,CAAjB,CAAnB;AACAN,YAAAA,SAAS,CAAC3H,IAAV,CAAemH,EAAf;AACD;;AACD1I,UAAAA,CAAC,IAAI,CAAL;AACD;;AACDiI,QAAAA,YAAY,CAACC,CAAb,GAAiBgB,SAAjB;AACAjB,QAAAA,YAAY,CAACjH,CAAb,GAAiByH,YAAjB;AACAV,QAAAA,YAAY,GAAGjH,IAAI,CAAC0G,GAAL,CAASO,YAAT,EAAuBU,YAAY,CAAC7C,MAApC,CAAf;AACAoC,QAAAA,SAAS,GAAGlH,IAAI,CAAC0G,GAAL,CAASQ,SAAT,EAAoBkB,SAAS,CAACtD,MAA9B,CAAZ;AACD;;AAEDkB,MAAAA,aAAa,GAAGa,SAAhB;AAEAE,MAAAA,SAAS,CAACtG,IAAV,CAAe0G,YAAf;AACAL,MAAAA,UAAU,IAAI,CAAd;AACD;;AACD5H,IAAAA,CAAC,GAAG,CAAJ;AACA,QAAID,GAAJ;AAAA,QAAS0J,WAAT;AAAA,QAAsBC,KAAtB;AAAA,QAA6BC,SAA7B;AAAA,QAAwCC,WAAxC;AAAA,QAAqDC,UAAU,GAAG,EAAlE;AAAA,QAAsEC,SAAtE;AAAA,QAAiFpE,CAAjF;;AACA,WAAM1F,CAAC,GAAGF,OAAV,EAAmB;AACjBgK,MAAAA,SAAS,GAAG,EAAZ;;AACA,UAAGjC,SAAS,CAAC7H,CAAD,CAAT,CAAakI,CAAb,CAAetC,MAAf,GAAwBoC,SAA3B,EAAsC;AACpCjI,QAAAA,GAAG,GAAG8H,SAAS,CAAC7H,CAAD,CAAT,CAAakI,CAAnB;AACAuB,QAAAA,WAAW,GAAG1J,GAAG,CAAC6F,MAAlB;AACA+D,QAAAA,SAAS,GAAG5J,GAAG,CAAC0J,WAAW,GAAG,CAAf,CAAf;AACAG,QAAAA,WAAW,GAAGD,SAAS,CAAC,CAAD,CAAvB;AACAD,QAAAA,KAAK,GAAG,CAAR;;AACA,eAAMD,WAAW,GAAGC,KAAd,GAAsB1B,SAA5B,EAAuC;AACrC4B,UAAAA,WAAW,IAAI,KAAf;AACA7J,UAAAA,GAAG,CAACgK,MAAJ,CAAWN,WAAW,GAAG,CAAzB,EAA4B,CAA5B,EAA+B,CAACG,WAAD,EAAcD,SAAS,CAAC,CAAD,CAAvB,EAA4BA,SAAS,CAAC,CAAD,CAArC,EAA0CA,SAAS,CAAC,CAAD,CAAnD,CAA/B;AACAD,UAAAA,KAAK,IAAI,CAAT;AACD;AACF;;AACD,WAAIhE,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGsC,SAAf,EAA0BtC,CAAC,IAAI,CAA/B,EAAkC;AAChC,aAAI,IAAIlE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,CAAnB,EAAsBA,CAAC,IAAI,CAA3B,EAA8B;AAC5BsI,UAAAA,SAAS,CAACvI,IAAV,CAAesG,SAAS,CAAC7H,CAAD,CAAT,CAAakI,CAAb,CAAexC,CAAf,EAAkBlE,CAAlB,CAAf;AACD;AACF;;AACD,UAAG,CAACsG,UAAJ,EAAgB;AACd,eAAOD,SAAS,CAAC7H,CAAD,CAAT,CAAagB,CAApB;AACD,OAFD,MAGK;AACH,YAAG6G,SAAS,CAAC7H,CAAD,CAAT,CAAagB,CAAb,CAAe4E,MAAf,GAAwBmC,YAA3B,EAAyC;AACvChI,UAAAA,GAAG,GAAG8H,SAAS,CAAC7H,CAAD,CAAT,CAAagB,CAAnB;AACAyI,UAAAA,WAAW,GAAG1J,GAAG,CAAC6F,MAAlB;AACA+D,UAAAA,SAAS,GAAG5J,GAAG,CAAC0J,WAAW,GAAG,CAAf,CAAf;AACAG,UAAAA,WAAW,GAAGD,SAAS,CAAC,CAAD,CAAvB;AACAD,UAAAA,KAAK,GAAG,CAAR;;AACA,iBAAMD,WAAW,GAAGC,KAAd,GAAsB3B,YAA5B,EAA0C;AACxC6B,YAAAA,WAAW,IAAI,KAAf;AACA7J,YAAAA,GAAG,CAACgK,MAAJ,CAAWN,WAAW,GAAG,CAAzB,EAA4B,CAA5B,EAA+B,CAACG,WAAD,EAAcD,SAAS,CAAC,CAAD,CAAvB,EAA4BA,SAAS,CAAC,CAAD,CAArC,EAA0CA,SAAS,CAAC,CAAD,CAAnD,CAA/B;AACAD,YAAAA,KAAK,IAAI,CAAT;AACD;AACF;;AACD,aAAIhE,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGqC,YAAf,EAA6BrC,CAAC,IAAI,CAAlC,EAAqC;AACnC,eAAI,IAAIsE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,CAAnB,EAAsBA,CAAC,IAAI,CAA3B,EAA8B;AAC5BF,YAAAA,SAAS,CAACvI,IAAV,CAAesG,SAAS,CAAC7H,CAAD,CAAT,CAAagB,CAAb,CAAe0E,CAAf,EAAkBsE,CAAlB,CAAf;AACD;AACF;AACF;;AACD,UAAGlK,OAAO,IAAI,CAAd,EAAiB;AACf+J,QAAAA,UAAU,GAAGC,SAAb;AACD,OAFD,MAGK;AACHD,QAAAA,UAAU,CAACtI,IAAX,CAAgBuI,SAAhB;AACD;;AACD9J,MAAAA,CAAC,IAAI,CAAL;AACD;;AACD,WAAO;AACLiK,MAAAA,CAAC,EAAEJ,UADE;AAELK,MAAAA,CAAC,EAAElC;AAFE,KAAP;AAID;AACF;;AAED,SAASe,WAAT,CAAqBoB,GAArB,EAA0BC,QAA1B,EAAoC;AAClCD,EAAAA,GAAG,GAAGA,GAAG,IAAI,CAAb;;AACA,MAAG,OAAOA,GAAP,KAAe,QAAlB,EAA4B;AAC1B,WAAOE,UAAU,CAACF,GAAG,CAACG,OAAJ,CAAYF,QAAZ,CAAD,CAAjB;AACD,GAFD,MAGK;AACH,WAAOG,UAAU,CAACJ,GAAD,EAAMC,QAAN,CAAjB;AACD;AACF;;AAED,SAASG,UAAT,CAAoBxK,GAApB,EAAyBqK,QAAzB,EAAmC;AACjC,MAAIpK,CAAJ;AAAA,MAAO8F,GAAG,GAAG/F,GAAG,CAAC6F,MAAjB;AACA,MAAI4E,QAAQ,GAAG,EAAf;;AACA,OAAIxK,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG8F,GAAf,EAAoB9F,CAAC,IAAI,CAAzB,EAA4B;AAC1B,QAAG,OAAOD,GAAG,CAACC,CAAD,CAAV,KAAkB,QAArB,EAA+B;AAC7BwK,MAAAA,QAAQ,CAACjJ,IAAT,CAAcwH,WAAW,CAAChJ,GAAG,CAACC,CAAD,CAAJ,EAASoK,QAAT,CAAzB;AACD,KAFD,MAGK;AACHI,MAAAA,QAAQ,CAACjJ,IAAT,CAAcgJ,UAAU,CAACxK,GAAG,CAACC,CAAD,CAAJ,EAASoK,QAAT,CAAxB;AACD;AACF;;AACD,SAAOI,QAAP;AACD;;AAED,SAASnB,YAAT,CAAsBoB,CAAtB,EAAyBhJ,CAAzB,EAA4B;AAC1B,MAAIiJ,GAAG,GAAGjD,MAAM,CAACgD,CAAC,CAAC,CAAD,CAAD,CAAKzB,QAAL,EAAD,CAAhB;AACA,MAAI2B,GAAG,GAAGlD,MAAM,CAAChG,CAAC,CAAC,CAAD,CAAD,CAAKuH,QAAL,EAAD,CAAhB;;AACA,MAAG0B,GAAG,KAAKC,GAAX,EAAgB;AACd,WAAO,CAAP;AACD,GAFD,MAGK;AACH,WAAQD,GAAG,GAAGC,GAAP,GAAc,CAAC,CAAf,GAAmB,CAA1B;AACD;AACF;;AAEc,iBAAShL,IAAT,EAAe6D,mBAAf,EAAoC;AACjD,MAAIV,GAAG,GAAG,EAAV,CADiD;;AAGjD,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;AACA4D,MAAAA,mBAAmB,CAACjC,IAApB,CAAyByB,IAAI,CAACS,IAA9B;;AACA,cAAO7D,SAAP;AACE,aAAK,mBAAL;AACEkD,UAAAA,GAAG,CAAC8H,KAAJ,GAAYrH,KAAK,CAACP,IAAD,EAAOQ,mBAAP,CAAjB;AACA;;AACF,aAAK,2BAAL;AACEV,UAAAA,GAAG,CAAC+H,IAAJ,GAAWzH,eAAe,CAACJ,IAAD,CAA1B;AACA;AANJ;;AAQAQ,MAAAA,mBAAmB,CAACI,GAApB;AACD;AACF;;AACD,SAAOd,GAAP;AACD;;ACziBD,aAAe;AACbgI,EAAAA,OADa,mBACLC,MADK,EACGC,GADH,EACQhH,IADR,EACcP,IADd,EACoB;AAC/B,QAAIwH,kBAAkB,GAAG9E,GAAG,CAACC,OAAJ,CAAY8E,KAAZ,CAAkBC,OAAlB,CAA0B,mBAA1B,EAA+CJ,MAAM,CAAC7F,KAAtD,EAA6D6F,MAAM,CAACK,MAApE,EAA4E,CAA5E,EAA+E,CAA/E,EAAkF,CAAlF,CAAzB;AACAH,IAAAA,kBAAkB,CAACI,MAAnB,CAA0BC,GAA1B,CAA8BP,MAA9B;AACAQ,IAAAA,CAAC,CAACC,QAAF,CAAWC,OAAX,CAAmBR,kBAAnB;AAEA,QAAIjI,IAAI,GAAGmD,GAAG,CAACC,OAAJ,CAAYsF,WAAZ,CAAwBR,KAAxB,CAA8BI,GAA9B,CAAkCL,kBAAlC,CAAX;AACAM,IAAAA,CAAC,CAACC,QAAF,CAAWC,OAAX,CAAmBzI,IAAnB;AAEA,QAAI2I,YAAY,GAAG3I,IAAI,CAAC2I,YAAL,CAAkB,CAAlB,CAAnB;AACAA,IAAAA,YAAY,CAACC,aAAb,CAA2B,2BAA3B;AACA,QAAIC,QAAQ,GAAG7H,IAAI,GAAGP,IAAtB;AACA,QAAI4C,IAAI,GAAG,IAAIE,IAAJ,CAASsF,QAAT,CAAX;;AACA,QAAGxF,IAAI,CAACyF,MAAR,EAAgB;AACdzF,MAAAA,IAAI,CAAC0F,MAAL;AACD;;AACDJ,IAAAA,YAAY,CAACtF,IAAb,GAAoB,IAAIE,IAAJ,CAASsF,QAAT,CAApB;;AAEA7I,IAAAA,IAAI,CAACgJ,eAAL,GAAuB,YAAW;AAChC;AACA,UAAGhJ,IAAI,CAACiJ,MAAL,KAAgBC,YAAY,CAACC,IAAhC,EAAsC;AACpC,YAAIC,GAAG,GAAG,IAAI7F,IAAJ,CAASsF,QAAQ,GAAG,OAApB,CAAV;;AACA,YAAGO,GAAG,CAACN,MAAP,EAAe;AACbM,UAAAA,GAAG,CAACC,MAAJ,CAAW5I,IAAX;AACD;AACF;AACF,KARD;;AASA0C,IAAAA,GAAG,CAACC,OAAJ,CAAYsF,WAAZ,CAAwBY,MAAxB;AACD;AA5BY,CAAf;;ACIA,IAAIC,MAAI,GAAG,CAAX;;AAEA,SAASC,WAAT,CAAmBC,WAAnB,EAAgCC,OAAhC,EAAyClJ,mBAAzC,EAA8D;AAC5D,MAAMC,IAAN,GAAkEgJ,WAAlE,CAAMhJ,IAAN;AAAA,MAAY4H,MAAZ,GAAkEoB,WAAlE,CAAYpB,MAAZ;AAAA,MAAoBnG,KAApB,GAAkEuH,WAAlE,CAAoBvH,KAApB;AAAA,MAA2BkG,MAA3B,GAAkEqB,WAAlE,CAA2BrB,MAA3B;AAAA,MAAmCuB,gBAAnC,GAAkEF,WAAlE,CAAmCE,gBAAnC;AAAA,MAAqDC,QAArD,GAAkEH,WAAlE,CAAqDG,QAArD;AACArB,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,kBAAkBpJ,IAAnC,EAF4D;;AAI5D,MAAIqJ,OAAJ;;AACA,OAAI,IAAI9M,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIqL,MAAM,CAACzF,MAA3B,EAAmC5F,CAAC,EAApC,EAAwC;AACtC,QAAIgD,IAAI,GAAGqI,MAAM,CAACrL,CAAD,CAAjB;;AACA,QAAGgD,IAAI,CAAC+J,IAAR,EAAc;AACZD,MAAAA,OAAO,GAAG,IAAV;AACA;AACD;AACF,GAX2D;;;AAa5D,MAAIE,QAAQ,GAAG,EAAf;AAAA,MAAmBC,OAAO,GAAG,EAA7B;;AACA,OAAI,IAAIjN,EAAC,GAAG,CAAZ,EAAeA,EAAC,IAAIqL,MAAM,CAACzF,MAA3B,EAAmC5F,EAAC,EAApC,EAAwC;AACtC,QAAIgD,KAAI,GAAGqI,MAAM,CAACrL,EAAD,CAAjB;;AACA,QAAG8M,OAAH,EAAY;AACV,UAAG,CAAC9J,KAAI,CAAC+J,IAAT,EAAe;AACb;AACD;AACF,KAJD,MAKK;AACH,UAAG,CAAC/J,KAAI,CAACE,OAAT,EAAkB;AAChB;AACD;AACF;;AACD,QAAGF,KAAI,CAACkK,MAAL,IAAelK,KAAI,CAACkK,MAAL,CAAYC,KAA9B,EAAqC;AACnCH,MAAAA,QAAQ,CAAChK,KAAI,CAACkK,MAAL,CAAYC,KAAb,CAAR,GAA8B,IAA9B;AACAF,MAAAA,OAAO,CAACjK,KAAI,CAACmK,KAAN,CAAP,GAAsBnK,KAAI,CAACkK,MAAL,CAAYC,KAAlC;AACD;AACF,GA9B2D;;;AAgC5D,MAAIC,QAAQ,GAAG,EAAf;;AACAC,EAAAA,KAAK,EACL,KAAI,IAAIrN,GAAC,GAAG,CAAZ,EAAeA,GAAC,IAAIqL,MAAM,CAACzF,MAA3B,EAAmC5F,GAAC,EAApC,EAAwC;AACtC,QAAIgD,MAAI,GAAGqI,MAAM,CAACrL,GAAD,CAAjB;AACA,QAAImN,KAAK,GAAGnK,MAAI,CAACmK,KAAjB,CAFsC;;AAItC,QAAG,CAACH,QAAQ,CAAC7J,cAAT,CAAwBgK,KAAxB,CAAJ,EAAoC;AAClC,UAAGL,OAAH,EAAY;AACV,YAAG,CAAC9J,MAAI,CAAC+J,IAAN,IAAc,CAAC/J,MAAI,CAACsK,YAAvB,EAAqC;AACnC;AACD;AACF,OAJD,MAKK;AACH,YAAG,CAACtK,MAAI,CAACE,OAAN,IAAiB,CAACF,MAAI,CAACsK,YAA1B,EAAwC;AACtC;AACD;AACF;AACF,KAfqC;;;AAiBtC,QAAGtK,MAAI,CAACsK,YAAR,EAAsB;AACpB,WAAI,IAAI5H,CAAC,GAAG1F,GAAC,GAAG,CAAhB,EAAmB0F,CAAC,IAAI2F,MAAM,CAACzF,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AAC1C,YAAI6H,KAAK,GAAGlC,MAAM,CAAC3F,CAAD,CAAlB;;AACA,YAAG,CAAC6H,KAAK,CAACD,YAAV,EAAwB;AACtB,cAAGR,OAAH,EAAY;AACV,gBAAG,CAACS,KAAK,CAACR,IAAV,EAAgB;AACd,uBAASM,KAAT;AACD,aAFD,MAGK;AACH;AACD;AACF,WAPD,MAQK;AACH,gBAAG,CAACE,KAAK,CAACrK,OAAV,EAAmB;AACjB,uBAASmK,KAAT;AACD,aAFD,MAGK;AACH;AACD;AACF;AACF;AACF;AACF;;AACD,QAAIrM,CAAC,GAAGwM,UAAU,CAACxK,MAAD,EAAO0J,OAAP,EAAgBlJ,mBAAhB,EAAqCsJ,OAArC,CAAlB;;AACA,QAAG9L,CAAH,EAAM;AACJ;AACA,UAAGgM,QAAQ,CAAC7J,cAAT,CAAwBgK,KAAxB,CAAH,EAAmC;AACjCH,QAAAA,QAAQ,CAACG,KAAD,CAAR,GAAkBnM,CAAC,CAACgM,QAAF,GAAaT,MAAI,EAAnC;AACD,OAJG;;;AAMJ,UAAGvM,GAAC,GAAG,CAAJ,IAASgB,CAAC,CAACyM,MAAd,EAAsB;AACpB,YAAIC,IAAI,GAAGN,QAAQ,CAACA,QAAQ,CAACxH,MAAT,GAAkB,CAAnB,CAAnB;;AACA,YAAG8H,IAAI,IAAIA,IAAI,CAACC,MAAhB,EAAwB;AACtBD,UAAAA,IAAI,CAACD,MAAL,GAAc,IAAd;AACD;AACF;;AACDL,MAAAA,QAAQ,CAAC7L,IAAT,CAAcP,CAAd;AACD;AACF,GAzF2D;;;AA2F5D,OAAI,IAAIhB,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGoN,QAAQ,CAACxH,MAA5B,EAAoC5F,GAAC,EAArC,EAAyC;AACvC,QAAIgD,MAAI,GAAGoK,QAAQ,CAACpN,GAAD,CAAnB;AACA,QAAImN,MAAK,GAAGnK,MAAI,CAACmK,KAAjB;;AACA,QAAGF,OAAO,CAAC9J,cAAR,CAAuBgK,MAAvB,CAAH,EAAkC;AAChCnK,MAAAA,MAAI,CAACiK,OAAL,GAAeD,QAAQ,CAACC,OAAO,CAACE,MAAD,CAAR,CAAvB;AACD;AACF;;AACDC,EAAAA,QAAQ,CAACQ,OAAT;AACA,SAAO;AACLxJ,IAAAA,IAAI,EAAE,KADD;AAELX,IAAAA,IAAI,EAAJA,IAFK;AAGLyB,IAAAA,KAAK,EAALA,KAHK;AAILkG,IAAAA,MAAM,EAANA,MAJK;AAKLuB,IAAAA,gBAAgB,EAAEA,gBAAgB,GAAG,IALhC;AAKsC;AAC3CC,IAAAA,QAAQ,EAAEA,QAAQ,GAAG,IANhB;AAMsB;AAC3BQ,IAAAA,QAAQ,EAARA;AAPK,GAAP;AASD;;AAED,SAASI,UAAT,CAAoBK,KAApB,EAA2BnB,OAA3B,EAAoClJ,mBAApC,EAAyDsJ,OAAzD,EAAkE;AAChE,MAAIhK,GAAG,GAAG;AACRW,IAAAA,IAAI,EAAEoK,KAAK,CAACpK,IADJ;AAER0J,IAAAA,KAAK,EAAEU,KAAK,CAACV,KAFL;AAGRjI,IAAAA,KAAK,EAAE2I,KAAK,CAAC3I,KAHL;AAIRkG,IAAAA,MAAM,EAAEyC,KAAK,CAACzC,MAJN;AAKR0C,IAAAA,SAAS,EAAED,KAAK,CAACC,SAAN,GAAkB,IALrB;AAK2B;AACnCC,IAAAA,OAAO,EAAEF,KAAK,CAACE,OAAN,GAAgB,IANjB;AAMuB;AAC/BC,IAAAA,QAAQ,EAAEH,KAAK,CAACG,QAAN,GAAiB,IAPnB;AAOyB;AACjCC,IAAAA,YAAY,EAAEJ,KAAK,CAACI,YARZ;AAUR;;AAVQ,GAAV;AAYA,MAAIrO,SAAS,GAAGiO,KAAK,CAACjO,SAAtB;;AACA,MAAGA,SAAS,KAAK,mBAAjB,EAAsC;AACpCkD,IAAAA,GAAG,CAACoL,QAAJ,GAAe,IAAf;AACD,GAFD,MAGK,IAAGL,KAAK,CAACP,YAAT,EAAuB;AAC1BxK,IAAAA,GAAG,CAAC6K,MAAJ,GAAa,IAAb;AACA7K,IAAAA,GAAG,CAAC2K,MAAJ,GAAaI,KAAK,CAACM,cAAN,KAAyBC,cAAc,CAACC,cAAxC,IACRR,KAAK,CAACM,cAAN,KAAyBC,cAAc,CAACE,aAD7C;AAED;;AACD9K,EAAAA,mBAAmB,CAACjC,IAApB,CAAyBuB,GAAG,CAACW,IAA7B,EAtBgE;;AAwBhE,MAAGqJ,OAAH,EAAY;AACVhK,IAAAA,GAAG,CAACI,OAAJ,GAAc2K,KAAK,CAACd,IAAN,IAAcc,KAAK,CAACP,YAAlC;AACD,GAFD,MAGK;AACHxK,IAAAA,GAAG,CAACI,OAAJ,GAAc2K,KAAK,CAAC3K,OAAN,IAAiB2K,KAAK,CAACP,YAArC;AACD;;AACD/B,EAAAA,CAAC,CAACC,QAAF,CAAW+C,IAAX,CAAgB,YAAYzL,GAAG,CAACW,IAAhC;AACA,MAAI+K,IAAJ,EAAUC,GAAV;;AACA,OAAI,IAAIzO,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAI6N,KAAK,CAAC9K,aAA1B,EAAyC/C,CAAC,EAA1C,EAA8C;AAC5C,QAAIL,IAAI,GAAGkO,KAAK,CAAC5K,QAAN,CAAejD,CAAf,CAAX;;AACA,QAAGL,IAAI,IAAIA,IAAI,CAACuD,OAAhB,EAAyB;AACvB,UAAItD,UAAS,GAAGD,IAAI,CAACC,SAArB;AACA4D,MAAAA,mBAAmB,CAACjC,IAApB,CAAyB5B,IAAI,CAAC8D,IAA9B;;AACA,cAAO7D,UAAP;AACE,aAAK,sBAAL;AACEkD,UAAAA,GAAG,CAACa,SAAJ,GAAgBd,cAAc,CAAClD,IAAD,CAA9B;AACA;;AACF,aAAK,yBAAL;AACE;AACA,cAAGmD,GAAG,CAACI,OAAP,EAAgB;AACdsL,YAAAA,IAAI,GAAGE,MAAM,CAAC/O,IAAD,EAAO6D,mBAAP,CAAb;AACD;;AACD;;AACF,aAAK,kBAAL;AACE,cAAGV,GAAG,CAACI,OAAP,EAAgB;AACdJ,YAAAA,GAAG,CAAC6L,IAAJ,GAAWA,IAAI,CAAChP,IAAD,CAAf;AACD;;AACD;;AACF,aAAK,sBAAL;AACE,cAAGmD,GAAG,CAACI,OAAP,EAAgB;AACduL,YAAAA,GAAG,GAAGG,IAAI,CAACjP,IAAD,CAAV;AACD;;AACD;;AACF,aAAK,2BAAL;AACE,cAAGmD,GAAG,CAACoL,QAAP,EAAiB;AACf,iBAAI,IAAIlO,GAAC,GAAG,CAAZ,EAAeL,IAAI,IAAIK,GAAC,IAAIL,IAAI,CAACoD,aAAjC,EAAgD/C,GAAC,EAAjD,EAAqD;AACnD,kBAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,GAAd,CAAX;;AACA,kBAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,oBAAItD,WAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,oBAAGA,WAAS,KAAK,kBAAjB,EAAqC;AACnCkD,kBAAAA,GAAG,CAAC+L,UAAJ,GAAiB7L,IAAI,CAAC7B,KAAtB;AACD,iBAFD,MAGK,IAAGvB,WAAS,KAAK,4BAAjB,EAA+C;AAClDkD,kBAAAA,GAAG,CAACgM,kBAAJ,GAAyB9L,IAAI,CAAC7B,KAA9B;AACD,iBAFI,MAGA,IAAGvB,WAAS,KAAK,4BAAjB,EAA+C;AAClDkD,kBAAAA,GAAG,CAACiM,mBAAJ,GAA0B/L,IAAI,CAAC7B,KAA/B;AACD,iBAFI,MAGA,IAAGvB,WAAS,KAAK,sBAAjB,EAAyC;AAC5CkD,kBAAAA,GAAG,CAACkM,cAAJ,GAAqBhM,IAAI,CAAC7B,KAA1B;AACD,iBAFI,MAGA,IAAGvB,WAAS,KAAK,wBAAjB,EAA2C;AAC9CkD,kBAAAA,GAAG,CAACmM,eAAJ,GAAsBjM,IAAI,CAAC7B,KAA3B;AACD;AACF;AACF;AACF;;AACD;AA5CJ;;AA8CAqC,MAAAA,mBAAmB,CAACI,GAApB;AACD;AACF,GArF+D;;;AAuFhE,MAAGd,GAAG,CAACI,OAAP,EAAgB;AACd,QAAI6H,MAAM,GAAG8C,KAAK,CAAC9C,MAAnB;;AACA,QAAGyD,IAAI,IAAIA,IAAI,CAAC5D,KAAb,IAAsB4D,IAAI,CAAC5D,KAAL,CAAWlH,OAAjC,IAA4C8K,IAAI,CAAC5D,KAAL,CAAWlH,OAAX,CAAmBkC,MAAlE,EAA0E;AACxE4I,MAAAA,IAAI,CAACA,IAAL,GAAY,IAAZ,CADwE;;AAExEA,MAAAA,IAAI,CAACpK,IAAL,GAAY,KAAZ;AACAoK,MAAAA,IAAI,CAACU,EAAL,GAAUxC,OAAO,CAAC9G,MAAlB;AACA8G,MAAAA,OAAO,CAACnL,IAAR,CAAaiN,IAAb;AACA1L,MAAAA,GAAG,CAACqM,OAAJ,GAAcX,IAAI,CAACU,EAAnB;AACD,KAND,MAOK,IAAGT,GAAH,EAAQ;AACXA,MAAAA,GAAG,CAACG,IAAJ,GAAW,IAAX,CADW;;AAEXH,MAAAA,GAAG,CAACrK,IAAJ,GAAW,MAAX;AACAqK,MAAAA,GAAG,CAACS,EAAJ,GAASxC,OAAO,CAAC9G,MAAjB;AACA8G,MAAAA,OAAO,CAACnL,IAAR,CAAakN,GAAb;AACA3L,MAAAA,GAAG,CAACqM,OAAJ,GAAcV,GAAG,CAACS,EAAlB;AACD,KANI,MAOA,IAAGnE,MAAH,EAAW;AACd,UAAIqE,KAAJ,CADc;;AAGd,UAAGrE,MAAM,YAAYsE,WAArB,EAAkC;AAChC,YAAIC,GAAG,GAAGvE,MAAM,CAAC1E,IAAP,IAAe0E,MAAM,CAAC1E,IAAP,CAAYkJ,MAArC,CADgC;;AAGhC,YAAGD,GAAH,EAAQ;AACN,cAAI7L,IAAI,GAAGsH,MAAM,CAACtH,IAAlB;;AACA,cAAG,SAAS+L,IAAT,CAAc/L,IAAd,CAAH,EAAwB;AACtB,gBAAIO,IAAI,GAAGsL,GAAG,CAAC1I,OAAJ,CAAY,cAAZ,EAA4B,EAA5B,CAAX;AACA,gBAAI6I,OAAO,GAAGhM,IAAI,CAACmD,OAAL,CAAa,QAAb,EAAuB,GAAvB,IAA8B,SAA9B,GAA0CiH,KAAK,CAACV,KAAhD,GAAwD,MAAtE;AACAb,YAAAA,MAAM,CAACxB,OAAP,CAAeC,MAAf,EAAuBuE,GAAvB,EAA4BtL,IAA5B,EAAkCyL,OAAlC;AACAH,YAAAA,GAAG,GAAGtL,IAAI,GAAGyL,OAAb;AACD;;AACD,cAAG,CAAC,SAASD,IAAT,CAAcF,GAAd,CAAD,IACE,CAAC,UAAUE,IAAV,CAAeF,GAAf,CADH,IAEE,CAAC,QAAQE,IAAR,CAAaF,GAAb,CAFH,IAGE,CAAC,SAASE,IAAT,CAAcF,GAAd,CAHH,IAIE,CAAC,QAAQE,IAAR,CAAaF,GAAb,CAJN,EAIyB;AACvB;AACD;;AACD,cAAII,QAAJ;;AACA,eAAI,IAAI1P,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG0M,OAAO,CAAC9G,MAA3B,EAAmC5F,GAAC,EAApC,EAAwC;AACtC,gBAAIgD,MAAI,GAAG0J,OAAO,CAAC1M,GAAD,CAAlB;;AACA,gBAAGgD,MAAI,CAACsM,GAAL,KAAaA,GAAb,IAAoBtM,MAAI,CAACoB,IAAL,KAAc,KAArC,EAA4C;AAC1CgL,cAAAA,KAAK,GAAGpM,MAAR;AACA0M,cAAAA,QAAQ,GAAG,IAAX;AACA;AACD;AACF;;AACD,cAAG,CAACA,QAAJ,EAAc;AACZ,gBAAGJ,GAAH,EAAQ;AACNF,cAAAA,KAAK,GAAG;AACNhL,gBAAAA,IAAI,EAAE,KADA;AAENX,gBAAAA,IAAI,EAAJA,IAFM;AAGNyB,gBAAAA,KAAK,EAAE6F,MAAM,CAAC7F,KAHR;AAINkG,gBAAAA,MAAM,EAAEL,MAAM,CAACK,MAJT;AAKNkE,gBAAAA,GAAG,EAAHA;AALM,eAAR;AAOD,aARD;AAAA,iBAUK;AACHF,cAAAA,KAAK,GAAG;AACNhL,gBAAAA,IAAI,EAAE,KADA;AAENc,gBAAAA,KAAK,EAAE6F,MAAM,CAAC7F,KAFR;AAGNkG,gBAAAA,MAAM,EAAEL,MAAM,CAACK;AAHT,eAAR;AAKD;AACF;AACF;AACF,OA/CD;AAAA,WAiDK,IAAGL,MAAM,YAAY4E,QAArB,EAA+B;AAClCP,QAAAA,KAAK,GAAG5C,WAAS,CAACzB,MAAD,EAAS2B,OAAT,EAAkBlJ,mBAAlB,CAAjB;AACA4L,QAAAA,KAAK,CAAChL,IAAN,GAAa,KAAb;AACD;;AACD,UAAGgL,KAAH,EAAU;AACRA,QAAAA,KAAK,CAACF,EAAN,GAAWxC,OAAO,CAAC9G,MAAnB;AACA8G,QAAAA,OAAO,CAACnL,IAAR,CAAa6N,KAAb;AACAtM,QAAAA,GAAG,CAACqM,OAAJ,GAAcC,KAAK,CAACF,EAApB;AACD;AACF;AACF;;AACD1L,EAAAA,mBAAmB,CAACI,GAApB;AACA,SAAOd,GAAP;AACD;;AAED,SAAS6L,IAAT,CAAchP,IAAd,EAAoB;AAClB,MAAImD,GAAG,GAAG,EAAV;;AACA,OAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,UAAGA,SAAS,KAAK,gBAAjB,EAAmC;AACjC,YAAGoD,IAAI,CAAC4M,QAAL,KAAkBC,QAAQ,CAACC,IAA9B,EAAoC;AAClChN,UAAAA,GAAG,CAACI,OAAJ,GAAc,IAAd;AACD;;AACDJ,QAAAA,GAAG,CAACiN,IAAJ,GAAW1M,aAAa,CAACL,IAAD,CAAxB;AACAF,QAAAA,GAAG,CAACkN,IAAJ,GAAWhN,IAAI,CAAC4M,QAAhB;AACA9M,QAAAA,GAAG,CAACmN,QAAJ,GAAejN,IAAI,CAACiN,QAApB;AACD;AACF;AACF;;AACD,SAAOnN,GAAP;AACD;;AAED,SAAS8L,IAAT,CAAcjP,IAAd,EAAoB;AAClB,MAAImD,GAAG,GAAG;AACRW,IAAAA,IAAI,EAAE9D,IAAI,CAAC8D;AADH,GAAV;;AAGA,OAAI,IAAIzD,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIL,IAAI,CAACoD,aAAzB,EAAwC/C,CAAC,EAAzC,EAA6C;AAC3C,QAAIgD,IAAI,GAAGrD,IAAI,CAACsD,QAAL,CAAcjD,CAAd,CAAX;;AACA,QAAGgD,IAAI,IAAIA,IAAI,CAACE,OAAhB,EAAyB;AACvB,UAAItD,SAAS,GAAGoD,IAAI,CAACpD,SAArB;;AACA,cAAOA,SAAP;AACE,aAAK,oBAAL;AACE,cAAIuB,KAAK,GAAG6B,IAAI,CAAC7B,KAAjB;AACA2B,UAAAA,GAAG,CAACY,OAAJ,GAAc;AACZwM,YAAAA,IAAI,EAAE/O,KAAK,CAAC+O,IADA;AAEZC,YAAAA,UAAU,EAAEhP,KAAK,CAACgP,UAFN;AAGZC,YAAAA,SAAS,EAAEjP,KAAK,CAACiP,SAHL;AAIZC,YAAAA,QAAQ,EAAElP,KAAK,CAACkP,QAJJ;AAKZC,YAAAA,OAAO,EAAEnP,KAAK,CAACmP,OALH;AAMZC,YAAAA,YAAY,EAAEpP,KAAK,CAACoP,YANR;AAOZ3B,YAAAA,IAAI,EAAEzN,KAAK,CAACyN;AAPA,WAAd;;AASA,cAAGzN,KAAK,CAACqP,SAAT,EAAoB;AAClB1N,YAAAA,GAAG,CAACY,OAAJ,CAAY+M,SAAZ,GAAwBtP,KAAK,CAACsP,SAA9B;AACA3N,YAAAA,GAAG,CAACY,OAAJ,CAAYgN,UAAZ,GAAyBvP,KAAK,CAACwP,cAA/B;AACD;;AACD,cAAGxP,KAAK,CAACyP,WAAT,EAAsB;AACpB9N,YAAAA,GAAG,CAACY,OAAJ,CAAYO,MAAZ,GAAqB9C,KAAK,CAAC0P,WAA3B;AACA/N,YAAAA,GAAG,CAACY,OAAJ,CAAYoN,WAAZ,GAA0B3P,KAAK,CAAC2P,WAAhC;AACD,WAlBH;;;AAoBE,cAAG3P,KAAK,CAAC4P,OAAT,EAAkB;AAChBjO,YAAAA,GAAG,CAACY,OAAJ,CAAYY,IAAZ,GAAmBnD,KAAK,CAAC6P,WAAzB;AACAlO,YAAAA,GAAG,CAACY,OAAJ,CAAYa,QAAZ,GAAuBpD,KAAK,CAAC8P,UAA7B;AACD;;AACD;AAzBJ;AA2BD;AACF;;AACD,SAAOnO,GAAP;AACD;;AAEc,kBAAS2J,WAAT,EAAsB;AACnClB,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,OAAjB,EADmC;;AAGnC,MAAMqE,aAAN,GAA0CzE,WAA1C,CAAMyE,aAAN;AAAA,MAAqBC,gBAArB,GAA0C1E,WAA1C,CAAqB0E,gBAArB;AACAD,EAAAA,aAAa,IAAI,IAAjB;AACAC,EAAAA,gBAAgB,IAAI,IAApB;AACA5F,EAAAA,CAAC,CAACC,QAAF,CAAW4F,GAAX,CAAe,eAAeF,aAAf,GAA+B,GAA/B,GAAqCC,gBAApD;AACA,MAAIzE,OAAO,GAAG,EAAd;AAAA,MAAkBlJ,mBAAmB,GAAG,EAAxC;AACA,MAAI6N,MAAM,GAAG7E,WAAS,CAACC,WAAD,EAAcC,OAAd,EAAuBlJ,mBAAvB,CAAtB;AACA+H,EAAAA,CAAC,CAACC,QAAF,CAAW4F,GAAX,CAAeC,MAAf;AACA9F,EAAAA,CAAC,CAACC,QAAF,CAAW4F,GAAX,CAAe1E,OAAf;AACA,SAAO;AACLwE,IAAAA,aAAa,EAAbA,aADK;AAELC,IAAAA,gBAAgB,EAAhBA,gBAFK;AAGLE,IAAAA,MAAM,EAANA,MAHK;AAIL3E,IAAAA,OAAO,EAAPA;AAJK,GAAP;AAMD;;AC1WD,WAAe;AACb4E,EAAAA,KADa,iBACPC,QADO,EACGC,UADH,EACeC,WADf,EAC4BC,MAD5B,EACoClR,EADpC,EACwCC,EADxC,EAC4CC,EAD5C,EACgDC,EADhD,EACoD;AAC/D,QAAGH,EAAE,KAAKoC,SAAV,EAAqB;AACnBpC,MAAAA,EAAE,GAAGE,EAAE,GAAG6Q,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,CAAV;AACA9Q,MAAAA,EAAE,GAAGE,EAAE,GAAG4Q,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,CAAV,CAFmB;;AAInB,UAAII,EAAE,GAAGH,UAAU,CAAC,CAAD,CAAnB;AAAA,UAAwBI,EAAE,GAAGH,WAAW,CAAC,CAAD,CAAxC;;AACA,UAAGE,EAAE,CAAC,CAAD,CAAL,EAAU;AACRnR,QAAAA,EAAE,GAAGM,IAAI,CAAC0G,GAAL,CAAShH,EAAT,EAAaA,EAAE,GAAGmR,EAAE,CAAC,CAAD,CAApB,CAAL;AACAjR,QAAAA,EAAE,GAAGI,IAAI,CAACyG,GAAL,CAAS7G,EAAT,EAAaF,EAAE,GAAGmR,EAAE,CAAC,CAAD,CAApB,CAAL;AACD;;AACD,UAAGA,EAAE,CAAC,CAAD,CAAL,EAAU;AACRlR,QAAAA,EAAE,GAAGK,IAAI,CAAC0G,GAAL,CAAS/G,EAAT,EAAaA,EAAE,GAAGkR,EAAE,CAAC,CAAD,CAApB,CAAL;AACAhR,QAAAA,EAAE,GAAGG,IAAI,CAACyG,GAAL,CAAS5G,EAAT,EAAaF,EAAE,GAAGkR,EAAE,CAAC,CAAD,CAApB,CAAL;AACD;;AACD,UAAGC,EAAE,CAAC,CAAD,CAAL,EAAU;AACRpR,QAAAA,EAAE,GAAGM,IAAI,CAAC0G,GAAL,CAAShH,EAAT,EAAaA,EAAE,GAAGoR,EAAE,CAAC,CAAD,CAApB,CAAL;AACAlR,QAAAA,EAAE,GAAGI,IAAI,CAACyG,GAAL,CAAS7G,EAAT,EAAaF,EAAE,GAAGoR,EAAE,CAAC,CAAD,CAApB,CAAL;AACD;;AACD,UAAGA,EAAE,CAAC,CAAD,CAAL,EAAU;AACRnR,QAAAA,EAAE,GAAGK,IAAI,CAAC0G,GAAL,CAAS/G,EAAT,EAAaA,EAAE,GAAGmR,EAAE,CAAC,CAAD,CAApB,CAAL;AACAjR,QAAAA,EAAE,GAAGG,IAAI,CAACyG,GAAL,CAAS5G,EAAT,EAAaF,EAAE,GAAGmR,EAAE,CAAC,CAAD,CAApB,CAAL;AACD,OApBkB;;;AAsBnB,WAAI,IAAI5R,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGyL,QAAQ,CAAC3L,MAA9B,EAAsC5F,CAAC,GAAG8F,GAA1C,EAA+C9F,CAAC,EAAhD,EAAoD;AAClD,YAAIgD,IAAI,GAAGuO,QAAQ,CAACvR,CAAD,CAAnB;AACAQ,QAAAA,EAAE,GAAGM,IAAI,CAAC0G,GAAL,CAAShH,EAAT,EAAawC,IAAI,CAAC,CAAD,CAAjB,CAAL;AACAvC,QAAAA,EAAE,GAAGK,IAAI,CAAC0G,GAAL,CAAS/G,EAAT,EAAauC,IAAI,CAAC,CAAD,CAAjB,CAAL;AACAtC,QAAAA,EAAE,GAAGI,IAAI,CAACyG,GAAL,CAAS7G,EAAT,EAAasC,IAAI,CAAC,CAAD,CAAjB,CAAL;AACArC,QAAAA,EAAE,GAAGG,IAAI,CAACyG,GAAL,CAAS5G,EAAT,EAAaqC,IAAI,CAAC,CAAD,CAAjB,CAAL,CALkD;;AAOlD,YAAI2O,GAAE,GAAGH,UAAU,CAACxR,CAAD,CAAnB;AAAA,YAAwB4R,GAAE,GAAGH,WAAW,CAACzR,CAAD,CAAxC;;AACA,YAAG2R,GAAE,CAAC,CAAD,CAAL,EAAU;AACRnR,UAAAA,EAAE,GAAGM,IAAI,CAAC0G,GAAL,CAAShH,EAAT,EAAawC,IAAI,CAAC,CAAD,CAAJ,GAAU2O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACAjR,UAAAA,EAAE,GAAGI,IAAI,CAACyG,GAAL,CAAS7G,EAAT,EAAasC,IAAI,CAAC,CAAD,CAAJ,GAAU2O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACD;;AACD,YAAGA,GAAE,CAAC,CAAD,CAAL,EAAU;AACRlR,UAAAA,EAAE,GAAGK,IAAI,CAAC0G,GAAL,CAAS/G,EAAT,EAAauC,IAAI,CAAC,CAAD,CAAJ,GAAU2O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACAhR,UAAAA,EAAE,GAAGG,IAAI,CAACyG,GAAL,CAAS5G,EAAT,EAAaqC,IAAI,CAAC,CAAD,CAAJ,GAAU2O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACD;;AACD,YAAGC,GAAE,CAAC,CAAD,CAAL,EAAU;AACRpR,UAAAA,EAAE,GAAGM,IAAI,CAAC0G,GAAL,CAAShH,EAAT,EAAawC,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACAlR,UAAAA,EAAE,GAAGI,IAAI,CAACyG,GAAL,CAAS7G,EAAT,EAAasC,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACD;;AACD,YAAGA,GAAE,CAAC,CAAD,CAAL,EAAU;AACRnR,UAAAA,EAAE,GAAGK,IAAI,CAAC0G,GAAL,CAAS/G,EAAT,EAAauC,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACAjR,UAAAA,EAAE,GAAGG,IAAI,CAACyG,GAAL,CAAS5G,EAAT,EAAaqC,IAAI,CAAC,CAAD,CAAJ,GAAU4O,GAAE,CAAC,CAAD,CAAzB,CAAL;AACD;AACF;AACF;;AACD,QAAIC,CAAC,GAAGrR,EAAE,GAAGE,EAAb;AAAA,QAAiBoR,CAAC,GAAGrR,EAAE,GAAGE,EAA1B;AACA,QAAIoR,GAAG,GAAG,EAAV;AAAA,QAAcC,GAAG,GAAG,EAApB;;AACA,SAAI,IAAIhS,EAAC,GAAG,CAAR,EAAW8F,IAAG,GAAGyL,QAAQ,CAAC3L,MAA9B,EAAsC5F,EAAC,GAAG8F,IAA1C,EAA+C9F,EAAC,EAAhD,EAAoD;AAClD,UAAIgD,KAAI,GAAGuO,QAAQ,CAACvR,EAAD,CAAnB;AACA+R,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CACP,CAACyB,KAAI,CAAC,CAAD,CAAJ,GAAUtC,EAAX,IAAiBmR,CADV,EAEP,CAAC7O,KAAI,CAAC,CAAD,CAAJ,GAAUrC,EAAX,IAAiBmR,CAFV,CAAT;AAIA,UAAIH,IAAE,GAAGH,UAAU,CAACxR,EAAD,CAAnB;AAAA,UAAwB4R,IAAE,GAAGH,WAAW,CAACzR,EAAD,CAAxC,CANkD;;AAQlD,UAAI0F,CAAC,GAAG1F,EAAC,GAAG,CAAZ;;AACA,UAAG0F,CAAC,KAAK,CAAC,CAAV,EAAa;AACXA,QAAAA,CAAC,GAAGI,IAAG,GAAG,CAAV;AACD;;AACDkM,MAAAA,GAAG,CAACtM,CAAD,CAAH,GAASsM,GAAG,CAACtM,CAAD,CAAH,IAAU,EAAnB;AACAsM,MAAAA,GAAG,CAACtM,CAAD,CAAH,CAAOnE,IAAP,CAAY,CAACgQ,QAAQ,CAACvR,EAAD,CAAR,CAAY,CAAZ,IAAiB2R,IAAE,CAAC,CAAD,CAAnB,GAAyBjR,EAA1B,IAAgCmR,CAA5C;AACAG,MAAAA,GAAG,CAACtM,CAAD,CAAH,CAAOnE,IAAP,CAAY,CAACgQ,QAAQ,CAACvR,EAAD,CAAR,CAAY,CAAZ,IAAiB2R,IAAE,CAAC,CAAD,CAAnB,GAAyBhR,EAA1B,IAAgCmR,CAA5C,EAdkD;;AAgBlDE,MAAAA,GAAG,CAAChS,EAAD,CAAH,GAASgS,GAAG,CAAChS,EAAD,CAAH,IAAU,EAAnB;AACA,UAAIiS,CAAC,GAAG,CAACV,QAAQ,CAACvR,EAAD,CAAR,CAAY,CAAZ,IAAiB4R,IAAE,CAAC,CAAD,CAAnB,GAAyBlR,EAA1B,IAAgCmR,CAAxC;AAAA,UAA2CK,CAAC,GAAG,CAACX,QAAQ,CAACvR,EAAD,CAAR,CAAY,CAAZ,IAAiB4R,IAAE,CAAC,CAAD,CAAnB,GAAyBjR,EAA1B,IAAgCmR,CAA/E;;AACA,UAAG9R,EAAC,KAAK8F,IAAG,GAAG,CAAf,EAAkB;AAChBkM,QAAAA,GAAG,CAAChS,EAAD,CAAH,CAAOmS,OAAP,CAAeD,CAAf;;AACAF,QAAAA,GAAG,CAAChS,EAAD,CAAH,CAAOmS,OAAP,CAAeF,CAAf;AACD,OAHD,MAIK;AACHD,QAAAA,GAAG,CAAChS,EAAD,CAAH,CAAOuB,IAAP,CAAY0Q,CAAZ;;AACAD,QAAAA,GAAG,CAAChS,EAAD,CAAH,CAAOuB,IAAP,CAAY2Q,CAAZ;AACD;AACF;;AACD,QAAGR,MAAH,EAAW;AACTK,MAAAA,GAAG,CAACxQ,IAAJ,CAASwQ,GAAG,CAAC,CAAD,CAAH,CAAOK,KAAP,CAAa,CAAb,CAAT;AACD;;AACD,WAAO;AACL5R,MAAAA,EAAE,EAAFA,EADK;AAELC,MAAAA,EAAE,EAAFA,EAFK;AAGLC,MAAAA,EAAE,EAAFA,EAHK;AAILC,MAAAA,EAAE,EAAFA,EAJK;AAKLuE,MAAAA,KAAK,EAAE2M,CALF;AAMLzG,MAAAA,MAAM,EAAE0G,CANH;AAOLpN,MAAAA,MAAM,EAAEqN,GAPH;AAQLM,MAAAA,QAAQ,EAAEL;AARL,KAAP;AAUD,GA5FY;AA6FbM,EAAAA,aA7Fa,yBA6FCpN,KA7FD,EA6FQkG,MA7FR,EA6FgB5G,SA7FhB,EA6F2B;AACtCA,IAAAA,SAAS,GAAGA,SAAS,IAAI,CAAzB;AACA,QAAI9C,CAAC,GAAGZ,IAAI,CAACyG,GAAL,CAASrC,KAAT,EAAgBkG,MAAhB,IAA0B,GAAlC;AACA5G,IAAAA,SAAS,GAAG1D,IAAI,CAACyG,GAAL,CAAS/C,SAAT,EAAoB9C,CAApB,CAAZ;AACA,QAAIqQ,GAAG,GAAG,EAAV;AAAA,QAAcC,GAAG,GAAG,EAApB;;AACA,QAAGxN,SAAS,IAAIA,SAAS,GAAG,CAA5B,EAA+B;AAC7B,UAAIsN,CAAC,GAAGtN,SAAS,GAAG,kBAApB;AACAuN,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAC2D,KAAK,GAAGV,SAAT,IAAsBU,KAAvB,EAA8B,CAA9B,CAAT;AACA8M,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,CAAC2D,KAAK,GAAGV,SAAR,GAAoBsN,CAArB,IAA0B5M,KAA3B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAACV,SAAS,GAAGsN,CAAb,IAAkB1G,MAA1D,CAAT;AACA2G,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAIiD,SAAS,GAAG4G,MAAhB,CAAT;AACA4G,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,EAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAC6J,MAAM,GAAG5G,SAAV,IAAuB4G,MAA3B,CAAT;AACA4G,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAC6J,MAAM,GAAG5G,SAAT,GAAqBsN,CAAtB,IAA2B1G,MAA/B,EAAuC,CAAClG,KAAK,GAAGV,SAAR,GAAoBsN,CAArB,IAA0B5M,KAAjE,EAAwE,CAAxE,CAAT;AACA6M,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAC2D,KAAK,GAAGV,SAAT,IAAsBU,KAAvB,EAA8B,CAA9B,CAAT;AACA8M,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,EAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAACiD,SAAS,GAAGU,KAAb,EAAoB,CAApB,CAAT;AACA8M,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,CAACiD,SAAS,GAAGsN,CAAb,IAAkB5M,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAACkG,MAAM,GAAG5G,SAAT,GAAqBsN,CAAtB,IAA2B1G,MAA3D,CAAT;AACA2G,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAC6J,MAAM,GAAG5G,SAAV,IAAuB4G,MAA3B,CAAT;AACA4G,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,EAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAIiD,SAAS,GAAG4G,MAAhB,CAAT;AACA4G,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAACiD,SAAS,GAAGsN,CAAb,IAAkB1G,MAAtB,EAA8B,CAAC5G,SAAS,GAAGsN,CAAb,IAAkB5M,KAAhD,EAAuD,CAAvD,CAAT;AACA6M,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAACiD,SAAS,GAAGU,KAAb,EAAoB,CAApB,CAAT;AACA8M,MAAAA,GAAG,CAACzQ,IAAJ,CAAS,EAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAC2D,KAAK,GAAGV,SAAT,IAAsBU,KAAvB,EAA8B,CAA9B,CAAT;AACD,KAnBD,MAoBK;AACH6M,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT;AACAwQ,MAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT;AACD;;AACD,WAAO;AACLmD,MAAAA,MAAM,EAAEqN,GADH;AAELM,MAAAA,QAAQ,EAAEL;AAFL,KAAP;AAID,GAjIY;AAkIbO,EAAAA,gBAlIa,8BAkIM;AACjB,QAAIR,GAAG,GAAG,EAAV;AAAA,QAAcC,GAAG,GAAG,EAApB;AACA,QAAIQ,EAAE,GAAI,MAAM,kBAAhB;AAAA,QAAoCC,EAAE,GAAG,MAAM,kBAA/C;AACAV,IAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,GAAD,EAAM,CAAN,CAAT;AACAyQ,IAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,MAAMiR,EAAP,EAAW,CAAX,EAAc,CAAd,EAAiB,MAAMC,EAAvB,CAAT;AACAV,IAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,GAAJ,CAAT;AACAyQ,IAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,CAAD,EAAI,MAAMkR,EAAV,EAAc,MAAMD,EAApB,EAAwB,CAAxB,CAAT;AACAT,IAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,GAAD,EAAM,CAAN,CAAT;AACAyQ,IAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,MAAMiR,EAAP,EAAW,CAAX,EAAc,CAAd,EAAiB,MAAMC,EAAvB,CAAT;AACAV,IAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,CAAD,EAAI,GAAJ,CAAT;AACAyQ,IAAAA,GAAG,CAACzQ,IAAJ,CAAS,CAAC,CAAD,EAAI,MAAMkR,EAAV,EAAcD,EAAd,EAAkB,CAAlB,CAAT;AACAT,IAAAA,GAAG,CAACxQ,IAAJ,CAAS,CAAC,GAAD,EAAM,CAAN,CAAT;AACA,WAAO;AACLmD,MAAAA,MAAM,EAAEqN,GADH;AAELM,MAAAA,QAAQ,EAAEL;AAFL,KAAP;AAID;AAlJY,CAAf;;ACEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASU,WAAT,CAAqB3C,IAArB,EAA2B4C,KAA3B,EAAkC/F,QAAlC,EAA4CgG,OAA5C,EAAqD;AACnD,MAAI9M,GAAG,GAAGiK,IAAI,CAACnK,MAAf;AACA,MAAIiN,UAAU,GAAG,CAAjB;AAAA,MAAoBC,QAAQ,GAAGhN,GAAG,GAAG,CAArC,CAFmD;;AAInD,OAAI,IAAI9F,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8F,GAAnB,EAAwB9F,CAAC,EAAzB,EAA6B;AAC3B,QAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;;AACA,QAAGgD,IAAI,CAAC/B,IAAL,GAAY0R,KAAf,EAAsB;AACpBE,MAAAA,UAAU,GAAG7S,CAAb;AACD,KAFD,MAGK,IAAGgD,IAAI,CAAC/B,IAAL,GAAY0R,KAAf,EAAsB;AACzB;AACD,KAFI,MAGA;AACHE,MAAAA,UAAU,GAAG7S,CAAb;AACA;AACD;AACF,GAhBkD;;;AAkBnD,OAAI,IAAIA,EAAC,GAAG8F,GAAG,GAAG,CAAlB,EAAqB9F,EAAC,IAAI,CAA1B,EAA6BA,EAAC,EAA9B,EAAkC;AAChC,QAAIgD,KAAI,GAAG+M,IAAI,CAAC/P,EAAD,CAAf;;AACA,QAAGgD,KAAI,CAAC/B,IAAL,GAAY0R,KAAK,GAAG/F,QAAvB,EAAiC;AAC/B;AACD,KAFD,MAGK,IAAG5J,KAAI,CAAC/B,IAAL,GAAY0R,KAAK,GAAG/F,QAAvB,EAAiC;AACpCkG,MAAAA,QAAQ,GAAG9S,EAAX;AACD,KAFI,MAGA;AACH8S,MAAAA,QAAQ,GAAG9S,EAAX;AACA;AACD;AACF;;AACD,MAAG6S,UAAU,GAAG,CAAb,IAAkBC,QAAQ,GAAGhN,GAAG,GAAG,CAAtC,EAAyC;AACvCiK,IAAAA,IAAI,GAAGA,IAAI,CAACqC,KAAL,CAAWS,UAAX,EAAuBC,QAAQ,GAAG,CAAlC,CAAP;AACD,GAjCkD;;;AAmCnD,MAAIC,KAAK,GAAGhD,IAAI,CAAC,CAAD,CAAhB;;AACA,MAAGgD,KAAK,CAAC9R,IAAN,GAAa0R,KAAhB,EAAuB;AACrB,QAAI3R,CAAC,GAAG;AACNC,MAAAA,IAAI,EAAE0R,KADA;AAENxR,MAAAA,KAAK,EAAE6R,KAAK,CAACC,OAAN,CAAcF,KAAK,CAAC5R,KAApB,IAA6B4R,KAAK,CAAC5R,KAAN,CAAYiR,KAAZ,CAAkB,CAAlB,CAA7B,GAAoDW,KAAK,CAAC5R;AAF3D,KAAR,CADqB;;AAMrB,QAAG6R,KAAK,CAACC,OAAN,CAAcF,KAAK,CAAC5R,KAApB,KAA8B4R,KAAK,CAAC5R,KAAN,CAAYyE,MAAZ,KAAuB,CAAxD,EAA2D;AACzD5E,MAAAA,CAAC,CAACG,KAAF,GAAU4R,KAAK,CAAC5R,KAAN,CAAYiR,KAAZ,CAAkB,CAAlB,EAAqB,CAArB,CAAV;AACD;;AACDrC,IAAAA,IAAI,CAACoC,OAAL,CAAanR,CAAb;AACD,GAVD;AAAA,OAYK,IAAG+R,KAAK,CAAC9R,IAAN,GAAa0R,KAAhB,EAAuB;AAC1B,QAAIO,IAAI,GAAGnD,IAAI,CAAC,CAAD,CAAf;AACA,QAAIoD,OAAO,GAAG,CAACR,KAAK,GAAGI,KAAK,CAAC9R,IAAf,KAAwBiS,IAAI,CAACjS,IAAL,GAAY8R,KAAK,CAAC9R,IAA1C,CAAd;AACA8R,IAAAA,KAAK,CAAC9R,IAAN,GAAa0R,KAAb;AACAI,IAAAA,KAAK,CAAC5R,KAAN,GAAcyR,OAAO,CAACG,KAAK,CAAC5R,KAAP,EAAc+R,IAAI,CAAC/R,KAAnB,EAA0BgS,OAA1B,EAAmC,IAAnC,CAArB;;AACA,QAAGJ,KAAK,CAACzR,MAAT,EAAiB;AACf,UAAIoD,MAAM,GAAG0O,WAAW,CAAC,CACvB,CAAC,CAAD,EAAI,CAAJ,CADuB,EAEvB,CAACL,KAAK,CAACzR,MAAN,CAAa,CAAb,CAAD,EAAkByR,KAAK,CAACzR,MAAN,CAAa,CAAb,CAAlB,CAFuB,EAGvB,CAACyR,KAAK,CAACzR,MAAN,CAAa,CAAb,CAAD,EAAkByR,KAAK,CAACzR,MAAN,CAAa,CAAb,CAAlB,CAHuB,EAIvB,CAAC,CAAD,EAAI,CAAJ,CAJuB,EAKvBsM,OALuB,EAAD,EAKXuF,OALW,CAAX,CAKSvF,OALT,EAAb;AAMAmF,MAAAA,KAAK,CAACzR,MAAN,GAAe,CAACoD,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAD,EAAeA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAf,EAA6BA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAA7B,EAA2CA,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAA3C,CAAf;AACD;AACF,GA9DkD;;;AAgEnD,MAAIgJ,IAAI,GAAGqC,IAAI,CAACA,IAAI,CAACnK,MAAL,GAAc,CAAf,CAAf;;AACA,MAAG8H,IAAI,CAACzM,IAAL,GAAY0R,KAAK,GAAG/F,QAAvB,EAAiC;AAC/B,QAAIyG,IAAI,GAAGtD,IAAI,CAACA,IAAI,CAACnK,MAAL,GAAc,CAAf,CAAf;;AACA,QAAIuN,QAAO,GAAG,CAACR,KAAK,GAAG/F,QAAR,GAAmByG,IAAI,CAACpS,IAAzB,KAAkCyM,IAAI,CAACzM,IAAL,GAAYoS,IAAI,CAACpS,IAAnD,CAAd;;AACAyM,IAAAA,IAAI,CAACzM,IAAL,GAAY0R,KAAK,GAAG/F,QAApB;AACAc,IAAAA,IAAI,CAACvM,KAAL,GAAayR,OAAO,CAACS,IAAI,CAAClS,KAAN,EAAauM,IAAI,CAACvM,KAAlB,EAAyBgS,QAAzB,CAApB;;AACA,QAAGE,IAAI,CAAC/R,MAAR,EAAgB;AACd,UAAIoD,OAAM,GAAG0O,WAAW,CAAC,CACvB,CAAC,CAAD,EAAI,CAAJ,CADuB,EAEvB,CAACC,IAAI,CAAC/R,MAAL,CAAY,CAAZ,CAAD,EAAiB+R,IAAI,CAAC/R,MAAL,CAAY,CAAZ,CAAjB,CAFuB,EAGvB,CAAC+R,IAAI,CAAC/R,MAAL,CAAY,CAAZ,CAAD,EAAiB+R,IAAI,CAAC/R,MAAL,CAAY,CAAZ,CAAjB,CAHuB,EAIvB,CAAC,CAAD,EAAI,CAAJ,CAJuB,CAAD,EAKrB6R,QALqB,CAAxB;;AAMAE,MAAAA,IAAI,CAAC/R,MAAL,GAAc,CAACoD,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAD,EAAeA,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAf,EAA6BA,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAA7B,EAA2CA,OAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAA3C,CAAd;AACD;AACF,GAdD;AAAA,OAgBK,IAAGgJ,IAAI,CAACzM,IAAL,GAAY0R,KAAK,GAAG/F,QAAvB,EAAiC;AACpC,QAAI5L,EAAC,GAAG;AACNC,MAAAA,IAAI,EAAE0R,KAAK,GAAG/F,QADR;AAENzL,MAAAA,KAAK,EAAE6R,KAAK,CAACC,OAAN,CAAcvF,IAAI,CAACvM,KAAnB,IAA4BuM,IAAI,CAACvM,KAAL,CAAWiR,KAAX,CAAiB,CAAjB,CAA5B,GAAkD1E,IAAI,CAACvM;AAFxD,KAAR;AAIA4O,IAAAA,IAAI,CAACxO,IAAL,CAAUP,EAAV;AACD;;AACD,SAAO+O,IAAP;AACD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASqD,WAAT,CAAqB1O,MAArB,EAA6B4O,CAA7B,EAAgC;AAC9B,MAAI1S,EAAJ,EAAQC,EAAR,EAAY0S,EAAZ,EAAgBC,EAAhB;;AACA,MAAG9O,MAAM,CAACkB,MAAP,KAAkB,CAArB,EAAwB;AACtBhF,IAAAA,EAAE,GAAG8D,MAAM,CAAC0N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL;AACAvR,IAAAA,EAAE,GAAG6D,MAAM,CAAC0N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL;AACAmB,IAAAA,EAAE,GAAG7O,MAAM,CAAC0N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL;AACAoB,IAAAA,EAAE,GAAG9O,MAAM,CAAC0N,KAAP,CAAa,CAAb,EAAgB,CAAhB,CAAL;AACD,GALD,MAMK;AACHxR,IAAAA,EAAE,GAAG8D,MAAM,CAAC,CAAD,CAAX;AACA7D,IAAAA,EAAE,GAAG6D,MAAM,CAAC,CAAD,CAAX;AACA6O,IAAAA,EAAE,GAAG7O,MAAM,CAAC,CAAD,CAAX;AACA8O,IAAAA,EAAE,GAAG9O,MAAM,CAAC,CAAD,CAAX;AACD;;AACD,MAAIlE,EAAE,GAAGI,EAAE,CAAC,CAAD,CAAX;AAAA,MAAgBH,EAAE,GAAGG,EAAE,CAAC,CAAD,CAAvB;AACA,MAAIF,EAAE,GAAGG,EAAE,CAAC,CAAD,CAAX;AAAA,MAAgBF,EAAE,GAAGE,EAAE,CAAC,CAAD,CAAvB;AACA,MAAI4S,EAAE,GAAGF,EAAE,CAAC,CAAD,CAAX;AAAA,MAAgBG,EAAE,GAAGH,EAAE,CAAC,CAAD,CAAvB;AACA,MAAII,GAAG,GAAG,CAACjT,EAAE,GAAGF,EAAN,IAAY8S,CAAZ,GAAgB9S,EAA1B;AACA,MAAIoT,GAAG,GAAG,CAACjT,EAAE,GAAGF,EAAN,IAAY6S,CAAZ,GAAgB7S,EAA1B;AACA,MAAIoT,GAAG,GAAG,CAACJ,EAAE,GAAG/S,EAAN,IAAY4S,CAAZ,GAAgB5S,EAA1B;AACA,MAAIoT,GAAG,GAAG,CAACJ,EAAE,GAAG/S,EAAN,IAAY2S,CAAZ,GAAgB3S,EAA1B;AACA,MAAIoT,IAAI,GAAG,CAACF,GAAG,GAAGF,GAAP,IAAcL,CAAd,GAAkBK,GAA7B;AACA,MAAIK,IAAI,GAAG,CAACF,GAAG,GAAGF,GAAP,IAAcN,CAAd,GAAkBM,GAA7B;;AACA,MAAGlP,MAAM,CAACkB,MAAP,KAAkB,CAAlB,IAAuBlB,MAAM,CAACkB,MAAP,KAAkB,CAA5C,EAA+C;AAC7C,QAAIqO,EAAE,GAAGT,EAAE,CAAC,CAAD,CAAX;AAAA,QAAgBU,EAAE,GAAGV,EAAE,CAAC,CAAD,CAAvB;AACA,QAAIW,GAAG,GAAG,CAACF,EAAE,GAAGR,EAAN,IAAYH,CAAZ,GAAgBG,EAA1B;AACA,QAAIW,GAAG,GAAG,CAACF,EAAE,GAAGR,EAAN,IAAYJ,CAAZ,GAAgBI,EAA1B;AACA,QAAIW,IAAI,GAAG,CAACF,GAAG,GAAGN,GAAP,IAAcP,CAAd,GAAkBO,GAA7B;AACA,QAAIS,IAAI,GAAG,CAACF,GAAG,GAAGN,GAAP,IAAcR,CAAd,GAAkBQ,GAA7B;AACA,QAAIS,KAAK,GAAG,CAACF,IAAI,GAAGN,IAAR,IAAgBT,CAAhB,GAAoBS,IAAhC;AACA,QAAIS,KAAK,GAAG,CAACF,IAAI,GAAGN,IAAR,IAAgBV,CAAhB,GAAoBU,IAAhC;;AACA,QAAGtP,MAAM,CAACkB,MAAP,KAAkB,CAArB,EAAwB;AACtB,aAAO,CAACpF,EAAD,EAAKC,EAAL,EAASkT,GAAT,EAAcC,GAAd,EAAmBG,IAAnB,EAAyBC,IAAzB,EAA+BO,KAA/B,EAAsCC,KAAtC,CAAP;AACD;;AACD,WAAO,CAAC,CAAChU,EAAD,EAAKC,EAAL,CAAD,EAAW,CAACkT,GAAD,EAAMC,GAAN,CAAX,EAAuB,CAACG,IAAD,EAAOC,IAAP,CAAvB,EAAqC,CAACO,KAAD,EAAQC,KAAR,CAArC,CAAP;AACD,GAZD,MAaK,IAAG9P,MAAM,CAACkB,MAAP,KAAkB,CAArB,EAAwB;AAC3B,WAAO,CAAC,CAACpF,EAAD,EAAKC,EAAL,CAAD,EAAW,CAACkT,GAAD,EAAMC,GAAN,CAAX,EAAuB,CAACG,IAAD,EAAOC,IAAP,CAAvB,CAAP;AACD;AACF;;AAEM,SAASS,eAAT,CAAyB1E,IAAzB,EAA+B4C,KAA/B,EAAsC/F,QAAtC,EAAgD;AACrD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADqD;;AAUrD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB,QAAIlE,CAAC,GAAGqO,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAa,GAAb,GAAmBA,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAA3B;;AACA,QAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQnK,MAAR,GAAiB,CAApB,EAAuB;AACrBlE,MAAAA,CAAC,IAAI,MAAMqO,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAX;AACD;;AACDjN,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbkT,MAAAA,eAAe,EAAE/S;AADJ,KAAf;AAGD,GARD,MASK;AACHqO,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,UAAIzR,CAAC,GAAG,CACN2R,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAD1B,EAENE,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAF1B,CAAR;;AAIA,UAAGE,IAAI,CAACzN,MAAL,GAAc,CAAjB,EAAoB;AAClBlE,QAAAA,CAAC,CAACH,IAAF,CAAO8R,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAAvC;AACD;;AACD,aAAOzR,CAAP;AACD,KATiB,CAAlB;;AAUA,SAAI,IAAI1B,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;;AACA,UAAI0B,EAAC,GAAGsB,IAAI,CAAC7B,KAAL,CAAW,CAAX,IAAgB,GAAhB,GAAsB6B,IAAI,CAAC7B,KAAL,CAAW,CAAX,CAA9B;;AACA,UAAG6B,IAAI,CAAC7B,KAAL,CAAWyE,MAAX,GAAoB,CAAvB,EAA0B;AACxBlE,QAAAA,EAAC,IAAI,MAAMsB,IAAI,CAAC7B,KAAL,CAAW,CAAX,CAAX;AACD;;AACD,UAAIH,CAAC,GAAG;AACN4T,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADxB;AAEN6H,QAAAA,eAAe,EAAE/S;AAFX,OAAR;;AAIA,UAAGsB,IAAI,CAAC1B,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACDwB,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,CAAf;AACD;AACF;;AACD,SAAO8B,GAAP;AACD;AAEM,SAAS+R,gBAAT,CAA0B9E,IAA1B,EAAgC4C,KAAhC,EAAuC/F,QAAvC,EAAiD;AACtD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADsD;;AAUtD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB9C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACb0D,MAAAA,OAAO,EAAE8K,IAAI,CAAC,CAAD,CAAJ,GAAU;AADN,KAAf;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,aAAOE,IAAI,GAAG,CAACH,IAAI,GAAGG,IAAR,IAAgBF,OAA9B;AACD,KAFiB,CAAlB;;AAGA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAIgB,CAAC,GAAG;AACN4T,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADxB;AAEN3H,QAAAA,OAAO,EAAEjC,IAAI,CAAC7B,KAAL,GAAa;AAFhB,OAAR;;AAIA,UAAG6B,IAAI,CAAC1B,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACDwB,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,CAAf;AACD;AACF;;AACD,SAAO8B,GAAP;AACD;AAEM,SAASgS,iBAAT,CAA2B/E,IAA3B,EAAiC4C,KAAjC,EAAwC/F,QAAxC,EAAkD;AACvD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADuD;;AAUvD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB,QAAIlE,CAAC,GAAG;AACNqT,MAAAA,UAAU,EAAEhF,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CADN;AAENiF,MAAAA,UAAU,EAAEjF,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR;AAFN,KAAR;;AAIA,QAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQnK,MAAR,GAAiB,CAApB,EAAuB;AACrBlE,MAAAA,CAAC,CAACuT,UAAF,GAAe,CAAClF,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAhB;AACD;;AACDjN,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeG,CAAf;AACD,GATD,MAUK;AACHqO,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B+B,OAA9B,EAAuC;AAC/E;AACA,UAAG7B,IAAI,CAACzN,MAAL,KAAgB,CAAnB,EAAsB;AACpB,YAAGsP,OAAH,EAAY;AACV,cAAIxQ,MAAM,GAAG,EAAb;;AACA,eAAI,IAAI1E,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGuN,IAAI,CAACzN,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,gBAAIgD,IAAI,GAAGqQ,IAAI,CAACrT,CAAD,CAAf;AACA0E,YAAAA,MAAM,CAACnD,IAAP,CAAYyB,IAAZ;AACD;;AACD0B,UAAAA,MAAM,GAAG0O,WAAW,CAAC1O,MAAM,CAACkJ,OAAP,EAAD,EAAmBuF,OAAnB,CAApB;AACA,iBAAOzO,MAAM,CAACkJ,OAAP,EAAP;AACD,SARD,MASK;AACH,iBAAOwF,WAAW,CAACC,IAAD,EAAOF,OAAP,CAAlB;AACD;AACF;;AACD,UAAIzR,CAAC,GAAG,CACN2R,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAD1B,EAENE,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAF1B,CAAR;;AAIA,UAAGE,IAAI,CAACzN,MAAL,GAAc,CAAjB,EAAoB;AAClBlE,QAAAA,CAAC,CAACH,IAAF,CAAO8R,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAAvC;AACD;;AACD,aAAOzR,CAAP;AACD,KAxBiB,CAAlB;;AAyBA,SAAI,IAAI1B,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAIgB,CAAC,GAAG;AACN4T,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F;AADxB,OAAR;;AAGA,UAAG5J,IAAI,CAAC1B,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACD,UAAG0B,IAAI,CAAC7B,KAAL,CAAWyE,MAAX,KAAsB,CAAzB,EAA4B;AAC1B5E,QAAAA,CAAC,CAACmU,aAAF,GAAkBnS,IAAI,CAAC7B,KAAvB;AACD,OAFD,MAGK;AACHH,QAAAA,CAAC,CAAC+T,UAAF,GAAe/R,IAAI,CAAC7B,KAAL,CAAW,CAAX,CAAf;AACAH,QAAAA,CAAC,CAACgU,UAAF,GAAehS,IAAI,CAAC7B,KAAL,CAAW,CAAX,CAAf;;AACA,YAAG6B,IAAI,CAAC7B,KAAL,CAAWyE,MAAX,GAAoB,CAAvB,EAA0B;AACxB5E,UAAAA,CAAC,CAACiU,UAAF,GAAe,CAACjS,IAAI,CAAC7B,KAAL,CAAW,CAAX,CAAhB;AACD;AACF;;AACD2B,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,CAAf;AACD;AACF;;AACD,SAAO8B,GAAP;AACD;AAEM,SAASsS,WAAT,CAAqBrF,IAArB,EAA2B4C,KAA3B,EAAkC/F,QAAlC,EAA4CyI,GAA5C,EAAiD;AACtD,MAAIvS,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADsD;;AAUtD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB,QAAI5E,CAAC,GAAG,EAAR;AACAA,IAAAA,CAAC,CAACqU,GAAD,CAAD,GAAStF,IAAI,CAAC,CAAD,CAAb;AACAjN,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,CAAf;AACD,GAJD,MAKK;AACH+O,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B+B,OAA9B,EAAuC;AAC/E,aAAO7B,IAAI,GAAG,CAACH,IAAI,GAAGG,IAAR,IAAgBF,OAA9B;AACD,KAFiB,CAAlB;;AAGA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAIgB,GAAC,GAAG;AACN4T,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F;AADxB,OAAR;;AAGA,UAAG5J,IAAI,CAAC1B,MAAR,EAAgB;AACdN,QAAAA,GAAC,CAACM,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACDN,MAAAA,GAAC,CAACqU,GAAD,CAAD,GAASrS,IAAI,CAAC7B,KAAd;AACA2B,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,GAAf;AACD;AACF;;AACD,SAAO8B,GAAP;AACD;AAEM,SAASwS,gBAAT,CAA0BvF,IAA1B,EAAgC4C,KAAhC,EAAuC/F,QAAvC,EAAiD;AACtD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADsD;;AAUtD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB9C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbgU,MAAAA,OAAO,EAAE,CAACxF,IAAI,CAAC,CAAD;AADD,KAAf;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,aAAOE,IAAI,GAAG,CAACH,IAAI,GAAGG,IAAR,IAAgBF,OAA9B;AACD,KAFiB,CAAlB;;AAGA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAIgB,CAAC,GAAG;AACN4T,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADxB;AAEN2I,QAAAA,OAAO,EAAE,CAACvS,IAAI,CAAC7B;AAFT,OAAR;;AAIA,UAAG6B,IAAI,CAAC1B,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACDwB,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,CAAf;AACD;AACF;;AACD,SAAO8B,GAAP;AACD;AAEM,SAAS0S,gBAAT,CAA0BzF,IAA1B,EAAgC4C,KAAhC,EAAuC/F,QAAvC,EAAiD;AACtD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADsD;;AAUtD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB9C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbkU,MAAAA,OAAO,EAAE,CAAC1F,IAAI,CAAC,CAAD;AADD,KAAf;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,aAAOE,IAAI,GAAG,CAACH,IAAI,GAAGG,IAAR,IAAgBF,OAA9B;AACD,KAFiB,CAAlB;;AAGA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAIgB,CAAC,GAAG;AACN4T,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADxB;AAEN6I,QAAAA,OAAO,EAAE,CAACzS,IAAI,CAAC7B;AAFT,OAAR;;AAIA,UAAG6B,IAAI,CAAC1B,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACDwB,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,CAAf;AACD;AACF;;AACD,SAAO8B,GAAP;AACD;AAGM,SAAS4S,gBAAT,CAA0B3F,IAA1B,EAAgC4C,KAAhC,EAAuC/F,QAAvC,EAAiD;AACtD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADsD;;AAUtD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB9C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACboU,MAAAA,OAAO,EAAE5F,IAAI,CAAC,CAAD;AADA,KAAf;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,aAAOE,IAAI,GAAG,CAACH,IAAI,GAAGG,IAAR,IAAgBF,OAA9B;AACD,KAFiB,CAAlB;;AAGA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAIgB,CAAC,GAAG;AACN4T,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADxB;AAEN+I,QAAAA,OAAO,EAAE3S,IAAI,CAAC7B;AAFR,OAAR;;AAIA,UAAG6B,IAAI,CAAC1B,MAAR,EAAgB;AACdN,QAAAA,CAAC,CAACM,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACDwB,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAeP,CAAf;AACD;AACF;;AACD,SAAO8B,GAAP;AACD;AAEM,SAAS8S,cAAT,CAAwB7F,IAAxB,EAA8B4C,KAA9B,EAAqC/F,QAArC,EAA+C;AACpD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADoD;;AAUpD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB,QAAIC,CAAC,GAAG;AACNgQ,MAAAA,MAAM,EAAE9F,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAa,IADf;AAEN+F,MAAAA,MAAM,EAAE/F,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAa;AAFf,KAAR;;AAIA,QAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQnK,MAAR,GAAiB,CAApB,EAAuB;AACrBC,MAAAA,CAAC,CAACkQ,MAAF,GAAWhG,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,IAAa,IAAxB;AACD;;AACDjN,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAesE,CAAf;AACD,GATD,MAUK;AACHkK,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,aAAO,CACLE,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAD3B,EAELE,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAF3B,EAGLE,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAH3B,CAAP;AAKD,KANiB,CAAlB;;AAOA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAI6F,EAAC,GAAG;AACN+O,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADxB;AAENiJ,QAAAA,MAAM,EAAE7S,IAAI,CAAC7B,KAAL,CAAW,CAAX,IAAgB,IAFlB;AAGN2U,QAAAA,MAAM,EAAE9S,IAAI,CAAC7B,KAAL,CAAW,CAAX,IAAgB;AAHlB,OAAR;;AAKA,UAAG6B,IAAI,CAAC1B,MAAR,EAAgB;AACduE,QAAAA,EAAC,CAACvE,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACD,UAAG0B,IAAI,CAAC7B,KAAL,CAAWyE,MAAX,GAAoB,CAAvB,EAA0B;AACxBC,QAAAA,EAAC,CAACkQ,MAAF,GAAW/S,IAAI,CAAC7B,KAAL,CAAW,CAAX,IAAgB,IAA3B;AACD;;AACD2B,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAesE,EAAf;AACD;AACF;;AACD,SAAO/C,GAAP;AACD;AAEM,SAASkT,aAAT,CAAuBjG,IAAvB,EAA6B4C,KAA7B,EAAoC/F,QAApC,EAA8CqJ,KAA9C,EAAqD;AAC1D,MAAInT,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CAD0D;;AAU1D,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB,QAAIC,CAAC,GAAG,EAAR;;AAEA,QAAGoQ,KAAH,EAAU;AACRpQ,MAAAA,CAAC,CAAC/D,GAAF,GAAQiO,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAlB;AACD,KAFD,MAGK;AACHlK,MAAAA,CAAC,CAAChE,KAAF,GAAUkO,IAAI,CAAC,CAAD,CAAJ,GAAU,IAApB;AACD;;AACDjN,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAesE,CAAf;AACD,GAVD,MAWK;AACHkK,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,aAAO,CAACE,IAAI,GAAG,CAACH,IAAI,GAAGG,IAAR,IAAgBF,OAAxB,IAAmC,IAA1C;AACD,KAFiB,CAAlB;;AAGA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAI6F,GAAC,GAAG;AACN+O,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F;AADxB,OAAR;;AAGA,UAAG5J,IAAI,CAAC1B,MAAR,EAAgB;AACduE,QAAAA,GAAC,CAACvE,MAAF,GAAW0B,IAAI,CAAC1B,MAAhB;AACD;;AACD,UAAG2U,KAAH,EAAU;AACRpQ,QAAAA,GAAC,CAAC/D,GAAF,GAAQkB,IAAI,CAAC7B,KAAL,GAAa,IAArB;AACD,OAFD,MAGK;AACH0E,QAAAA,GAAC,CAAChE,KAAF,GAAUmB,IAAI,CAAC7B,KAAL,GAAa,IAAvB;AACD;;AACD2B,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAesE,GAAf;AACD;AACF;;AACD,SAAO/C,GAAP;AACD;AAEM,SAASoT,eAAT,CAAyBnG,IAAzB,EAA+B4C,KAA/B,EAAsC/F,QAAtC,EAAgD;AACrD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADqD;;AAUrD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB,iBAAoDmK,IAAI,CAAC,CAAD,CAAxD;AAAA,QAAMwB,QAAN,UAAMA,QAAN;AAAA,QAAgBC,UAAhB,UAAgBA,UAAhB;AAAA,QAA4BC,WAA5B,UAA4BA,WAA5B;AAAA,QAAyCC,MAAzC,UAAyCA,MAAzC;AACA,QAAI1Q,CAAC,GAAGgD,IAAI,CAACsN,KAAL,CAAWC,QAAX,EAAqBC,UAArB,EAAiCC,WAAjC,EAA8CC,MAA9C,CAAR;AACA5O,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbmD,MAAAA,MAAM,EAAE1D,CAAC,CAAC0D,MADG;AAEb2N,MAAAA,QAAQ,EAAErR,CAAC,CAACqR;AAFC,KAAf;AAIAvP,IAAAA,GAAG,CAACqT,IAAJ,GAAWnV,CAAX;AACD,GARD,MASK;AACH+O,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B+B,OAA9B,EAAuC;AAC/E,UAAMkB,SAAN,GAAuD/C,IAAvD,CAAM+C,SAAN;AAAA,UAAiBC,WAAjB,GAAuDhD,IAAvD,CAAiBgD,WAAjB;AAAA,UAA8BC,YAA9B,GAAuDjD,IAAvD,CAA8BiD,YAA9B;AAAA,UAA4C5E,MAA5C,GAAuD2B,IAAvD,CAA4C3B,MAA5C;AACA,UAAM6E,SAAN,GAA+CrD,IAA/C,CAAMqD,SAAN;AAAA,UAAiBC,WAAjB,GAA+CtD,IAA/C,CAAiBsD,WAAjB;AAAA,UAA8BC,YAA9B,GAA+CvD,IAA/C,CAA8BuD,YAA9B;AACA,UAAIlF,QAAQ,GAAG,EAAf;AAAA,UAAmBC,UAAU,GAAG,EAAhC;AAAA,UAAoCC,WAAW,GAAG,EAAlD;;AACA,WAAI,IAAIzR,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGsQ,SAAS,CAACtQ,GAA/B,EAAoC9F,CAAC,GAAG8F,GAAxC,EAA6C9F,CAAC,EAA9C,EAAkD;AAChD,YAAIkK,CAAC,GAAGkM,SAAS,CAACpW,CAAD,CAAjB;AAAA,YAAsB0W,CAAC,GAAGH,SAAS,CAACvW,CAAD,CAAnC;AACA,YAAI2W,GAAG,GAAGN,WAAW,CAAC,CAACrW,CAAC,GAAG,CAAL,IAAU8F,GAAX,CAArB;AAAA,YAAsC8Q,GAAG,GAAGJ,WAAW,CAAC,CAACxW,CAAC,GAAG,CAAL,IAAU8F,GAAX,CAAvD;AACA,YAAI+Q,IAAI,GAAGP,YAAY,CAACtW,CAAD,CAAvB;AAAA,YAA4B8W,IAAI,GAAGL,YAAY,CAACzW,CAAD,CAA/C,CAHgD;;AAKhD,YAAG2W,GAAG,CAAC,CAAD,CAAH,KAAW,CAAX,IAAgBA,GAAG,CAAC,CAAD,CAAH,KAAW,CAA3B,IACEC,GAAG,CAAC,CAAD,CAAH,KAAW,CADb,IACkBA,GAAG,CAAC,CAAD,CAAH,KAAW,CAD7B,IAEEC,IAAI,CAAC,CAAD,CAAJ,KAAY,CAFd,IAEmBA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAF/B,IAGEC,IAAI,CAAC,CAAD,CAAJ,KAAY,CAHd,IAGmBA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAHlC,EAGqC;AACnCvF,UAAAA,QAAQ,CAAChQ,IAAT,CAAc,CACZ2I,CAAC,CAAC,CAAD,CAAD,GAAO,CAACwM,CAAC,CAAC,CAAD,CAAD,GAAOxM,CAAC,CAAC,CAAD,CAAT,IAAgBiJ,OADX,EAEZjJ,CAAC,CAAC,CAAD,CAAD,GAAO,CAACwM,CAAC,CAAC,CAAD,CAAD,GAAOxM,CAAC,CAAC,CAAD,CAAT,IAAgBiJ,OAFX,CAAd;AAIA3B,UAAAA,UAAU,CAACjQ,IAAX,CAAgB,CAAC,CAAD,EAAI,CAAJ,CAAhB;AACAkQ,UAAAA,WAAW,CAAClQ,IAAZ,CAAiB,CAAC,CAAD,EAAI,CAAJ,CAAjB;AACD,SAVD,MAWK;AACH,cAAIxB,GAAG,GAAG,CACRmK,CADQ,EAER2M,IAFQ,EAGRF,GAHQ,EAIRD,CAJQ,CAAV;;AAMA,cAAGxB,OAAH,EAAY;AACVnV,YAAAA,GAAG,CAAC6N,OAAJ;AACD;;AACD,cAAImJ,CAAC,GAAG3D,WAAW,CAACrT,GAAD,EAAMoT,OAAN,CAAnB;AACA5B,UAAAA,QAAQ,CAAChQ,IAAT,CAAcwV,CAAC,CAAC,CAAD,CAAf;;AACA,cAAG7B,OAAH,EAAY;AACV1D,YAAAA,UAAU,CAACjQ,IAAX,CAAgBwV,CAAC,CAAC,CAAD,CAAjB;AACAtF,YAAAA,WAAW,CAAClQ,IAAZ,CAAiBwV,CAAC,CAAC,CAAD,CAAlB;AACD,WAHD,MAIK;AACHvF,YAAAA,UAAU,CAACjQ,IAAX,CAAgBwV,CAAC,CAAC,CAAD,CAAjB;AACAtF,YAAAA,WAAW,CAAClQ,IAAZ,CAAiBwV,CAAC,CAAC,CAAD,CAAlB;AACD;AACF;AACF;;AACD,aAAO;AACLxF,QAAAA,QAAQ,EAARA,QADK;AAELC,QAAAA,UAAU,EAAVA,UAFK;AAGLC,QAAAA,WAAW,EAAXA,WAHK;AAILC,QAAAA,MAAM,EAANA;AAJK,OAAP;AAMD,KAhDiB,CAAlB;;AAiDA,SAAI,IAAI1R,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,wBAAoDgD,IAAI,CAAC7B,KAAzD;AAAA,UAAMoQ,SAAN,eAAMA,QAAN;AAAA,UAAgBC,WAAhB,eAAgBA,UAAhB;AAAA,UAA4BC,YAA5B,eAA4BA,WAA5B;AAAA,UAAyCC,OAAzC,eAAyCA,MAAzC;;AACA,UAAI1Q,GAAC,SAAL;;AACA,UAAGhB,CAAC,KAAK,CAAT,EAAY;AACVgB,QAAAA,GAAC,GAAGgD,IAAI,CAACsN,KAAL,CAAWC,SAAX,EAAqBC,WAArB,EAAiCC,YAAjC,EAA8CC,OAA9C,CAAJ;AACA5O,QAAAA,GAAG,CAACqT,IAAJ,GAAWnV,GAAX;AACD,OAHD,MAIK;AACHA,QAAAA,GAAC,GAAGgD,IAAI,CAACsN,KAAL,CAAWC,SAAX,EAAqBC,WAArB,EAAiCC,YAAjC,EAA8CC,OAA9C,EAAsD5O,GAAG,CAACqT,IAAJ,CAAS3V,EAA/D,EAAmEsC,GAAG,CAACqT,IAAJ,CAAS1V,EAA5E,EAAgFqC,GAAG,CAACqT,IAAJ,CAASzV,EAAzF,EAA6FoC,GAAG,CAACqT,IAAJ,CAASxV,EAAtG,CAAJ;AACD;;AACDmC,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbqT,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADjB;AAEblI,QAAAA,MAAM,EAAE1D,GAAC,CAAC0D,MAFG;AAGb2N,QAAAA,QAAQ,EAAErR,GAAC,CAACqR;AAHC,OAAf;AAKD;AACF;;AACD,SAAOvP,GAAP;AACD;AAEM,SAASkU,aAAT,CAAuB9S,IAAvB,EAA6ByO,KAA7B,EAAoC/F,QAApC,EAA8C;AACnD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADmD;;AAUnD,MAAGzQ,IAAI,CAACc,KAAL,CAAWY,MAAX,KAAsB,CAAzB,EAA4B;AAC1B,QAAImN,KAAK,GAAG7O,IAAI,CAACc,KAAL,CAAW,CAAX,CAAZ;AACA,QAAIa,CAAC,GAAG,CACNoR,QAAQ,CAAClE,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CADF,EAENkE,QAAQ,CAAClE,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAFF,EAGNkE,QAAQ,CAAClE,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAHF,EAINA,KAAK,CAAC,CAAD,CAJC,CAAR;;AAMA,QAAG7O,IAAI,CAACe,OAAL,CAAa,CAAb,IAAkB,GAArB,EAA0B;AACxBY,MAAAA,CAAC,CAAC,CAAD,CAAD,IAAQ3B,IAAI,CAACe,OAAL,CAAa,CAAb,IAAkB,IAA1B;AACD;;AACDnC,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACb2C,MAAAA,IAAI,EAAE,CAAC2B,CAAD;AADO,KAAf;AAGD,GAdD,MAeK;AACH,QAAIC,GAAG,GAAG5B,IAAI,CAACc,KAAL,CAAW,CAAX,EAAcY,MAAxB;AACA,QAAImK,IAAI,GAAG2C,WAAW,CAACxO,IAAI,CAACc,KAAN,EAAa2N,KAAb,EAAoB/F,QAApB,EAA8B,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AAChF,UAAIpT,GAAG,GAAG,EAAV;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8F,GAAnB,EAAwB9F,CAAC,EAAzB,EAA6B;AAC3BD,QAAAA,GAAG,CAACC,CAAD,CAAH,GAASqT,IAAI,CAACrT,CAAD,CAAJ,GAAU,CAACkT,IAAI,CAAClT,CAAD,CAAJ,GAAUqT,IAAI,CAACrT,CAAD,CAAf,IAAsBmT,OAAzC;AACD;;AACD,aAAOpT,GAAP;AACD,KANqB,CAAtB;;AAOA,SAAI,IAAIC,CAAC,GAAG,CAAR,EAAW8F,IAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,IAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAI6F,GAAC,GAAG,CACNoR,QAAQ,CAACjU,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CADF,EAENiU,QAAQ,CAACjU,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAFF,EAGNiU,QAAQ,CAACjU,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAHF,EAINA,IAAI,CAAC,CAAD,CAJE,CAAR;;AAMA,UAAGkB,IAAI,CAACe,OAAL,CAAajF,CAAb,IAAkB,GAArB,EAA0B;AACxB6F,QAAAA,GAAC,CAAC,CAAD,CAAD,IAAQ3B,IAAI,CAACe,OAAL,CAAajF,CAAb,IAAkB,IAA1B;AACD;;AACD8C,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbqT,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADjB;AAEb1I,QAAAA,IAAI,EAAE,CAAC2B,GAAD;AAFO,OAAf;AAID;AACF;;AACD,SAAO/C,GAAP;AACD;AAEM,SAASoU,eAAT,CAAyBjT,MAAzB,EAAiC0O,KAAjC,EAAwC/F,QAAxC,EAAkD;AACvD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADuD;;AAUvD,MAAG1Q,MAAM,CAACe,KAAP,CAAaY,MAAb,KAAwB,CAA3B,EAA8B;AAC5B,QAAImN,KAAK,GAAG9O,MAAM,CAACe,KAAP,CAAa,CAAb,CAAZ;AACA,QAAIa,CAAC,GAAG,CACNoR,QAAQ,CAAClE,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CADF,EAENkE,QAAQ,CAAClE,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAFF,EAGNkE,QAAQ,CAAClE,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,CAHF,EAINA,KAAK,CAAC,CAAD,CAJC,CAAR;;AAMA,QAAG9O,MAAM,CAACgB,OAAP,CAAe,CAAf,IAAoB,GAAvB,EAA4B;AAC1BY,MAAAA,CAAC,CAAC,CAAD,CAAD,IAAQ5B,MAAM,CAACgB,OAAP,CAAe,CAAf,IAAoB,IAA5B;AACD;;AACDnC,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACb0C,MAAAA,MAAM,EAAE,CAAC4B,CAAD;AADK,KAAf;AAGD,GAdD,MAeK;AACH,QAAIkK,IAAI,GAAG2C,WAAW,CAACzO,MAAM,CAACe,KAAR,EAAe2N,KAAf,EAAsB/F,QAAtB,EAAgC,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AAClF,aAAOE,IAAI,GAAG,CAACH,IAAI,GAAGG,IAAR,IAAgBF,OAA9B;AACD,KAFqB,CAAtB;;AAGA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAI6F,GAAC,GAAG,CACNoR,QAAQ,CAACjU,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CADF,EAENiU,QAAQ,CAACjU,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAFF,EAGNiU,QAAQ,CAACjU,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAX,CAHF,EAINA,IAAI,CAAC,CAAD,CAJE,CAAR;;AAMA,UAAGiB,MAAM,CAACgB,OAAP,CAAejF,CAAf,IAAoB,GAAvB,EAA4B;AAC1B6F,QAAAA,GAAC,CAAC,CAAD,CAAD,IAAQ5B,MAAM,CAACgB,OAAP,CAAejF,CAAf,IAAoB,IAA5B;AACD;;AACD8C,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbqT,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADjB;AAEb3I,QAAAA,MAAM,EAAE,CAAC4B,GAAD;AAFK,OAAf;AAID;AACF;;AACD,SAAO/C,GAAP;AACD;AAEM,SAASqU,oBAAT,CAA8BpH,IAA9B,EAAoC4C,KAApC,EAA2C/F,QAA3C,EAAqD;AAC1D,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CAD0D;;AAU1D,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB9C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbuP,MAAAA,WAAW,EAAEf;AADA,KAAf;AAGD,GAJD,MAKK;AACH,QAAIjK,GAAG,GAAGiK,IAAI,CAAC,CAAD,CAAJ,CAAQnK,MAAlB;AACAmK,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,UAAIpT,GAAG,GAAG,EAAV;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8F,GAAnB,EAAwB9F,CAAC,EAAzB,EAA6B;AAC3BD,QAAAA,GAAG,CAACC,CAAD,CAAH,GAASqT,IAAI,CAACrT,CAAD,CAAJ,GAAU,CAACkT,IAAI,CAAClT,CAAD,CAAJ,GAAUqT,IAAI,CAACrT,CAAD,CAAf,IAAsBmT,OAAzC;AACD;;AACD,aAAOpT,GAAP;AACD,KANiB,CAAlB;;AAOA,SAAI,IAAIC,CAAC,GAAG,CAAR,EAAW8F,KAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,KAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA8C,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbqT,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADjB;AAEbkE,QAAAA,WAAW,EAAE9N,IAAI,CAAC7B;AAFL,OAAf;AAID;AACF;;AACD,SAAO2B,GAAP;AACD;AAEM,SAASsU,iBAAT,CAA2BrH,IAA3B,EAAiC4C,KAAjC,EAAwC/F,QAAxC,EAAkD;AACvD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADuD;;AAUvD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB,QAAI7F,GAAJ;;AACA,QAAGgQ,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAf,EAAkB;AAChBhQ,MAAAA,GAAG,GAAG,CAAC,OAAD,CAAN;AACD,KAFD,MAGK,IAAGgQ,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAf,EAAkB;AACrBhQ,MAAAA,GAAG,GAAG,CAAC,OAAD,CAAN;AACD,KAFI,MAGA;AACHA,MAAAA,GAAG,GAAG,CAAC,OAAD,CAAN;AACD;;AACD+C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACb8V,MAAAA,cAAc,EAAEtX;AADH,KAAf;AAGD,GAdD,MAeK;AACHgQ,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8BmE,OAA9B,EAAuC;AAC/E,aAAOA,OAAO,GAAGjE,IAAH,GAAUH,IAAxB;AACD,KAFiB,CAAlB;;AAGA,SAAI,IAAIlT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA,UAAID,IAAG,GAAG,EAAV;;AACA,WAAI,IAAIC,GAAC,GAAG,CAAR,EAAW8F,KAAG,GAAG9C,IAAI,CAAC7B,KAAL,CAAWyE,MAAhC,EAAwC5F,GAAC,GAAG8F,KAA5C,EAAiD9F,GAAC,EAAlD,EAAsD;AACpD,YAAIuN,KAAK,GAAGvK,IAAI,CAAC7B,KAAL,CAAWnB,GAAX,CAAZ;;AACA,YAAGuN,KAAK,KAAK,CAAb,EAAgB;AACdxN,UAAAA,IAAG,CAACwB,IAAJ,CAAS,OAAT;AACD,SAFD,MAGK,IAAGgM,KAAK,KAAK,CAAb,EAAgB;AACnBxN,UAAAA,IAAG,CAACwB,IAAJ,CAAS,OAAT;AACD,SAFI,MAGA;AACHxB,UAAAA,IAAG,CAACwB,IAAJ,CAAS,OAAT;AACD;AACF;;AACDuB,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbqT,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADjB;AAEbyK,QAAAA,cAAc,EAAEtX;AAFH,OAAf;AAID;AACF;;AACD,SAAO+C,GAAP;AACD;AAEM,SAASyU,mBAAT,CAA6BxH,IAA7B,EAAmC4C,KAAnC,EAA0C/F,QAA1C,EAAoD;AACzD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADyD;;AAUzD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB9C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbuP,MAAAA,WAAW,EAAEf;AADA,KAAf;AAGD,GAJD,MAKK;AACH,QAAIjK,GAAG,GAAGiK,IAAI,CAAC,CAAD,CAAJ,CAAQnK,MAAlB;AACAmK,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,UAAIpT,GAAG,GAAG,EAAV;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG8F,GAAnB,EAAwB9F,CAAC,EAAzB,EAA6B;AAC3BD,QAAAA,GAAG,CAACC,CAAD,CAAH,GAASqT,IAAI,CAACrT,CAAD,CAAJ,GAAU,CAACkT,IAAI,CAAClT,CAAD,CAAJ,GAAUqT,IAAI,CAACrT,CAAD,CAAf,IAAsBmT,OAAzC;AACD;;AACD,aAAOpT,GAAP;AACD,KANiB,CAAlB;;AAOA,SAAI,IAAIC,CAAC,GAAG,CAAR,EAAW8F,KAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,KAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA8C,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbqT,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADjB;AAEbkE,QAAAA,WAAW,EAAE9N,IAAI,CAAC7B;AAFL,OAAf;AAID;AACF;;AACD,SAAO2B,GAAP;AACD;AAEM,SAAS0U,aAAT,CAAuBzH,IAAvB,EAA6B4C,KAA7B,EAAoC/F,QAApC,EAA8C;AACnD,MAAI9J,GAAG,GAAG;AACR3B,IAAAA,KAAK,EAAE,EADC;AAERuT,IAAAA,OAAO,EAAE;AACP9H,MAAAA,QAAQ,EAARA,QADO;AAEP1I,MAAAA,IAAI,EAAE,UAFC;AAGPyQ,MAAAA,UAAU,EAAE;AAHL;AAFD,GAAV,CADmD;;AAUnD,MAAG5E,IAAI,CAACnK,MAAL,KAAgB,CAAnB,EAAsB;AACpB9C,IAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACb+C,MAAAA,IAAI,EAAEyL,IAAI,CAAC,CAAD;AADG,KAAf;AAGD,GAJD,MAKK;AACHA,IAAAA,IAAI,GAAG2C,WAAW,CAAC3C,IAAD,EAAO4C,KAAP,EAAc/F,QAAd,EAAwB,UAASyG,IAAT,EAAeH,IAAf,EAAqBC,OAArB,EAA8B;AACtE,aAAO,CACLE,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAD3B,EAELE,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACH,IAAI,CAAC,CAAD,CAAJ,GAAUG,IAAI,CAAC,CAAD,CAAf,IAAsBF,OAF3B,CAAP;AAID,KALiB,CAAlB;;AAMA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGiK,IAAI,CAACnK,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,UAAIgD,IAAI,GAAG+M,IAAI,CAAC/P,CAAD,CAAf;AACA8C,MAAAA,GAAG,CAAC3B,KAAJ,CAAUI,IAAV,CAAe;AACbqT,QAAAA,MAAM,EAAE,CAAC5R,IAAI,CAAC/B,IAAL,GAAY0R,KAAb,IAAsB/F,QADjB;AAEbtI,QAAAA,IAAI,EAAEtB,IAAI,CAAC7B;AAFE,OAAf;AAID;AACF;;AACD,SAAO2B,GAAP;AACD;;AC11BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAS2U,QAAT,CAAkBtB,IAAlB,EAAwBzJ,OAAxB,EAAiC7K,KAAjC,EAAwC+K,QAAxC,EAAkDD,gBAAlD,EAAoEiI,MAApE,EAA4E;AAC1E,MAAMnR,IAAN,GAAiD0S,IAAjD,CAAM1S,IAAN;AAAA,MAAYyB,KAAZ,GAAiDiR,IAAjD,CAAYjR,KAAZ;AAAA,MAAmBkG,MAAnB,GAAiD+K,IAAjD,CAAmB/K,MAAnB;AAAA,MAA2B4B,QAA3B,GAAiDmJ,IAAjD,CAA2BnJ,QAA3B;AAAA,MAAqCC,OAArC,GAAiDkJ,IAAjD,CAAqClJ,OAArC;AACA,MAAInK,GAAG,GAAG;AACRW,IAAAA,IAAI,EAAJA,IADQ;AAERiU,IAAAA,OAAO,EAAE,KAFD;AAGRC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AACLrT,QAAAA,QAAQ,EAAE,UADL;AAELW,QAAAA,KAAK,EAALA,KAFK;AAGLkG,QAAAA,MAAM,EAANA,MAHK;;AAAA;AADF,KAHC;AAWRgC,IAAAA,QAAQ,EAAE,EAXF;AAYRyK,IAAAA,OAAO,EAAE,EAZD;AAaR7K,IAAAA,QAAQ,EAARA,QAbQ;AAcRC,IAAAA,OAAO,EAAPA;AAdQ,GAAV;AAgBA6K,EAAAA,YAAY,CAAChV,GAAD,EAAMqT,IAAN,EAAYtU,KAAZ,EAAmB+K,QAAnB,EAA6BD,gBAA7B,EAA+CiI,MAA/C,EAAuD,IAAvD,EAA6D,KAA7D,CAAZ,CAlB0E;;AAoB1E,MAAG9R,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBzU,cAAhB,CAA+B,SAA/B,CAAH,EAA8C;AAC5C,WAAOL,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB3S,OAAvB;AACD;;AACD,SAAOnC,GAAP;AACD;;AAED,SAASgV,YAAT,CAAsBhV,GAAtB,EAA2BqT,IAA3B,EAAiCtU,KAAjC,EAAwC+K,QAAxC,EAAkDD,gBAAlD,EAAoEiI,MAApE,EAA4EmD,QAA5E,EAAsFC,MAAtF,EAA8F;AAC5F,MAAM9S,KAAN,GAAmCiR,IAAnC,CAAMjR,KAAN;AAAA,MAAakG,MAAb,GAAmC+K,IAAnC,CAAa/K,MAAb;AAAA,MAAqBzH,SAArB,GAAmCwS,IAAnC,CAAqBxS,SAArB,CAD4F;;AAG5F,MAAMsU,WAAN,GAA+GtU,SAA/G,CAAMsU,WAAN;AAAA,MAAmBhT,OAAnB,GAA+GtB,SAA/G,CAAmBsB,OAAnB;AAAA,MAA4BV,QAA5B,GAA+GZ,SAA/G,CAA4BY,QAA5B;AAAA,MAAsC2T,UAAtC,GAA+GvU,SAA/G,CAAsCuU,UAAtC;AAAA,MAAkDC,UAAlD,GAA+GxU,SAA/G,CAAkDwU,UAAlD;AAAA,MAA8DC,UAA9D,GAA+GzU,SAA/G,CAA8DyU,UAA9D;AAAA,MAA0E7C,OAA1E,GAA+G5R,SAA/G,CAA0E4R,OAA1E;AAAA,MAAmFE,OAAnF,GAA+G9R,SAA/G,CAAmF8R,OAAnF;AAAA,MAA4FE,OAA5F,GAA+GhS,SAA/G,CAA4FgS,OAA5F;AAAA,MAAqG0C,KAArG,GAA+G1U,SAA/G,CAAqG0U,KAArG;AACA,MAAIC,MAAM,GAAGzW,KAAK,GAAG+S,MAAR,GAAiBjI,gBAA9B;AACA,MAAI4L,IAAI,GAAGR,QAAQ,GAAGjV,GAAG,CAAC6U,KAAP,GAAe7U,GAAG,CAACyV,IAAtC;;AACA,MAAG,CAACP,MAAD,IAAWhF,KAAK,CAACC,OAAN,CAAcgF,WAAd,CAAX,IAAyCA,WAAW,CAACrS,MAAxD,EAAgE;AAC9D,QAAI0N,CAAC,GAAGmB,eAAe,CAACwD,WAAD,EAAcK,MAAd,EAAsB1L,QAAtB,CAAvB;AACA,QAAImG,KAAK,GAAGO,CAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;AACA,QAAI0E,CAAC,GAAGkN,KAAK,CAAC0B,eAAN,CAAsB+D,KAAtB,CAA4B,GAA5B,CAAR;AACA3S,IAAAA,CAAC,CAAC,CAAD,CAAD,GAAOwE,UAAU,CAACxE,CAAC,CAAC,CAAD,CAAF,CAAjB;AACAA,IAAAA,CAAC,CAAC,CAAD,CAAD,GAAOwE,UAAU,CAACxE,CAAC,CAAC,CAAD,CAAF,CAAjB;;AACA,QAAGA,CAAC,CAAC,CAAD,CAAD,KAASX,KAAK,GAAG,GAAjB,IAAwBW,CAAC,CAAC,CAAD,CAAD,KAASuF,MAAM,GAAG,GAA7C,EAAkD;AAChDmN,MAAAA,IAAI,CAACX,KAAL,CAAWnD,eAAX,GAA6B1B,KAAK,CAAC0B,eAAnC;AACD;;AACD,QAAGnB,CAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,CAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE,CADG;AAEXtT,QAAAA,MAAM,EAAEyR,KAAK,CAACzR;AAFH,OAAb,CADqB;;AAMrB,WAAI,IAAItB,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGwN,CAAC,CAACnS,KAAF,CAAQyE,MAA7B,EAAqC5F,CAAC,GAAG8F,GAAzC,EAA8C9F,CAAC,EAA/C,EAAmD;AACjD,YAAIgD,IAAI,GAAGsQ,CAAC,CAACnS,KAAF,CAAQnB,CAAR,CAAX;AACA,YAAIyY,GAAG,GAAGzV,IAAI,CAACyR,eAAL,CAAqB+D,KAArB,CAA2B,GAA3B,CAAV;AACAC,QAAAA,GAAG,CAAC,CAAD,CAAH,GAASpO,UAAU,CAACoO,GAAG,CAAC,CAAD,CAAJ,CAAnB;AACAA,QAAAA,GAAG,CAAC,CAAD,CAAH,GAASpO,UAAU,CAACoO,GAAG,CAAC,CAAD,CAAJ,CAAnB;AACAzV,QAAAA,IAAI,CAAC0V,IAAL,GAAY,CAACD,GAAG,CAAC,CAAD,CAAhB;AACAzV,QAAAA,IAAI,CAAC2V,GAAL,GAAW,CAACF,GAAG,CAAC,CAAD,CAAf;AACD;;AACD3V,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,CAAjB;AACD,KAxB6D;;;AA0B9D,QAAGzN,CAAC,CAAC,CAAD,CAAJ,EAAS;AACP0S,MAAAA,IAAI,CAACX,KAAL,CAAWc,IAAX,GAAkB,CAAC7S,CAAC,CAAC,CAAD,CAApB;AACD;;AACD,QAAGA,CAAC,CAAC,CAAD,CAAJ,EAAS;AACP0S,MAAAA,IAAI,CAACX,KAAL,CAAWe,GAAX,GAAiB,CAAC9S,CAAC,CAAC,CAAD,CAAnB;AACD;AACF;;AACD,MAAGmN,KAAK,CAACC,OAAN,CAAchO,OAAd,KAA0BA,OAAO,CAACW,MAArC,EAA6C;AAC3C,QAAI0N,EAAC,GAAGuB,gBAAgB,CAAC5P,OAAD,EAAUqT,MAAV,EAAkB1L,QAAlB,CAAxB;;AACA,QAAImG,MAAK,GAAGO,EAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAG4R,MAAK,CAAC9N,OAAN,KAAkB,CAArB,EAAwB;AACtBsT,MAAAA,IAAI,CAACX,KAAL,CAAW3S,OAAX,GAAqB8N,MAAK,CAAC9N,OAA3B;AACD;;AACD,QAAGqO,EAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,EAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE,CADG;AAEXtT,QAAAA,MAAM,EAAEyR,MAAK,CAACzR;AAFH,OAAb;AAIAwB,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,EAAjB;AACD;AACF;;AACD,MAAIsF,IAAJ,CArD4F;;AAuD5F,MAAIC,aAAa,GAAG,IAApB;;AACA,MAAG7F,KAAK,CAACC,OAAN,CAAciF,UAAd,KAA6BA,UAAU,CAACtS,MAAX,GAAoB,CAApD,EAAuD;AACrDiT,IAAAA,aAAa,GAAG,KAAhB;AACD;;AACD,MAAG7F,KAAK,CAACC,OAAN,CAAckF,UAAd,KAA6BA,UAAU,CAACvS,MAAX,GAAoB,CAApD,EAAuD;AACrDiT,IAAAA,aAAa,GAAG,KAAhB;AACD;;AACD,MAAG7F,KAAK,CAACC,OAAN,CAAcmF,UAAd,KAA6BA,UAAU,CAACxS,MAAX,GAAoB,CAApD,EAAuD;AACrDiT,IAAAA,aAAa,GAAG,KAAhB;AACD;;AACD,MAAG7F,KAAK,CAACC,OAAN,CAAc1O,QAAd,KAA2BA,QAAQ,CAACqB,MAApC,IAA8CiT,aAAjD,EAAgE;AAC9D,QAAIvF,GAAC,GAAGwB,iBAAiB,CAACvQ,QAAD,EAAW+T,MAAX,EAAmB1L,QAAnB,CAAzB;;AACA,QAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAG4R,OAAK,CAACoC,aAAT,EAAwB;AACtBoD,MAAAA,IAAI,CAACX,KAAL,CAAW7C,UAAX,GAAwBhC,OAAK,CAACoC,aAAN,CAAoB,CAApB,CAAxB;AACAoD,MAAAA,IAAI,CAACX,KAAL,CAAW5C,UAAX,GAAwBjC,OAAK,CAACoC,aAAN,CAAoB,CAApB,CAAxB;AACD,KAHD,MAIK;AACH,UAAGpC,OAAK,CAACgC,UAAT,EAAqB;AACnBwD,QAAAA,IAAI,CAACX,KAAL,CAAW7C,UAAX,GAAwBhC,OAAK,CAACgC,UAA9B;AACD;;AACD,UAAGhC,OAAK,CAACiC,UAAT,EAAqB;AACnBuD,QAAAA,IAAI,CAACX,KAAL,CAAW5C,UAAX,GAAwBjC,OAAK,CAACiC,UAA9B;AACD;;AACD,UAAGjC,OAAK,CAACkC,UAAT,EAAqB;AACnBsD,QAAAA,IAAI,CAACX,KAAL,CAAW3C,UAAX,GAAwBlC,OAAK,CAACkC,UAA9B;AACA2D,QAAAA,IAAI,GAAG,IAAP;AACD;AACF;;AACD,QAAGtF,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB,UAAG,CAACmN,OAAK,CAACoC,aAAV,EAAyB;AACvB7B,QAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,UAAAA,MAAM,EAAE,CADG;AAEXtT,UAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,SAAb;;AAIA,YAAGgS,GAAC,CAACnS,KAAF,CAAQ,CAAR,EAAWyE,MAAX,GAAoB,CAAvB,EAA0B;AACxBgT,UAAAA,IAAI,GAAG,IAAP;AACD;AACF;;AACD9V,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACD;AACF,GA/BD,MAgCK;AACH,QAAGN,KAAK,CAACC,OAAN,CAAciF,UAAd,KAA6BA,UAAU,CAACtS,MAA3C,EAAmD;AACjD,UAAI0N,GAAC,GAAG8B,WAAW,CAAC8C,UAAD,EAAaI,MAAb,EAAqB1L,QAArB,EAA+B,YAA/B,CAAnB;;AACA,UAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,UAAG4R,OAAK,CAACgC,UAAT,EAAqB;AACnBwD,QAAAA,IAAI,CAACX,KAAL,CAAW7C,UAAX,GAAwBhC,OAAK,CAACgC,UAA9B;AACD;;AACD,UAAGzB,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,QAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,UAAAA,MAAM,EAAE,CADG;AAEXtT,UAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,SAAb;AAIAwB,QAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACD;AACF;;AACD,QAAGN,KAAK,CAACC,OAAN,CAAckF,UAAd,KAA6BA,UAAU,CAACvS,MAA3C,EAAmD;AACjD,UAAI0N,GAAC,GAAG8B,WAAW,CAAC+C,UAAD,EAAaG,MAAb,EAAqB1L,QAArB,EAA+B,YAA/B,CAAnB;;AACA,UAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,UAAG4R,OAAK,CAACiC,UAAT,EAAqB;AACnBuD,QAAAA,IAAI,CAACX,KAAL,CAAW5C,UAAX,GAAwBjC,OAAK,CAACiC,UAA9B;AACD;;AACD,UAAG1B,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,QAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,UAAAA,MAAM,EAAE,CADG;AAEXtT,UAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,SAAb;AAIAwB,QAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACD;AACF;;AACD,QAAGN,KAAK,CAACC,OAAN,CAAcmF,UAAd,KAA6BA,UAAU,CAACxS,MAA3C,EAAmD;AACjD,UAAI0N,GAAC,GAAG8B,WAAW,CAACgD,UAAD,EAAaE,MAAb,EAAqB1L,QAArB,EAA+B,YAA/B,CAAnB;;AACA,UAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,UAAG4R,OAAK,CAACkC,UAAT,EAAqB;AACnBsD,QAAAA,IAAI,CAACX,KAAL,CAAW3C,UAAX,GAAwBlC,OAAK,CAACkC,UAA9B;AACA2D,QAAAA,IAAI,GAAG,IAAP;AACD;;AACD,UAAGtF,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,QAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,UAAAA,MAAM,EAAE,CADG;AAEXtT,UAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,SAAb;AAIAwB,QAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACAsF,QAAAA,IAAI,GAAG,IAAP;AACD;AACF;AACF;;AACD,MAAG5F,KAAK,CAACC,OAAN,CAAcsC,OAAd,KAA0BA,OAAO,CAAC3P,MAArC,EAA6C;AAC3C,QAAI0N,GAAC,GAAGgC,gBAAgB,CAACC,OAAD,EAAU+C,MAAV,EAAkB1L,QAAlB,CAAxB;;AACA,QAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAG4R,OAAK,CAACwC,OAAT,EAAkB;AAChBgD,MAAAA,IAAI,CAACX,KAAL,CAAWrC,OAAX,GAAqBxC,OAAK,CAACwC,OAA3B;AACAqD,MAAAA,IAAI,GAAG,IAAP;AACD;;AACD,QAAGtF,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE,CADG;AAEXtT,QAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,OAAb;AAIAwB,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACAsF,MAAAA,IAAI,GAAG,IAAP;AACD;AACF;;AACD,MAAG5F,KAAK,CAACC,OAAN,CAAcwC,OAAd,KAA0BA,OAAO,CAAC7P,MAArC,EAA6C;AAC3C,QAAI0N,GAAC,GAAGkC,gBAAgB,CAACC,OAAD,EAAU6C,MAAV,EAAkB1L,QAAlB,CAAxB;;AACA,QAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAG4R,OAAK,CAAC0C,OAAT,EAAkB;AAChB8C,MAAAA,IAAI,CAACX,KAAL,CAAWnC,OAAX,GAAqB1C,OAAK,CAAC0C,OAA3B;AACAmD,MAAAA,IAAI,GAAG,IAAP;AACD;;AACD,QAAGtF,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE,CADG;AAEXtT,QAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,OAAb;AAIAwB,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACAsF,MAAAA,IAAI,GAAG,IAAP;AACD;AACF;;AACD,MAAG5F,KAAK,CAACC,OAAN,CAAc0C,OAAd,KAA0BA,OAAO,CAAC/P,MAArC,EAA6C;AAC3C,QAAI0N,GAAC,GAAGoC,gBAAgB,CAACC,OAAD,EAAU2C,MAAV,EAAkB1L,QAAlB,CAAxB;;AACA,QAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAG4R,OAAK,CAAC4C,OAAT,EAAkB;AAChB4C,MAAAA,IAAI,CAACX,KAAL,CAAWjC,OAAX,GAAqB5C,OAAK,CAAC4C,OAA3B;AACAiD,MAAAA,IAAI,GAAG,IAAP;AACD;;AACD,QAAGtF,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE,CADG;AAEXtT,QAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,OAAb;AAIAwB,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACAsF,MAAAA,IAAI,GAAG,IAAP;AACD;AACF;;AACD,MAAGA,IAAH,EAAS;AACP;AACAL,IAAAA,IAAI,CAACX,KAAL,CAAWkB,WAAX,GAAyBhY,IAAI,CAAC4B,IAAL,CAAU5B,IAAI,CAACiY,GAAL,CAAS7T,KAAT,EAAgB,CAAhB,IAAqBpE,IAAI,CAACiY,GAAL,CAAS3N,MAAT,EAAiB,CAAjB,CAA/B,CAAzB;AACD;;AACD,MAAG4H,KAAK,CAACC,OAAN,CAAcoF,KAAd,KAAwBA,KAAK,CAACzS,MAAjC,EAAyC;AACvC,QAAI0N,GAAC,GAAGsC,cAAc,CAACyC,KAAD,EAAQC,MAAR,EAAgB1L,QAAhB,CAAtB;;AACA,QAAImG,OAAK,GAAGO,GAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAG4R,OAAK,CAAC8C,MAAN,KAAiB,CAAjB,IAAsB9C,OAAK,CAAC8C,MAAN,KAAiBjT,SAAvC,IAAoDmQ,OAAK,CAAC8C,MAAN,KAAiB,IAAxE,EAA8E;AAC5E0C,MAAAA,IAAI,CAACX,KAAL,CAAW/B,MAAX,GAAoB9C,OAAK,CAAC8C,MAA1B;AACD;;AACD,QAAG9C,OAAK,CAAC+C,MAAN,KAAiB,CAAjB,IAAsB/C,OAAK,CAAC+C,MAAN,KAAiBlT,SAAvC,IAAoDmQ,OAAK,CAAC+C,MAAN,KAAiB,IAAxE,EAA8E;AAC5EyC,MAAAA,IAAI,CAACX,KAAL,CAAW9B,MAAX,GAAoB/C,OAAK,CAAC+C,MAA1B;AACD;;AACD,QAAG/C,OAAK,CAACgD,MAAN,KAAiB,CAAjB,IAAsBhD,OAAK,CAACgD,MAAN,KAAiBnT,SAAvC,IAAoDmQ,OAAK,CAACgD,MAAN,KAAiB,IAAxE,EAA8E;AAC5EwC,MAAAA,IAAI,CAACX,KAAL,CAAW7B,MAAX,GAAoBhD,OAAK,CAACgD,MAA1B;AACD;;AACD,QAAGzC,GAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,GAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE,CADG;AAEXtT,QAAAA,MAAM,EAAEyR,OAAK,CAACzR;AAFH,OAAb;AAIAwB,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,GAAjB;AACD;AACF;;AACD,SAAOxQ,GAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS0J,SAAT,CAAmB2J,IAAnB,EAAyBzJ,OAAzB,EAAkCsM,MAAlC,EAA0CnX,KAA1C,EAAiD+K,QAAjD,EAA2DD,gBAA3D,EAA6EiI,MAA7E,EAAqFqE,UAArF,EAAiG;AAC/F;AACA,MAAG,CAAC9C,IAAI,CAACjT,OAAT,EAAkB;AAChB,WAAO,IAAP;AACD;;AACD,MAAMO,IAAN,GAA8F0S,IAA9F,CAAM1S,IAAN;AAAA,MAAY0L,OAAZ,GAA8FgH,IAA9F,CAAYhH,OAAZ;AAAA,MAAqBrB,SAArB,GAA8FqI,IAA9F,CAAqBrI,SAArB;AAAA,MAAgCC,OAAhC,GAA8FoI,IAA9F,CAAgCpI,OAAhC;AAAA,MAAyCC,QAAzC,GAA8FmI,IAA9F,CAAyCnI,QAAzC;AAAA,MAAmDC,YAAnD,GAA8FkI,IAA9F,CAAmDlI,YAAnD;AAAA,MAAiEC,QAAjE,GAA8FiI,IAA9F,CAAiEjI,QAAjE;AAAA,MAA2EP,MAA3E,GAA8FwI,IAA9F,CAA2ExI,MAA3E;AAAA,MAAmFF,MAAnF,GAA8F0I,IAA9F,CAAmF1I,MAAnF;;AACA,MAAG,CAACS,QAAD,KAAciB,OAAO,KAAKvM,SAAZ,IAAyBuM,OAAO,KAAK,IAAnD,CAAH,EAA6D;AAC3D,WAAO,IAAP;AACD;;AACD,MAAIwD,KAAK,GAAG9Q,KAAK,GAAG+S,MAAR,GAAiBjI,gBAA7B;AACAoB,EAAAA,OAAO,IAAI6G,MAAM,GAAGjI,gBAApB;AACAqB,EAAAA,QAAQ,IAAI4G,MAAM,GAAGjI,gBAArB,CAX+F;;AAa/F,MAAGoB,OAAO,IAAI4E,KAAK,GAAG/F,QAAnB,IAA+BoB,QAAQ,IAAI2E,KAA9C,EAAqD;AACnD,WAAO,IAAP;AACD;;AACD,MAAI7P,GAAG,GAAG;AACRW,IAAAA,IAAI,EAAJA;AADQ,GAAV;;AAGA,MAAGyK,QAAH,EAAa;AACXpL,IAAAA,GAAG,CAAC4U,OAAJ,GAAc,KAAd;AACA5U,IAAAA,GAAG,CAACoL,QAAJ,GAAeA,QAAf;AACApL,IAAAA,GAAG,CAAC+L,UAAJ,GAAiBsH,IAAI,CAACtH,UAAtB;AACA/L,IAAAA,GAAG,CAACgM,kBAAJ,GAAyBqH,IAAI,CAACrH,kBAA9B;AACAhM,IAAAA,GAAG,CAACiM,mBAAJ,GAA0BoH,IAAI,CAACpH,mBAA/B;AACAjM,IAAAA,GAAG,CAACkM,cAAJ,GAAqBmH,IAAI,CAACnH,cAA1B;AACAlM,IAAAA,GAAG,CAACmM,eAAJ,GAAsBkH,IAAI,CAAClH,eAA3B;AACAnM,IAAAA,GAAG,CAAC6U,KAAJ,GAAY;AACVC,MAAAA,KAAK,EAAE;AACLsB,QAAAA,OAAO,EAAE;AADJ;AADG,KAAZ;AAKD,GAbD,MAcK;AACHpW,IAAAA,GAAG,CAACqW,SAAJ,GAAgB7H,KAAK,CAAC5E,OAAD,EAAUyC,OAAV,EAAmB6J,MAAnB,EAA2BnX,KAA3B,EAAkC+K,QAAlC,EAA4CD,gBAA5C,EAA8DiI,MAAM,GAAG9G,SAAvE,CAArB;AACD;;AACDhL,EAAAA,GAAG,CAACyV,IAAJ,GAAW;AACTX,IAAAA,KAAK,EAAE;AADE,GAAX,CApC+F;;AAwC/F,MAAGjK,MAAH,EAAW;AACT,QAAGF,MAAH,EAAW;AACT3K,MAAAA,GAAG,CAACyV,IAAJ,CAASa,IAAT,GAAgB,IAAhB;AACD,KAFD,MAGK;AACHtW,MAAAA,GAAG,CAACyV,IAAJ,CAAS5J,IAAT,GAAgB,IAAhB;AACD;AACF,GA/C8F;;;AAiD/F,MAAG,CAACT,QAAJ,EAAc;AACZ,YAAOD,YAAP;AACE,WAAKoL,YAAY,CAACC,QAAlB;AACExW,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,UAA9B;AACA;;AACF,WAAKF,YAAY,CAACG,MAAlB;AACE1W,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,QAA9B;AACA;;AACF,WAAKF,YAAY,CAACI,OAAlB;AACE3W,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,SAA9B;AACA;;AACF,WAAKF,YAAY,CAACK,MAAlB;AACE5W,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,QAA9B;AACA;;AACF,WAAKF,YAAY,CAACM,WAAlB;AACE7W,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,aAA9B;AACA;;AACF,WAAKF,YAAY,CAACO,UAAlB;AACE9W,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,YAA9B;AACA;;AACF,WAAKF,YAAY,CAACQ,UAAlB;AACE/W,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,YAA9B;AACA;;AACF,WAAKF,YAAY,CAACS,UAAlB;AACEhX,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,YAA9B;AACA;;AACF,WAAKF,YAAY,CAACU,UAAlB;AACEjX,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,YAA9B;AACA;;AACF,WAAKF,YAAY,CAACW,SAAlB;AACElX,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,WAA9B;AACA;;AACF,WAAKF,YAAY,CAACY,GAAlB;AACEnX,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,KAA9B;AACA;;AACF,WAAKF,YAAY,CAACa,UAAlB;AACEpX,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,YAA9B;AACA;;AACF,WAAKF,YAAY,CAACc,KAAlB;AACErX,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,OAA9B;AACA;;AACF,WAAKF,YAAY,CAACe,UAAlB;AACEtX,QAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe2B,YAAf,GAA8B,YAA9B;AACA;AA1CJ;AA4CD;;AACDzW,EAAAA,GAAG,CAAC+U,OAAJ,GAAc,EAAd,CA/F+F;;AAiG/F,MAAG9J,OAAO,GAAG4E,KAAV,IAAmB3E,QAAQ,GAAG2E,KAAK,GAAG/F,QAAzC,EAAmD;AACjD,QAAI/G,CAAC,GAAG;AACN1E,MAAAA,KAAK,EAAE,EADD;AAENuT,MAAAA,OAAO,EAAE;AACP9H,QAAAA,QAAQ,EAARA,QADO;AAEP1I,QAAAA,IAAI,EAAE,UAFC;AAGPyQ,QAAAA,UAAU,EAAE;AAHL;AAFH,KAAR,CADiD;;AAUjD,QAAG5G,OAAO,GAAG4E,KAAb,EAAoB;AAClB7P,MAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAeyC,UAAf,GAA4B,QAA5B;AACAvX,MAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAe0C,aAAf,GAA+B,MAA/B;AACAzU,MAAAA,CAAC,CAAC1E,KAAF,CAAQI,IAAR,CAAa;AACXqT,QAAAA,MAAM,EAAE;AADG,OAAb;AAGA/O,MAAAA,CAAC,CAAC1E,KAAF,CAAQI,IAAR,CAAa;AACXqT,QAAAA,MAAM,EAAE7G,OAAO,GAAGnB,QADP;AAEXyN,QAAAA,UAAU,EAAE,SAFD;AAGXC,QAAAA,aAAa,EAAE;AAHJ,OAAb;AAKD,KAXD,MAYK;AACHzU,MAAAA,CAAC,CAAC1E,KAAF,CAAQI,IAAR,CAAa;AACXqT,QAAAA,MAAM,EAAE,CADG;AAEXyF,QAAAA,UAAU,EAAE,SAFD;AAGXC,QAAAA,aAAa,EAAE;AAHJ,OAAb;AAKD,KA5BgD;;;AA8BjD,QAAGtM,QAAQ,GAAG2E,KAAK,GAAG/F,QAAtB,EAAgC;AAC9B;AACA/G,MAAAA,CAAC,CAAC1E,KAAF,CAAQI,IAAR,CAAa;AACXqT,QAAAA,MAAM,EAAE5G,QAAQ,GAAGpB,QADR;AAEXyN,QAAAA,UAAU,EAAE,QAFD;AAGXC,QAAAA,aAAa,EAAE;AAHJ,OAAb,EAF8B;;AAQ9B,UAAGvM,OAAO,IAAI4E,KAAd,EAAqB;AACnB9M,QAAAA,CAAC,CAAC1E,KAAF,CAAQI,IAAR,CAAa;AACXqT,UAAAA,MAAM,EAAE,CADG;AAEXyF,UAAAA,UAAU,EAAE,QAFD;AAGXC,UAAAA,aAAa,EAAE;AAHJ,SAAb;AAKD;AACF,KAfD,MAgBK;AACHzU,MAAAA,CAAC,CAAC1E,KAAF,CAAQI,IAAR,CAAa;AACXqT,QAAAA,MAAM,EAAE,CADG;AAEXyF,QAAAA,UAAU,EAAE,SAFD;AAGXC,QAAAA,aAAa,EAAE;AAHJ,OAAb;AAKD;;AACDxX,IAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiBsE,CAAjB;AACD;;AACDiS,EAAAA,YAAY,CAAChV,GAAD,EAAMqT,IAAN,EAAYtU,KAAZ,EAAmB+K,QAAnB,EAA6BD,gBAA7B,EAA+CiI,MAA/C,EAAuD,KAAvD,EAA8D,KAA9D,CAAZ,CAxJ+F;;AA0J/F,MAAI2F,GAAG,GAAGvB,MAAM,CAAClW,GAAG,CAACqW,SAAL,CAAhB;;AACA,MAAGoB,GAAG,IAAIA,GAAG,CAAC7C,OAAJ,KAAgB,MAA1B,EAAkC;AAChC5U,IAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAec,IAAf,GAAsB5V,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAec,IAAf,IAAuB,CAA7C;AACA5V,IAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAec,IAAf,IAAuB6B,GAAG,CAAC5C,KAAJ,CAAUC,KAAV,CAAgBc,IAAhB,IAAwB,CAA/C;AACA5V,IAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAee,GAAf,GAAqB7V,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAee,GAAf,IAAsB,CAA3C;AACA7V,IAAAA,GAAG,CAACyV,IAAJ,CAASX,KAAT,CAAee,GAAf,IAAsB4B,GAAG,CAAC5C,KAAJ,CAAUC,KAAV,CAAgBe,GAAhB,IAAuB,CAA7C;AACD,GAhK8F;;;AAkK/F,MAAGxC,IAAI,CAAChT,cAAL,CAAoB,SAApB,CAAH,EAAmC;AACjC,QAAI8J,OAAO,GAAGkJ,IAAI,CAAClJ,OAAnB;;AACA,QAAGgM,UAAU,CAAC9V,cAAX,CAA0B8J,OAA1B,CAAH,EAAuC;AACrC,UAAIuN,GAAG,GAAGjP,CAAC,CAACC,QAAF,CAAWiP,IAAX,CAAgBC,SAAhB,CAA0BzB,UAAU,CAAChM,OAAD,CAApC,CAAV;AACAuN,MAAAA,GAAG,GAAGjP,CAAC,CAACC,QAAF,CAAWiP,IAAX,CAAgBnJ,KAAhB,CAAsBkJ,GAAtB,CAAN;AACA,UAAIG,MAAM,GAAGH,GAAb;AACA,aAAOG,MAAM,CAAC3N,QAAd;AACA,aAAO2N,MAAM,CAAC1N,OAAd;;AACA,aAAM0N,MAAM,CAACvN,QAAP,CAAgBxH,MAAtB,EAA8B;AAC5B+U,QAAAA,MAAM,GAAGA,MAAM,CAACvN,QAAP,CAAgB,CAAhB,CAAT;AACA,eAAOuN,MAAM,CAAC3N,QAAd;AACA,eAAO2N,MAAM,CAAC1N,OAAd;AACD;;AACD0N,MAAAA,MAAM,CAACvN,QAAP,CAAgB7L,IAAhB,CAAqBuB,GAArB;AACAA,MAAAA,GAAG,GAAG0X,GAAN;AACD;AACF;;AACD,SAAO1X,GAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASwO,KAAT,CAAe5E,OAAf,EAAwByC,OAAxB,EAAiC6J,MAAjC,EAAyCnX,KAAzC,EAAgD+K,QAAhD,EAA0DD,gBAA1D,EAA4EiI,MAA5E,EAAoF;AAClF,MAAIuB,IAAI,GAAGzJ,OAAO,CAACyC,OAAD,CAAlB;AACA,MAAM/K,IAAN,GAA+D+R,IAA/D,CAAM/R,IAAN;AAAA,MAAYX,IAAZ,GAA+D0S,IAA/D,CAAY1S,IAAZ;AAAA,MAAkB6L,GAAlB,GAA+D6G,IAA/D,CAAkB7G,GAAlB;AAAA,MAAuBpK,KAAvB,GAA+DiR,IAA/D,CAAuBjR,KAAvB;AAAA,MAA8BkG,MAA9B,GAA+D+K,IAA/D,CAA8B/K,MAA9B;AAAA,MAAsCgC,QAAtC,GAA+D+I,IAA/D,CAAsC/I,QAAtC;AAAA,MAAgDoB,IAAhD,GAA+D2H,IAA/D,CAAgD3H,IAAhD;AAAA,MAAsDI,IAAtD,GAA+DuH,IAA/D,CAAsDvH,IAAtD;AACA,MAAI9L,GAAG,GAAG;AACRoM,IAAAA,EAAE,EAAE,CAAC,CADG;AACA;AACRzL,IAAAA,IAAI,EAAJA,IAFQ;AAGRiU,IAAAA,OAAO,EAAEtT,IAHD;AAIRuT,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AACLrT,QAAAA,QAAQ,EAAE,UADL;AAGL;AACA;;AAJK;AADF;AAJC,GAAV;;AAaA,MAAGW,KAAH,EAAU;AACRpC,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB1S,KAAhB,GAAwBA,KAAxB;AACD;;AACD,MAAGkG,MAAH,EAAW;AACTtI,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBxM,MAAhB,GAAyBA,MAAzB;AACD;;AACD,MAAGhH,IAAI,KAAK,KAAT,IAAkB,CAACoK,IAAnB,IAA2B,CAACI,IAA/B,EAAqC;AACnC9L,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBgD,QAAhB,GAA2B,QAA3B;AACD,GAxBiF;;;AA0BlF,MAAGpM,IAAH,EAAS;AACPqM,IAAAA,SAAS,CAAC/X,GAAD,EAAMqT,IAAN,EAAYtU,KAAZ,EAAmB+K,QAAnB,EAA6BD,gBAA7B,EAA+CiI,MAA/C,CAAT;AACD,GAFD,MAGK,IAAGhG,IAAH,EAAS;AACZ,QAAIlL,OAAO,GAAGyS,IAAI,CAACzS,OAAnB;;AACA,QAAGA,OAAO,CAAC+M,SAAX,EAAsB;AACpB3N,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB5S,KAAhB,GAAwB,CACtBiS,QAAQ,CAACvT,OAAO,CAAC+M,SAAR,CAAkB,CAAlB,IAAuB,GAAxB,CADc,EAEtBwG,QAAQ,CAACvT,OAAO,CAAC+M,SAAR,CAAkB,CAAlB,IAAuB,GAAxB,CAFc,EAGtBwG,QAAQ,CAACvT,OAAO,CAAC+M,SAAR,CAAkB,CAAlB,IAAuB,GAAxB,CAHc,CAAxB;AAKD,KAND,MAOK;AACH3N,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB5S,KAAhB,GAAwB,aAAxB;AACD;;AACD,QAAGtB,OAAO,CAACO,MAAR,IAAkBP,OAAO,CAACoN,WAA7B,EAA0C;AACxChO,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBkD,eAAhB,GAAkC,CAChC7D,QAAQ,CAACvT,OAAO,CAACO,MAAR,CAAe,CAAf,IAAoB,GAArB,CADwB,EAEhCgT,QAAQ,CAACvT,OAAO,CAACO,MAAR,CAAe,CAAf,IAAoB,GAArB,CAFwB,EAGhCgT,QAAQ,CAACvT,OAAO,CAACO,MAAR,CAAe,CAAf,IAAoB,GAArB,CAHwB,CAAlC;AAKAnB,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBmD,eAAhB,GAAkCrX,OAAO,CAACoN,WAA1C;;AACA,UAAGpN,OAAO,CAACgN,UAAX,EAAuB;AACrB5N,QAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBoD,cAAhB,GAAiC,MAAjC;AACD;AACF;;AACDlY,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBzH,UAAhB,GAA6BzM,OAAO,CAACyM,UAArC;AACArN,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBvH,QAAhB,GAA2B3M,OAAO,CAAC2M,QAAnC,CAxBY;AA0BZ;;AACAvN,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBqD,UAAhB,GAA6B,GAA7B;AACAnY,IAAAA,GAAG,CAACsK,QAAJ,GAAe,CAAC1J,OAAO,CAACkL,IAAT,CAAf,CA5BY;;AA8BZ,QAAI2B,YAAY,GAAG7M,OAAO,CAAC6M,YAA3B;AACA,QAAImI,IAAI,GAAG,CAAX;AAAA,QAAcwC,KAAK,GAAG,CAAtB;;AACA,SAAI,IAAIlb,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGyK,YAAY,CAAC3K,MAAlC,EAA0C5F,CAAC,GAAG8F,GAA9C,EAAmD9F,CAAC,IAAI,CAAxD,EAA2D;AACzD0Y,MAAAA,IAAI,GAAG5X,IAAI,CAACyG,GAAL,CAASmR,IAAT,EAAenI,YAAY,CAACvQ,CAAD,CAA3B,CAAP;AACAkb,MAAAA,KAAK,GAAGpa,IAAI,CAAC0G,GAAL,CAAS0T,KAAT,EAAgB3K,YAAY,CAACvQ,CAAC,GAAG,CAAL,CAA5B,CAAR;AACD;;AACD,QAAG0D,OAAO,CAACa,QAAX,EAAqB;AACnBzB,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBc,IAAhB,GAAuBhV,OAAO,CAACa,QAAR,CAAiB,CAAjB,CAAvB;AACAzB,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBe,GAAhB,GAAsBjV,OAAO,CAACa,QAAR,CAAiB,CAAjB,CAAtB;AACD,KAHD,MAIK;AACH,UAAGmU,IAAH,EAAS;AACP5V,QAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBc,IAAhB,GAAuBA,IAAvB;AACA5V,QAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB1S,KAAhB,GAAwBgW,KAAK,GAAGxC,IAAhC;AACA5V,QAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBuD,SAAhB,GAA4B,QAA5B;AACD;;AACDrY,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBe,GAAhB,GAAsB,CAACjV,OAAO,CAAC2M,QAAT,GAAoBE,YAAY,CAAC,CAAD,CAAtD;AACD;AACF,GAhDI;AAAA,OAkDA,IAAGnM,IAAI,KAAK,KAAZ,EAAmB;AACtBtB,IAAAA,GAAG,CAAC6U,KAAJ,CAAUrI,GAAV,GAAgBA,GAAhB;AACD,GAFI,MAGA,IAAG0D,KAAK,CAACC,OAAN,CAAc7F,QAAd,CAAH,EAA4B;AAC/BtK,IAAAA,GAAG,CAACsK,QAAJ,GAAe,EAAf;AACAgO,IAAAA,aAAa,CAACtY,GAAD,EAAMsK,QAAN,EAAgBV,OAAhB,EAAyBsM,MAAzB,EAAiCnX,KAAjC,EAAwC+K,QAAxC,EAAkDD,gBAAlD,EAAoEiI,MAApE,CAAb;AACD;;AACD9R,EAAAA,GAAG,CAACoM,EAAJ,GAAS8J,MAAM,CAACpT,MAAhB;AACAoT,EAAAA,MAAM,CAACzX,IAAP,CAAYuB,GAAZ;AACA,SAAOA,GAAG,CAACoM,EAAX;AACD;;AAED,SAASkM,aAAT,CAAuBtY,GAAvB,EAA4BsK,QAA5B,EAAsCV,OAAtC,EAA+CsM,MAA/C,EAAuDnX,KAAvD,EAA8D+K,QAA9D,EAAwED,gBAAxE,EAA0FiI,MAA1F,EAAkG;AAChG,MAAG5B,KAAK,CAACC,OAAN,CAAc7F,QAAd,CAAH,EAA4B;AAC1B;AACA,QAAI6L,UAAU,GAAG,EAAjB;;AACA,SAAI,IAAIjZ,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGsH,QAAQ,CAACxH,MAA9B,EAAsC5F,CAAC,GAAG8F,GAA1C,EAA+C9F,CAAC,EAAhD,EAAoD;AAClD,UAAIgD,IAAI,GAAGoK,QAAQ,CAACpN,CAAD,CAAnB;;AACA,UAAGgD,IAAI,CAACG,cAAL,CAAoB,UAApB,CAAH,EAAoC;AAClC8V,QAAAA,UAAU,CAACjW,IAAI,CAACgK,QAAN,CAAV,GAA4ByK,QAAQ,CAACzU,IAAD,EAAO0J,OAAP,EAAgB7K,KAAhB,EAAuB+K,QAAvB,EAAiCD,gBAAjC,EAAmDiI,MAAnD,CAApC;AACD;AACF,KARyB;;;AAU1B,SAAI,IAAI5U,EAAR,IAAaiZ,UAAb,EAAyB;AACvB,UAAGA,UAAU,CAAC9V,cAAX,CAA0BnD,EAA1B,CAAH,EAAiC;AAC/B,YAAIgD,KAAI,GAAGiW,UAAU,CAACjZ,EAAD,CAArB;AACA,YAAIiN,OAAO,GAAGjK,KAAI,CAACiK,OAAnB;;AACA,eAAMA,OAAO,KAAKrK,SAAZ,IAAyBqW,UAAU,CAAChM,OAAD,CAAzC,EAAoD;AAClD,cAAIC,MAAM,GAAG3B,CAAC,CAACC,QAAF,CAAWiP,IAAX,CAAgBC,SAAhB,CAA0BzB,UAAU,CAAChM,OAAD,CAApC,CAAb;AACAC,UAAAA,MAAM,GAAG3B,CAAC,CAACC,QAAF,CAAWiP,IAAX,CAAgBnJ,KAAhB,CAAsBpE,MAAtB,CAAT;AACAA,UAAAA,MAAM,CAACE,QAAP,CAAgB7L,IAAhB,CAAqByB,KAArB;AACAA,UAAAA,KAAI,GAAGkK,MAAP;AACAD,UAAAA,OAAO,GAAGC,MAAM,CAACD,OAAjB;AACD;;AACD,YAAGjK,KAAI,KAAKiW,UAAU,CAACjZ,EAAD,CAAtB,EAA2B;AACzBiZ,UAAAA,UAAU,CAACjZ,EAAD,CAAV,GAAgBgD,KAAhB;AACD;AACF;AACF,KAzByB;;;AA2B1B,SAAI,IAAIhD,GAAC,GAAG,CAAR,EAAW8F,IAAG,GAAGsH,QAAQ,CAACxH,MAA9B,EAAsC5F,GAAC,GAAG8F,IAA1C,EAA+C9F,GAAC,EAAhD,EAAoD;AAClD,UAAIgD,MAAI,GAAGoK,QAAQ,CAACpN,GAAD,CAAnB;AACA,UAAIqb,IAAI,GAAG7O,SAAS,CAACxJ,MAAD,EAAO0J,OAAP,EAAgBsM,MAAhB,EAAwBnX,KAAxB,EAA+B+K,QAA/B,EAAyCD,gBAAzC,EAA2DiI,MAA3D,EAAmEqE,UAAnE,CAApB;;AACA,UAAGoC,IAAH,EAAS;AACPvY,QAAAA,GAAG,CAACsK,QAAJ,CAAa7L,IAAb,CAAkB8Z,IAAlB,EADO;;AAGP,YAAGA,IAAI,CAAC9C,IAAL,IAAa8C,IAAI,CAAC9C,IAAL,CAAUX,KAAvB,IAAgCyD,IAAI,CAAC9C,IAAL,CAAUX,KAAV,CAAgBkB,WAAnD,EAAgE;AAC9DhW,UAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBkB,WAAhB,GAA8BuC,IAAI,CAAC9C,IAAL,CAAUX,KAAV,CAAgBkB,WAAhB,IAA+BlW,SAA7D;AACA,iBAAOyY,IAAI,CAAC9C,IAAL,CAAUX,KAAV,CAAgBkB,WAAvB;AACD;;AACD,YAAGuC,IAAI,CAACjO,QAAL,IAAiBiO,IAAI,CAACjO,QAAL,CAAcxH,MAAd,KAAyB,CAA7C,EAAgD;AAC9C,cAAI0N,CAAC,GAAG+H,IAAI,CAACjO,QAAL,CAAc,CAAd,CAAR;;AACA,cAAGkG,CAAC,CAACiF,IAAF,IAAUjF,CAAC,CAACiF,IAAF,CAAOX,KAAjB,IAA0BtE,CAAC,CAACiF,IAAF,CAAOX,KAAP,CAAakB,WAA1C,EAAuD;AACrDuC,YAAAA,IAAI,CAAC1D,KAAL,CAAWC,KAAX,CAAiBkB,WAAjB,GAA+BxF,CAAC,CAACiF,IAAF,CAAOX,KAAP,CAAakB,WAAb,IAA4BlW,SAA3D;AACA,mBAAO0Q,CAAC,CAACiF,IAAF,CAAOX,KAAP,CAAakB,WAApB;AACD;AACF,SAbM;;;AAeP,YAAG9V,MAAI,CAAC2L,IAAL,IAAa3L,MAAI,CAAC2L,IAAL,CAAUzL,OAA1B,EAAmC;AACjC,cAAI+G,CAAC,GAAGqR,SAAS,CAACtY,MAAD,EAAOqY,IAAP,EAAaxZ,KAAb,EAAoB+K,QAApB,EAA8BD,gBAA9B,EAAgDiI,MAAhD,CAAjB;AACA,cAAI+F,MAAM,GAAG7X,GAAb;;AACA,iBAAMuY,IAAI,CAACjO,QAAL,IAAiBiO,IAAI,CAACjO,QAAL,CAAcxH,MAAd,KAAyB,CAAhD,EAAmD;AACjD+U,YAAAA,MAAM,GAAGU,IAAT;AACAA,YAAAA,IAAI,GAAGA,IAAI,CAACjO,QAAL,CAAc,CAAd,CAAP;AACD;;AACDuN,UAAAA,MAAM,CAACvN,QAAP,CAAgB7L,IAAhB,CAAqB0I,CAArB,EAPiC;;AASjC,cAAI2N,KAAK,GAAG+C,MAAM,CAACvN,QAAP,CAAgB,CAAhB,EAAmBmL,IAAnB,CAAwBX,KAApC;;AACA,cAAGA,KAAH,EAAU;AACR,iBAAI,IAAI5X,GAAR,IAAa4X,KAAb,EAAoB;AAClB,kBAAGA,KAAK,CAACzU,cAAN,CAAqBnD,GAArB,KAA2B;AAC5B,0BAAU,IADkB;AAE5B,0BAAU,IAFkB;AAG5B,0BAAU;AAHkB,gBAI5BmD,cAJ4B,CAIbnD,GAJa,CAA9B,EAIqB;AACnBiK,gBAAAA,CAAC,CAAC0N,KAAF,CAAQC,KAAR,CAAc5X,GAAd,IAAmB4X,KAAK,CAAC5X,GAAD,CAAxB;AACD;AACF;AACF;;AACD,cAAIyK,CAAC,GAAGkQ,MAAM,CAACvN,QAAP,CAAgB,CAAhB,EAAmByK,OAA3B;;AACA,cAAGpN,CAAC,IAAIA,CAAC,CAAC7E,MAAV,EAAkB;AAChBqE,YAAAA,CAAC,CAAC4N,OAAF,GAAYpN,CAAZ;AACD;AACF;AACF;AACF;AACF;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASoQ,SAAT,CAAmB/X,GAAnB,EAAwBqT,IAAxB,EAA8BtU,KAA9B,EAAqC+K,QAArC,EAA+CD,gBAA/C,EAAiEiI,MAAjE,EAAyE;AACvE,oBAAmEuB,IAAnE,CAAMvL,KAAN;AAAA,MAAelH,OAAf,eAAeA,OAAf;AAAA,MAAwBQ,IAAxB,eAAwBA,IAAxB;AAAA,MAA8BC,KAA9B,eAA8BA,KAA9B;AAAA,MAAqCF,MAArC,eAAqCA,MAArC;AAAA,MAA6CN,SAA7C,eAA6CA,SAA7C;AAAA,MAA0DkH,IAA1D,GAAmEsL,IAAnE,CAA0DtL,IAA1D;AACA,MAAIyN,MAAM,GAAGzW,KAAK,GAAG+S,MAAR,GAAiBjI,gBAA9B,CAFuE;;AAIvE,MAAIS,QAAQ,GAAG,EAAf;AACA,MAAItH,GAAG,GAAGpC,OAAO,CAACkC,MAAlB;;AACA,MAAG,CAACE,GAAJ,EAAS;AACP;AACD,GARsE;;;AAUvE,MAAIyV,KAAK,GAAG;AACV7D,IAAAA,OAAO,EAAE,KADC;AAEVC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AACLrT,QAAAA,QAAQ,EAAE;AADL;AADF,KAFG;AAOV6I,IAAAA,QAAQ,EAARA,QAPU;AAQVyK,IAAAA,OAAO,EAAE;AARC,GAAZ;;AAUA,OAAI,IAAI7X,CAAC,GAAG,CAAR,EAAW8F,KAAG,GAAGpC,OAAO,CAACkC,MAA7B,EAAqC5F,CAAC,GAAG8F,KAAzC,EAA8C9F,CAAC,EAA/C,EAAmD;AACjD,QAAIgD,IAAI,GAAGU,OAAO,CAAC1D,CAAD,CAAlB;AACA,QAAMoE,IAAN,GAA6DpB,IAA7D,CAAMoB,IAAN;AAAA,QAA6DpB,IAA7D,CAAYqB,SAAZ;AAAA,YAAuBC,IAAvB,GAA6DtB,IAA7D,CAAuBsB,IAAvB;AAAA,QAA6BC,QAA7B,GAA6DvB,IAA7D,CAA6BuB,QAA7B;AAAA,QAAuCC,SAAvC,GAA6DxB,IAA7D,CAAuCwB,SAAvC;AAAA,QAAkDE,MAAlD,GAA6D1B,IAA7D,CAAkD0B;AAClD,QAAI8W,CAAC,SAAL,CAHiD;;AAKjD,QAAIC,KAAK,GAAG;AACV/D,MAAAA,OAAO,EAAE,WADC;AAEVC,MAAAA,KAAK,EAAE;AACLC,QAAAA,KAAK,EAAE;AACLrT,UAAAA,QAAQ,EAAE;AADL;AADF,OAFG;AAOVsT,MAAAA,OAAO,EAAE;AAPC,KAAZ;AASAzK,IAAAA,QAAQ,CAAC7L,IAAT,CAAcka,KAAd,EAdiD;;AAgBjD,QAAGrX,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,SAA/B,EAA0C;AACxC,UAAIkP,CAAC,GAAGkE,aAAa,CAAClT,IAAD,EAAOgU,MAAP,EAAe1L,QAAf,CAArB;AACA,UAAImG,KAAK,GAAGO,CAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;AACAsa,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB1S,KAAlB,GAA0B6N,KAAK,CAACzO,IAAN,CAAW,CAAX,CAA1B;AACAmX,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBxM,MAAlB,GAA2B2H,KAAK,CAACzO,IAAN,CAAW,CAAX,CAA3B;;AACA,UAAGgP,CAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,QAAAA,CAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,UAAAA,MAAM,EAAE;AADG,SAAb,CADqB;;AAKrB,aAAI,IAAI5U,GAAC,GAAG,CAAR,EAAW8F,KAAG,GAAGwN,CAAC,CAACnS,KAAF,CAAQyE,MAA7B,EAAqC5F,GAAC,GAAG8F,KAAzC,EAA8C9F,GAAC,EAA/C,EAAmD;AACjD,cAAIgD,MAAI,GAAGsQ,CAAC,CAACnS,KAAF,CAAQnB,GAAR,CAAX;AACA,cAAIsE,KAAI,GAAGtB,MAAI,CAACsB,IAAhB;AACAtB,UAAAA,MAAI,CAACsB,IAAL,GAAY1B,SAAZ;AACAI,UAAAA,MAAI,CAAC6S,MAAL,GAAcvR,KAAI,CAAC,CAAD,CAAJ,GAAUyO,KAAK,CAACzO,IAAN,CAAW,CAAX,CAAxB;AACAtB,UAAAA,MAAI,CAAC8S,MAAL,GAAcxR,KAAI,CAAC,CAAD,CAAJ,GAAUyO,KAAK,CAACzO,IAAN,CAAW,CAAX,CAAxB;AACD;;AACDmX,QAAAA,KAAK,CAAC5D,OAAN,CAActW,IAAd,CAAmB+R,CAAnB;AACD;;AACD,UAAGlP,IAAI,KAAK,MAAZ,EAAoB;AAClB,YAAIpD,CAAC,GAAGgD,IAAI,CAACsO,aAAL,CAAmBS,KAAK,CAACzO,IAAN,CAAW,CAAX,CAAnB,EAAkCyO,KAAK,CAACzO,IAAN,CAAW,CAAX,CAAlC,EAAiDE,SAAS,CAAC,CAAD,CAA1D,CAAR;AACAiX,QAAAA,KAAK,CAAC9D,KAAN,CAAYjT,MAAZ,GAAqB1D,CAAC,CAAC0D,MAAvB;AACA+W,QAAAA,KAAK,CAAC9D,KAAN,CAAYtF,QAAZ,GAAuBrR,CAAC,CAACqR,QAAzB;AACD,OAJD,MAKK,IAAGjO,IAAI,KAAK,SAAZ,EAAuB;AAC1B,YAAIpD,EAAC,GAAGgD,IAAI,CAACuO,gBAAL,EAAR;;AACAkJ,QAAAA,KAAK,CAAC9D,KAAN,CAAYjT,MAAZ,GAAqB1D,EAAC,CAAC0D,MAAvB;AACA+W,QAAAA,KAAK,CAAC9D,KAAN,CAAYtF,QAAZ,GAAuBrR,EAAC,CAACqR,QAAzB;AACD;AACF,KA7BD,MA8BK,IAAGjO,IAAI,KAAK,MAAZ,EAAoB,CAApB,MAGA,IAAGA,IAAI,KAAK,MAAZ,EAAoB;AACvB,UAAIkP,IAAC,GAAG4C,eAAe,CAACxR,MAAD,EAAS4T,MAAT,EAAiB1L,QAAjB,CAAvB;;AACA,UAAIrH,CAAC,GAAG+N,IAAC,CAAC6C,IAAV,CAFuB;;AAIvBsF,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB1S,KAAlB,GAA0BiR,IAAI,CAACvL,KAAL,CAAW1F,KAAX,GAAmBK,CAAC,CAACL,KAA/C;AACAuW,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBxM,MAAlB,GAA2B+K,IAAI,CAACvL,KAAL,CAAWQ,MAAX,GAAoB7F,CAAC,CAAC6F,MAAjD,CALuB;;AAOvBqQ,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBc,IAAlB,GAAyBnT,CAAC,CAAC7E,EAA3B;AACA+a,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBe,GAAlB,GAAwBpT,CAAC,CAAC5E,EAA1B;AACA2S,MAAAA,IAAC,CAAC6C,IAAF,GAASvT,SAAT;AACA,UAAImQ,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;AACAsa,MAAAA,KAAK,CAAC9D,KAAN,CAAYjT,MAAZ,GAAqBqO,QAAK,CAACrO,MAA3B;AACA+W,MAAAA,KAAK,CAAC9D,KAAN,CAAYtF,QAAZ,GAAuBU,QAAK,CAACV,QAA7B;;AACA,UAAGiB,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,QAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,UAAAA,MAAM,EAAE;AADG,SAAb;AAGA6G,QAAAA,KAAK,CAAC5D,OAAN,CAActW,IAAd,CAAmB+R,IAAnB;AACD;AACF,KApEgD;;;AAsEjD,QAAG/O,QAAQ,IAAIA,QAAQ,CAACqB,MAAxB,EAAgC;AAC9B,UAAI0N,IAAC,GAAGwB,iBAAiB,CAACvQ,QAAD,EAAW+T,MAAX,EAAmB1L,QAAnB,CAAzB;;AACA,UAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;AACAsa,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB7C,UAAlB,GAA+BhC,QAAK,CAACgC,UAArC;AACA0G,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB5C,UAAlB,GAA+BjC,QAAK,CAACiC,UAArC;AACAyG,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB3C,UAAlB,GAA+BlC,QAAK,CAACkC,UAArC;;AACA,UAAG3B,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,QAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,UAAAA,MAAM,EAAE;AADG,SAAb;;AAGA,aAAI,IAAI5U,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGsT,IAAC,CAACnS,KAAF,CAAQyE,MAA3B,EAAmC5F,GAAC,EAApC,EAAwC;AACtC,cAAIgD,MAAI,GAAGsQ,IAAC,CAACnS,KAAF,CAAQnB,GAAR,CAAX;AACAgD,UAAAA,MAAI,CAAC+R,UAAL,IAAmBhC,QAAK,CAACgC,UAAzB;AACA/R,UAAAA,MAAI,CAACgS,UAAL,IAAmBjC,QAAK,CAACiC,UAAzB;AACAhS,UAAAA,MAAI,CAACiS,UAAL,IAAmBlC,QAAK,CAACkC,UAAzB;AACD;;AACDwG,QAAAA,KAAK,CAAC5D,OAAN,CAActW,IAAd,CAAmB+R,IAAnB;AACD;AACF;;AACD,QAAGpP,IAAI,IAAIA,IAAI,CAAC6B,IAAL,KAAc,CAAtB,IAA2B5B,KAAK,IAAIA,KAAK,CAAC4B,IAAN,KAAe,CAAtD,EAAyD;AACvD0V,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB8D,QAAlB,GAA6B,SAA7B;AACD,KA3FgD;;;AA6FjD,QAAMzD,WAAN,GAAsBtU,SAAtB,CAAMsU,WAAN;;AACA,QAAGjF,KAAK,CAACC,OAAN,CAAcgF,WAAd,KAA8BA,WAAW,CAACrS,MAA7C,EAAqD;AACnD,UAAI0N,IAAC,GAAGmB,eAAe,CAACwD,WAAD,EAAcK,MAAd,EAAsB1L,QAAtB,CAAvB;;AACA,UAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,UAAI0E,CAAC,GAAGkN,QAAK,CAAC0B,eAAN,CAAsB+D,KAAtB,CAA4B,GAA5B,CAAR;;AACA3S,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOwE,UAAU,CAACxE,CAAC,CAAC,CAAD,CAAF,CAAjB;AACAA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOwE,UAAU,CAACxE,CAAC,CAAC,CAAD,CAAF,CAAjB;AACA;AACN;AACA;AACA;;AACM,UAAGzB,IAAI,KAAK,MAAZ,EAAoB;AAClB,YAAIsU,IAAI,GAAG+C,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBc,IAA7B;AACA,YAAIC,GAAG,GAAG8C,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBe,GAA5B;AACA8C,QAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBc,IAAlB,IAA0B7S,CAAC,CAAC,CAAD,CAA3B;AACA4V,QAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBe,GAAlB,IAAyB9S,CAAC,CAAC,CAAD,CAA1B;AACA,YAAIgM,CAAC,GAAG4J,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB1S,KAA1B;AACA,YAAI4M,CAAC,GAAG2J,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBxM,MAA1B;AACAvF,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQgM,CAAC,GAAG,GAAZ;AACAhM,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQiM,CAAC,GAAG,GAAZ;;AACA,YAAGjM,CAAC,CAAC,CAAD,CAAD,KAASgM,CAAC,GAAG,GAAb,IAAoBhM,CAAC,CAAC,CAAD,CAAD,KAASiM,CAAC,GAAG,GAApC,EAAyC;AACvC2J,UAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBnD,eAAlB,GAAoC1B,QAAK,CAAC0B,eAA1C;AACD;;AACD,YAAGnB,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB,cAAGmN,QAAK,CAAC6B,MAAN,KAAiB,CAApB,EAAuB;AACrBtB,YAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,cAAAA,MAAM,EAAE;AADG,aAAb;AAGD,WALoB;;;AAOrB,eAAI,IAAI5U,GAAC,GAAG,CAAR,EAAW8F,KAAG,GAAGwN,IAAC,CAACnS,KAAF,CAAQyE,MAA7B,EAAqC5F,GAAC,GAAG8F,KAAzC,EAA8C9F,GAAC,EAA/C,EAAmD;AACjD,gBAAIgD,MAAI,GAAGsQ,IAAC,CAACnS,KAAF,CAAQnB,GAAR,CAAX;;AACA,gBAAIyY,GAAG,GAAGzV,MAAI,CAACyR,eAAL,CAAqB+D,KAArB,CAA2B,GAA3B,CAAV;;AACAC,YAAAA,GAAG,CAAC,CAAD,CAAH,GAASpO,UAAU,CAACoO,GAAG,CAAC,CAAD,CAAJ,CAAnB;AACAA,YAAAA,GAAG,CAAC,CAAD,CAAH,GAASpO,UAAU,CAACoO,GAAG,CAAC,CAAD,CAAJ,CAAnB;AACAzV,YAAAA,MAAI,CAAC0V,IAAL,GAAYA,IAAI,GAAGD,GAAG,CAAC,CAAD,CAAtB;AACAzV,YAAAA,MAAI,CAAC2V,GAAL,GAAWA,GAAG,GAAGF,GAAG,CAAC,CAAD,CAApB;AACD;;AACDgD,UAAAA,KAAK,CAAC5D,OAAN,CAActW,IAAd,CAAmB+R,IAAnB;AACD;AACF,OA7BD,MA8BK;AACH;AACAzN,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQ4V,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB1S,KAAlB,GAA0B,GAAlC;AACAW,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAQ4V,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBxM,MAAlB,GAA2B,GAAnC;;AACA,YAAGvF,CAAC,CAAC,CAAD,CAAD,KAAS4V,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB1S,KAAlB,GAA0B,GAAnC,IAA0CW,CAAC,CAAC,CAAD,CAAD,KAAS4V,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBxM,MAAlB,GAA2B,GAAjF,EAAsF;AACpFqQ,UAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBnD,eAAlB,GAAoC1B,QAAK,CAAC0B,eAA1C;AACD;;AACD,YAAGnB,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB,cAAGmN,QAAK,CAAC6B,MAAN,KAAiB,CAApB,EAAuB;AACrBtB,YAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,cAAAA,MAAM,EAAE;AADG,aAAb;AAGD;;AACD6G,UAAAA,KAAK,CAAC5D,OAAN,CAActW,IAAd,CAAmB+R,IAAnB;AACD;;AACD,YAAGzN,CAAC,CAAC,CAAD,CAAJ,EAAS;AACP4V,UAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBc,IAAlB,GAAyB,CAAC7S,CAAC,CAAC,CAAD,CAA3B;AACD;;AACD,YAAGA,CAAC,CAAC,CAAD,CAAJ,EAAS;AACP4V,UAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBe,GAAlB,GAAwB,CAAC9S,CAAC,CAAC,CAAD,CAA1B;AACD;AACF;AACF;;AACDiS,IAAAA,YAAY,CAACyD,KAAD,EAAQpF,IAAI,CAACvL,KAAb,EAAoB/I,KAApB,EAA2B+K,QAA3B,EAAqCgI,MAArC,EAA6C,IAA7C,EAAmD,IAAnD,CAAZ,CA7JiD;;AA+JjD,QAAGzQ,KAAH,EAAU;AACR,UAAIsQ,gBAAe,GAAGgH,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBnD,eAAxC;AACA,UAAI5C,EAAC,GAAG4J,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB1S,KAA1B;AAAA,UAAiC4M,EAAC,GAAG2J,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkBxM,MAAvD;AACA,UAAIuQ,EAAE,SAAN;AAAA,UAAQC,EAAE,SAAV;;AACA,UAAGnH,gBAAH,EAAoB;AAClBA,QAAAA,gBAAe,GAAGA,gBAAe,CAAC+D,KAAhB,CAAsB,GAAtB,CAAlB;AACAmD,QAAAA,EAAE,GAAGtR,UAAU,CAACoK,gBAAe,CAAC,CAAD,CAAhB,CAAf;AACAmH,QAAAA,EAAE,GAAGvR,UAAU,CAACoK,gBAAe,CAAC,CAAD,CAAhB,CAAf;AACD,OAJD,MAKK;AACHkH,QAAAA,EAAE,GAAG9J,EAAC,GAAG,GAAT;AACA+J,QAAAA,EAAE,GAAG9J,EAAC,GAAG,GAAT;AACD;;AACD,UAAM1N,KAAN,GAA6CD,KAA7C,CAAMC,IAAN;AAAA,UAAYvC,MAAZ,GAA6CsC,KAA7C,CAAYtC,KAAZ;AAAA,UAAmBC,GAAnB,GAA6CqC,KAA7C,CAAmBrC,GAAnB;AAAA,0BAA6CqC,KAA7C,CAAwB6B,MAAxB;AAAA,UAAkCiE,CAAlC,iBAAkCA,CAAlC;AAAA,UAAqCC,CAArC,iBAAqCA,CAArC;AACA,UAAI2R,KAAK,GAAG,EAAZ;;AACA,WAAI,IAAI7b,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGkK,CAAnB,EAAsBlK,GAAC,EAAvB,EAA2B;AACzB,YAAGA,GAAH,EAAM;AACJ6b,UAAAA,KAAK,IAAI,IAAT;AACD;;AACDA,QAAAA,KAAK,IAAI,UAAU/a,IAAI,CAACgb,KAAL,CAAW7R,CAAC,CAACjK,GAAC,GAAG,CAAJ,GAAQ,CAAT,CAAD,GAAe,GAA1B,CAAnB;AACA6b,QAAAA,KAAK,IAAI,MAAM/a,IAAI,CAACgb,KAAL,CAAW7R,CAAC,CAACjK,GAAC,GAAG,CAAJ,GAAQ,CAAT,CAAD,GAAe,GAA1B,CAAf;AACA6b,QAAAA,KAAK,IAAI,MAAM/a,IAAI,CAACgb,KAAL,CAAW7R,CAAC,CAACjK,GAAC,GAAG,CAAJ,GAAQ,CAAT,CAAD,GAAe,GAA1B,CAAf,CANyB;;AAQzB,YAAGiK,CAAC,CAACrE,MAAF,IAAYsE,CAAC,GAAG,CAAJ,GAAQ,CAAClK,GAAC,GAAG,CAAL,IAAU,CAAjC,EAAoC;AAClC6b,UAAAA,KAAK,IAAI,MAAM5R,CAAC,CAACC,CAAC,GAAG,CAAJ,GAAQ,CAAClK,GAAC,GAAG,CAAL,IAAU,CAAlB,GAAsB,CAAvB,CAAhB;AACD,SAFD,MAGK;AACH6b,UAAAA,KAAK,IAAI,IAAT;AACD;;AACDA,QAAAA,KAAK,IAAI,IAAT;AACAA,QAAAA,KAAK,IAAI5R,CAAC,CAACjK,GAAC,GAAG,CAAL,CAAD,GAAW,GAAX,GAAiB,GAA1B;AACD;;AACD,UAAG,CAAC6b,KAAJ,EAAW;AACTA,QAAAA,KAAK,GAAG,YAAR;AACD;;AACD,UAAGzX,KAAI,KAAK,CAAZ,EAAe;AACb,YAAI2X,EAAE,GAAGN,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB7C,UAAlB,IAAgC,CAAzC;AAAA,YAA4CiH,EAAE,GAAGP,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB5C,UAAlB,IAAgC,CAAjF;AACA,YAAIxU,EAAE,GAAGqB,MAAK,CAAC,CAAD,CAAL,GAAW8Z,EAApB;AAAA,YAAwBlb,EAAE,GAAGoB,MAAK,CAAC,CAAD,CAAL,GAAW+Z,EAAxC;AACA,YAAIlb,EAAE,GAAGoB,GAAG,CAAC,CAAD,CAAH,GAAS6Z,EAAlB;AAAA,YAAsBhb,EAAE,GAAGmB,GAAG,CAAC,CAAD,CAAH,GAAS8Z,EAApC;AACAJ,QAAAA,CAAC,4BAAqB,CAAChb,EAAE,GAAGub,EAAN,IAAYlK,EAAjC,cAAsC,CAACpR,EAAE,GAAGub,EAAN,IAAYlK,EAAlD,cAAuD,CAACpR,EAAE,GAAGqb,EAAN,IAAYlK,EAAnE,cAAwE,CAAClR,EAAE,GAAGqb,EAAN,IAAWlK,EAAnF,eAAyF+J,KAAzF,MAAD;AACD,OALD,MAMK,IAAGzX,KAAI,KAAK,CAAZ,EAAe;AAClB,YAAI2X,EAAE,GAAGN,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB7C,UAAlB,IAAgC,CAAzC;AAAA,YAA4CiH,EAAE,GAAGP,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB5C,UAAlB,IAAgC,CAAjF;;AACA,YAAIxU,GAAE,GAAGqB,MAAK,CAAC,CAAD,CAAL,GAAW8Z,EAApB;AAAA,YAAwBlb,GAAE,GAAGoB,MAAK,CAAC,CAAD,CAAL,GAAW+Z,EAAxC;;AACA,YAAIlb,GAAE,GAAGoB,GAAG,CAAC,CAAD,CAAH,GAAS6Z,EAAlB;AAAA,YAAsBhb,GAAE,GAAGmB,GAAG,CAAC,CAAD,CAAH,GAAS8Z,EAApC;;AACAJ,QAAAA,CAAC,4BAAqB,CAAChb,GAAE,GAAGub,EAAN,IAAYlK,EAAjC,cAAsC,CAACpR,GAAE,GAAGub,EAAN,IAAYlK,EAAlD,cAAuD,CAACpR,GAAE,GAAGqb,EAAN,IAAYlK,EAAnE,cAAwE,CAAClR,GAAE,GAAGqb,EAAN,IAAWlK,EAAnF,eAAyF+J,KAAzF,MAAD;AACD;;AACDJ,MAAAA,KAAK,CAAC9D,KAAN,CAAYC,KAAZ,CAAkB1T,IAAlB,GAAyB,CAACsX,CAAD,CAAzB;AACD,KA/MgD;;;AAiNjD,QAAG3Q,IAAI,IAAIA,IAAI,CAAC1H,cAAL,CAAoB,OAApB,CAAR,IAAwC0H,IAAI,CAAC1H,cAAL,CAAoB,KAApB,CAA3C,EAAuE;AACrE,UAAItB,OAAK,GAAGgJ,IAAI,CAAChJ,KAAjB;AAAA,UAAwBC,IAAG,GAAG+I,IAAI,CAAC/I,GAAnC;;AACA,UAAGD,OAAK,CAAC+D,MAAN,GAAe,CAAlB,EAAqB;AACnB,YAAI0N,IAAC,GAAG0C,aAAa,CAACnU,OAAD,EAAQyW,MAAR,EAAgB1L,QAAhB,EAA0B,KAA1B,CAArB;;AACA,YAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,YAAG4R,QAAK,CAAClR,KAAN,KAAgB,CAAnB,EAAsB;AACpB4Z,UAAAA,KAAK,CAAC9D,KAAN,CAAY9V,KAAZ,GAAoBkR,QAAK,CAAClR,KAA1B;AACD;;AACD,YAAGyR,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB,cAAGmN,QAAK,CAAC6B,MAAN,KAAiB,CAApB,EAAuB;AACrBtB,YAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,cAAAA,MAAM,EAAE;AADG,aAAb;AAGD;;AACD6G,UAAAA,KAAK,CAAC5D,OAAN,CAActW,IAAd,CAAmB+R,IAAnB;AACD;AACF,OAdD,MAeK;AACHmI,QAAAA,KAAK,CAAC9D,KAAN,CAAY9V,KAAZ,GAAoBA,OAAK,CAAC,CAAD,CAAL,GAAW,IAA/B;AACD;;AACD,UAAGC,IAAG,CAAC8D,MAAJ,GAAa,CAAhB,EAAmB;AACjB,YAAI0N,IAAC,GAAG0C,aAAa,CAAClU,IAAD,EAAMwW,MAAN,EAAc1L,QAAd,EAAwB,IAAxB,CAArB;;AACA,YAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,YAAG4R,QAAK,CAACjR,GAAN,KAAc,CAAjB,EAAoB;AAClB2Z,UAAAA,KAAK,CAAC9D,KAAN,CAAY7V,GAAZ,GAAkBiR,QAAK,CAACjR,GAAxB;AACD;;AACD,YAAGwR,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB,cAAGmN,QAAK,CAAC6B,MAAN,KAAiB,CAApB,EAAuB;AACrBtB,YAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,cAAAA,MAAM,EAAE;AADG,aAAb;AAGD;;AACD6G,UAAAA,KAAK,CAAC5D,OAAN,CAActW,IAAd,CAAmB+R,IAAnB;AACD;AACF,OAdD,MAeK;AACHmI,QAAAA,KAAK,CAAC9D,KAAN,CAAY7V,GAAZ,GAAkBA,IAAG,CAAC,CAAD,CAAH,GAAS,IAA3B;AACD;AACF;AACF;;AACD,MAAGoC,IAAI,IAAI8O,KAAK,CAACC,OAAN,CAAc/O,IAAI,CAACc,KAAnB,CAAR,IAAqCd,IAAI,CAACc,KAAL,CAAWY,MAAnD,EAA2D;AACzD,QAAI0N,IAAC,GAAG0D,aAAa,CAAC9S,IAAD,EAAOoU,MAAP,EAAe1L,QAAf,CAArB;;AACA,QAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,SAAI,IAAInB,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG8F,GAAnB,EAAwB9F,GAAC,EAAzB,EAA6B;AAC3BoN,MAAAA,QAAQ,CAACpN,GAAD,CAAR,CAAY2X,KAAZ,CAAkBC,KAAlB,CAAwB1T,IAAxB,GAA+B6O,QAAK,CAAC7O,IAArC;AACD;;AACD,QAAGoP,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE;AADG,OAAb;;AAGA,WAAI,IAAI5U,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAG8F,GAAnB,EAAwB9F,GAAC,EAAzB,EAA6B;AAC3BoN,QAAAA,QAAQ,CAACpN,GAAD,CAAR,CAAY6X,OAAZ,CAAoBtW,IAApB,CAAyB+R,IAAzB;AACD;AACF;AACF;;AACD,MAAGrP,MAAM,IAAI+O,KAAK,CAACC,OAAN,CAAchP,MAAM,CAACe,KAArB,CAAV,IAAyCf,MAAM,CAACe,KAAP,CAAaY,MAAzD,EAAiE;AAC/D,QAAI0N,IAAC,GAAG4D,eAAe,CAACjT,MAAD,EAASqU,MAAT,EAAiB1L,QAAjB,CAAvB;;AACA,QAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,SAAI,IAAInB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,MAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY2X,KAAZ,CAAkBC,KAAlB,CAAwB3T,MAAxB,GAAiC8O,QAAK,CAAC9O,MAAvC;AACD;;AACD,QAAGqP,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE;AADG,OAAb;;AAGA,WAAI,IAAI5U,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,QAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY6X,OAAZ,CAAoBtW,IAApB,CAAyB+R,IAAzB;AACD;AACF;AACF;;AACD,MAAGrP,MAAM,IAAI+O,KAAK,CAACC,OAAN,CAAchP,MAAM,CAACiB,KAArB,CAAV,IAAyCjB,MAAM,CAACiB,KAAP,CAAaU,MAAzD,EAAiE;AAC/D,QAAI0N,IAAC,GAAG6D,oBAAoB,CAAClT,MAAM,CAACiB,KAAR,EAAeoT,MAAf,EAAuB1L,QAAvB,CAA5B;;AACA,QAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,SAAI,IAAInB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,MAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY2X,KAAZ,CAAkBC,KAAlB,CAAwB9G,WAAxB,GAAsCiC,QAAK,CAACjC,WAA5C;AACD;;AACD,QAAGwC,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE;AADG,OAAb;;AAGA,WAAI,IAAI5U,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,QAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY6X,OAAZ,CAAoBtW,IAApB,CAAyB+R,IAAzB;AACD;AACF;AACF;;AACD,MAAGrP,MAAM,IAAI+O,KAAK,CAACC,OAAN,CAAchP,MAAM,CAACmB,QAArB,CAAV,IAA4CnB,MAAM,CAACmB,QAAP,CAAgBQ,MAA/D,EAAuE;AACrE,QAAI0N,IAAC,GAAG8D,iBAAiB,CAACnT,MAAM,CAACmB,QAAR,EAAkBkT,MAAlB,EAA0B1L,QAA1B,CAAzB;;AACA,QAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,SAAI,IAAInB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,MAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY2X,KAAZ,CAAkBC,KAAlB,CAAwBqE,cAAxB,GAAyClJ,QAAK,CAACkJ,cAA/C;AACD;;AACD,QAAG3I,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE;AADG,OAAb;;AAGA,WAAI,IAAI5U,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,QAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY6X,OAAZ,CAAoBtW,IAApB,CAAyB+R,IAAzB;AACD;AACF;AACF;;AACD,MAAGrP,MAAM,IAAI+O,KAAK,CAACC,OAAN,CAAchP,MAAM,CAACiY,gBAArB,CAAV,IAAoDjY,MAAM,CAACiY,gBAAP,CAAwBtW,MAA/E,EAAuF;AACrF,QAAI0N,IAAC,GAAGiE,mBAAmB,CAACtT,MAAM,CAACiY,gBAAR,EAA0B5D,MAA1B,EAAkC1L,QAAlC,CAA3B;;AACA,QAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,SAAI,IAAInB,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,MAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY2X,KAAZ,CAAkBC,KAAlB,CAAwBsE,gBAAxB,GAA2CnJ,QAAK,CAACmJ,gBAAjD;AACD;;AACD,QAAG5I,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE;AADG,OAAb;;AAGA,WAAI,IAAI5U,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,QAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY6X,OAAZ,CAAoBtW,IAApB,CAAyB+R,IAAzB;AACD;AACF;AACF;;AACD,MAAGrP,MAAM,IAAIA,MAAM,CAACqB,MAApB,EAA4B;AAC1B,SAAI,IAAItF,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,MAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY2X,KAAZ,CAAkBC,KAAlB,CAAwBuE,eAAxB,GAA0C,CAAClY,MAAM,CAACqB,MAAR,CAA1C;AACD;AACF;;AACD,MAAG,CAACrB,MAAJ,EAAY;AACV,SAAI,IAAIjE,IAAC,GAAG,CAAZ,EAAeA,IAAC,GAAG8F,GAAnB,EAAwB9F,IAAC,EAAzB,EAA6B;AAC3BoN,MAAAA,QAAQ,CAACpN,IAAD,CAAR,CAAY2X,KAAZ,CAAkBC,KAAlB,CAAwB9G,WAAxB,GAAsC,CAAC,CAAD,CAAtC;AACD;AACF;;AACDhO,EAAAA,GAAG,CAACsK,QAAJ,GAAe,CAACmO,KAAD,CAAf;AACD;;AAED,SAASD,SAAT,CAAmBnF,IAAnB,EAAyBwE,MAAzB,EAAiC9Y,KAAjC,EAAwC+K,QAAxC,EAAkDD,gBAAlD,EAAoEiI,MAApE,EAA4E;AAC1E;AACA;AACA;AACA,MAAG+F,MAAM,CAACvN,QAAP,IAAmBuN,MAAM,CAACvN,QAAP,CAAgBxH,MAAhB,KAA2B,CAAjD,EAAoD;AAClD+U,IAAAA,MAAM,GAAGA,MAAM,CAACvN,QAAP,CAAgB,CAAhB,CAAT;AACD;;AACD,MAAIgP,WAAW,GAAGzB,MAAM,CAACpC,IAAzB;AACA,MAAIG,IAAI,GAAG0D,WAAW,CAACxE,KAAZ,CAAkBc,IAAlB,IAA0B,CAArC;AACA,MAAIC,GAAG,GAAGyD,WAAW,CAACxE,KAAZ,CAAkBe,GAAlB,IAAyB,CAAnC;AACA,MAAI7V,GAAG,GAAG;AACR4U,IAAAA,OAAO,EAAE,WADD;AAERC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AACLrT,QAAAA,QAAQ,EAAE,UADL;AAELL,QAAAA,IAAI,EAAE;AAFD;AADF,KAFC;AAQR2T,IAAAA,OAAO,EAAE;AARD,GAAV;AAUA,MAAM3S,KAAN,GAA6EiR,IAA7E,CAAMjR,KAAN;AAAA,MAAakG,MAAb,GAA6E+K,IAA7E,CAAa/K,MAAb;AAAA,mBAA6E+K,IAA7E,CAAqBxH,IAArB;AAAA,mCAA6BoB,IAA7B;AAAA,MAAqCrL,MAArC,mBAAqCA,MAArC;AAAA,MAA6CO,OAA7C,mBAA6CA,OAA7C;AAAA,MAAwD+K,IAAxD,cAAwDA,IAAxD;AAAA,MAA8DC,QAA9D,cAA8DA,QAA9D,CApB0E;;AAsB1E,MAAGD,IAAI,KAAKH,QAAQ,CAACwM,GAArB,EAA0B;AACxB,QAAGpM,QAAH,EAAa;AACXnN,MAAAA,GAAG,CAAC6U,KAAJ,CAAUyB,IAAV,GAAiB,IAAjB;AACD,KAFD,MAGK;AACHtW,MAAAA,GAAG,CAAC6U,KAAJ,CAAUhJ,IAAV,GAAiB,IAAjB;AACD;AACF,GAPD,MAQK;AACH,QAAGsB,QAAH,EAAa;AACXnN,MAAAA,GAAG,CAAC6U,KAAJ,CAAUhJ,IAAV,GAAiB,IAAjB;AACD,KAFD,MAGK;AACH7L,MAAAA,GAAG,CAAC6U,KAAJ,CAAUyB,IAAV,GAAiB,IAAjB;AACD;AACF,GArCyE;;;AAuC1E,MAAIxB,KAAK,GAAGwE,WAAW,CAACxE,KAAxB;;AACA,OAAI,IAAI5X,CAAR,IAAa4X,KAAb,EAAoB;AAClB,QAAGA,KAAK,CAACzU,cAAN,CAAqBnD,CAArB,KAA2B,CAAC,MAAD,EAAS,KAAT,EAAgB,YAAhB,EAA8B,YAA9B,EAA4C,YAA5C,EAA0DsC,OAA1D,CAAkEtC,CAAlE,IAAuE,CAAC,CAAtG,EAAyG;AACvG8C,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB5X,CAAhB,IAAqB4X,KAAK,CAAC5X,CAAD,CAA1B;AACD;AACF,GA5CyE;;;AA8C1E,SAAO8C,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgByC,UAAvB;AACA,SAAOvX,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB0C,aAAvB,CA/C0E;;AAiD1E,MAAItZ,CAAC,GAAG,EAAR;AACA,MAAIsX,MAAM,GAAGzW,KAAK,GAAG+S,MAAR,GAAiBjI,gBAA9B;;AACA,MAAGqG,KAAK,CAACC,OAAN,CAAcvO,MAAd,KAAyBA,MAAM,CAACkB,MAAnC,EAA2C;AACzC,QAAI0N,CAAC,GAAG4C,eAAe,CAACxR,MAAD,EAAS4T,MAAT,EAAiB1L,QAAjB,CAAvB;AACA5L,IAAAA,CAAC,GAAGsS,CAAC,CAAC6C,IAAN;AACArT,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB1S,KAAhB,GAAwBlE,CAAC,CAACkE,KAA1B;AACApC,IAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBxM,MAAhB,GAAyBpK,CAAC,CAACoK,MAA3B;AACAkI,IAAAA,CAAC,CAAC6C,IAAF,GAASvT,SAAT;AACA,QAAImQ,KAAK,GAAGO,CAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;AACA2B,IAAAA,GAAG,CAAC6U,KAAJ,CAAUjT,MAAV,GAAmBqO,KAAK,CAACrO,MAAzB;AACA5B,IAAAA,GAAG,CAAC6U,KAAJ,CAAUtF,QAAV,GAAqBU,KAAK,CAACV,QAA3B;;AACA,QAAGiB,CAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,CAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE;AADG,OAAb;AAGA9R,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,CAAjB;AACD;AACF,GAfD,MAgBK;AACH,WAAOxQ,GAAP;AACD;;AACD,MAAGkQ,KAAK,CAACC,OAAN,CAAchO,OAAd,KAA0BA,OAAO,CAACW,MAArC,EAA6C;AAC3C,QAAI0N,IAAC,GAAGuB,gBAAgB,CAAC5P,OAAD,EAAUqT,MAAV,EAAkB1L,QAAlB,CAAxB;;AACA,QAAImG,QAAK,GAAGO,IAAC,CAACnS,KAAF,CAAQ,CAAR,CAAZ;;AACA,QAAG4R,QAAK,CAAC9N,OAAN,KAAkB,CAArB,EAAwB;AACtBnC,MAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgB3S,OAAhB,GAA0B8N,QAAK,CAAC9N,OAAhC;AACD;;AACD,QAAGqO,IAAC,CAACnS,KAAF,CAAQyE,MAAR,GAAiB,CAApB,EAAuB;AACrB0N,MAAAA,IAAC,CAACnS,KAAF,CAAQ,CAAR,IAAa;AACXyT,QAAAA,MAAM,EAAE;AADG,OAAb;AAGA9R,MAAAA,GAAG,CAAC+U,OAAJ,CAAYtW,IAAZ,CAAiB+R,IAAjB;AACD;AACF,GAlFyE;;;AAoF1E,MAAImB,eAAe,GAAG2H,WAAW,CAACxE,KAAZ,CAAkBnD,eAAxC;AACA,MAAIkH,EAAE,GAAGzW,KAAK,GAAG,GAAjB;AAAA,MAAsB0W,EAAE,GAAGxQ,MAAM,GAAG,GAApC;;AACA,MAAGqJ,eAAH,EAAoB;AAClB,QAAI5O,CAAC,GAAG4O,eAAe,CAAC+D,KAAhB,CAAsB,GAAtB,CAAR;AACAmD,IAAAA,EAAE,GAAGtR,UAAU,CAACxE,CAAC,CAAC,CAAD,CAAF,CAAf;AACA+V,IAAAA,EAAE,GAAGvR,UAAU,CAACxE,CAAC,CAAC,CAAD,CAAF,CAAf;AACD,GA1FyE;;;AA4F1E/C,EAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBnD,eAAhB,GAAmCkH,EAAE,GAAG3a,CAAC,CAACN,EAAR,GAAc,GAAd,IAAqBkb,EAAE,GAAG5a,CAAC,CAACL,EAA5B,CAAlC;AACAmC,EAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBc,IAAhB,GAAuBA,IAAI,GAAG1X,CAAC,CAACN,EAAhC;AACAoC,EAAAA,GAAG,CAAC6U,KAAJ,CAAUC,KAAV,CAAgBe,GAAhB,GAAsBA,GAAG,GAAG3X,CAAC,CAACL,EAA9B;AACA,SAAOmC,GAAP;AACD;;AAED,IAAIyJ,IAAI,GAAG,CAAX;AAEe,kBAAS4J,IAAT,EAAe;AAC5B5K,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,SAAjB;AACA,MAAMqE,aAAN,GAA2DiF,IAA3D,CAAMjF,aAAN;AAAA,MAAqBC,gBAArB,GAA2DgF,IAA3D,CAAqBhF,gBAArB;AAAA,MAAuCE,MAAvC,GAA2D8E,IAA3D,CAAuC9E,MAAvC;AAAA,MAA+C3E,OAA/C,GAA2DyJ,IAA3D,CAA+CzJ,OAA/C;AACA,MAAMjJ,IAAN,GAA0D4N,MAA1D,CAAM5N,IAAN;AAAA,MAAYyB,KAAZ,GAA0DmM,MAA1D,CAAYnM,KAAZ;AAAA,MAAmBkG,MAAnB,GAA0DiG,MAA1D,CAAmBjG,MAAnB;AAAA,MAA2BgC,QAA3B,GAA0DiE,MAA1D,CAA2BjE,QAA3B;AAAA,MAAqCT,gBAArC,GAA0D0E,MAA1D,CAAqC1E,gBAArC;AACA,MAAIqM,MAAM,GAAG,EAAb;AACA,MAAIlW,GAAG,GAAG;AACRyJ,IAAAA,IAAI,EAAEA,IAAI,EADF;AAER9I,IAAAA,IAAI,EAAJA,IAFQ;AAGRiU,IAAAA,OAAO,EAAE,KAHD;AAIRC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AACLrT,QAAAA,QAAQ,EAAE,UADL;AAELW,QAAAA,KAAK,EAALA,KAFK;AAGLkG,QAAAA,MAAM,EAANA,MAHK;;AAAA;AADF,KAJC;AAYRgC,IAAAA,QAAQ,EAAE,EAZF;AAaRV,IAAAA,OAAO,EAAEsM,MAbD;AAcRsD,IAAAA,IAAI,EAAE;AAdE,GAAV;AAgBAlB,EAAAA,aAAa,CAACtY,GAAD,EAAMsK,QAAN,EAAgBV,OAAhB,EAAyBsM,MAAzB,EAAiC9H,aAAjC,EAAgDC,gBAAhD,EAAkExE,gBAAlE,EAAoF,CAApF,CAAb,CArB4B;;AAuB5B,MAAI4P,EAAE,GAAGzZ,GAAG,CAACsK,QAAb;;AACA,OAAI,IAAIpN,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAGyW,EAAE,CAAC3W,MAAxB,EAAgC5F,CAAC,GAAG8F,GAApC,EAAyC9F,CAAC,EAA1C,EAA8C;AAC5C,QAAIub,KAAK,GAAGgB,EAAE,CAACvc,CAAD,CAAd;;AACA,QAAGub,KAAK,CAACrN,QAAT,EAAmB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAqO,MAAAA,EAAE,CAACxS,MAAH,CAAU/J,CAAV,EAAa,CAAb;AACA;AACD;AACF;;AACD,SAAO8C,GAAP;AACD;;AChoCc,eAAS0I,QAAT,EAAmB;AAChC,MAAG,CAACA,QAAQ,CAACiP,IAAb,EAAmB;AACjB,QAAG,OAAOA,KAAP,KAAgB,WAAnB,EAAgC;AAC9B,aAAOjP,QAAQ,CAACiP,IAAT,GAAgBA,KAAvB;AACD;;AACD,QAAIA,KAAI,GAAGjP,QAAQ,CAACiP,IAAT,GAAgB,EAA3B;;AACC,iBAAW;AACV,UAAIzR,QAAQ,GAAG,GAAGA,QAAlB;;AAEA,eAASwT,MAAT,CAAgBpY,IAAhB,EAAsB;AACpB,eAAO,UAASqY,GAAT,EAAc;AACnB,iBAAOzT,QAAQ,CAAC0T,IAAT,CAAcD,GAAd,MAAuB,aAAarY,IAAb,GAAoB,GAAlD;AACD,SAFD;AAGD;;AAED,UAAIuY,QAAQ,GAAGH,MAAM,CAAC,QAAD,CAArB;AACA,UAAII,QAAQ,GAAGJ,MAAM,CAAC,QAAD,CAArB;AACA,UAAIK,UAAU,GAAGL,MAAM,CAAC,UAAD,CAAvB;AACA,UAAIM,QAAQ,GAAGN,MAAM,CAAC,QAAD,CAArB;AACA,UAAIO,SAAS,GAAGP,MAAM,CAAC,SAAD,CAAtB;;AAEA,eAAShB,CAAT,CAAW9E,CAAX,EAAc;AACZ,eAAOA,CAAC,GAAG,EAAJ,GAAS,MAAMA,CAAf,GAAmBA,CAA1B;AACD;;AAED,UAAG,CAACmG,UAAU,CAACG,IAAI,CAACC,SAAL,CAAeC,MAAhB,CAAd,EAAuC;AAErCF,QAAAA,IAAI,CAACC,SAAL,CAAeC,MAAf,GAAwB,YAAW;AAEjC,iBAAOC,QAAQ,CAAC,KAAKC,OAAL,EAAD,CAAR,GACH,KAAKC,cAAL,KAAwB,GAAxB,GACF7B,CAAC,CAAC,KAAK8B,WAAL,KAAqB,CAAtB,CADC,GAC0B,GAD1B,GAEF9B,CAAC,CAAC,KAAK+B,UAAL,EAAD,CAFC,GAEqB,GAFrB,GAGF/B,CAAC,CAAC,KAAKgC,WAAL,EAAD,CAHC,GAGsB,GAHtB,GAIFhC,CAAC,CAAC,KAAKiC,aAAL,EAAD,CAJC,GAIwB,GAJxB,GAKFjC,CAAC,CAAC,KAAKkC,aAAL,EAAD,CALC,GAKwB,GANrB,GAOH,IAPJ;AAQD,SAVD;;AAYAC,QAAAA,MAAM,CAACV,SAAP,CAAiBC,MAAjB,GACEzV,MAAM,CAACwV,SAAP,CAAiBC,MAAjB,GACEU,OAAO,CAACX,SAAR,CAAkBC,MAAlB,GAA2B,YAAW;AACpC,iBAAO,KAAKE,OAAL,EAAP;AACD,SAJL;AAKD;;AAED,UAAIzB,EAAJ,EACEkC,SADF,EAEEC,GAFF,EAGEC,MAHF,EAIEC,IAJF,EAKEC,GALF;;AAOA,eAASC,KAAT,CAAeC,MAAf,EAAuB;AACrBN,QAAAA,SAAS,CAAClW,SAAV,GAAsB,CAAtB;AACA,eAAOkW,SAAS,CAACrO,IAAV,CAAe2O,MAAf,IAAyB,MAAMA,MAAM,CAACvX,OAAP,CAAeiX,SAAf,EAA0B,UAASpT,CAAT,EAAY;AAC1E,cAAIvC,CAAC,GAAG8V,IAAI,CAACvT,CAAD,CAAZ;AACA,iBAAOmS,QAAQ,CAAC1U,CAAD,CAAR,GACHA,CADG,GAEH,QAAQ,CAAC,SAASuC,CAAC,CAAC2T,UAAF,CAAa,CAAb,EAAgBpV,QAAhB,CAAyB,EAAzB,CAAV,EAAwCoJ,KAAxC,CAA8C,CAAC,CAA/C,CAFZ;AAGD,SALqC,CAAN,GAK3B,GALE,GAKI,MAAM+L,MAAN,GAAe,GAL1B;AAMD;;AAGD,eAASE,GAAT,CAAahJ,GAAb,EAAkBiJ,MAAlB,EAA0B;AACxB,YAAIte,CAAJ;AAAA,YAEEwB,CAFF;AAAA,YAGEqE,CAHF;AAAA,YAIED,MAJF;AAAA,YAKE2Y,IAAI,GAAGT,GALT;AAAA,YAMEU,OANF;AAAA,YAOErd,KAAK,GAAGmd,MAAM,CAACjJ,GAAD,CAPhB;;AAQA,YAAGlU,KAAK,IAAIwb,QAAQ,CAACxb,KAAD,CAAjB,IACD0b,UAAU,CAAC1b,KAAK,CAAC+b,MAAP,CADZ,EAC4B;AAC1B/b,UAAAA,KAAK,GAAGA,KAAK,CAAC+b,MAAN,CAAa7H,GAAb,CAAR;AACD;;AACD,YAAGwH,UAAU,CAACoB,GAAD,CAAb,EAAoB;AAClB9c,UAAAA,KAAK,GAAG8c,GAAG,CAACvB,IAAJ,CAAS4B,MAAT,EAAiBjJ,GAAjB,EAAsBlU,KAAtB,CAAR;AACD;;AACD,YAAGyb,QAAQ,CAACzb,KAAD,CAAX,EAAoB;AAClB,iBAAO+c,KAAK,CAAC/c,KAAD,CAAZ;AACD,SAFD,MAGK,IAAG2b,QAAQ,CAAC3b,KAAD,CAAX,EAAoB;AACvB,iBAAOgc,QAAQ,CAAChc,KAAD,CAAR,GAAkBwc,MAAM,CAACxc,KAAD,CAAxB,GAAkC,MAAzC;AACD,SAFI,MAGA,IAAG4b,SAAS,CAAC5b,KAAD,CAAT,IAAoBA,KAAK,KAAK,IAAjC,EAAuC;AAC1C,iBAAOwc,MAAM,CAACxc,KAAD,CAAb;AACD,SAFI,MAGA;AACH,cAAG,CAACA,KAAJ,EAAW;AACT,mBAAO,MAAP;AACD;;AACD2c,UAAAA,GAAG,IAAIC,MAAP;AACAS,UAAAA,OAAO,GAAG,EAAV;;AACA,cAAGxL,KAAK,CAACC,OAAN,CAAc9R,KAAd,CAAH,EAAyB;AACvByE,YAAAA,MAAM,GAAGzE,KAAK,CAACyE,MAAf;;AACA,iBAAI5F,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG4F,MAAf,EAAuB5F,CAAC,IAAI,CAA5B,EAA+B;AAC7Bwe,cAAAA,OAAO,CAACxe,CAAD,CAAP,GAAaqe,GAAG,CAACre,CAAD,EAAImB,KAAJ,CAAH,IAAiB,MAA9B;AACD;;AACD0E,YAAAA,CAAC,GAAG2Y,OAAO,CAAC5Y,MAAR,KAAmB,CAAnB,GACA,IADA,GAEAkY,GAAG,GACD,QAAQA,GAAR,GAAcU,OAAO,CAACC,IAAR,CAAa,QAAQX,GAArB,CAAd,GAA0C,IAA1C,GAAiDS,IAAjD,GAAwD,GADvD,GAED,MAAMC,OAAO,CAACC,IAAR,CAAa,GAAb,CAAN,GAA0B,GAJhC;AAKAX,YAAAA,GAAG,GAAGS,IAAN;AACA,mBAAO1Y,CAAP;AACD;;AACD,cAAGoY,GAAG,IAAItB,QAAQ,CAACsB,GAAD,CAAlB,EAAyB;AACvBrY,YAAAA,MAAM,GAAGqY,GAAG,CAACrY,MAAb;;AACA,iBAAI5F,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG4F,MAAf,EAAuB5F,CAAC,IAAI,CAA5B,EAA+B;AAC7B,kBAAG4c,QAAQ,CAACqB,GAAG,CAACje,CAAD,CAAJ,CAAX,EAAqB;AACnBwB,gBAAAA,CAAC,GAAGyc,GAAG,CAACje,CAAD,CAAP;AACA6F,gBAAAA,CAAC,GAAGwY,GAAG,CAAC7c,CAAD,EAAIL,KAAJ,CAAP;;AACA,oBAAG0E,CAAH,EAAM;AACJ2Y,kBAAAA,OAAO,CAACjd,IAAR,CAAa2c,KAAK,CAAC1c,CAAD,CAAL,IAAYsc,GAAG,GAAG,IAAH,GAAU,GAAzB,IAAgCjY,CAA7C;AACD;AACF;AACF;AACF,WAXD,MAYK;AACH,iBAAIrE,CAAJ,IAASL,KAAT,EAAgB;AACd,kBAAGA,KAAK,CAACgC,cAAN,CAAqB3B,CAArB,CAAH,EAA4B;AAC1BqE,gBAAAA,CAAC,GAAGwY,GAAG,CAAC7c,CAAD,EAAIL,KAAJ,CAAP;;AACA,oBAAG0E,CAAH,EAAM;AACJ2Y,kBAAAA,OAAO,CAACjd,IAAR,CAAa2c,KAAK,CAAC1c,CAAD,CAAL,IAAYsc,GAAG,GAAG,IAAH,GAAU,GAAzB,IAAgCjY,CAA7C;AACD;AACF;AACF;AACF;;AACDA,UAAAA,CAAC,GAAG2Y,OAAO,CAAC5Y,MAAR,KAAmB,CAAnB,GACA,IADA,GAEAkY,GAAG,GACD,QAAQA,GAAR,GAAcU,OAAO,CAACC,IAAR,CAAa,QAAQX,GAArB,CAAd,GAA0C,IAA1C,GAAiDS,IAAjD,GAAwD,GADvD,GAED,MAAMC,OAAO,CAACC,IAAR,CAAa,GAAb,CAAN,GAA0B,GAJhC;AAKAX,UAAAA,GAAG,GAAGS,IAAN;AACA,iBAAO1Y,CAAP;AACD;AACF;;AAED,UAAG,CAACgX,UAAU,CAACpC,KAAI,CAACC,SAAN,CAAd,EAAgC;AAC9BmD,QAAAA,SAAS,GAAG,0HAAZ;AACAG,QAAAA,IAAI,GAAG;AACL,gBAAM,KADD;AAEL,gBAAM,KAFD;AAGL,gBAAM,KAHD;AAIL,gBAAM,KAJD;AAKL,gBAAM,KALD;AAML,eAAK,KANA;AAOL,gBAAM;AAPD,SAAP;;AASAvD,QAAAA,KAAI,CAACC,SAAL,GAAiB,UAASvZ,KAAT,EAAgBud,QAAhB,EAA0BC,KAA1B,EAAiC;AAChD,cAAI3e,CAAJ;AACA8d,UAAAA,GAAG,GAAG,EAAN;AACAC,UAAAA,MAAM,GAAG,EAAT;;AACA,cAAGjB,QAAQ,CAAC6B,KAAD,CAAX,EAAoB;AAClB,iBAAI3e,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG2e,KAAf,EAAsB3e,CAAC,IAAI,CAA3B,EAA8B;AAC5B+d,cAAAA,MAAM,IAAI,GAAV;AACD;AACF,WAJD,MAKK,IAAGnB,QAAQ,CAAC+B,KAAD,CAAX,EAAoB;AACvBZ,YAAAA,MAAM,GAAGY,KAAT;AACD;;AACDV,UAAAA,GAAG,GAAGS,QAAN;;AACA,cAAGA,QAAQ,IAAI,CAAC7B,UAAU,CAAC6B,QAAD,CAAvB,KACA,CAAC/B,QAAQ,CAAC+B,QAAD,CAAT,IACC,CAAC5B,QAAQ,CAAC4B,QAAQ,CAAC9Y,MAAV,CAFV,CAAH,EAEiC;AAC/B,kBAAM,IAAIgZ,KAAJ,CAAU,gBAAV,CAAN;AACD;;AACD,iBAAOP,GAAG,CAAC,EAAD,EAAK;AAAE,gBAAIld;AAAN,WAAL,CAAV;AACD,SAnBD;AAoBD;;AACD,UAAG,CAAC0b,UAAU,CAACpC,KAAI,CAACnJ,KAAN,CAAd,EAA4B;AAC1BqK,QAAAA,EAAE,GAAG,0GAAL;;AACAlB,QAAAA,KAAI,CAACnJ,KAAL,GAAa,UAAS1C,IAAT,EAAeiQ,OAAf,EAAwB;AACnC,cAAInZ,CAAJ;;AAEA,mBAASoZ,IAAT,CAAcR,MAAd,EAAsBjJ,GAAtB,EAA2B;AACzB,gBAAI7T,CAAJ;AAAA,gBAAOqE,CAAP;AAAA,gBAAU1E,KAAK,GAAGmd,MAAM,CAACjJ,GAAD,CAAxB;;AACA,gBAAGlU,KAAK,IAAIwb,QAAQ,CAACxb,KAAD,CAApB,EAA6B;AAC3B,mBAAIK,CAAJ,IAASL,KAAT,EAAgB;AACd,oBAAGA,KAAK,CAACgC,cAAN,CAAqB3B,CAArB,CAAH,EAA4B;AAC1BqE,kBAAAA,CAAC,GAAGiZ,IAAI,CAAC3d,KAAD,EAAQK,CAAR,CAAR;;AACA,sBAAGqE,CAAC,KAAKjD,SAAT,EAAoB;AAClBzB,oBAAAA,KAAK,CAACK,CAAD,CAAL,GAAWqE,CAAX;AACD,mBAFD,MAGK;AACH,2BAAO1E,KAAK,CAACK,CAAD,CAAZ;AACD;AACF;AACF;AACF;;AACD,mBAAOqd,OAAO,CAACnC,IAAR,CAAa4B,MAAb,EAAqBjJ,GAArB,EAA0BlU,KAA1B,CAAP;AACD;;AAEDyN,UAAAA,IAAI,GAAG+O,MAAM,CAAC/O,IAAD,CAAb;AACA+M,UAAAA,EAAE,CAAChU,SAAH,GAAe,CAAf;;AACA,cAAGgU,EAAE,CAACnM,IAAH,CAAQZ,IAAR,CAAH,EAAkB;AAChBA,YAAAA,IAAI,GAAGA,IAAI,CAAChI,OAAL,CAAa+U,EAAb,EAAiB,UAASlR,CAAT,EAAY;AAClC,qBAAO,QACL,CAAC,SAASA,CAAC,CAAC2T,UAAF,CAAa,CAAb,EAAgBpV,QAAhB,CAAyB,EAAzB,CAAV,EAAwCoJ,KAAxC,CAA8C,CAAC,CAA/C,CADF;AAED,aAHM,CAAP;AAID;;AACD,cAAG,gBACA5C,IADA,CACKZ,IAAI,CAAChI,OAAL,CAAa,qCAAb,EAAoD,GAApD,EACHA,OADG,CACK,kEADL,EACyE,GADzE,EAEHA,OAFG,CAEK,sBAFL,EAE6B,EAF7B,CADL,CAAH,EAG2C;AAEzC,gBAAImY,KAAK,GAAGC,IAAZ;AACAtZ,YAAAA,CAAC,GAAGqZ,KAAK,CAAC,MAAMnQ,IAAN,GAAa,GAAd,CAAT;AACA,mBAAOiO,UAAU,CAACgC,OAAD,CAAV,GACHC,IAAI,CAAC;AAAE,kBAAIpZ;AAAN,aAAD,EAAY,EAAZ,CADD,GAEHA,CAFJ;AAGD;;AACD,gBAAM,IAAIuZ,WAAJ,CAAgB,YAAhB,CAAN;AACD,SAzCD;AA0CD;AACF,KAnNA,GAAD;;AAoNA,WAAOxE,KAAP;AACD;;AACD,SAAOjP,QAAQ,CAACiP,IAAhB;AACD;;ACxND,IAAQhc,OAAR,GAA2BygB,KAA3B,CAAQzgB,OAAR;AAAA,IAAiBK,KAAjB,GAA2BogB,KAA3B,CAAiBpgB,KAAjB;;AAEAkU,KAAK,CAACC,OAAN,GAAgBD,KAAK,CAACC,OAAN,IAAiB,UAASlT,GAAT,EAAc;AAC7C,SAAOA,GAAG,YAAYiT,KAAtB;AACD,CAFD;;AAIAA,KAAK,CAACiK,SAAN,CAAgB3a,OAAhB,GAA0B0Q,KAAK,CAACiK,SAAN,CAAgB3a,OAAhB,IAA2B,UAAStB,CAAT,EAAY;AAC/D,OAAI,IAAIhB,CAAC,GAAG,CAAR,EAAW8F,GAAG,GAAG,KAAKF,MAA1B,EAAkC5F,CAAC,GAAG8F,GAAtC,EAA2C9F,CAAC,EAA5C,EAAgD;AAC9C,QAAG,KAAKA,CAAL,MAAYgB,CAAf,EAAkB;AAChB,aAAOhB,CAAP;AACD;AACF;;AACD,SAAO,CAAC,CAAR;AACD,CAPD;;AASA,IAAIwL,QAAQ,GAAGD,CAAC,CAACC,QAAF,GAAaD,CAAC,CAACC,QAAF,IAAc,EAA1C;AACA2T,IAAI,CAAC3T,QAAD,CAAJ;;AAEAA,QAAQ,CAAC4T,QAAT,GAAqB,YAAW;AAC9B,MAAIC,IAAJ;;AACA,MAAI;AACFA,IAAAA,IAAI,GAAG,IAAIC,cAAJ,CAAmB,4BAAnB,CAAP;AACD,GAFD,CAEE,OAAMle,CAAN,EAAS;AACTme,IAAAA,KAAK,CAAC,0BAAD,CAAL;AACD;;AACD,SAAO,UAASnb,IAAT,EAAe+R,IAAf,EAAqB;AAC1B,QAAGkJ,IAAH,EAAS;AACP,UAAGlJ,IAAI,IAAIA,IAAI,YAAYqJ,MAA3B,EAAmC;AACjCrJ,QAAAA,IAAI,GAAG3K,QAAQ,CAACiP,IAAT,CAAcC,SAAd,CAAwBvE,IAAxB,CAAP;AACD,OAFD,MAGK,IAAGA,IAAI,KAAKvT,SAAZ,EAAuB;AAC1BuT,QAAAA,IAAI,GAAG,WAAP;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,IAAZ,EAAkB;AACrBA,QAAAA,IAAI,GAAG,MAAP;AACD,OAFI,MAGA,IAAGA,IAAI,KAAK,KAAZ,EAAmB;AACtBA,QAAAA,IAAI,GAAG,OAAP;AACD;;AACD,UAAIsJ,QAAQ,GAAG,IAAIC,SAAJ,EAAf;AACAD,MAAAA,QAAQ,CAACrb,IAAT,GAAgBA,IAAhB;AACAqb,MAAAA,QAAQ,CAACtJ,IAAT,GAAgBA,IAAhB;AACAsJ,MAAAA,QAAQ,CAACL,QAAT;AACD;AACF,GAtBD;AAuBD,CA9BmB,EAApB;;AAgCA5T,QAAQ,CAAC4F,GAAT,GAAe,UAAS2F,CAAT,EAAY;AACzBxL,EAAAA,CAAC,CAACC,QAAF,CAAW4T,QAAX,CAAoBF,KAAK,CAACpgB,KAAN,CAAYE,GAAhC,EAAqC+X,CAArC;AACD,CAFD;;AAIAvL,QAAQ,CAAC+C,IAAT,GAAgB,UAASwI,CAAT,EAAY;AAC1BxL,EAAAA,CAAC,CAACC,QAAF,CAAW4T,QAAX,CAAoBF,KAAK,CAACpgB,KAAN,CAAYG,IAAhC,EAAsC8X,CAAtC;AACD,CAFD;;AAIAvL,QAAQ,CAACqB,KAAT,GAAiB,UAASkK,CAAT,EAAY;AAC3BxL,EAAAA,CAAC,CAACC,QAAF,CAAW4T,QAAX,CAAoBF,KAAK,CAACpgB,KAAN,CAAYI,KAAhC,EAAuC6X,CAAvC;AACD,CAFD;;AAIA,SAAS4I,WAAT,CAAqB3c,IAArB,EAA2B;AACzB,MAAGA,IAAI,YAAY2M,QAAnB,EAA6B;AAC3B,WAAOlR,OAAO,CAACG,SAAf;AACD;;AACD,MAAGoE,IAAI,YAAY4c,UAAnB,EAA+B;AAC7B,WAAOnhB,OAAO,CAACC,WAAf;AACD;;AACD,MAAGsE,IAAI,YAAYqM,WAAnB,EAAgC;AAC9B,WAAO5Q,OAAO,CAACE,YAAf;AACD;;AACD,SAAOF,OAAO,CAACI,OAAf;AACD;;AAED2M,QAAQ,CAACqU,eAAT,GAA2B,YAAW;AACpC,MAAIC,UAAU,GAAG3Z,GAAG,CAACC,OAArB;AACA,MAAI2J,IAAI,GAAG,EAAX,CAFoC;;AAIpC,OAAI,IAAI/P,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAI8f,UAAU,CAACC,QAA/B,EAAyC/f,CAAC,EAA1C,EAA8C;AAC5C,QAAIggB,QAAQ,GAAGF,UAAU,CAAC9c,IAAX,CAAgBhD,CAAhB,CAAf;AACA,QAAIoE,IAAI,GAAGub,WAAW,CAACK,QAAD,CAAtB;;AACA,QAAG5b,IAAI,KAAK3F,OAAO,CAACG,SAApB,EAA+B;AAC7BmR,MAAAA,IAAI,CAACxO,IAAL,CAAU;AACR2N,QAAAA,EAAE,EAAE8Q,QAAQ,CAAC9Q,EADL;AAERzL,QAAAA,IAAI,EAAEuc,QAAQ,CAACvc,IAFP;AAGRyB,QAAAA,KAAK,EAAE8a,QAAQ,CAAC9a,KAHR;AAIRkG,QAAAA,MAAM,EAAE4U,QAAQ,CAAC5U,MAJT;AAKRhH,QAAAA,IAAI,EAAJA;AALQ,OAAV;AAOD;AACF;;AACDmH,EAAAA,CAAC,CAACC,QAAF,CAAW4T,QAAX,CAAoBtgB,KAAK,CAACC,IAA1B,EAAgCgR,IAAhC;AACD,CAlBD;;AAoBA,SAASkQ,mBAAT,CAA6B/Q,EAA7B,EAAiC;AAC/B,OAAI,IAAIlP,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAImG,GAAG,CAACC,OAAJ,CAAY2Z,QAAhC,EAA0C/f,CAAC,EAA3C,EAA+C;AAC7C,QAAMggB,QAAQ,GAAG7Z,GAAG,CAACC,OAAJ,CAAYpD,IAAZ,CAAiBhD,CAAjB,CAAjB;;AACA,QAAGggB,QAAQ,CAAC9Q,EAAT,KAAgBA,EAAnB,EAAuB;AACrB,aAAO8Q,QAAP;AACD;AACF;;AACD,SAAO,IAAP;AACD;;AAEDxU,QAAQ,CAAC0U,OAAT,GAAmB,UAAShR,EAAT,EAAa;AAC9B3D,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,OAAjB;AACA,MAAIJ,WAAW,GAAGwT,mBAAmB,CAAC/Q,EAAD,CAArC;;AACA,MAAG,CAACzC,WAAJ,EAAiB;AACflB,IAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,uBAAjB;AACAtB,IAAAA,CAAC,CAACC,QAAF,CAAW4T,QAAX,CAAoBF,KAAK,CAACpgB,KAAN,CAAYM,MAAhC;AACA;AACD,GAP6B;;;AAS9B,MAAI0D,GAAG,GAAGwO,OAAK,CAAC7E,WAAD,CAAf;AACAlB,EAAAA,CAAC,CAACC,QAAF,CAAW4T,QAAX,CAAoBF,KAAK,CAACpgB,KAAN,CAAYK,MAAhC,EAAwC+gB,OAAO,CAACpd,GAAD,CAA/C,EAV8B;;AAY9ByI,EAAAA,CAAC,CAACC,QAAF,CAAW2U,OAAX;AACA5U,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,QAAjB;AACD,CAdD;;AAgBA,IAAIkD,IAAI,GAAG,EAAX;;AACAvE,QAAQ,CAACC,OAAT,GAAmB,UAASzK,CAAT,EAAY;AAC7B+O,EAAAA,IAAI,CAACxO,IAAL,CAAUP,CAAV;AACD,CAFD;;AAGAwK,QAAQ,CAAC2U,OAAT,GAAmB,YAAW;AAC5B,SAAMpQ,IAAI,CAACnK,MAAX,EAAmB;AACjBmK,IAAAA,IAAI,CAACnM,GAAL,GAAWmI,MAAX;AACD;AACF,CAJD;;AAMAP,QAAQ,UAAR,GAAkB,UAAS2K,IAAT,EAAe;AAC/B5K,EAAAA,CAAC,CAACC,QAAF,CAAWqB,KAAX,CAAiB,QAAjB;AACAtB,EAAAA,CAAC,CAACC,QAAF,CAAW4F,GAAX,CAAe+E,IAAf;AACA,MAAI9P,IAAI,GAAGE,IAAI,CAAC6Z,UAAL,EAAX;;AACA,MAAG,CAAC/Z,IAAJ,EAAU;AACR;AACD;;AACD,MAAI5C,IAAI,GAAG4C,IAAI,CAACkJ,MAAhB;;AACA,MAAG,CAAC,UAAUC,IAAV,CAAe/L,IAAf,CAAJ,EAA0B;AACxBA,IAAAA,IAAI,IAAI,OAAR;AACD;;AACD,MAAI+X,CAAC,GAAG,IAAIjV,IAAJ,CAAS9C,IAAT,CAAR;AACA+X,EAAAA,CAAC,CAAC/U,IAAF,CAAO,GAAP;AACA+U,EAAAA,CAAC,CAAC6E,QAAF,GAAa,OAAb;AACA7E,EAAAA,CAAC,CAAC8E,KAAF,CAAQnK,IAAR;AACAqF,EAAAA,CAAC,CAAC+E,KAAF;AACA,SAAO,IAAP;AACD,CAjBD;;"}